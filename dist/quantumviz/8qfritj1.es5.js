/*! Built with http://stenciljs.com */
quantumviz.loadBundle("8qfritj1",["exports","./chunk-0497819c.js","./chunk-47f4222f.js","./chunk-5698cc25.js","./chunk-40dfdfe8.js","./chunk-97a2d13e.js","./chunk-9fb8bfd0.js","./chunk-12ee72ee.js"],function(t,e,i,a,n,o,s,r){var h=window.quantumviz.h,d=function(){function t(){this.chartTitle="",this.responsive=!1,this.showLegend=!0,this.options=new o.Param,this.hiddenData=[],this.width="",this.height="",this.legendOffset=70,this._mapIndex={},this.LOG=new n.Logger(t),this._options={gridLineColor:"#ffee77",timeMode:"date"},this.uuid="chart-"+s.ChartLib.guid().split("-").join("")}return t.prototype.onData=function(t,e){e!==t&&(this.LOG.debug(["data"],t),this.drawChart())},t.prototype.changeScale=function(t,e){e!==t&&(this.LOG.debug(["options"],t),this.drawChart())},t.prototype.hideData=function(t,e){var a=this;if(e.length!==t.length){var n=i.GTSLib.cleanArray(t);Object.keys(this._mapIndex).forEach(function(t){a._chart.getDatasetMeta(a._mapIndex[t]).hidden=!!n.find(function(e){return e===t})}),this._chart.update()}},t.prototype.minBoundChange=function(t,e){this._chart.options.animation.duration=0,e!==t&&(this._chart.options.scales.xAxes[0].time.min=t,this.LOG.debug(["minBoundChange"],this._chart.options.scales.xAxes[0].time.min),this._chart.update())},t.prototype.maxBoundChange=function(t,e){this._chart.options.animation.duration=0,e!==t&&(this._chart.options.scales.xAxes[0].time.max=t,this.LOG.debug(["maxBoundChange"],this._chart.options.scales.xAxes[0].time.max),this._chart.update())},t.prototype.drawChart=function(){this._options.timeMode="date",this._options=s.ChartLib.mergeDeep(this._options,this.options);var t=this.el.shadowRoot.querySelector("#"+this.uuid),i=this.parseData(this.data),a=30*i.length+this.legendOffset,n=this.height||""!==this.height?Math.max(a,parseInt(this.height)):a;this.height=n+"",t.parentElement.style.height=n+"px",t.parentElement.style.width="100%";var o=this._options.gridLineColor,r=this,h={layout:{padding:{bottom:30*i.length}},legend:{display:this.showLegend},responsive:this.responsive,animation:{duration:0},tooltips:{mode:"x",position:"nearest",custom:function(t){t.opacity>0?r.pointHover.emit({x:t.dataPoints[0].x+15,y:this._eventPosition.y}):r.pointHover.emit({x:-100,y:this._eventPosition.y})},callbacks:{title:function(t){return t[0].xLabel||""},label:function(t,e){return e.datasets[t.datasetIndex].label+": "+e.datasets[t.datasetIndex].data[t.index].val}}},scales:{xAxes:[{drawTicks:!1,type:"linear",time:{},gridLines:{zeroLineColor:o,color:o,display:!1},ticks:{}}],yAxes:[{display:!1,drawTicks:!1,scaleLabel:{display:!1},afterFit:function(t){t.width=100},gridLines:{color:o,zeroLineColor:o},ticks:{fontColor:o,min:0,max:1,beginAtZero:!0,stepSize:1}}]}};this.LOG.debug(["options"],this._options),"timestamp"===this._options.timeMode?(h.scales.xAxes[0].time=void 0,h.scales.xAxes[0].type="linear",h.scales.xAxes[0].ticks={fontColor:o,min:this.timeMin,max:this.timeMax}):(h.scales.xAxes[0].time={min:this.timeMin,max:this.timeMax},h.scales.xAxes[0].ticks={fontColor:o},h.scales.xAxes[0].type="time"),this._chart=new e.Chart.Scatter(t,{data:{datasets:i},options:h})},t.prototype.parseData=function(t){var e,n=this;if(this.LOG.debug(["parseData"],t),e=this.data instanceof o.DataModel?t.data:t,this.LOG.debug(["parseData","dataList"],e),e&&0!==e.length){var r=[],h=0;if(!e)return;return(e=i.GTSLib.flatDeep(e)).forEach(function(t,e){if(i.GTSLib.isGtsToAnnotate(t)){var o=[],d=a.ColorLib.getColor(e),l=s.ChartLib.buildImage(1,30,d);t.v.forEach(function(t){o.push({x:t[0]/1e3,y:.5,val:t[t.length-1]})});var c=i.GTSLib.serializeGtsMetadata(t);n._mapIndex[c]=h,r.push({label:c,data:o,pointRadius:5,pointHoverRadius:5,pointHitRadius:5,pointStyle:l,borderColor:d,backgroundColor:a.ColorLib.transparentize(d,.5)}),h++}}),r}},t.prototype.componentDidLoad=function(){this.drawChart()},t.prototype.render=function(){return h("div",null,h("h1",null,this.chartTitle),h("div",{class:"chart-container",style:{position:"relative",width:this.width,height:this.height}},h("canvas",{id:this.uuid,width:this.width,height:this.height})))},Object.defineProperty(t,"is",{get:function(){return"quantum-annotation"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"encapsulation",{get:function(){return"shadow"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"properties",{get:function(){return{chartTitle:{type:String,attr:"chart-title"},data:{type:"Any",attr:"data",watchCallbacks:["onData"]},el:{elementRef:!0},height:{type:String,attr:"height",mutable:!0},hiddenData:{type:"Any",attr:"hidden-data",watchCallbacks:["hideData"]},options:{type:"Any",attr:"options",watchCallbacks:["changeScale"]},responsive:{type:Boolean,attr:"responsive"},showLegend:{type:Boolean,attr:"show-legend"},timeMax:{type:Number,attr:"time-max",watchCallbacks:["maxBoundChange"]},timeMin:{type:Number,attr:"time-min",watchCallbacks:["minBoundChange"]},width:{type:String,attr:"width",mutable:!0}}},enumerable:!0,configurable:!0}),Object.defineProperty(t,"events",{get:function(){return[{name:"pointHover",method:"pointHover",bubbles:!0,cancelable:!0,composed:!0}]},enumerable:!0,configurable:!0}),Object.defineProperty(t,"style",{get:function(){return":host .chart-container{width:var(--quantum-chart-width,100%);height:var(--quantum-chart-height,100%);position:relative}"},enumerable:!0,configurable:!0}),t}();t.QuantumAnnotation=d,Object.defineProperty(t,"__esModule",{value:!0})});