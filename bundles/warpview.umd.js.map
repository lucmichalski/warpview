{"version":3,"file":"warpview.umd.js","sources":["../../../node_modules/tslib/tslib.es6.js","../../../projects/warpview-ng/src/lib/model/dataModel.ts","../../../projects/warpview-ng/src/lib/utils/logger.ts","../../../projects/warpview-ng/src/lib/utils/gts.lib.ts","../../../projects/warpview-ng/src/lib/model/chartBounds.ts","../../../projects/warpview-ng/src/lib/utils/color-lib.ts","../../../projects/warpview-ng/src/lib/utils/chart-lib.ts","../../../projects/warpview-ng/src/lib/model/param.ts","../../../projects/warpview-ng/src/lib/services/resize.service.ts","../../../projects/warpview-ng/src/lib/elements/warp-view-component.ts","../../../projects/warpview-ng/src/lib/utils/timsort.ts","../../../projects/warpview-ng/src/lib/elements/warp-view-chart/warp-view-chart.component.ts","../../../projects/warpview-ng/src/lib/services/http-error-handler.service.ts","../../../projects/warpview-ng/src/lib/services/warp10.service.ts","../../../projects/warpview-ng/src/lib/elements/warp-view-tile/warp-view-tile.component.ts","../../../projects/warpview-ng/src/lib/elements/warp-view-spinner/warp-view-spinner.component.ts","../../../projects/warpview-ng/src/lib/elements/warp-view-toggle/warp-view-toggle.component.ts","../../../projects/warpview-ng/src/lib/elements/warp-view-bar/warp-view-bar.component.ts","../../../projects/warpview-ng/src/lib/elements/warp-view-bubble/warp-view-bubble.component.ts","../../../projects/warpview-ng/src/lib/elements/warp-view-datagrid/warp-view-datagrid.component.ts","../../../projects/warpview-ng/src/lib/elements/warp-view-datagrid/warp-view-paginable/warp-view-paginable.component.ts","../../../projects/warpview-ng/src/lib/elements/warp-view-display/warp-view-display.component.ts","../../../projects/warpview-ng/src/lib/elements/warp-view-drill-down/warp-view-drill-down.component.ts","../../../projects/warpview-ng/src/lib/elements/warp-view-drill-down/model/datum.ts","../../../projects/warpview-ng/src/lib/elements/warp-view-drill-down/calendar-heatmap/calendar-heatmap.component.ts","../../../projects/warpview-ng/src/lib/elements/warp-view-gts-popup/warp-view-gts-popup.component.ts","../../../projects/warpview-ng/src/lib/elements/warp-view-modal/warp-view-modal.component.ts","../../../projects/warpview-ng/src/lib/elements/warp-view-gts-tree/warp-view-gts-tree.component.ts","../../../projects/warpview-ng/src/lib/elements/warp-view-gts-tree/warp-view-tree-view/warp-view-tree-view.component.ts","../../../projects/warpview-ng/src/lib/model/GTS.ts","../../../projects/warpview-ng/src/lib/elements/warp-view-gts-tree/warp-view-chip/warp-view-chip.component.ts","../../../projects/warpview-ng/src/lib/elements/warp-view-image/warp-view-image.component.ts","../../../projects/warpview-ng/src/lib/utils/map-lib.ts","../../../projects/warpview-ng/src/lib/elements/warp-view-map/warp-view-map.component.ts","../../../projects/warpview-ng/src/lib/elements/warp-view-map/warp-view-heatmap-sliders/warp-view-heatmap-sliders.component.ts","../../../projects/warpview-ng/src/lib/elements/warp-view-pie/warp-view-pie.component.ts","../../../projects/warpview-ng/src/lib/elements/warp-view-gauge/warp-view-gauge.component.ts","../../../projects/warpview-ng/src/lib/elements/warp-view-annotation/warp-view-annotation.component.ts","../../../projects/warpview-ng/src/lib/elements/warp-view-polar/warp-view-polar.component.ts","../../../projects/warpview-ng/src/lib/elements/warp-view-radar/warp-view-radar.component.ts","../../../projects/warpview-ng/src/lib/elements/warp-view-plot/warp-view-plot.component.ts","../../../projects/warpview-ng/src/lib/elements/warp-view-resize/warp-view-resize.component.ts","../../../projects/warpview-ng/src/lib/elements/warp-view-slider/warp-view-slider.component.ts","../../../projects/warpview-ng/src/lib/elements/warp-view-range-slider/warp-view-range-slider.component.ts","../../../projects/warpview-ng/src/lib/elements/warp-view-spectrum/warp-view-spectrum.component.ts","../../../projects/warpview-ng/src/lib/plotly/plotly.component.ts","../../../projects/warpview-ng/src/lib/elements/warp-view-box/warp-view-box.component.ts","../../../projects/warpview-ng/src/lib/elements/warp-view-3d-line/warp-view-3d-line.component.ts","../../../projects/warpview-ng/src/lib/elements/warp-view-globe/warp-view-globe.component.ts","../../../projects/warpview-ng/src/lib/elements/warp-view-event-drop/warp-view-event-drop.component.ts","../../../projects/warpview-ng/src/lib/elements/warp-view-result-tile/warp-view-result-tile.component.ts","../../../projects/warpview-ng/src/lib/warp-view-angular.module.ts","../../../projects/warpview-ng/public-api.ts","../../../projects/warpview-ng/warpview.ts"],"sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","/*\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */\n\nimport {Param} from './param';\n\nexport class DataModel {\n  data: any[] | string;\n  params?: Param[];\n  globalParams?: Param;\n  bounds?: {\n    xmin?: number,\n    xmax?: number,\n    ymin?: number,\n    ymax?: number\n  };\n}\n","/*\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */\n\n/* tslint:disable:no-console */\n\nexport class Logger {\n\n  className: string;\n  isDebug = false;\n\n  constructor(className: any, isDebug: boolean = false) {\n    this.className = className.name;\n    this.isDebug = isDebug;\n  }\n\n  setDebug(debug: boolean) {\n    this.isDebug = debug;\n  }\n\n  log(level: LEVEL, methods: any[], args: any[]) {\n    let logChain = [];\n    logChain.push(`[${new Date().toISOString()} - [${this.className}] ${methods.join(' - ')}`);\n    logChain = logChain.concat(args);\n    switch (level) {\n      case LEVEL.DEBUG: {\n        if (this.isDebug) {\n          console.debug(...logChain);\n        }\n        break;\n      }\n      case LEVEL.ERROR: {\n        console.error(...logChain);\n        break;\n      }\n      case LEVEL.INFO: {\n        console.log(...logChain);\n        break;\n      }\n      case LEVEL.WARN: {\n        console.warn(...logChain);\n        break;\n      }\n      default: {\n        if (this.isDebug) {\n          console.log(...logChain);\n        }\n      }\n    }\n  }\n\n  debug(methods: any[], ...args: any[]) {\n    this.log(LEVEL.DEBUG, methods, args);\n  }\n\n  error(methods: any[], ...args: any[]) {\n    this.log(LEVEL.ERROR, methods, args);\n  }\n\n  warn(methods: any[], ...args: any[]) {\n    this.log(LEVEL.WARN, methods, args);\n  }\n\n  info(methods: any[], ...args: any[]) {\n    this.log(LEVEL.INFO, methods, args);\n  }\n}\n\nexport enum LEVEL {\n  DEBUG, ERROR, WARN, INFO\n}\n","/*\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */\n\nimport {DataModel} from '../model/dataModel';\nimport {GTS} from '../model/GTS';\nimport {Logger} from './logger';\nimport moment from 'moment-timezone';\n\n// @dynamic\nexport class GTSLib {\n  private static LOG: Logger = new Logger(GTSLib);\n\n  static cleanArray(actual: any[]) {\n    return actual.filter((i) => !!i);\n  }\n\n  static unique(arr) {\n    const u = {};\n    const a = [];\n    for (let i = 0, l = arr.length; i < l; ++i) {\n      if (!u.hasOwnProperty(arr[i])) {\n        a.push(arr[i]);\n        u[arr[i]] = 1;\n      }\n    }\n    return a;\n  }\n\n  static isArray(value) {\n    return value && typeof value === 'object' && value instanceof Array && typeof value.length === 'number'\n      && typeof value.splice === 'function' && !(value.propertyIsEnumerable('length'));\n  }\n\n  static formatElapsedTime(elapsed: number) {\n    if (elapsed < 1000) {\n      return elapsed.toFixed(3) + ' ns';\n    }\n    if (elapsed < 1000000) {\n      return (elapsed / 1000).toFixed(3) + ' μs';\n    }\n    if (elapsed < 1000000000) {\n      return (elapsed / 1000000).toFixed(3) + ' ms';\n    }\n    if (elapsed < 1000000000000) {\n      return (elapsed / 1000000000).toFixed(3) + ' s ';\n    }\n    // Max exec time for nice output: 999.999 minutes (should be OK, timeout should happen before that).\n    return (elapsed / 60000000000).toFixed(3) + ' m ';\n  }\n\n  static isValidResponse(data) {\n    let response;\n    try {\n      response = JSON.parse(data);\n    } catch (e) {\n      this.LOG.error(['isValidResponse'], 'Response non JSON compliant', data);\n      return false;\n    }\n    if (!GTSLib.isArray(response)) {\n      this.LOG.error(['isValidResponse'], 'Response isn\\'t an Array', response);\n      return false;\n    }\n    return true;\n  }\n\n  static isEmbeddedImage(item) {\n    return !(typeof item !== 'string' || !/^data:image/.test(item));\n  }\n\n  static isEmbeddedImageObject(item) {\n    return !((item === null) || (item.image === null) ||\n      (item.caption === null) || !GTSLib.isEmbeddedImage(item.image));\n  }\n\n  static isPositionArray(item) {\n    if (!item || !item.positions) {\n      return false;\n    }\n    if (GTSLib.isPositionsArrayWithValues(item) || GTSLib.isPositionsArrayWithTwoValues(item)) {\n      return true;\n    }\n    (item.positions || []).forEach(p => {\n      if (p.length < 2 || p.length > 3) {\n        return false;\n      }\n      for (const j in p) {\n        if (typeof p[j] !== 'number') {\n          return false;\n        }\n      }\n    });\n    return true;\n  }\n\n  static isPositionsArrayWithValues(item) {\n    if ((item === null) || (item.positions === null)) {\n      return false;\n    }\n    (item.positions || []).forEach(p => {\n      if (p.length !== 3) {\n        return false;\n      }\n      for (const j in p) {\n        if (typeof p[j] !== 'number') {\n          return false;\n        }\n      }\n    });\n    return true;\n  }\n\n  static isPositionsArrayWithTwoValues(item) {\n    if ((item === null) || (item.positions === null)) {\n      return false;\n    }\n    (item.positions || []).forEach(p => {\n      if (p.length !== 4) {\n        return false;\n      }\n      for (const j in p) {\n        if (typeof p[j] !== 'number') {\n          return false;\n        }\n      }\n    });\n    return true;\n  }\n\n  static gtsFromJSON(json, id) {\n    return {gts: {c: json.c, l: json.l, a: json.a, v: json.v, id}};\n  }\n\n  static gtsFromJSONList(jsonList, prefixId) {\n    const gtsList = [];\n    let id;\n    (jsonList || []).forEach((item, i) => {\n      let gts = item;\n      if (item.gts) {\n        gts = item.gts;\n      }\n      if ((prefixId !== undefined) && (prefixId !== '')) {\n        id = prefixId + '-' + i;\n      } else {\n        id = i;\n      }\n      if (GTSLib.isArray(gts)) {\n        gtsList.push(GTSLib.gtsFromJSONList(gts, id));\n      }\n      if (GTSLib.isGts(gts)) {\n        gtsList.push(GTSLib.gtsFromJSON(gts, id));\n      }\n      if (GTSLib.isEmbeddedImage(gts)) {\n        gtsList.push({image: gts, caption: 'Image', id});\n      }\n      if (GTSLib.isEmbeddedImageObject(gts)) {\n        gtsList.push({image: gts.image, caption: gts.caption, id});\n      }\n    });\n    return {\n      content: gtsList || [],\n    };\n  }\n\n  static flatDeep(arr1: any[]): any[] {\n    if (!GTSLib.isArray(arr1)) {\n      arr1 = [arr1];\n    }\n    return arr1.reduce((acc, val) => Array.isArray(val) ? acc.concat(GTSLib.flatDeep(val)) : acc.concat(val), []);\n  }\n\n  static flattenGtsIdArray(a: any[], r: number): { res: any[], r: number } {\n    const res = [];\n    if (GTSLib.isGts(a)) {\n      a = [a];\n    }\n    (a || []).forEach(d => {\n      if (GTSLib.isArray(d)) {\n        const walk = GTSLib.flattenGtsIdArray(d, r);\n        res.push(walk.res);\n        r = walk.r;\n      } else if (d && d.v) {\n        d.id = r;\n        res.push(d);\n        r++;\n      }\n    });\n    return {res, r};\n  }\n\n  static sanitizeNames(input: string): string {\n    return (input || '').replace(/{/g, '&#123;')\n      .replace(/}/g, '&#125;')\n      .replace(/,/g, '&#44;')\n      .replace(/>/g, '&#62;')\n      .replace(/</g, '&#60;')\n      .replace(/\"/g, '&#34;')\n      .replace(/'/g, '&#39;');\n  }\n\n  static serializeGtsMetadata(gts) {\n    const serializedLabels = [];\n    const serializedAttributes = [];\n    if (gts.l) {\n      Object.keys(gts.l).forEach((key) => {\n        serializedLabels.push(this.sanitizeNames(key + '=' + gts.l[key]));\n      });\n    }\n    if (gts.a) {\n      Object.keys(gts.a).forEach((key) => {\n        serializedAttributes.push(this.sanitizeNames(key + '=' + gts.a[key]));\n      });\n    }\n    // tslint:disable-next-line:max-line-length\n    return `${this.sanitizeNames(gts.c)}{${serializedLabels.join(',')}${serializedAttributes.length > 0 ? ',' : ''}${serializedAttributes.join(',')}}`;\n  }\n\n  static isGts(item) {\n    return !!item && (item.c === '' || !!item.c) && !!item.v && GTSLib.isArray(item.v);\n  }\n\n  static isGtsToPlot(gts) {\n    if (!GTSLib.isGts(gts) || gts.v.length === 0) {\n      return false;\n    }\n    // We look at the first non-null value, if it's a String or Boolean it's an annotation GTS,\n    // if it's a number it's a GTS to plot\n    return (gts.v || []).some(v => {\n      // noinspection JSPotentiallyInvalidConstructorUsage\n      return typeof v[v.length - 1] === 'number' || !!v[v.length - 1].constructor.prototype.toFixed;\n    });\n  }\n\n  static isGtsToPlotOnMap(gts) {\n    if (!GTSLib.isGts(gts) || gts.v.length === 0) {\n      return false;\n    }\n    // We look at the first non-null value, if it's a String or Boolean it's an annotation GTS,\n    // if it's a number it's a GTS to plot\n    return (gts.v || []).some(v => {\n      return v.length >= 3;\n    });\n  }\n\n  static isSingletonGTS(gts) {\n    if (!GTSLib.isGts(gts) || gts.v.length === 0) {\n      return false;\n    }\n    return (gts.v || []).length === 1;\n  }\n\n  static isGtsToAnnotate(gts) {\n    if (!GTSLib.isGts(gts) || gts.v.length === 0) {\n      return false;\n    }\n    // We look at the first non-null value, if it's a String or Boolean it's an annotation GTS,\n    // if it's a number it's a GTS to plot\n    return (gts.v || []).some(v => {\n      if (v[v.length - 1] !== null) {\n        // noinspection JSPotentiallyInvalidConstructorUsage\n        return typeof (v[v.length - 1]) !== 'number' &&\n          (!!v[v.length - 1].constructor && v[v.length - 1].constructor.name !== 'Big') &&\n          v[v.length - 1].constructor.prototype.toFixed === undefined;\n      }\n    });\n  }\n\n  static gtsSort(gts) {\n    if (gts.isSorted) {\n      return;\n    }\n    gts.v = gts.v.sort((a, b) => a[0] - b[0]);\n    gts.isSorted = true;\n  }\n\n  static getData(data: any): DataModel {\n    if (typeof data === 'string') {\n      return GTSLib.getData(JSON.parse(data as string));\n    } else if (data && data.hasOwnProperty('data')) {\n      if (!GTSLib.isArray(data.data)) {\n        data.data = [data.data];\n      }\n      return data as DataModel;\n    } else if (GTSLib.isArray(data) && data.length > 0 && data[0].data) {\n      return data[0] as DataModel;\n    } else if (GTSLib.isArray(data)) {\n      return {data: data as GTS[]} as DataModel;\n    }\n    return new DataModel();\n  }\n\n  static getDivider(timeUnit: string): number {\n    let timestampDivider = 1000; // default for µs timeunit\n    if (timeUnit === 'ms') {\n      timestampDivider = 1;\n    }\n    if (timeUnit === 'ns') {\n      timestampDivider = 1000000;\n    }\n    return timestampDivider;\n  }\n\n  static formatLabel = (data: string): string => {\n    const serializedGTS = data.split('{');\n    let display = `<span class=\"gtsInfo\"><span class='gts-classname'>${serializedGTS[0]}</span>`;\n    if (serializedGTS.length > 1) {\n      display += `<span class='gts-separator'>{</span>`;\n      const labels = serializedGTS[1].substr(0, serializedGTS[1].length - 1).split(',');\n      if (labels.length > 0) {\n        labels.forEach((l, i) => {\n          const label = l.split('=');\n          if (l.length > 1) {\n            display += `<span><span class='gts-labelname'>${label[0]}</span>\n<span class='gts-separator'>=</span><span class='gts-labelvalue'>${label[1]}</span>`;\n            if (i !== labels.length - 1) {\n              display += `<span>, </span>`;\n            }\n          }\n        });\n      }\n      display += `<span class='gts-separator'>}</span>`;\n    }\n    if (serializedGTS.length > 2) {\n      display += `<span class='gts-separator'>{</span>`;\n      const labels = serializedGTS[2].substr(0, serializedGTS[2].length - 1).split(',');\n      if (labels.length > 0) {\n        labels.forEach((l, i) => {\n          const label = l.split('=');\n          if (l.length > 1) {\n            display += `<span><span class='gts-attrname'>${label[0]}</span>\n<span class='gts-separator'>=</span><span class='gts-attrvalue'>${label[1]}</span>`;\n            if (i !== labels.length - 1) {\n              display += `<span>, </span>`;\n            }\n          }\n        });\n      }\n      display += `<span class='gts-separator'>}</span>`;\n    }\n    display += '</span>';\n    return display;\n  }\n\n  static toISOString(timestamp: number, divider: number, timeZone: string) {\n    if(timeZone !== 'UTC') {\n      return moment.tz(timestamp / divider, timeZone).format();\n    } else {\n      return moment(timestamp / divider).toISOString();\n    }\n  }\n}\n","/*\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */\n\nexport class ChartBounds {\n  tsmin = 0;\n  tsmax = 0;\n  msmin = '';\n  msmax = '';\n  marginLeft = 0;\n}\n","/*\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */\n// @dynamic\nexport class ColorLib {\n  static color = {\n    COHESIVE: [\n      '#F2D354',\n      '#E4612F',\n      '#D32C2E',\n      '#6D2627',\n      '#6C7F55',\n      '#934FC6',\n      '#F07A5D',\n      '#ED8371',\n      '#94E751',\n      '#C457F7',\n      '#973AF7',\n      '#B6FF7A',\n      '#C7FFD5',\n      '#90E4D0',\n      '#E09234',\n      '#D2FF91',\n      '#17B201'\n    ],\n    COHESIVE_2: [\n      '#6F694E',\n      '#65D0B2',\n      '#D8F546',\n      '#FF724B',\n      '#D6523E',\n      '#F9F470',\n      '#F4BC78',\n      '#B1D637',\n      '#FFCFC8',\n      '#56CDAB',\n      '#CFDD22',\n      '#B3F5D2',\n      '#97DB29',\n      '#9DC5EE',\n      '#CFC0F5',\n      '#EDEA29',\n      '#5EC027',\n      '#386C94'\n    ],\n    BELIZE: [\n      '#5899DA',\n      '#E8743B',\n      '#19A979',\n      '#ED4A7B',\n      '#945ECF',\n      '#13A4B4',\n      '#525DF4',\n      '#BF399E',\n      '#6C8893',\n      '#EE6868',\n      '#2F6497'\n    ],\n    VIRIDIS: [\n      '#440154',\n      '#481f70',\n      '#443983',\n      '#3b528b',\n      '#31688e',\n      '#287c8e',\n      '#21918c',\n      '#20a486',\n      '#35b779',\n      '#5ec962',\n      '#90d743',\n      '#c8e020',\n    ],\n    MAGMA: [\n      '#000004',\n      '#100b2d',\n      '#2c115f',\n      '#51127c',\n      '#721f81',\n      '#932b80',\n      '#b73779',\n      '#d8456c',\n      '#f1605d',\n      '#fc8961',\n      '#feb078',\n      '#fed799',\n    ],\n    INFERNO: [\n      '#000004',\n      '#110a30',\n      '#320a5e',\n      '#57106e',\n      '#781c6d',\n      '#9a2865',\n      '#bc3754',\n      '#d84c3e',\n      '#ed6925',\n      '#f98e09',\n      '#fbb61a',\n      '#f4df53',\n    ],\n    PLASMA: [\n      '#0d0887',\n      '#3a049a',\n      '#5c01a6',\n      '#7e03a8',\n      '#9c179e',\n      '#b52f8c',\n      '#cc4778',\n      '#de5f65',\n      '#ed7953',\n      '#f89540',\n      '#fdb42f',\n      '#fbd524',\n    ],\n    YL_OR_RD: [\n      '#ffffcc',\n      '#ffeda0',\n      '#fed976',\n      '#feb24c',\n      '#fd8d3c',\n      '#fc4e2a',\n      '#e31a1c',\n      '#bd0026',\n      '#800026',\n    ],\n    YL_GN_BU: [\n      '#ffffd9',\n      '#edf8b1',\n      '#c7e9b4',\n      '#7fcdbb',\n      '#41b6c4',\n      '#1d91c0',\n      '#225ea8',\n      '#253494',\n      '#081d58',\n    ],\n    BU_GN: [\n      '#f7fcfd',\n      '#ebf7fa',\n      '#dcf2f2',\n      '#c8eae4',\n      '#aadfd2',\n      '#88d1bc',\n      '#68c2a3',\n      '#4eb485',\n      '#37a266',\n      '#228c49',\n      '#0d7635',\n      '#025f27',\n    ],\n    WARP10: [\n      '#ff9900',\n      '#004eff',\n      '#E53935',\n      '#7CB342',\n      '#F4511E',\n      '#039BE5',\n      '#D81B60',\n      '#C0CA33',\n      '#6D4C41',\n      '#8E24AA',\n      '#00ACC1',\n      '#FDD835',\n      '#5E35B1',\n      '#00897B',\n      '#FFB300',\n      '#3949AB',\n      '#43A047',\n      '#1E88E5',\n    ],\n    NINETEEN_EIGHTY_FOUR: ['#31C0F6', '#A500A5', '#FF7E27'],\n    ATLANTIS: ['#74D495', '#3F3FBA', '#FF4D9E'],\n    DO_ANDROIDS_DREAM: ['#8F8AF4', '#A51414', '#F4CF31'],\n    DELOREAN: ['#FD7A5D', '#5F1CF2', '#4CE09A'],\n    CTHULHU: ['#FDC44F', '#007C76', '#8983FF'],\n    ECTOPLASM: ['#DA6FF1', '#00717A', '#ACFF76'],\n    T_MAX_400_FILM: ['#F6F6F8', '#A4A8B6', '#545667']\n  };\n\n  static getColor(i: number, scheme: string) {\n    return ColorLib.color[scheme][i % ColorLib.color[scheme].length];\n  }\n\n  static getColorGradient(id: number, scheme: string) {\n    return [\n      [0, ColorLib.transparentize(ColorLib.getColor(id, scheme), 0)],\n      [1, ColorLib.transparentize(ColorLib.getColor(id, scheme), 0.7)]\n    ];\n  }\n\n  static getBlendedColorGradient(id: number, scheme: string, bg = '#000000') {\n    return [\n      [0, ColorLib.blend_colors(bg, ColorLib.getColor(id, scheme), 0)],\n      [1, ColorLib.blend_colors(bg, ColorLib.getColor(id, scheme), 1)]\n    ];\n  }\n\n  static getColorScale(scheme: string) {\n    return ColorLib.color[scheme].map((c, i) => [i, c]);\n  }\n\n  static hexToRgb(hex) {\n    const result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n    return result ? [\n      parseInt(result[1], 16),\n      parseInt(result[2], 16),\n      parseInt(result[3], 16)\n    ] : null;\n  }\n\n  static transparentize(color, alpha = 0.5): string {\n    return 'rgba(' + ColorLib.hexToRgb(color).concat(alpha).join(',') + ')';\n  }\n\n  static generateColors(num, scheme) {\n    const color = [];\n    for (let i = 0; i < num; i++) {\n      color.push(ColorLib.getColor(i, scheme));\n    }\n    return color;\n  }\n\n  static generateTransparentColors(num, scheme) {\n    const color = [];\n    for (let i = 0; i < num; i++) {\n      color.push(ColorLib.transparentize(ColorLib.getColor(i, scheme)));\n    }\n    return color;\n  }\n\n  static hsvGradientFromRgbColors(c1, c2, steps) {\n    const c1hsv = ColorLib.rgb2hsv(c1.r, c1.g, c1.b);\n    const c2hsv = ColorLib.rgb2hsv(c2.r, c2.g, c2.b);\n    c1.h = c1hsv[0];\n    c1.s = c1hsv[1];\n    c1.v = c1hsv[2];\n    c2.h = c2hsv[0];\n    c2.s = c2hsv[1];\n    c2.v = c2hsv[2];\n    const gradient = ColorLib.hsvGradient(c1, c2, steps);\n    for (const i in gradient) {\n      if (gradient[i]) {\n        gradient[i].rgb = ColorLib.hsv2rgb(gradient[i].h, gradient[i].s, gradient[i].v);\n        gradient[i].r = Math.floor(gradient[i].rgb[0]);\n        gradient[i].g = Math.floor(gradient[i].rgb[1]);\n        gradient[i].b = Math.floor(gradient[i].rgb[2]);\n      }\n    }\n    return gradient;\n  }\n\n  private static rgb2hsv(r: number, g: number, b: number) {\n    // Normalize\n    const normR = r / 255.0;\n    const normG = g / 255.0;\n    const normB = b / 255.0;\n    const M = Math.max(normR, normG, normB);\n    const m = Math.min(normR, normG, normB);\n    const d = M - m;\n    let h;\n    let s;\n    let v;\n    v = M;\n    if (d === 0) {\n      h = 0;\n      s = 0;\n    } else {\n      s = d / v;\n      switch (M) {\n        case normR:\n          h = ((normG - normB) + d * (normG < normB ? 6 : 0)) / 6 * d;\n          break;\n        case normG:\n          h = ((normB - normR) + d * 2) / 6 * d;\n          break;\n        case normB:\n          h = ((normR - normG) + d * 4) / 6 * d;\n          break;\n      }\n    }\n    return [h, s, v];\n  }\n\n  private static hsvGradient(c1: any, c2: any, steps: any) {\n    const gradient = new Array(steps);\n    // determine clockwise and counter-clockwise distance between hues\n    const distCCW = (c1.h >= c2.h) ? c1.h - c2.h : 1 + c1.h - c2.h;\n    const distCW = (c1.h >= c2.h) ? 1 + c2.h - c1.h : c2.h - c1.h;\n    // make gradient for this part\n    for (let i = 0; i < steps; i++) {\n      // interpolate h, s, b\n      let h = (distCW <= distCCW) ? c1.h + (distCW * i / (steps - 1)) : c1.h - (distCCW * i / (steps - 1));\n      if (h < 0) {\n        h = 1 + h;\n      }\n      if (h > 1) {\n        h = h - 1;\n      }\n      const s = (1 - i / (steps - 1)) * c1.s + i / (steps - 1) * c2.s;\n      const v = (1 - i / (steps - 1)) * c1.v + i / (steps - 1) * c2.v;\n      // add to gradient array\n      gradient[i] = {h, s, v};\n    }\n    return gradient;\n  }\n\n  private static hsv2rgb(h: any, s: any, v: any) {\n    let r;\n    let g;\n    let b;\n    const i = Math.floor(h * 6);\n    const f = h * 6 - i;\n    const p = v * (1 - s);\n    const q = v * (1 - f * s);\n    const t = v * (1 - (1 - f) * s);\n    switch (i % 6) {\n      case 0:\n        r = v;\n        g = t;\n        b = p;\n        break;\n      case 1:\n        r = q;\n        g = v;\n        b = p;\n        break;\n      case 2:\n        r = p;\n        g = v;\n        b = t;\n        break;\n      case 3:\n        r = p;\n        g = q;\n        b = v;\n        break;\n      case 4:\n        r = t;\n        g = p;\n        b = v;\n        break;\n      case 5:\n        r = v;\n        g = p;\n        b = q;\n        break;\n    }\n    return [r * 255, g * 255, b * 255];\n  }\n\n  static rgb2hex(r, g, b) {\n    function componentToHex(c) {\n      const hex = c.toString(16);\n      return hex.length === 1 ? '0' + hex : hex;\n    }\n\n    return '#' + componentToHex(r) + componentToHex(g) + componentToHex(b);\n  }\n\n  static blend_colors(color1, color2, percentage) {\n    // check input\n    color1 = color1 || '#000000';\n    color2 = color2 || '#ffffff';\n    percentage = percentage || 0.5;\n    // 1: validate input, make sure we have provided a valid hex\n    if (color1.length !== 4 && color1.length !== 7) {\n      throw new Error('colors must be provided as hexes');\n    }\n    if (color2.length !== 4 && color2.length !== 7) {\n      throw new Error('colors must be provided as hexes');\n    }\n    if (percentage > 1 || percentage < 0) {\n      throw new Error('percentage must be between 0 and 1');\n    }\n    // 2: check to see if we need to convert 3 char hex to 6 char hex, else slice off hash\n    //      the three character hex is just a representation of the 6 hex where each character is repeated\n    //      ie: #060 => #006600 (green)\n    if (color1.length === 4) {\n      color1 = color1[1] + color1[1] + color1[2] + color1[2] + color1[3] + color1[3];\n    } else {\n      color1 = color1.substring(1);\n    }\n    if (color2.length === 4) {\n      color2 = color2[1] + color2[1] + color2[2] + color2[2] + color2[3] + color2[3];\n    } else {\n      color2 = color2.substring(1);\n    }\n    console.log('valid: c1 => ' + color1 + ', c2 => ' + color2);\n    // 3: we have valid input, convert colors to rgb\n    color1 = [parseInt(color1[0] + color1[1], 16), parseInt(color1[2] + color1[3], 16), parseInt(color1[4] + color1[5], 16)];\n    color2 = [parseInt(color2[0] + color2[1], 16), parseInt(color2[2] + color2[3], 16), parseInt(color2[4] + color2[5], 16)];\n    console.log('hex -> rgba: c1 => [' + color1.join(', ') + '], c2 => [' + color2.join(', ') + ']');\n    // 4: blend\n    const color3 = [\n      (1 - percentage) * color1[0] + percentage * color2[0],\n      (1 - percentage) * color1[1] + percentage * color2[1],\n      (1 - percentage) * color1[2] + percentage * color2[2]\n    ];\n    const color3Str = '#' + ColorLib.int_to_hex(color3[0]) + ColorLib.int_to_hex(color3[1]) + ColorLib.int_to_hex(color3[2]);\n    console.log(color3Str);\n    // return hex\n    return color3Str;\n  }\n\n  /*\n      convert a Number to a two character hex string\n      must round, or we will end up with more digits than expected (2)\n      note: can also result in single digit, which will need to be padded with a 0 to the left\n      @param: num         => the number to conver to hex\n      @returns: string    => the hex representation of the provided number\n  */\n  static int_to_hex(num: number) {\n    let hex = Math.round(num).toString(16);\n    if (hex.length === 1) {\n      hex = '0' + hex;\n    }\n    return hex;\n  }\n}\n","/*\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */\n\n// @dynamic\nexport class ChartLib {\n\n  static DEFAULT_WIDTH = 640;\n  static DEFAULT_HEIGHT = 480;\n\n  static mergeDeep<T>(base: T, extended: any) {\n    const obj = {... base} as T;\n    for (const prop in extended || {}) {\n      // If property is an object, merge properties\n      if (Object.prototype.toString.call(extended[prop]) === '[object Object]') {\n        obj[prop] = ChartLib.mergeDeep<T>(obj[prop], extended[prop]);\n      } else {\n        obj[prop] = extended[prop];\n      }\n    }\n    return obj as T;\n  }\n}\n","/*\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */\nexport class Param {\n  scheme = 'WARP10';\n  bgColor?: string;\n  datasetColor?: string;\n  fontColor?: string;\n  borderColor?: string;\n  showLegend?: boolean;\n  responsive?: boolean;\n  horizontal = false;\n  stacked = false;\n  key?: string;\n  unit?: string;\n  type?: string;\n  showRangeSelector?: boolean;\n  autoRefresh?: number;\n  showControls = true;\n  showErrors = true;\n  showStatus = true;\n  showGTSTree?: boolean;\n  foldGTSTree?: boolean;\n  timeMode?: 'timestamp' | 'date' | 'custom' | 'duration';\n  showDots = false;\n  delta?: number;\n  timeUnit: 'us' | 'ms' | 'ns' = 'us';\n  minColor?: string;\n  maxColor?: string;\n  startColor?: string;\n  endColor?: string;\n  numColorSteps?: number;\n  split?: 'Y' | 'M' | 'D' | 'h' | 'm' | 's';\n  popupButtonValidateClass?: string;\n  popupButtonValidateLabel?: string;\n  timeZone = 'UTC';\n  properties?: any;\n  map?: {\n    tiles?: string[];\n    heatRadius?: number;\n    heatBlur?: number;\n    heatOpacity?: number;\n    heatControls?: boolean;\n    mapType?: string;\n    showTimeSlider?: boolean;\n    showTimeRange?: boolean;\n    timeSliderMin?: number;\n    timeSliderMax?: number;\n    timeSliderStep?: number;\n    timeSliderMode?: 'timestamp' | 'date' | 'custom';\n    timeStart?: number,\n    timeSpan?: number,\n    startLat?: number;\n    startLong?: number;\n    startZoom?: number;\n    timeSpanList?: any[],\n    animate?: boolean;\n  } = {\n    tiles: [],\n    showTimeSlider: false,\n    showTimeRange: false,\n    timeSliderMode: 'timestamp'\n  };\n  bounds: {\n    minDate?: number;\n    maxDate?: number;\n    yRanges?: [number, number];\n  } = {};\n  histo?: {\n    histnorm: 'percent' | 'probability' | 'density' | 'probability density';\n    histfunc: 'count' | 'sum' | 'avg' | 'min' | 'max';\n  };\n  maxValue: number;\n  isRefresh?: boolean;\n}\n","/*\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */\n\nimport { EventEmitter, Injectable } from '@angular/core';\n\nexport class Size {\n  constructor(public width: number, public height: number) {\n  }\n}\n\n\n@Injectable()\nexport class SizeService {\n  public sizeChanged$: EventEmitter<Size>;\n\n  constructor() {\n    this.sizeChanged$ = new EventEmitter();\n  }\n\n  public change(size: Size): void {\n    this.sizeChanged$.emit(size);\n  }\n}\n","/*\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */\n\nimport {ChartLib} from '../utils/chart-lib';\nimport {Param} from '../model/param';\nimport {Logger} from '../utils/logger';\nimport {DataModel} from '../model/dataModel';\nimport {GTS} from '../model/GTS';\nimport {GTSLib} from '../utils/gts.lib';\nimport {Directive, ElementRef, EventEmitter, Input, NgZone, Output, Renderer2, ViewChild} from '@angular/core';\nimport deepEqual from 'deep-equal';\nimport {Size, SizeService} from '../services/resize.service';\nimport {PlotlyComponent} from '../plotly/plotly.component';\nimport {Config} from 'plotly.js';\n\nexport type VisibilityState = 'unknown' | 'nothingPlottable' | 'plottablesAllHidden' | 'plottableShown';\n\n@Directive()\n// tslint:disable-next-line:directive-class-suffix\nexport abstract class WarpViewComponent {\n  @ViewChild('toolTip', {static: true}) toolTip: ElementRef;\n  @ViewChild('graph') graph: PlotlyComponent;\n  @ViewChild('chartContainer', {static: true}) chartContainer: ElementRef;\n\n  @Input('width') width = ChartLib.DEFAULT_WIDTH;\n  @Input('height') height = ChartLib.DEFAULT_HEIGHT;\n\n  @Input('hiddenData') set hiddenData(hiddenData: number[]) {\n    this._hiddenData = hiddenData;\n  }\n\n  get hiddenData(): number[] {\n    return this._hiddenData;\n  }\n\n  @Input('unit') set unit(unit: string) {\n    this._unit = unit;\n    this.update(undefined, false);\n  }\n\n  get unit() {\n    return this._unit;\n  }\n\n  @Input('debug') set debug(debug: boolean | string) {\n    if (typeof debug === 'string') {\n      debug = 'true' === debug;\n    }\n    this._debug = debug;\n    this.LOG.setDebug(debug);\n  }\n\n  get debug() {\n    return this._debug;\n  }\n\n  @Input('showLegend') set showLegend(showLegend: boolean | string) {\n    if (typeof showLegend === 'string') {\n      showLegend = 'true' === showLegend;\n    }\n    this._showLegend = showLegend;\n  }\n\n  get showLegend() {\n    return this._showLegend;\n  }\n\n  @Input('responsive') set responsive(responsive: boolean | string) {\n    if (typeof responsive === 'string') {\n      responsive = 'true' === responsive;\n    }\n    this._responsive = responsive;\n  }\n\n  get responsive() {\n    return this._responsive;\n  }\n\n  @Input('options') set options(options: Param | string) {\n    this.LOG.debug(['onOptions'], options);\n    if (typeof options === 'string') {\n      options = JSON.parse(options);\n    }\n    if (!deepEqual(options, this._options)) {\n      this.LOG.debug(['onOptions', 'changed'], options);\n      this._options = options as Param;\n      this.update(this._options, false);\n    }\n  }\n\n  @Input('data') set data(data: string | DataModel | GTS[]) {\n    this.LOG.debug(['onData'], data);\n    if (data) {\n      this._data = GTSLib.getData(data);\n      this.update(this._options, this._options.isRefresh);\n      this.LOG.debug(['onData'], this._data);\n    }\n  }\n\n  @Output('chartDraw') chartDraw = new EventEmitter<any>();\n\n  _options: Param = new Param();\n  protected LOG: Logger;\n  protected defOptions = ChartLib.mergeDeep(new Param(), {\n    dotsLimit: 1000,\n    heatControls: false,\n    timeMode: 'date',\n    showRangeSelector: true,\n    gridLineColor: '#8e8e8e',\n    showDots: false,\n    timeZone: 'UTC',\n    timeUnit: 'us',\n    showControls: true,\n    // bounds: {}\n  }) as Param;\n\n  protected _debug = false;\n  protected _showLegend = false;\n  protected _responsive = true;\n  protected _unit = '';\n  protected _data: DataModel;\n  protected _autoResize = true;\n  protected _hiddenData: number[] = [];\n  protected divider: number;\n\n  tooltipPosition: any = {top: '-10000px', left: '-1000px'};\n  loading = true;\n  noData = false;\n  layout: Partial<any> = {\n    margin: {\n      t: 10,\n      b: 25,\n      r: 10,\n      l: 10\n    }\n  };\n  plotlyConfig: Partial<Config> = {\n    responsive: true,\n    showAxisDragHandles: true,\n    scrollZoom: true,\n    doubleClick: 'reset+autosize',\n    showTips: true,\n    plotGlPixelRatio: 1,\n    staticPlot: false,\n    displaylogo: false,\n    modeBarButtonsToRemove: [\n      'lasso2d', 'select2d', 'toggleSpikelines', 'toggleHover', 'hoverClosest3d', 'autoScale2d',\n      'hoverClosestGeo', 'hoverClosestGl2d', 'hoverClosestPie', 'toggleHover',\n      'hoverClosestCartesian', 'hoverCompareCartesian'\n    ]\n  };\n  plotlyData: Partial<any>[];\n  private hideTooltipTimer: any;\n  private rect: any;\n\n  protected constructor(\n    public el: ElementRef,\n    public renderer: Renderer2,\n    public sizeService: SizeService,\n    public ngZone: NgZone\n  ) {\n    this.sizeService.sizeChanged$.subscribe((size: Size) => {\n      if ((el.nativeElement as HTMLElement).parentElement) {\n        const parentSize = (el.nativeElement as HTMLElement).parentElement.getBoundingClientRect();\n        if (this._responsive) {\n          this.height = parentSize.height;\n          this.width = parentSize.width;\n        }\n        if (!!this.graph && this._responsive && parentSize.height > 0) {\n          const layout = {\n            width: parentSize.width,\n            height: this._autoResize ? parentSize.height : this.layout.height\n          };\n          if (this.layout.width !== layout.width || this.layout.height !== layout.height) {\n            setTimeout(() => this.layout = {...this.layout, ...layout});\n            this.LOG.debug(['sizeChanged$'], this.layout.width, this.layout.height);\n            this.graph.resize(layout);\n          }\n        }\n      }\n    });\n  }\n\n  protected abstract update(options: Param, refresh: boolean): void;\n\n  protected abstract convert(data: DataModel): Partial<any>[];\n\n  protected legendFormatter(x, series, highlighted = -1): string {\n    const displayedCurves = [];\n    if (x === null) {\n      // This happens when there's no selection and {legend: 'always'} is set.\n      return `<br>\n      ${series.map(s => {\n        // FIXME :  if (!s.isVisible) return;\n        let labeledData = GTSLib.formatLabel(s.data.text || '') + ': ' + ((this._options.horizontal ? s.x : s.y) || s.r || '');\n        let color = s.data.line.color;\n        if (!!s.data.marker) {\n          if (GTSLib.isArray(s.data.marker.color)) {\n            color = s.data.marker.color[0];\n          } else {\n            color = s.data.marker.color;\n          }\n        }\n        if (s.curveNumber === highlighted) {\n          labeledData = `<i class=\"chip\"\n    style=\"background-color: ${color};border: 2px solid ${color};\"></i> ${labeledData}`;\n        }\n        return labeledData;\n      }).join('<br>')}`;\n    }\n\n    let html = '';\n    if (!!series[0]) {\n      x = series[0].x || series[0].theta;\n    }\n    html += `<b>${x}</b><br />`;\n    // put the highlighted one(s?) first, keep only visibles, keep only 50 first ones.\n    series = series.sort((sa, sb) => (sa.curveNumber === highlighted) ? -1 : 1);\n    series\n      // .filter(s => s.isVisible && s.yHTML)\n      .slice(0, 50)\n      .forEach((s, i) => {\n        if (displayedCurves.indexOf(s.curveNumber) <= -1) {\n          displayedCurves.push(s.curveNumber);\n          let value = series[0].data.orientation === 'h' ? s.x : s.y;\n          if (!value && value !== 0) {\n            value = s.r;\n          }\n          let labeledData = GTSLib.formatLabel(s.data.text || '') + ': ' + value;\n          if (s.curveNumber === highlighted) {\n            labeledData = `<b>${labeledData}</b>`;\n          }\n          let color = s.data.line ? s.data.line.color : '';\n          if (!!s.data.marker) {\n            if (GTSLib.isArray(s.data.marker.color)) {\n              color = s.data.marker.color[0];\n            } else {\n              color = s.data.marker.color;\n            }\n          }\n          html += `<i class=\"chip\" style=\"background-color: ${color};border: 2px solid ${color};\"></i>&nbsp;${labeledData}`;\n          if (i < series.length) {\n            html += '<br>';\n          }\n        }\n      });\n    return html;\n  }\n\n  protected initChart(el: ElementRef, resize = true): boolean {\n    this.noData = false;\n    const parentSize = (el.nativeElement as HTMLElement).parentElement.parentElement.getBoundingClientRect();\n    if (this._responsive) {\n      if (resize) {\n        if (\n          this._autoResize && (parentSize.height === 0 || this.height !== parentSize.height)\n          || parentSize.width === 0 || this.width !== parentSize.width) {\n          if (this._autoResize) {\n            this.height = parentSize.height;\n          }\n          this.width = parentSize.width;\n          setTimeout(() => this.initChart(el), 100);\n          return;\n        } else {\n          if (this._autoResize) {\n            this.height = parentSize.height;\n          }\n          this.width = parentSize.width;\n        }\n      }\n    }\n    this.LOG.debug(['initiChart', 'this._data'], this._data, this._options);\n    if (!this._data || !this._data.data || this._data.data.length === 0 || !this._options) {\n      this.loading = false;\n      this.LOG.debug(['initiChart', 'nodata']);\n      this.noData = true;\n      this.chartDraw.emit();\n      return false;\n    }\n    this._options = ChartLib.mergeDeep<Param>(this.defOptions, this._options || {}) as Param;\n    const dataModel = this._data;\n    this._options = ChartLib.mergeDeep<Param>(this._options || {} as Param, this._data.globalParams) as Param;\n    this._options.timeMode = this._options.timeMode || 'date';\n    this.loading = !this._options.isRefresh;\n    this.divider = GTSLib.getDivider(this._options.timeUnit);\n    this.plotlyData = this.convert(dataModel);\n    this.plotlyConfig.responsive = this._responsive;\n    this.layout.paper_bgcolor = 'rgba(0,0,0,0)';\n    this.layout.plot_bgcolor = 'rgba(0,0,0,0)';\n    if (!this._responsive) {\n      this.layout.width = this.width || ChartLib.DEFAULT_WIDTH;\n      this.layout.height = this.height || ChartLib.DEFAULT_HEIGHT;\n    } else {\n      this.layout.width = this.width || parentSize.width;\n      this.layout.height = this.height || parentSize.height;\n    }\n    this.layout.showLegend = !!this._options.showLegend;\n    this.LOG.debug(['initiChart', 'plotlyData'], this.plotlyData);\n    this.loading = false;\n    this.chartDraw.emit();\n    return !(!this.plotlyData || this.plotlyData.length === 0);\n  }\n\n  afterPlot(plotlyInstance?: any) {\n    this.LOG.debug(['afterPlot', 'plotlyInstance'], plotlyInstance);\n    this.loading = false;\n    this.rect = this.graph.getBoundingClientRect();\n    this.chartDraw.emit();\n  }\n\n  hideTooltip() {\n    if (!!this.hideTooltipTimer) {\n      clearTimeout(this.hideTooltipTimer);\n    }\n    this.hideTooltipTimer = setTimeout(() => {\n      this.toolTip.nativeElement.style.display = 'none';\n    }, 1000);\n  }\n\n  unhover(data?: any, point?: any) {\n    this.LOG.debug(['unhover'], data);\n    if (!!this.hideTooltipTimer) {\n      clearTimeout(this.hideTooltipTimer);\n    }\n  }\n\n  hover(data: any, point?: any) {\n    this.renderer.setStyle(this.toolTip.nativeElement, 'display', 'block');\n    if (!!this.hideTooltipTimer) {\n      clearTimeout(this.hideTooltipTimer);\n    }\n    let delta = Number.MAX_VALUE;\n    const curves = [];\n    if (!point) {\n      if (data.points[0] && data.points[0].data.orientation !== 'h') {\n        const y = (data.yvals || [''])[0];\n        data.points.forEach(p => {\n          curves.push(p.curveNumber);\n          const d = Math.abs((p.y || p.r) - y);\n          if (d < delta) {\n            delta = d;\n            point = p;\n          }\n        });\n      } else {\n        const x: number = (data.xvals || [''])[0];\n        data.points.forEach(p => {\n          curves.push(p.curveNumber);\n          const d = Math.abs((p.x || p.r) - x);\n          if (d < delta) {\n            delta = d;\n            point = p;\n          }\n        });\n      }\n    }\n    if (point && !!data.event) {\n      const content = this.legendFormatter(\n        this._options.horizontal ?\n          (data.yvals || [''])[0] :\n          (data.xvals || [''])[0]\n        , data.points, point.curveNumber);\n      let left = (data.event.offsetX + 20) + 'px';\n      if (data.event.offsetX > this.chartContainer.nativeElement.clientWidth / 2) {\n        left = Math.max(0, data.event.offsetX - this.toolTip.nativeElement.clientWidth - 20) + 'px';\n      }\n      const top = Math.min(\n        this.el.nativeElement.getBoundingClientRect().height - this.toolTip.nativeElement.getBoundingClientRect().height - 20,\n        data.event.y - 20 - this.el.nativeElement.getBoundingClientRect().top) + 'px';\n      this.moveTooltip(top, left, content);\n    }\n  }\n\n  getTooltipPosition() {\n    return {\n      top: this.tooltipPosition.top,\n      left: this.tooltipPosition.left,\n    };\n  }\n\n  private moveTooltip(top, left, content) {\n    this.tooltipPosition = {top, left};\n    this.renderer.setProperty(this.toolTip.nativeElement, 'innerHTML', content);\n    this.LOG.debug(['hover - moveTooltip'], new Date().toISOString());\n  }\n\n  relayout($event: any) {\n\n  }\n\n  protected getLabelColor(el: HTMLElement) {\n    return this.getCSSColor(el, '--warp-view-chart-label-color', '#8e8e8e').trim();\n  }\n\n  protected getGridColor(el: HTMLElement) {\n    return this.getCSSColor(el, '--warp-view-chart-grid-color', '#8e8e8e').trim();\n  }\n\n  protected getCSSColor(el: HTMLElement, property: string, defColor: string) {\n    const color = getComputedStyle(el).getPropertyValue(property).trim();\n    return color === '' ? defColor : color;\n  }\n}\n","/* tslint:disable:no-bitwise */\n\n/*\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */\n\nexport class Timsort {\n\n  /**\n   * Default minimum size of a run.\n   */\n  private static DEFAULT_MIN_MERGE = 32;\n\n  /**\n   * Minimum ordered subsequece required to do galloping.\n   */\n  private static DEFAULT_MIN_GALLOPING = 7;\n\n  /**\n   * Default tmp storage length. Can increase depending on the size of the\n   * smallest run to merge.\n   */\n  private static DEFAULT_TMP_STORAGE_LENGTH = 256;\n\n  /**\n   * Pre-computed powers of 10 for efficient lexicographic comparison of\n   * small integers.\n   */\n  private static POWERS_OF_TEN = [1e0, 1e1, 1e2, 1e3, 1e4, 1e5, 1e6, 1e7, 1e8, 1e9];\n\n  private readonly array = null;\n  private readonly compare = null;\n  private minGallop = Timsort.DEFAULT_MIN_GALLOPING;\n  private readonly length = 0;\n  private readonly tmpStorageLength = Timsort.DEFAULT_TMP_STORAGE_LENGTH;\n  private readonly stackLength: number = 0;\n  private readonly runStart = null;\n  private readonly runLength = null;\n  private stackSize = 0;\n  private readonly tmp: any;\n\n  constructor(array, compare) {\n    this.array = array;\n    this.compare = compare;\n    this.length = array.length;\n    if (this.length < 2 * Timsort.DEFAULT_TMP_STORAGE_LENGTH) {\n      this.tmpStorageLength = this.length >>> 1;\n    }\n    this.tmp = new Array(this.tmpStorageLength);\n    this.stackLength = (this.length < 120 ? 5 : this.length < 1542 ? 10 : this.length < 119151 ? 19 : 40);\n    this.runStart = new Array(this.stackLength);\n    this.runLength = new Array(this.stackLength);\n  }\n\n  private static log10(x) {\n    if (x < 1e5) {\n      if (x < 1e2) {\n        return x < 1e1 ? 0 : 1;\n      }\n      if (x < 1e4) {\n        return x < 1e3 ? 2 : 3;\n      }\n      return 4;\n    }\n    if (x < 1e7) {\n      return x < 1e6 ? 5 : 6;\n    }\n    if (x < 1e9) {\n      return x < 1e8 ? 7 : 8;\n    }\n    return 9;\n  }\n\n  private static minRunLength(n) {\n    let r = 0;\n    while (n >= Timsort.DEFAULT_MIN_MERGE) {\n      r |= (n & 1);\n      n >>= 1;\n    }\n    return n + r;\n  }\n\n  private static makeAscendingRun(array, lo, hi, compare) {\n    let runHi = lo + 1;\n    if (runHi === hi) {\n      return 1;\n    }\n    // Descending\n    if (compare(array[runHi++], array[lo]) < 0) {\n      while (runHi < hi && compare(array[runHi], array[runHi - 1]) < 0) {\n        runHi++;\n      }\n      Timsort.reverseRun(array, lo, runHi);\n      // Ascending\n    } else {\n      while (runHi < hi && compare(array[runHi], array[runHi - 1]) >= 0) {\n        runHi++;\n      }\n    }\n    return runHi - lo;\n  }\n\n  private static reverseRun(array, lo, hi) {\n    hi--;\n    while (lo < hi) {\n      const t = array[lo];\n      array[lo++] = array[hi];\n      array[hi--] = t;\n    }\n  }\n\n  private static binaryInsertionSort(array, lo, hi, start, compare) {\n    if (start === lo) {\n      start++;\n    }\n    for (; start < hi; start++) {\n      const pivot = array[start];\n      // Ranges of the array where pivot belongs\n      let left = lo;\n      let right = start;\n      while (left < right) {\n        const mid = (left + right) >>> 1;\n        if (compare(pivot, array[mid]) < 0) {\n          right = mid;\n        } else {\n          left = mid + 1;\n        }\n      }\n      let n = start - left;\n      // Switch is just an optimization for small arrays\n      switch (n) {\n        case 3:\n          array[left + 3] = array[left + 2];\n        /* falls through */\n        case 2:\n          array[left + 2] = array[left + 1];\n        /* falls through */\n        case 1:\n          array[left + 1] = array[left];\n          break;\n        default:\n          while (n > 0) {\n            array[left + n] = array[left + n - 1];\n            n--;\n          }\n      }\n      array[left] = pivot;\n    }\n  }\n\n  private static gallopLeft(value, array, start, length, hint, compare) {\n    let lastOffset = 0;\n    let maxOffset;\n    let offset = 1;\n    if (compare(value, array[start + hint]) > 0) {\n      maxOffset = length - hint;\n      while (offset < maxOffset && compare(value, array[start + hint + offset]) > 0) {\n        lastOffset = offset;\n        offset = (offset << 1) + 1;\n        if (offset <= 0) {\n          offset = maxOffset;\n        }\n      }\n      if (offset > maxOffset) {\n        offset = maxOffset;\n      }\n      // Make offsets relative to start\n      lastOffset += hint;\n      offset += hint;\n      // value <= array[start + hint]\n    } else {\n      maxOffset = hint + 1;\n      while (offset < maxOffset && compare(value, array[start + hint - offset]) <= 0) {\n        lastOffset = offset;\n        offset = (offset << 1) + 1;\n        if (offset <= 0) {\n          offset = maxOffset;\n        }\n      }\n      if (offset > maxOffset) {\n        offset = maxOffset;\n      }\n      // Make offsets relative to start\n      const tmp = lastOffset;\n      lastOffset = hint - offset;\n      offset = hint - tmp;\n    }\n    lastOffset++;\n    while (lastOffset < offset) {\n      const m = lastOffset + ((offset - lastOffset) >>> 1);\n      if (compare(value, array[start + m]) > 0) {\n        lastOffset = m + 1;\n      } else {\n        offset = m;\n      }\n    }\n    return offset;\n  }\n\n  private static gallopRight(value, array, start, length, hint, compare) {\n    let lastOffset = 0;\n    let maxOffset;\n    let offset = 1;\n    if (compare(value, array[start + hint]) < 0) {\n      maxOffset = hint + 1;\n      while (offset < maxOffset && compare(value, array[start + hint - offset]) < 0) {\n        lastOffset = offset;\n        offset = (offset << 1) + 1;\n        if (offset <= 0) {\n          offset = maxOffset;\n        }\n      }\n      if (offset > maxOffset) {\n        offset = maxOffset;\n      }\n      // Make offsets relative to start\n      const tmp = lastOffset;\n      lastOffset = hint - offset;\n      offset = hint - tmp;\n      // value >= array[start + hint]\n    } else {\n      maxOffset = length - hint;\n      while (offset < maxOffset && compare(value, array[start + hint + offset]) >= 0) {\n        lastOffset = offset;\n        offset = (offset << 1) + 1;\n        if (offset <= 0) {\n          offset = maxOffset;\n        }\n      }\n      if (offset > maxOffset) {\n        offset = maxOffset;\n      }\n      // Make offsets relative to start\n      lastOffset += hint;\n      offset += hint;\n    }\n    lastOffset++;\n    while (lastOffset < offset) {\n      const m = lastOffset + ((offset - lastOffset) >>> 1);\n      if (compare(value, array[start + m]) < 0) {\n        offset = m;\n      } else {\n        lastOffset = m + 1;\n      }\n    }\n    return offset;\n  }\n\n  private static alphabeticalCompare(a, b) {\n    if (a === b) {\n      return 0;\n    }\n    if (~~a === a && ~~b === b) {\n      if (a === 0 || b === 0) {\n        return a < b ? -1 : 1;\n      }\n      if (a < 0 || b < 0) {\n        if (b >= 0) {\n          return -1;\n        }\n        if (a >= 0) {\n          return 1;\n        }\n        a = -a;\n        b = -b;\n      }\n      const al = Timsort.log10(a);\n      const bl = Timsort.log10(b);\n      let t = 0;\n      if (al < bl) {\n        a *= Timsort.POWERS_OF_TEN[bl - al - 1];\n        b /= 10;\n        t = -1;\n      } else if (al > bl) {\n        b *= Timsort.POWERS_OF_TEN[al - bl - 1];\n        a /= 10;\n        t = 1;\n      }\n      if (a === b) {\n        return t;\n      }\n      return a < b ? -1 : 1;\n    }\n    const aStr = String(a);\n    const bStr = String(b);\n    if (aStr === bStr) {\n      return 0;\n    }\n    return aStr < bStr ? -1 : 1;\n  }\n\n  public static sort(array: any[], compare?: (a: any, b: any) => number, lo?: number, hi?: number) {\n    if (!Array.isArray(array)) {\n      throw new TypeError('Can only sort arrays');\n    }\n    if (!compare) {\n      compare = Timsort.alphabeticalCompare;\n    } else if (typeof compare !== 'function') {\n      hi = lo;\n      lo = compare;\n      compare = Timsort.alphabeticalCompare;\n    }\n    if (!lo) {\n      lo = 0;\n    }\n    if (!hi) {\n      hi = array.length;\n    }\n    let remaining = hi - lo;\n    // The array is already sorted\n    if (remaining < 2) {\n      return;\n    }\n    let runLength = 0;\n    // On small arrays binary sort can be used directly\n    if (remaining < Timsort.DEFAULT_MIN_MERGE) {\n      runLength = Timsort.makeAscendingRun(array, lo, hi, compare);\n      Timsort.binaryInsertionSort(array, lo, hi, lo + runLength, compare);\n      return;\n    }\n    const ts = new Timsort(array, compare);\n    const minRun = Timsort.minRunLength(remaining);\n    do {\n      runLength = Timsort.makeAscendingRun(array, lo, hi, compare);\n      if (runLength < minRun) {\n        let force = remaining;\n        if (force > minRun) {\n          force = minRun;\n        }\n        Timsort.binaryInsertionSort(array, lo, lo + force, lo + runLength, compare);\n        runLength = force;\n      }\n      // Push new run and merge if necessary\n      ts.pushRun(lo, runLength);\n      ts.mergeRuns();\n      // Go find next run\n      remaining -= runLength;\n      lo += runLength;\n    } while (remaining !== 0);\n    // Force merging of remaining runs\n    ts.forceMergeRuns();\n  }\n\n  pushRun(runStart, runLength) {\n    this.runStart[this.stackSize] = runStart;\n    this.runLength[this.stackSize] = runLength;\n    this.stackSize += 1;\n  }\n\n  mergeRuns() {\n    while (this.stackSize > 1) {\n      let n = this.stackSize - 2;\n      if ((n >= 1 && this.runLength[n - 1] <= this.runLength[n] + this.runLength[n + 1])\n        || (n >= 2 && this.runLength[n - 2] <= this.runLength[n] + this.runLength[n - 1])) {\n        if (this.runLength[n - 1] < this.runLength[n + 1]) {\n          n--;\n        }\n      } else if (this.runLength[n] > this.runLength[n + 1]) {\n        break;\n      }\n      this.mergeAt(n);\n    }\n  }\n\n  forceMergeRuns() {\n    while (this.stackSize > 1) {\n      let n = this.stackSize - 2;\n      if (n > 0 && this.runLength[n - 1] < this.runLength[n + 1]) {\n        n--;\n      }\n      this.mergeAt(n);\n    }\n  }\n\n  mergeAt(i) {\n    const compare = this.compare;\n    const array = this.array;\n    let start1 = this.runStart[i];\n    let length1 = this.runLength[i];\n    const start2 = this.runStart[i + 1];\n    let length2 = this.runLength[i + 1];\n    this.runLength[i] = length1 + length2;\n    if (i === this.stackSize - 3) {\n      this.runStart[i + 1] = this.runStart[i + 2];\n      this.runLength[i + 1] = this.runLength[i + 2];\n    }\n    this.stackSize--;\n    const k = Timsort.gallopRight(array[start2], array, start1, length1, 0, compare);\n    start1 += k;\n    length1 -= k;\n    if (length1 === 0) {\n      return;\n    }\n    length2 = Timsort.gallopLeft(array[start1 + length1 - 1], array, start2, length2, length2 - 1, compare);\n    if (length2 === 0) {\n      return;\n    }\n    if (length1 <= length2) {\n      this.mergeLow(start1, length1, start2, length2);\n\n    } else {\n      this.mergeHigh(start1, length1, start2, length2);\n    }\n  }\n\n  mergeLow(start1, length1, start2, length2) {\n    const compare = this.compare;\n    const array = this.array;\n    const tmp = this.tmp;\n    let i;\n    for (i = 0; i < length1; i++) {\n      tmp[i] = array[start1 + i];\n    }\n    let cursor1 = 0;\n    let cursor2 = start2;\n    let dest = start1;\n    array[dest++] = array[cursor2++];\n    if (--length2 === 0) {\n      for (i = 0; i < length1; i++) {\n        array[dest + i] = tmp[cursor1 + i];\n      }\n      return;\n    }\n    if (length1 === 1) {\n      for (i = 0; i < length2; i++) {\n        array[dest + i] = array[cursor2 + i];\n      }\n      array[dest + length2] = tmp[cursor1];\n      return;\n    }\n    let minGallop = this.minGallop;\n    while (true) {\n      let count1 = 0;\n      let count2 = 0;\n      let exit = false;\n      do {\n        if (compare(array[cursor2], tmp[cursor1]) < 0) {\n          array[dest++] = array[cursor2++];\n          count2++;\n          count1 = 0;\n          if (--length2 === 0) {\n            exit = true;\n            break;\n          }\n        } else {\n          array[dest++] = tmp[cursor1++];\n          count1++;\n          count2 = 0;\n          if (--length1 === 1) {\n            exit = true;\n            break;\n          }\n        }\n      } while ((count1 | count2) < minGallop);\n      if (exit) {\n        break;\n      }\n      do {\n        count1 = Timsort.gallopRight(array[cursor2], tmp, cursor1, length1, 0, compare);\n        if (count1 !== 0) {\n          for (i = 0; i < count1; i++) {\n            array[dest + i] = tmp[cursor1 + i];\n          }\n          dest += count1;\n          cursor1 += count1;\n          length1 -= count1;\n          if (length1 <= 1) {\n            exit = true;\n            break;\n          }\n        }\n        array[dest++] = array[cursor2++];\n        if (--length2 === 0) {\n          exit = true;\n          break;\n        }\n        count2 = Timsort.gallopLeft(tmp[cursor1], array, cursor2, length2, 0, compare);\n        if (count2 !== 0) {\n          for (i = 0; i < count2; i++) {\n            array[dest + i] = array[cursor2 + i];\n          }\n          dest += count2;\n          cursor2 += count2;\n          length2 -= count2;\n          if (length2 === 0) {\n            exit = true;\n            break;\n          }\n        }\n        array[dest++] = tmp[cursor1++];\n        if (--length1 === 1) {\n          exit = true;\n          break;\n        }\n        minGallop--;\n      } while (count1 >= Timsort.DEFAULT_MIN_GALLOPING || count2 >= Timsort.DEFAULT_MIN_GALLOPING);\n      if (exit) {\n        break;\n      }\n      if (minGallop < 0) {\n        minGallop = 0;\n      }\n      minGallop += 2;\n    }\n    this.minGallop = minGallop;\n    if (minGallop < 1) {\n      this.minGallop = 1;\n    }\n    if (length1 === 1) {\n      for (i = 0; i < length2; i++) {\n        array[dest + i] = array[cursor2 + i];\n      }\n      array[dest + length2] = tmp[cursor1];\n    } else if (length1 === 0) {\n      throw new Error('mergeLow preconditions were not respected');\n    } else {\n      for (i = 0; i < length1; i++) {\n        array[dest + i] = tmp[cursor1 + i];\n      }\n    }\n  }\n\n  mergeHigh(start1, length1, start2, length2) {\n    const compare = this.compare;\n    const array = this.array;\n    const tmp = this.tmp;\n    let i;\n    for (i = 0; i < length2; i++) {\n      tmp[i] = array[start2 + i];\n    }\n    let cursor1 = start1 + length1 - 1;\n    let cursor2 = length2 - 1;\n    let dest = start2 + length2 - 1;\n    let customCursor = 0;\n    let customDest = 0;\n    array[dest--] = array[cursor1--];\n    if (--length1 === 0) {\n      customCursor = dest - (length2 - 1);\n      for (i = 0; i < length2; i++) {\n        array[customCursor + i] = tmp[i];\n      }\n      return;\n    }\n    if (length2 === 1) {\n      dest -= length1;\n      cursor1 -= length1;\n      customDest = dest + 1;\n      customCursor = cursor1 + 1;\n      for (i = length1 - 1; i >= 0; i--) {\n        array[customDest + i] = array[customCursor + i];\n      }\n      array[dest] = tmp[cursor2];\n      return;\n    }\n    let minGallop = this.minGallop;\n    while (true) {\n      let count1 = 0;\n      let count2 = 0;\n      let exit = false;\n      do {\n        if (compare(tmp[cursor2], array[cursor1]) < 0) {\n          array[dest--] = array[cursor1--];\n          count1++;\n          count2 = 0;\n          if (--length1 === 0) {\n            exit = true;\n            break;\n          }\n        } else {\n          array[dest--] = tmp[cursor2--];\n          count2++;\n          count1 = 0;\n          if (--length2 === 1) {\n            exit = true;\n            break;\n          }\n        }\n      } while ((count1 | count2) < minGallop);\n      if (exit) {\n        break;\n      }\n      do {\n        count1 = length1 - Timsort.gallopRight(tmp[cursor2], array, start1, length1, length1 - 1, compare);\n        if (count1 !== 0) {\n          dest -= count1;\n          cursor1 -= count1;\n          length1 -= count1;\n          customDest = dest + 1;\n          customCursor = cursor1 + 1;\n          for (i = count1 - 1; i >= 0; i--) {\n            array[customDest + i] = array[customCursor + i];\n          }\n          if (length1 === 0) {\n            exit = true;\n            break;\n          }\n        }\n        array[dest--] = tmp[cursor2--];\n        if (--length2 === 1) {\n          exit = true;\n          break;\n        }\n        count2 = length2 - Timsort.gallopLeft(array[cursor1], tmp, 0, length2, length2 - 1, compare);\n        if (count2 !== 0) {\n          dest -= count2;\n          cursor2 -= count2;\n          length2 -= count2;\n          customDest = dest + 1;\n          customCursor = cursor2 + 1;\n          for (i = 0; i < count2; i++) {\n            array[customDest + i] = tmp[customCursor + i];\n          }\n          if (length2 <= 1) {\n            exit = true;\n            break;\n          }\n        }\n        array[dest--] = array[cursor1--];\n        if (--length1 === 0) {\n          exit = true;\n          break;\n        }\n        minGallop--;\n      } while (count1 >= Timsort.DEFAULT_MIN_GALLOPING || count2 >= Timsort.DEFAULT_MIN_GALLOPING);\n      if (exit) {\n        break;\n      }\n      if (minGallop < 0) {\n        minGallop = 0;\n      }\n      minGallop += 2;\n    }\n    this.minGallop = minGallop;\n    if (minGallop < 1) {\n      this.minGallop = 1;\n    }\n    if (length2 === 1) {\n      dest -= length1;\n      cursor1 -= length1;\n      customDest = dest + 1;\n      customCursor = cursor1 + 1;\n      for (i = length1 - 1; i >= 0; i--) {\n        array[customDest + i] = array[customCursor + i];\n      }\n      array[dest] = tmp[cursor2];\n    } else if (length2 === 0) {\n      throw new Error('mergeHigh preconditions were not respected');\n    } else {\n      customCursor = dest - (length2 - 1);\n      for (i = 0; i < length2; i++) {\n        array[customCursor + i] = tmp[i];\n      }\n    }\n  }\n}\n","/*\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */\n\nimport {Component, ElementRef, EventEmitter, Input, NgZone, OnInit, Output, Renderer2, ViewEncapsulation} from '@angular/core';\nimport {DataModel} from '../../model/dataModel';\nimport {GTS} from '../../model/GTS';\nimport {GTSLib} from '../../utils/gts.lib';\nimport moment from 'moment-timezone';\nimport {ChartBounds} from '../../model/chartBounds';\nimport {ColorLib} from '../../utils/color-lib';\nimport {VisibilityState, WarpViewComponent} from '../warp-view-component';\nimport {SizeService} from '../../services/resize.service';\nimport {Logger} from '../../utils/logger';\nimport {Subject} from 'rxjs';\nimport {throttleTime} from 'rxjs/operators';\nimport {Timsort} from '../../utils/timsort';\n\n@Component({\n  selector: 'warpview-chart',\n  templateUrl: './warp-view-chart.component.html',\n  styleUrls: ['./warp-view-chart.component.scss'],\n  encapsulation: ViewEncapsulation.ShadowDom\n})\nexport class WarpViewChartComponent extends WarpViewComponent implements OnInit {\n\n  @Input('hiddenData') set hiddenData(hiddenData: number[]) {\n    const previousVisibility = JSON.stringify(this.visibility);\n    this.LOG.debug(['hiddenData', 'previousVisibility'], previousVisibility);\n    this._hiddenData = hiddenData;\n    this.visibility = [];\n    this.visibleGtsId.forEach(id => this.visibility.push(hiddenData.indexOf(id) < 0 && (id !== -1)));\n    this.LOG.debug(['hiddenData', 'hiddendygraphfullv'], this.visibility);\n    const newVisibility = JSON.stringify(this.visibility);\n    this.LOG.debug(['hiddenData', 'json'], previousVisibility, newVisibility, this._hiddenData);\n    if (previousVisibility !== newVisibility) {\n      const visible = [];\n      const hidden = [];\n      (this.gtsId || []).forEach((id, i) => {\n        if (this._hiddenData.indexOf(id) > -1) {\n          hidden.push(i);\n        } else {\n          visible.push(i);\n        }\n      });\n      if (visible.length > 0) {\n        this.graph.restyleChart({visible: true}, visible);\n      }\n      if (hidden.length > 0) {\n        this.graph.restyleChart({visible: false}, hidden);\n      }\n      this.LOG.debug(['hiddendygraphtrig', 'destroy'], 'redraw by visibility change', visible, hidden);\n    }\n  }\n\n  @Input('type') set type(type: string) {\n    this._type = type;\n    this.drawChart();\n  }\n\n  @Input('standalone') standalone = true;\n  @Output('boundsDidChange') boundsDidChange = new EventEmitter<any>();\n  @Output('pointHover') pointHover = new EventEmitter<any>();\n  @Output('warpViewChartResize') warpViewChartResize = new EventEmitter<any>();\n\n  // tslint:disable-next-line:variable-name\n  private _type = 'line';\n  private visibility: boolean[] = [];\n  private maxTick = 0;\n  private minTick = 0;\n  private visibleGtsId = [];\n  private gtsId = [];\n  private dataHashset = {};\n  private chartBounds: ChartBounds = new ChartBounds();\n  private visibilityStatus: VisibilityState = 'unknown';\n  private afterBoundsUpdate = false;\n  private marginLeft: number;\n  private maxPlottable = 10000;\n  parsing = false;\n  unhighliteCurve = new Subject<number[]>();\n  highliteCurve = new Subject<{ on: number[], off: number[] }>();\n  layout: Partial<any> = {\n    showlegend: false,\n    autosize: true,\n    hovermode: 'x',\n    hoverdistance: 20,\n    xaxis: {\n      font: {}\n    },\n    yaxis: {\n      exponentformat: 'none',\n      fixedrange: true,\n      automargin: true,\n      showline: true,\n      font: {}\n    },\n    margin: {\n      t: 0,\n      b: 30,\n      r: 10,\n      l: 50\n    },\n  };\n  private highlighted: any;\n\n  update(options, refresh): void {\n    this.drawChart(refresh);\n  }\n\n  constructor(\n    public el: ElementRef,\n    public renderer: Renderer2,\n    public sizeService: SizeService,\n    public ngZone: NgZone\n  ) {\n    super(el, renderer, sizeService, ngZone);\n    this.LOG = new Logger(WarpViewChartComponent, this._debug);\n  }\n\n  ngOnInit(): void {\n    this._options = this._options || this.defOptions;\n  }\n\n  public async getTimeClip(): Promise<ChartBounds> {\n    return new Promise<ChartBounds>(resolve => {\n      this.LOG.debug(['getTimeClip'], this.chartBounds);\n      resolve(this.chartBounds);\n    });\n  }\n\n  public resize(newHeight: number) {\n    this.LOG.debug(['resize'], newHeight);\n    this.height = newHeight;\n    this.layout.height = this.height;\n    if (this._options.showRangeSelector) {\n      this.layout.xaxis.rangeslider = {\n        bgcolor: 'transparent',\n        thickness: 40 / this.height\n      };\n    }\n  }\n\n  drawChart(reparseNewData: boolean = false) {\n    this.LOG.debug(['drawChart', 'this.layout', 'this.options'], this.layout, this._options, (this._options.bounds || {}).minDate);\n    if (!this.initChart(this.el)) {\n      this.LOG.debug(['drawChart', 'initChart', 'empty'], this._options);\n      return;\n    }\n    this.plotlyConfig.scrollZoom = true;\n    this.layout.yaxis.gridcolor = this.getGridColor(this.el.nativeElement);\n    this.layout.xaxis.gridcolor = this.getGridColor(this.el.nativeElement);\n    this.layout.yaxis.zerolinecolor = this.getGridColor(this.el.nativeElement);\n    this.layout.xaxis.zerolinecolor = this.getGridColor(this.el.nativeElement);\n    this.layout.margin.t = this.standalone ? 20 : 10;\n    this.layout.showlegend = this._showLegend;\n    if (!this._responsive) {\n      this.layout.width = this.width;\n      this.layout.height = this.height;\n    }\n\n    this.LOG.debug(['drawChart', 'this.options'], this.layout, this._options);\n    this.LOG.debug(['drawChart', 'this.layout'], this.layout);\n    this.LOG.debug(['drawChart', 'this.plotlyConfig'], this.plotlyConfig);\n    if (!!this._options.showRangeSelector) {\n      this.resize(this.height);\n    } else {\n      this.layout.margin.b = 30;\n    }\n    this.layout = {...this.layout};\n    this.highliteCurve.pipe(throttleTime(200)).subscribe(value => {\n      this.graph.restyleChart({opacity: 0.4}, value.off);\n      this.graph.restyleChart({opacity: 1}, value.on);\n    });\n    this.unhighliteCurve.pipe(throttleTime(200)).subscribe(value => {\n      this.graph.restyleChart({opacity: 1}, value);\n    });\n    this.loading = false;\n  }\n\n  private emitNewBounds(min, max, marginLeft) {\n    if (this._options.timeMode && this._options.timeMode === 'timestamp') {\n      this.boundsDidChange.emit({bounds: {min, max, marginLeft}, source: 'chart'});\n      this._options.bounds = this._options.bounds || {};\n      this._options.bounds.minDate = min;\n      this._options.bounds.maxDate = max;\n    } else {\n      const minDate = moment.tz(min, this._options.timeZone).valueOf();\n      const maxDate = moment.tz(max, this._options.timeZone).valueOf();\n      this._options.bounds = this._options.bounds || {};\n      this._options.bounds.minDate = minDate;\n      this._options.bounds.maxDate = maxDate;\n      this.boundsDidChange.emit({bounds: {min: minDate, max: maxDate, marginLeft}, source: 'chart'});\n    }\n  }\n\n  protected initChart(el: ElementRef): boolean {\n    const res = super.initChart(el);\n    const x: any = {\n      tick0: undefined,\n      range: [],\n    };\n    this.LOG.debug(['initChart', 'updateBounds'], this.chartBounds, this._options.bounds);\n    const min = (this._options.bounds || {}).minDate || this.chartBounds.tsmin || this.minTick;\n    const max = (this._options.bounds || {}).maxDate || this.chartBounds.tsmax || this.maxTick;\n    this.LOG.debug(['initChart', 'updateBounds'], [min, max]);\n\n    if (this._options.timeMode && this._options.timeMode === 'timestamp') {\n      x.tick0 = min;\n      x.range = [min, max];\n    } else {\n      x.tick0 = GTSLib.toISOString(min, this.divider, this._options.timeZone);\n      x.range = [\n        GTSLib.toISOString(min, this.divider, this._options.timeZone),\n        GTSLib.toISOString(max, this.divider, this._options.timeZone)\n      ];\n    }\n    this.layout.xaxis = x;\n    if (!!res) {\n      this.resize(this.height);\n    }\n    return res;\n  }\n\n  protected convert(data: DataModel): Partial<any>[] {\n    this.parsing = !this._options.isRefresh;\n    this.chartBounds.tsmin = undefined;\n    this.chartBounds.tsmax = undefined;\n    const dataset: Partial<any>[] = [];\n    this.LOG.debug(['convert'], this._options.timeMode);\n    this.LOG.debug(['convert', 'this._hiddenData'], this._hiddenData);\n    this.LOG.debug(['convert', 'this._options.timezone'], this._options.timeZone);\n    if (GTSLib.isArray(data.data)) {\n      let gtsList = GTSLib.flatDeep(GTSLib.flattenGtsIdArray(data.data as any[], 0).res);\n      this.maxTick = Number.NEGATIVE_INFINITY;\n      this.minTick = Number.POSITIVE_INFINITY;\n      this.visibleGtsId = [];\n      this.gtsId = [];\n      const nonPlottable = gtsList.filter(g => (g.v && !GTSLib.isGtsToPlot(g)));\n      gtsList = gtsList.filter(g => g.v && GTSLib.isGtsToPlot(g));\n      // initialize visibility status\n      if (this.visibilityStatus === 'unknown') {\n        this.visibilityStatus = gtsList.length > 0 ? 'plottableShown' : 'nothingPlottable';\n      }\n\n      let timestampMode = true;\n      const tsLimit = 100 * GTSLib.getDivider(this._options.timeUnit);\n      gtsList.forEach((gts: GTS) => {\n        const ticks = gts.v.map(t => t[0]);\n        const size = gts.v.length;\n        timestampMode = timestampMode && (ticks[0] > -tsLimit && ticks[0] < tsLimit);\n        timestampMode = timestampMode && (ticks[size - 1] > -tsLimit && ticks[size - 1] < tsLimit);\n      });\n      if (timestampMode || this._options.timeMode === 'timestamp') {\n        this.layout.xaxis.type = 'linear';\n      } else {\n        this.layout.xaxis.type = 'date';\n      }\n      gtsList.forEach((gts: GTS, i) => {\n        if (gts.v && GTSLib.isGtsToPlot(gts)) {\n          Timsort.sort(gts.v, (a, b) => a[0] - b[0]);\n          const size = gts.v.length;\n          const label = GTSLib.serializeGtsMetadata(gts);\n          const c = ColorLib.getColor(gts.id, this._options.scheme);\n          const color = ((data.params || [])[i] || {datasetColor: c}).datasetColor || c;\n          const type = ((data.params || [])[i] || {type: this._type}).type || this._type;\n          const series: Partial<any> = {\n            type: type === 'spline' ? 'scatter' : 'scattergl',\n            mode: type === 'scatter' ? 'markers' : size > this.maxPlottable ? 'lines' : 'lines+markers',\n            // name: label,\n            text: label,\n            x: [],\n            y: [],\n            line: {color},\n            hoverinfo: 'none',\n            connectgaps: false,\n            visible: !(this._hiddenData.filter(h => h === gts.id).length > 0),\n          };\n          if (type === 'scatter' || size < this.maxPlottable) {\n            series.marker = {\n              size: 3,\n              color: new Array(size).fill(color),\n              line: {color, width: 3},\n              opacity: new Array(size).fill(this._type === 'scatter' || this._options.showDots ? 1 : 0)\n            };\n          }\n          switch (type) {\n            case 'spline':\n              series.line.shape = 'spline';\n              break;\n            case 'area':\n              series.fill = 'tozeroy';\n              series.fillcolor = ColorLib.transparentize(color, 0.3);\n              break;\n            case 'step':\n              series.line.shape = 'hvh';\n              break;\n            case 'step-before':\n              series.line.shape = 'vh';\n              break;\n            case 'step-after':\n              series.line.shape = 'hv';\n              break;\n          }\n          this.visibleGtsId.push(gts.id);\n          this.gtsId.push(gts.id);\n          //  this.LOG.debug(['convert'], 'forEach value');\n          const ticks = gts.v.map(t => t[0]);\n          const values = gts.v.map(t => t[t.length - 1]);\n\n          if (size > 0) {\n            this.minTick = this.minTick || ticks[0];\n            this.maxTick = this.maxTick || ticks[0];\n            for (let v = 1; v < size; v++) {\n              const val = ticks[v];\n              this.minTick = val <= this.minTick ? val : this.minTick;\n              this.maxTick = val >= this.maxTick ? val : this.maxTick;\n            }\n          }\n          if (timestampMode || this._options.timeMode === 'timestamp') {\n            series.x = ticks;\n          } else {\n            series.x = ticks.map(t => GTSLib.toISOString(t, this.divider, this._options.timeZone));\n          }\n          series.y = values;\n          dataset.push(series);\n        }\n      });\n      if (nonPlottable.length > 0 && gtsList.length === 0) {\n        nonPlottable.forEach(g => {\n          g.v.forEach(value => {\n            const ts = value[0];\n            if (ts < this.minTick) {\n              this.minTick = ts;\n            }\n            if (ts > this.maxTick) {\n              this.maxTick = ts;\n            }\n          });\n        });\n        // if there is not any plottable data, we must add a fake one with id -1. This one will always be hidden.\n        if (0 === gtsList.length) {\n          if (!this.dataHashset[this.minTick]) {\n            this.dataHashset[this.minTick] = [0];\n          }\n          if (!this.dataHashset[this.maxTick]) {\n            this.dataHashset[this.maxTick] = [0];\n          }\n          this.visibility.push(false);\n          this.visibleGtsId.push(-1);\n        }\n      }\n    }\n    this.LOG.debug(['convert'], 'end', dataset);\n    this.noData = dataset.length === 0;\n    this.parsing = false;\n    return dataset;\n  }\n\n  afterPlot(plotlyInstance) {\n    super.afterPlot(plotlyInstance);\n    this.marginLeft = parseInt((this.graph.plotEl.nativeElement as HTMLElement).querySelector('g.bglayer > rect').getAttribute('x'), 10);\n\n    this.LOG.debug(['afterPlot', 'marginLeft'], this.marginLeft);\n    if (this.chartBounds.tsmin !== this.minTick || this.chartBounds.tsmax !== this.maxTick) {\n      this.chartBounds.tsmin = this.minTick;\n      this.chartBounds.tsmax = this.maxTick;\n      this.chartBounds.marginLeft = this.marginLeft;\n      this.chartDraw.emit(this.chartBounds);\n      if (this.afterBoundsUpdate || this.standalone) {\n        this.LOG.debug(['afterPlot', 'updateBounds'], this.minTick, this.maxTick);\n        this.emitNewBounds(this.minTick, this.maxTick, this.marginLeft);\n        this.loading = false;\n        this.afterBoundsUpdate = false;\n      }\n    } else {\n      this.loading = false;\n    }\n  }\n\n  relayout(data: any) {\n    let change = false;\n    if (data['xaxis.range'] && data['xaxis.range'].length === 2) {\n      if (this.chartBounds.msmin !== data['xaxis.range'][0] || this.chartBounds.msmax !== data['xaxis.range'][1]) {\n        this.LOG.debug(['relayout', 'updateBounds', 'xaxis.range'], data['xaxis.range']);\n        change = true;\n        this.chartBounds.msmin = data['xaxis.range'][0];\n        this.chartBounds.msmax = data['xaxis.range'][1];\n        this.chartBounds.tsmin = moment.tz(moment(this.chartBounds.msmin), this._options.timeZone).valueOf() * this.divider;\n        this.chartBounds.tsmax = moment.tz(moment(this.chartBounds.msmax), this._options.timeZone).valueOf() * this.divider;\n      }\n    } else if (data['xaxis.range[0]'] && data['xaxis.range[1]']) {\n      if (this.chartBounds.msmin !== data['xaxis.range[0]'] || this.chartBounds.msmax !== data['xaxis.range[1]']) {\n        this.LOG.debug(['relayout', 'updateBounds', 'xaxis.range[x]'], data['xaxis.range[0]']);\n        change = true;\n        this.chartBounds.msmin = data['xaxis.range[0]'];\n        this.chartBounds.msmax = data['xaxis.range[1]'];\n        this.chartBounds.tsmin = moment.tz(moment(this.chartBounds.msmin), this._options.timeZone).valueOf() * this.divider;\n        this.chartBounds.tsmax = moment.tz(moment(this.chartBounds.msmax), this._options.timeZone).valueOf() * this.divider;\n      }\n    } else if (data['xaxis.autorange']) {\n      if (this.chartBounds.tsmin !== this.minTick || this.chartBounds.tsmax !== this.maxTick) {\n        this.LOG.debug(['relayout', 'updateBounds', 'autorange'], data, this.minTick, this.maxTick);\n        change = true;\n        this.chartBounds.tsmin = this.minTick;\n        this.chartBounds.tsmax = this.maxTick;\n      }\n    }\n    if (change) {\n      this.LOG.debug(['relayout', 'updateBounds'], this.chartBounds);\n      this.emitNewBounds(this.chartBounds.tsmin, this.chartBounds.tsmax, this.marginLeft);\n    }\n    this.loading = false;\n    this.afterBoundsUpdate = false;\n  }\n\n  sliderChange($event: any) {\n    this.LOG.debug(['sliderChange'], $event);\n  }\n\n  updateBounds(min, max) {\n    this.LOG.debug(['updateBounds'], min, max, this._options);\n    min = min || this.minTick / this.divider;\n    max = max || this.maxTick / this.divider;\n    this.layout.xaxis.autorange = false;\n    if (this._options.timeMode && this._options.timeMode === 'timestamp') {\n      this.layout.xaxis.range = [min, max];\n      this.layout.xaxis.tick0 = min;\n    } else {\n      this.layout.xaxis.range = [\n        GTSLib.toISOString(min, this.divider, this._options.timeZone),\n        GTSLib.toISOString(max, this.divider, this._options.timeZone)\n      ];\n      this.layout.xaxis.tick0 = GTSLib.toISOString(min, this.divider, this._options.timeZone);\n    }\n    this.layout = {...this.layout};\n    this.LOG.debug(['updateBounds'], this.layout);\n    this.afterBoundsUpdate = true;\n  }\n\n\n  setRealBounds(chartBounds: ChartBounds) {\n    this.afterBoundsUpdate = true;\n    this.minTick = chartBounds.tsmin;\n    this.maxTick = chartBounds.tsmax;\n    this._options.bounds = this._options.bounds || {};\n    this._options.bounds.minDate = this.minTick;\n    this._options.bounds.maxDate = this.maxTick;\n    const x: any = {\n      tick0: undefined,\n      range: [],\n    };\n    if (this._options.showRangeSelector) {\n      x.rangeslider = {\n        bgcolor: 'transparent',\n        thickness: 40 / this.height\n      };\n    }\n    if (this._options.timeMode && this._options.timeMode === 'timestamp') {\n      x.tick0 = this.minTick / this.divider;\n      x.range = [this.minTick, this.maxTick];\n    } else {\n      x.tick0 = GTSLib.toISOString(this.minTick, this.divider, this._options.timeZone);\n      x.range = [\n        GTSLib.toISOString(this.minTick, this.divider, this._options.timeZone),\n        GTSLib.toISOString(this.maxTick, this.divider, this._options.timeZone)\n      ];\n    }\n    this.layout.xaxis = x;\n    this.layout = {...this.layout};\n  }\n\n  hover(data: any) {\n    this.LOG.debug(['hover'], data);\n    let delta = Number.MAX_VALUE;\n    // tslint:disable-next-line:no-shadowed-variable\n    let point;\n    const curves = [];\n    this.toolTip.nativeElement.style.display = 'block';\n    if (data.points[0] && data.points[0].data.orientation !== 'h') {\n      const y = (data.yvals || [''])[0];\n      data.points.forEach(p => {\n        curves.push(p.curveNumber);\n        const d = Math.abs(p.y - y);\n        if (d < delta) {\n          delta = d;\n          point = p;\n        }\n      });\n    } else {\n      const x: number = (data.xvals || [''])[0];\n      data.points.forEach(p => {\n        curves.push(p.curveNumber);\n        const d = Math.abs(p.x - x);\n        if (d < delta) {\n          delta = d;\n          point = p;\n        }\n      });\n    }\n    super.hover(data, point);\n    if (point && this.highlighted !== point.curveNumber) {\n      this.highliteCurve.next({on: [point.curveNumber], off: curves});\n      this.highlighted = point.curveNumber;\n    }\n    this.pointHover.emit(data.event);\n    /*setTimeout(() => {\n      let pn = -1;\n      let tn = -1;\n      let color = [];\n      let line = {};\n      let opacity = [];\n      data.points.forEach(p => {\n        if (!!p.data.marker) {\n          color = p.data.marker.color;\n          opacity = p.data.marker.opacity;\n          line = p.data.marker.line;\n          pn = p.pointNumber;\n          tn = p.curveNumber;\n          if (pn >= 0) {\n            color[pn] = 'transparent';\n            opacity[pn] = 1;\n            const update = {marker: {color, opacity, line, size: 15}};\n            this.graph.restyleChart(update, [tn]);\n            this.LOG.debug(['hover'], 'restyleChart inner', update, [tn]);\n          }\n        }\n      });\n    })*/\n  }\n\n  unhover(data: any) {\n    let delta = Number.MAX_VALUE;\n    // tslint:disable-next-line:no-shadowed-variable\n    let point;\n    if (data.points[0] && data.points[0].data.orientation !== 'h') {\n      const y = (data.yvals || [''])[0];\n      data.points.forEach(p => {\n        const d = Math.abs(p.y - y);\n        if (d < delta) {\n          delta = d;\n          point = p;\n        }\n      });\n    } else {\n      const x: number = (data.xvals || [''])[0];\n      data.points.forEach(p => {\n        const d = Math.abs(p.x - x);\n        if (d < delta) {\n          delta = d;\n          point = p;\n        }\n      });\n    }\n    if (!!point && this.highlighted !== point.curveNumber) {\n      this.unhighliteCurve.next([this.highlighted]);\n      this.highlighted = undefined;\n    }\n    super.unhover(data, point);\n    /*setTimeout(() => {\n      let pn = -1;\n      let tn = -1;\n      let color = [];\n      let line = {};\n      let opacity = [];\n      data.points.forEach(p => {\n        if (!!p.data.marker) {\n          pn = p.pointNumber;\n          tn = p.curveNumber;\n          color = p.data.marker.color;\n          opacity = p.data.marker.opacity;\n          line = p.data.marker.line;\n          if (pn >= 0) {\n            color[pn] = p.data.line.color;\n            opacity[pn] = this._options.showDots ? 1 : 0;\n            const update = {marker: {color, opacity, line, size: 15}};\n            this.graph.restyleChart(update, [tn]);\n          }\n        }\n      });\n    })*/\n  }\n}\n","/*\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */\n\nimport {Injectable} from '@angular/core';\nimport {HttpErrorResponse} from '@angular/common/http';\n\nimport {Observable} from 'rxjs/internal/Observable';\nimport {of} from 'rxjs/internal/observable/of';\nimport {Logger} from '../utils/logger';\n\n\n/** Type of the handleError function returned by HttpErrorHandler.createHandleError */\nexport type HandleError = (operation?: string) => (error: HttpErrorResponse) => Observable<string>;\n\n// noinspection UnterminatedStatementJS\n/** Handles HttpClient errors */\n@Injectable()\nexport class HttpErrorHandler {\n  private LOG: Logger;\n\n  /**\n   */\n  constructor() {\n    this.LOG = new Logger(HttpErrorHandler, true);\n  }\n\n  createHandleError = (serviceName = '') =>\n    // tslint:disable-next-line:semicolon\n    (operation = 'operation') => this.handleError(serviceName, operation);\n\n  handleError(serviceName = '', operation = 'operation') {\n    return (error: HttpErrorResponse): Observable<string> => {\n      this.LOG.error([serviceName], error);\n      this.LOG.error([serviceName], `${operation} failed: ${error.statusText}`);\n      const message = ((error.error || {}).message)\n        ? error.error.message\n        : error.status ? error.statusText : 'Server error';\n      this.LOG.error([serviceName], message);\n      return of(message);\n    };\n  }\n}\n","/*\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */\n\nimport {HttpClient, HttpResponse} from '@angular/common/http';\nimport {Injectable} from '@angular/core';\nimport {catchError, tap} from 'rxjs/operators';\nimport {HandleError, HttpErrorHandler} from './http-error-handler.service';\nimport {Logger} from '../utils/logger';\nimport {Observable} from 'rxjs';\n\n@Injectable({providedIn: 'root'})\nexport class Warp10Service {\n\n  private LOG: Logger;\n  private readonly handleError: HandleError;\n\n  constructor(\n    private http: HttpClient,\n    private httpErrorHandler: HttpErrorHandler) {\n    this.LOG = new Logger(Warp10Service, true);\n    this.handleError = httpErrorHandler.createHandleError('Warp10Service');\n  }\n\n  exec(warpScript: string, url: string): Observable<HttpResponse<string>> {\n    this.LOG.debug(['exec', 'warpScript'], url, warpScript);\n    return this.http.post<string>(url, warpScript, {\n      // @ts-ignore\n      observe: 'response',\n      // @ts-ignore\n      responseType: 'text'\n    })\n      .pipe(\n        tap(r => this.LOG.debug(['exec', 'result'], r)),\n        catchError(this.handleError('exec'))\n      ) as Observable<HttpResponse<string>>;\n  }\n}\n","/*\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */\n\nimport {\n  AfterViewInit,\n  Component,\n  ElementRef,\n  EventEmitter,\n  HostListener,\n  Input,\n  NgZone,\n  OnInit,\n  Output,\n  Renderer2,\n  ViewChild\n} from '@angular/core';\nimport {Param} from '../../model/param';\nimport {DataModel} from '../../model/dataModel';\nimport {GTSLib} from '../../utils/gts.lib';\nimport {HttpErrorHandler} from '../../services/http-error-handler.service';\nimport {WarpViewComponent} from '../warp-view-component';\nimport {SizeService} from '../../services/resize.service';\nimport {Warp10Service} from '../../services/warp10.service';\nimport {Logger} from '../../utils/logger';\nimport {HttpResponse} from '@angular/common/http';\nimport {WarpViewResultTileComponent} from '../warp-view-result-tile/warp-view-result-tile.component';\n\n@Component({\n  selector: 'warpview-tile',\n  templateUrl: './warp-view-tile.component.html',\n  styleUrls: ['./warp-view-tile.component.scss'],\n  providers: [HttpErrorHandler]\n})\nexport class WarpViewTileComponent extends WarpViewComponent implements OnInit, AfterViewInit {\n  @ViewChild('warpRef', {static: true}) warpRef: ElementRef;\n  @ViewChild('resultTile') resultTile: WarpViewResultTileComponent;\n\n  @Output('warpscriptResult') warpscriptResult = new EventEmitter<any>();\n  @Output('execStatus') execStatus = new EventEmitter<any>();\n  @Output('execError') execError = new EventEmitter<any>();\n\n  @Input('type') type = 'line';\n  @Input('chartTitle') chartTitle;\n  @Input('url') url = '';\n  @Input('isAlone') isAlone = false; // used by plot to manage its keyboard events\n  @Input('gtsFilter') set gtsFilter(gtsFilter: string) {\n    this._gtsFilter = gtsFilter;\n  }\n\n  @Input()\n  set warpscript(warpScript: string) {\n    if (!!warpScript && this._warpScript !== warpScript) {\n      this._warpScript = warpScript;\n      this.execute(true);\n    }\n  }\n\n  get warpscript(): string {\n    return this._warpScript;\n  }\n\n  loaderMessage = '';\n  error: any;\n  status: string;\n  loading = false;\n  execResult: string;\n\n  private timer: any;\n  private _autoRefresh;\n  private _gtsFilter = '';\n  private _warpScript = '';\n  private execUrl = '';\n  private timeUnit = 'us';\n\n  constructor(\n    public el: ElementRef,\n    public sizeService: SizeService,\n    public renderer: Renderer2,\n    public ngZone: NgZone,\n    private warp10Service: Warp10Service,\n  ) {\n    super(el, renderer, sizeService, ngZone);\n    this.LOG = new Logger(WarpViewTileComponent, this._debug);\n  }\n\n  ngOnInit(): void {\n    this._options = this._options || this.defOptions;\n  }\n\n  ngAfterViewInit() {\n    this._warpScript = this._warpScript || this.warpRef.nativeElement.textContent.trim();\n    this.LOG.debug(['ngAfterViewInit', 'warpScript'], this._warpScript);\n    this.el.nativeElement.style.opacity = '1';\n    if (this.warpRef.nativeElement.textContent.trim() !== '') {\n      this.execute(false);\n    }\n  }\n\n  update(options: Param): void {\n    this.LOG.debug(['update', 'options'], options);\n  }\n\n  /* Listeners */\n  @HostListener('document:keyup', ['$event'])\n  // @HostListener('keydown', ['$event'])\n  handleKeyDown(event: KeyboardEvent) {\n    if (event.key === 'r') {\n      this.execute(false);\n    }\n  }\n\n  /** detect some VSCode special modifiers in the beginnig of the code:\n   * @endpoint xxxURLxxx\n   * @timeUnit ns\n   * warning : the first line is empty (to confirm with other browsers)\n   */\n  private detectWarpScriptSpecialComments() {\n    // analyse the first warpScript lines starting with //\n    const extraParamsPattern = /\\s*\\/\\/\\s*@(\\w*)\\s*(.*)$/g;\n    const warpscriptLines = this._warpScript.split('\\n');\n    for (let l = 1; l < warpscriptLines.length; l++) {\n      const currentLine = warpscriptLines[l];\n      if (currentLine === '' || currentLine.search('//') >= 0) {\n        // find and extract\n        let lineOnMatch: RegExpMatchArray | null;\n        const re = RegExp(extraParamsPattern);\n        while (lineOnMatch = re.exec(currentLine)) {\n          const parameterName = lineOnMatch[1];\n          const parameterValue = lineOnMatch[2];\n          switch (parameterName) {\n            case 'endpoint':        //        // @endpoint http://mywarp10server/api/v0/exec\n              this.execUrl = parameterValue;\n              break;\n            case 'timeUnit':\n              this.timeUnit = parameterValue.toLowerCase();   // set the time unit for graphs\n              break;\n            default:\n              break;\n          }\n        }\n      } else {\n        break; // no more comments at the beginning of the file\n      }\n    }\n  }\n\n  private execute(isRefresh: boolean) {\n    if (!!this._warpScript && this._warpScript.trim() !== '') {\n      this.LOG.debug(['execute'], isRefresh);\n      this.error = undefined;\n      this.loading = !isRefresh;\n      this.execResult = undefined;\n      this.loaderMessage = 'Requesting data';\n      this.execUrl = this.url;\n      this.detectWarpScriptSpecialComments();\n      this.LOG.debug(['execute', 'warpScript'], this._warpScript);\n      this.warp10Service.exec(this._warpScript, this.execUrl).subscribe((response: HttpResponse<string> | string) => {\n        this.loading = false;\n        this.LOG.debug(['execute'], response);\n        if ((response as HttpResponse<string>).body) {\n          try {\n            const body = (response as HttpResponse<string>).body;\n            this.warpscriptResult.emit(body);\n            const headers = (response as HttpResponse<string>).headers;\n            this.status = `Your script execution took\n ${GTSLib.formatElapsedTime(parseInt(headers.get('x-warp10-elapsed'), 10))}\n serverside, fetched\n ${headers.get('x-warp10-fetched')} datapoints and performed\n ${headers.get('x-warp10-ops')}  WarpScript operations.`;\n            this.execStatus.emit({\n              message: this.status,\n              ops: parseInt(headers.get('x-warp10-ops'), 10),\n              elapsed: parseInt(headers.get('x-warp10-elapsed'), 10),\n              fetched: parseInt(headers.get('x-warp10-fetched'), 10),\n            });\n            if (this._autoRefresh !== this._options.autoRefresh) {\n              this._autoRefresh = this._options.autoRefresh;\n              if (this.timer) {\n                window.clearInterval(this.timer);\n              }\n              if (this._autoRefresh && this._autoRefresh > 0) {\n                this.timer = window.setInterval(() => {\n                  this.execute(true);\n                }, this._autoRefresh * 1000);\n              }\n            }\n            setTimeout(() => {\n              this.execResult = body;\n              this.resultTile.setResult(this.execResult, isRefresh);\n              this._options.bounds = {};\n              this._options = {...this._options};\n              this.loading = false;\n            });\n          } catch (e) {\n            this.LOG.error(['execute'], e);\n            this.loading = false;\n          }\n        } else {\n          this.LOG.error(['execute'], response);\n          this.error = response;\n          this.loading = false;\n          this.execError.emit(response);\n        }\n      }, e => {\n        this.loading = false;\n        this.execError.emit(e);\n        this.LOG.error(['execute'], e);\n      });\n    }\n  }\n\n  protected convert(data: DataModel): any[] {\n    return [];\n  }\n\n  chartDrawn(event) {\n    this.chartDraw.emit(event);\n  }\n\n  onWarpViewNewOptions(opts: any) {\n    this._options = opts;\n  }\n}\n","/*\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */\n\nimport {Component, Input, ViewEncapsulation} from '@angular/core';\n\n@Component({\n  selector: 'warpview-spinner',\n  templateUrl: './warp-view-spinner.component.html',\n  styleUrls: ['./warp-view-spinner.component.scss'],\n  encapsulation: ViewEncapsulation.ShadowDom\n})\nexport class WarpViewSpinnerComponent {\n  @Input('message') message = 'Loading and parsing data...';\n}\n","/*\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */\n\nimport {Component, ElementRef, EventEmitter, Input, OnInit, Output} from '@angular/core';\n\n/**\n *\n */\n@Component({\n  selector: 'warpview-toggle',\n  templateUrl: './warp-view-toggle.component.html',\n  styleUrls: ['./warp-view-toggle.component.scss']\n})\nexport class WarpViewToggleComponent implements OnInit {\n  @Input('checked') set checked(state: boolean) {\n    this.state = state;\n  }\n\n  get checked(): boolean {\n    return this.state;\n  }\n\n  @Input('text1') text1 = '';\n  @Input('text2') text2 = '';\n\n  @Output('stateChange') stateChange = new EventEmitter<any>();\n\n  state = false;\n\n  constructor(public el: ElementRef) {\n  }\n\n  ngOnInit() {\n    this.state = this.checked;\n  }\n\n  switched() {\n    this.state = !this.state;\n    this.stateChange.emit({state: this.state, id: this.el.nativeElement.id});\n  }\n}\n","/*\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */\n\nimport {Component, ElementRef, NgZone, OnInit, Renderer2, ViewEncapsulation} from '@angular/core';\nimport {WarpViewComponent} from '../warp-view-component';\nimport {Param} from '../../model/param';\nimport {DataModel} from '../../model/dataModel';\nimport {GTSLib} from '../../utils/gts.lib';\nimport {ColorLib} from '../../utils/color-lib';\nimport moment from 'moment-timezone';\nimport {SizeService} from '../../services/resize.service';\nimport {Logger} from '../../utils/logger';\nimport {Timsort} from '../../utils/timsort';\n\n@Component({\n  selector: 'warpview-bar',\n  templateUrl: './warp-view-bar.component.html',\n  styleUrls: ['./warp-view-bar.component.scss'],\n  encapsulation: ViewEncapsulation.ShadowDom\n})\nexport class WarpViewBarComponent extends WarpViewComponent implements OnInit {\n\n  layout: Partial<any> = {\n    showlegend: false,\n    xaxis: {},\n    yaxis: {\n      exponentformat: 'none',\n      fixedrange: true,\n      showline: true\n    },\n    margin: {\n      t: 10,\n      b: 40,\n      r: 10,\n      l: 50\n    }\n  };\n\n  constructor(\n    public el: ElementRef,\n    public renderer: Renderer2,\n    public sizeService: SizeService,\n    public ngZone: NgZone\n  ) {\n    super(el, renderer, sizeService, ngZone);\n    this.LOG = new Logger(WarpViewBarComponent, this._debug);\n  }\n\n  ngOnInit() {\n    this.drawChart();\n  }\n\n  update(options: Param): void {\n    this.drawChart();\n  }\n\n  private drawChart() {\n    if (!this.initChart(this.el)) {\n      return;\n    }\n    this.plotlyConfig.scrollZoom = true;\n    this.buildGraph();\n  }\n\n  protected convert(data: DataModel): Partial<any>[] {\n    let gtsList = [];\n    if (GTSLib.isArray(data.data)) {\n      data.data = GTSLib.flatDeep(data.data as any[]);\n      this.LOG.debug(['convert', 'isArray']);\n      if (data.data.length > 0 && GTSLib.isGts(data.data[0])) {\n        this.LOG.debug(['convert', 'isArray 2']);\n        gtsList = GTSLib.flattenGtsIdArray(data.data as any[], 0).res;\n      } else {\n        this.LOG.debug(['convert', 'isArray 3']);\n        gtsList = data.data as any[];\n      }\n    } else {\n      this.LOG.debug(['convert', 'not array']);\n      gtsList = [data.data];\n    }\n    this.LOG.debug(['convert', 'gtsList'], gtsList);\n    const dataset = [];\n    gtsList.forEach((gts, i) => {\n      this.LOG.debug(['convert', 'gts item'], gts);\n      if (gts.v) {\n        Timsort.sort(gts.v, (a, b) => a[0] - b[0]);\n        const label = GTSLib.serializeGtsMetadata(gts);\n        const c = ColorLib.getColor(gts.id || i, this._options.scheme);\n        const color = ((data.params || [])[i] || {datasetColor: c}).datasetColor || c;\n        const series: Partial<any> = {\n          type: 'bar',\n          mode: 'lines+markers',\n          name: label,\n          text: label,\n          orientation: this._options.horizontal ? 'h' : 'v',\n          x: [],\n          y: [],\n          hoverinfo: 'none',\n          marker: {\n            color: ColorLib.transparentize(color),\n            line: {\n              color,\n              width: 1\n            }\n          }\n        };\n        gts.v.forEach(value => {\n          const ts = value[0];\n          if (!this._options.horizontal) {\n            series.y.push(value[value.length - 1]);\n            if (this._options.timeMode && this._options.timeMode === 'timestamp') {\n              series.x.push(ts);\n            } else {\n              series.x.push(GTSLib.toISOString(ts, this.divider, this._options.timeZone));\n            }\n          } else {\n            series.x.push(value[value.length - 1]);\n            if (this._options.timeMode && this._options.timeMode === 'timestamp') {\n              series.y.push(ts);\n            } else {\n              series.y.push(GTSLib.toISOString(ts, this.divider, this._options.timeZone));\n            }\n          }\n        });\n        dataset.push(series);\n      } else {\n        this._options.timeMode = 'custom';\n        this.LOG.debug(['convert', 'gts'], gts);\n        (gts.columns || []).forEach((label, index) => {\n          const c = ColorLib.getColor(gts.id || index, this._options.scheme);\n          const color = ((data.params || [])[index] || {datasetColor: c}).datasetColor || c;\n          const series: Partial<any> = {\n            type: 'bar',\n            mode: 'lines+markers',\n            name: label,\n            text: label,\n            orientation: this._options.horizontal ? 'h' : 'v',\n            x: [],\n            y: [],\n            hoverinfo: 'none',\n            marker: {\n              color: ColorLib.transparentize(color),\n              line: {\n                color,\n                width: 1\n              }\n            }\n          };\n          if (this._options.horizontal) {\n            (gts.rows || []).forEach(r => {\n              series.y.unshift(r[0]);\n              series.x.push(r[index + 1]);\n            });\n          } else {\n            (gts.rows || []).forEach(r => {\n              series.x.push(r[0]);\n              series.y.push(r[index + 1]);\n            });\n          }\n          dataset.push(series);\n        });\n      }\n    });\n    this.LOG.debug(['convert', 'dataset'], dataset, this._options.horizontal);\n    return dataset;\n  }\n\n  private buildGraph() {\n    this.LOG.debug(['buildGraph', 'this.layout'], this.responsive);\n    this.LOG.debug(['buildGraph', 'this.layout'], this.layout);\n    this.LOG.debug(['buildGraph', 'this.plotlyConfig'], this.plotlyConfig);\n    this.layout.showlegend = this._showLegend;\n    this.layout.barmode = this._options.stacked ? 'stack' : 'group';\n    this.layout.yaxis.color = this.getGridColor(this.el.nativeElement);\n    this.layout.xaxis.color = this.getGridColor(this.el.nativeElement);\n    this.loading = false;\n  }\n}\n","/*\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */\n\nimport {Component, ElementRef, NgZone, OnInit, Renderer2, ViewEncapsulation} from '@angular/core';\nimport {WarpViewComponent} from '../warp-view-component';\nimport {Param} from '../../model/param';\nimport {DataModel} from '../../model/dataModel';\nimport {ColorLib} from '../../utils/color-lib';\nimport {SizeService} from '../../services/resize.service';\nimport {Logger} from '../../utils/logger';\nimport {GTSLib} from '../../utils/gts.lib';\n\n@Component({\n  selector: 'warpview-bubble',\n  templateUrl: './warp-view-bubble.component.html',\n  styleUrls: ['./warp-view-bubble.component.scss'],\n  encapsulation: ViewEncapsulation.ShadowDom\n})\nexport class WarpViewBubbleComponent extends WarpViewComponent implements OnInit {\n\n  layout: Partial<any> = {\n    showlegend: false,\n    xaxis: {},\n    hovermode: 'closest',\n    hoverdistance: 20,\n    yaxis: {},\n    margin: {\n      t: 10,\n      b: 25,\n      r: 10,\n      l: 50\n    }\n  };\n\n  constructor(\n    public el: ElementRef,\n    public renderer: Renderer2,\n    public sizeService: SizeService,\n    public ngZone: NgZone\n  ) {\n    super(el, renderer, sizeService, ngZone);\n    this.LOG = new Logger(WarpViewBubbleComponent, this._debug);\n  }\n\n  ngOnInit() {\n    this.drawChart();\n  }\n\n  update(options: Param): void {\n    this.drawChart();\n  }\n\n  private drawChart() {\n    if (!this.initChart(this.el)) {\n      return;\n    }\n    this.plotlyConfig.scrollZoom = true;\n    this.buildGraph();\n  }\n\n  protected convert(data: DataModel): Partial<any>[] {\n    const dataset = [];\n    GTSLib.flatDeep(data.data as any []).forEach((gts, i) => {\n      const label = Object.keys(gts)[0];\n      const c = ColorLib.getColor(gts.id || i, this._options.scheme);\n      const color = ((data.params || [])[i] || {datasetColor: c}).datasetColor || c;\n      const series: Partial<any> = {\n        type: 'scattergl',\n        mode: 'markers',\n        name: label,\n        text: label,\n        x: [],\n        y: [],\n        hoverinfo: 'none',\n        marker: {\n          color: ColorLib.transparentize(color),\n          line: {\n            color\n          },\n          size: []\n        }\n      };\n      if (GTSLib.isGts(gts)) {\n        const ticks = gts.v.map(t => t[0]);\n        const values = gts.v.map(t => t[t.length - 1]);\n        const sizes = new Array(gts.v.length).fill(10);\n        if (this._options.timeMode === 'timestamp') {\n          series.x = ticks;\n        } else {\n          series.x = ticks.map(t => GTSLib.toISOString(t, this.divider, this._options.timeZone));\n        }\n        series.y = values;\n        series.marker.size = sizes;\n      } else {\n        gts[label].forEach(value => {\n          series.y.push(value[0]);\n          series.x.push(value[1]);\n          series.marker.size.push(value[2]);\n        });\n      }\n      dataset.push(series);\n    });\n    this.noData = dataset.length === 0;\n    this.LOG.debug(['convert', 'dataset'], dataset);\n    return dataset;\n  }\n\n  private buildGraph() {\n    this.LOG.debug(['drawChart', 'this.responsive'], this._responsive);\n    this.LOG.debug(['drawChart', 'this.layout'], this.layout);\n    this.LOG.debug(['drawChart', 'this.plotlyConfig'], this.plotlyConfig);\n    this.layout.showlegend = this.showLegend;\n    this.layout.yaxis.color = this.getGridColor(this.el.nativeElement);\n    this.layout.xaxis.color = this.getGridColor(this.el.nativeElement);\n    this.loading = false;\n  }\n}\n","/*\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */\n\nimport {Component, ElementRef, Input, NgZone, OnInit, Renderer2, ViewEncapsulation} from '@angular/core';\nimport {WarpViewComponent} from '../warp-view-component';\nimport {Param} from '../../model/param';\nimport {GTSLib} from '../../utils/gts.lib';\nimport {DataModel} from '../../model/dataModel';\nimport {SizeService} from '../../services/resize.service';\nimport {Logger} from '../../utils/logger';\n\n@Component({\n  selector: 'warpview-datagrid',\n  templateUrl: './warp-view-datagrid.component.html',\n  styleUrls: ['./warp-view-datagrid.component.scss'],\n  encapsulation: ViewEncapsulation.ShadowDom\n})\nexport class WarpViewDatagridComponent extends WarpViewComponent implements OnInit {\n\n\n  @Input('elemsCount') elemsCount = 15;\n\n  // tslint:disable-next-line:variable-name\n  _tabularData: { name: string, values: any[], headers: string[] }[] = [];\n\n  constructor(\n    public el: ElementRef,\n    public renderer: Renderer2,\n    public sizeService: SizeService,\n    public ngZone: NgZone\n  ) {\n    super(el, renderer, sizeService, ngZone);\n    this.LOG = new Logger(WarpViewDatagridComponent, this._debug);\n  }\n\n  ngOnInit() {\n    this.drawChart();\n  }\n\n  update(options: Param): void {\n    this.drawChart();\n  }\n\n  private drawChart() {\n    this.loading = false;\n    this.chartDraw.emit();\n    if (!this.initChart(this.el)) {\n      return;\n    }\n  }\n\n  private getHeaderParam(i: number, j: number, key: string, def: string): string {\n    return this._data.params && this._data.params[i] && this._data.params[i][key] && this._data.params[i][key][j]\n      ? this._data.params[i][key][j]\n      : this._data.globalParams && this._data.globalParams[key] && this._data.globalParams[key][j]\n        ? this._data.globalParams[key][j]\n        : def;\n  }\n\n  protected convert(data: DataModel): any[] {\n    if (GTSLib.isArray(data.data)) {\n      const dataList = GTSLib.flatDeep(this._data.data as any[]);\n      this.LOG.debug(['convert', 'isArray'], dataList);\n      if (data.data.length > 0 && GTSLib.isGts(dataList[0])) {\n        this._tabularData = this.parseData(dataList);\n      } else {\n        this._tabularData = this.parseCustomData(dataList);\n      }\n    } else {\n      this._tabularData = this.parseCustomData([data.data as any]);\n    }\n    return [];\n  }\n\n  private parseCustomData(data: any[]): { name: string, values: any[], headers: string[] }[] {\n    const flatData: { name: string, values: any[], headers: string[] }[] = [];\n    data.forEach(d => {\n      const dataSet: { name: string, values: any[], headers: string[] } = {\n        name: d.title || '',\n        values: d.rows,\n        headers: d.columns,\n      };\n      flatData.push(dataSet);\n    });\n    this.LOG.debug(['parseCustomData', 'flatData'], flatData);\n    return flatData;\n  }\n\n  protected parseData(data: any[]): { name: string, values: any[], headers: string[] }[] {\n    const flatData: { name: string, values: any[], headers: string[] }[] = [];\n    this.LOG.debug(['parseData'], data);\n    data.forEach((d, i) => {\n      const dataSet: { name: string, values: any[], headers: string[] } = {\n        name: '',\n        values: [],\n        headers: []\n      };\n      if (GTSLib.isGts(d)) {\n        this.LOG.debug(['parseData', 'isGts'], d);\n        dataSet.name = GTSLib.serializeGtsMetadata(d);\n        dataSet.values = d.v.map(v => [this.formatDate(v[0])].concat(v.slice(1, v.length)));\n      } else {\n        this.LOG.debug(['parseData', 'is not a Gts'], d);\n        dataSet.values = GTSLib.isArray(d) ? d : [d];\n      }\n      dataSet.headers = [this.getHeaderParam(i, 0, 'headers', 'Date')];\n      if (d.v && d.v.length > 0 && d.v[0].length > 2) {\n        dataSet.headers.push(this.getHeaderParam(i, 1, 'headers', 'Latitude'));\n      }\n      if (d.v && d.v.length > 0 && d.v[0].length > 3) {\n        dataSet.headers.push(this.getHeaderParam(i, 2, 'headers', 'Longitude'));\n      }\n      if (d.v && d.v.length > 0 && d.v[0].length > 4) {\n        dataSet.headers.push(this.getHeaderParam(i, 3, 'headers', 'Elevation'));\n      }\n      if (d.v && d.v.length > 0) {\n        dataSet.headers.push(this.getHeaderParam(i, d.v[0].length - 1, 'headers', 'Value'));\n      }\n      if (dataSet.values.length > 0) {\n        flatData.push(dataSet);\n      }\n    });\n    this.LOG.debug(['parseData', 'flatData'], flatData, this._options.timeMode);\n    return flatData;\n  }\n\n  formatDate(date: number): string {\n    return this._options.timeMode === 'date' ? GTSLib.toISOString(date, this.divider, this._options.timeZone) : date.toString();\n  }\n}\n","/*\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */\n\nimport {Component, Input, OnInit, ViewEncapsulation} from '@angular/core';\nimport {Logger} from '../../../utils/logger';\nimport {Param} from '../../../model/param';\nimport {ChartLib} from '../../../utils/chart-lib';\nimport deepEqual from 'deep-equal';\nimport {GTSLib} from '../../../utils/gts.lib';\n\n@Component({\n  selector: 'warpview-paginable',\n  templateUrl: './warp-view-paginable.component.html',\n  styleUrls: ['./warp-view-paginable.component.scss'],\n  encapsulation: ViewEncapsulation.ShadowDom\n})\nexport class WarpViewPaginableComponent implements OnInit {\n  constructor() {\n    this.LOG = new Logger(WarpViewPaginableComponent, this.debug);\n  }\n\n  @Input('debug') set debug(debug: boolean) {\n    this._debug = debug;\n    this.LOG.setDebug(debug);\n  }\n\n  get debug() {\n    return this._debug;\n  }\n\n  @Input('options') set options(options: Param) {\n    if (!deepEqual(options, this._options)) {\n      this.drawGridData();\n    }\n  }\n\n  @Input('data') set data(data: { name: string, values: any[], headers: string[] }) {\n    if (data) {\n      this._data = data;\n      this.drawGridData();\n    }\n  }\n\n  @Input('elemsCount') elemsCount = 15;\n  @Input('windowed') windowed = 5;\n\n  page = 0;\n  pages: number[] = [];\n  // tslint:disable-next-line:variable-name\n  _data: { name: string, values: any[], headers: string[] };\n  displayedValues: any[] = [];\n  private LOG: Logger;\n  // tslint:disable-next-line:variable-name\n  private _debug = false;\n  // tslint:disable-next-line:variable-name\n  private _options: Param = {\n    ...new Param(), ...{\n      timeMode: 'date',\n      timeZone: 'UTC',\n      timeUnit: 'us',\n      bounds: {}\n    }\n  };\n\n  goto(page: number) {\n    this.page = page;\n    this.drawGridData();\n  }\n\n  next() {\n    this.page = Math.min(this.page + 1, this._data.values.length - 1);\n    this.drawGridData();\n  }\n\n  prev() {\n    this.page = Math.max(this.page - 1, 0);\n    this.drawGridData();\n  }\n\n  private drawGridData() {\n    this._options = ChartLib.mergeDeep(this._options, this.options) as Param;\n    this.LOG.debug(['drawGridData', '_options'], this._options);\n    if (!this._data) {\n      return;\n    }\n    this.pages = [];\n    for (let i = 0; i < (this._data.values || [] ).length / this.elemsCount; i++) {\n      this.pages.push(i);\n    }\n    this.displayedValues = (this._data.values || [] ).slice(\n      Math.max(0, this.elemsCount * this.page),\n      Math.min(this.elemsCount * (this.page + 1), (this._data.values || [] ).length)\n    );\n    this.LOG.debug(['drawGridData', '_data'], this._data);\n  }\n\n  decodeURIComponent(str: string): string {\n    return decodeURIComponent(str);\n  }\n\n  ngOnInit() {\n    this.drawGridData();\n  }\n\n  formatLabel(name: string) {\n    return GTSLib.formatLabel(name);\n  }\n}\n","/*\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */\n\nimport {Component, ElementRef, NgZone, OnDestroy, OnInit, Renderer2, ViewChild, ViewEncapsulation} from '@angular/core';\nimport {WarpViewComponent} from '../warp-view-component';\nimport {Param} from '../../model/param';\nimport {ChartLib} from '../../utils/chart-lib';\nimport {GTSLib} from '../../utils/gts.lib';\nimport {DataModel} from '../../model/dataModel';\nimport {SizeService} from '../../services/resize.service';\nimport {Logger} from '../../utils/logger';\nimport fitty, {FittyInstance} from 'fitty';\nimport moment from 'moment-timezone';\n\n/**\n *\n */\n@Component({\n  selector: 'warpview-display',\n  templateUrl: './warp-view-display.component.html',\n  styleUrls: ['./warp-view-display.component.scss'],\n  encapsulation: ViewEncapsulation.ShadowDom\n})\nexport class WarpViewDisplayComponent extends WarpViewComponent implements OnInit, OnDestroy {\n  @ViewChild('wrapper', {static: true}) wrapper: ElementRef;\n  toDisplay = '';\n  defOptions = {\n    timeMode: 'custom'\n  } as Param;\n\n  private fitties: FittyInstance;\n  private timer;\n\n  constructor(\n    public el: ElementRef,\n    public renderer: Renderer2,\n    public sizeService: SizeService,\n    public ngZone: NgZone\n  ) {\n    super(el, renderer, sizeService, ngZone);\n    this.LOG = new Logger(WarpViewDisplayComponent, this._debug);\n  }\n\n  ngOnInit() {\n    this.drawChart();\n  }\n\n  ngOnDestroy(): void {\n    if (this.timer) {\n      clearInterval(this.timer);\n    }\n  }\n\n  update(options: Param, refresh: boolean): void {\n    this.drawChart();\n    this.flexFont();\n  }\n\n  private drawChart() {\n    this.LOG.debug(['drawChart'], this._options, this.defOptions);\n    this.initChart(this.el);\n    this._options = ChartLib.mergeDeep(this.defOptions, this._options);\n    this.LOG.debug(['drawChart', 'afterInit'], this._options, this.defOptions, this.height);\n    this.LOG.debug(['drawChart'], this._data, this.toDisplay);\n    this.flexFont();\n    this.chartDraw.emit();\n  }\n\n  protected convert(data: DataModel): any[] {\n    this._options = ChartLib.mergeDeep(this.defOptions, this._options);\n    this.LOG.debug(['convert'], this._options.timeMode);\n    let display: string;\n    if (this._data.data) {\n      display = GTSLib.isArray(this._data.data) ? this._data.data[0] : this._data.data;\n    } else {\n      display = GTSLib.isArray(this._data) ? this._data[0] : this._data;\n    }\n    switch (this._options.timeMode) {\n      case 'date':\n        this.toDisplay = GTSLib.toISOString(parseInt(display, 10), this.divider, this._options.timeZone);\n        break;\n      case 'duration':\n        const start = GTSLib.toISOString(parseInt(display, 10), this.divider, this._options.timeZone);\n        this.displayDuration(moment(start));\n        break;\n      case 'custom':\n      case 'timestamp':\n        this.toDisplay = display;\n    }\n    return [];\n  }\n\n  getStyle() {\n    if (!this._options) {\n      return {};\n    } else {\n      const style: any = {'background-color': this._options.bgColor || 'transparent'};\n      if (this._options.fontColor) {\n        style.color = this._options.fontColor;\n      }\n      return style;\n    }\n  }\n\n  flexFont() {\n    if (!!this.wrapper) {\n      this.LOG.debug(['flexFont'], this.height);\n      if (this.fitties) {\n        this.fitties.unsubscribe();\n      }\n      this.fitties = fitty(this.wrapper.nativeElement, {\n        maxSize: (this.el.nativeElement as HTMLElement).parentElement.clientHeight * 0.80,\n        minSize: 14\n      });\n      this.LOG.debug(['flexFont'], 'ok', (this.el.nativeElement as HTMLElement).parentElement.clientHeight);\n      this.fitties.fit();\n      this.loading = false;\n    }\n  }\n\n  private displayDuration(start: any) {\n    this.timer = setInterval(() => {\n      const now = moment();\n      this.toDisplay = moment.duration(start.diff(now)).humanize(true);\n    }, 1000);\n  }\n}\n","/*\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */\n\nimport {AfterViewInit, Component, ElementRef, HostListener, NgZone, Renderer2, ViewEncapsulation} from '@angular/core';\nimport {WarpViewComponent} from '../warp-view-component';\nimport {Param} from '../../model/param';\nimport moment from 'moment';\nimport {GTSLib} from '../../utils/gts.lib';\nimport {ColorLib} from '../../utils/color-lib';\nimport {DataModel} from '../../model/dataModel';\nimport {SizeService} from '../../services/resize.service';\nimport {Logger} from '../../utils/logger';\n\n/**\n *\n */\n@Component({\n  selector: 'warpview-drill-down',\n  templateUrl: './warp-view-drill-down.component.html',\n  styleUrls: ['./warp-view-drill-down.component.scss'],\n  encapsulation: ViewEncapsulation.ShadowDom\n})\nexport class WarpViewDrillDownComponent extends WarpViewComponent implements AfterViewInit {\n\n  heatMapData: any;\n  private parentWidth = -1;\n  private resizeTimer;\n\n  constructor(\n    public el: ElementRef,\n    public renderer: Renderer2,\n    public sizeService: SizeService,\n    public ngZone: NgZone\n  ) {\n    super(el, renderer, sizeService, ngZone);\n    this.LOG = new Logger(WarpViewDrillDownComponent, this._debug);\n  }\n\n  ngAfterViewInit() {\n    this.drawChart();\n  }\n\n  update(options: Param, refresh: boolean): void {\n    this.drawChart();\n  }\n\n  @HostListener('window:resize')\n  onResize() {\n    if (this.el.nativeElement.parentElement.clientWidth !== this.parentWidth || this.parentWidth <= 0) {\n      this.parentWidth = this.el.nativeElement.parentElement.clientWidth;\n      clearTimeout(this.resizeTimer);\n      this.resizeTimer = setTimeout(() => {\n        if (this.el.nativeElement.parentElement.clientWidth > 0) {\n          this.LOG.debug(['onResize'], this.el.nativeElement.parentElement.clientWidth);\n          this.drawChart();\n        } else {\n          this.onResize();\n        }\n      }, 150);\n    }\n  }\n\n  private drawChart() {\n    this.loading = false;\n    this.chartDraw.emit();\n    if (!this.initChart(this.el)) {\n      return;\n    }\n  }\n\n  protected convert(data: DataModel): any[] {\n    const dataList = this._data.data as any[];\n    this.heatMapData = this.parseData(GTSLib.flatDeep(dataList));\n    return [];\n  }\n\n  private parseData(dataList: any[]) {\n    const details = [];\n    const values = [];\n    const dates = [];\n    const data = {};\n    const reducer = (accumulator, currentValue) => accumulator + parseInt(currentValue, 10);\n    this.LOG.debug(['parseData'], dataList);\n    dataList.forEach((gts, i) => {\n      const name = GTSLib.serializeGtsMetadata(gts);\n      gts.v.forEach(v => {\n        const refDate = moment.utc(v[0] / 1000).startOf('day').toISOString();\n        if (!data[refDate]) {\n          data[refDate] = [];\n        }\n        if (!values[refDate]) {\n          values[refDate] = [];\n        }\n        dates.push(v[0] / 1000);\n        values[refDate].push(v[v.length - 1]);\n        data[refDate].push({\n          name,\n          date: v[0] / 1000,\n          value: v[v.length - 1],\n          color: ColorLib.getColor(i, this._options.scheme),\n          id: i\n        });\n      });\n    });\n    Object.keys(data).forEach((d: string) => {\n      details.push({\n        date: moment.utc(d),\n        total: values[d].reduce(reducer),\n        details: data[d],\n        summary: []\n      });\n    });\n    return details;\n  }\n}\n","/*\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */\n\nimport {Moment} from 'moment';\n\n/**\n *\n */\nexport class Datum {\n  date: Moment;\n  summary?: Summary[];\n  total?: number;\n  details?: Detail[];\n}\n\n/**\n *\n */\nexport class Summary {\n  color?: string;\n  id?: number;\n  name: string;\n  total: number;\n  date?: Moment;\n}\n\n/**\n *\n */\nexport class Detail {\n  color?: string;\n  date: number;\n  id: number;\n  name: string;\n  value: number;\n}\n","/*\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */\nimport {AfterViewInit, Component, ElementRef, EventEmitter, HostListener, Input, Output, ViewChild, ViewEncapsulation} from '@angular/core';\nimport {Logger} from '../../../utils/logger';\nimport {Datum, Detail, Summary} from '../model/datum';\nimport {ChartLib} from '../../../utils/chart-lib';\nimport {easeLinear, max, range, scaleBand, scaleLinear, Selection, sum, timeDays} from 'd3';\nimport {event, select} from 'd3-selection';\nimport {ColorLib} from '../../../utils/color-lib';\nimport {GTSLib} from '../../../utils/gts.lib';\nimport moment, {Moment} from 'moment';\n\n@Component({\n  selector: 'calendar-heatmap',\n  templateUrl: './calendar-heatmap.component.html',\n  styleUrls: ['./calendar-heatmap.component.scss'],\n  encapsulation: ViewEncapsulation.ShadowDom\n})\nexport class CalendarHeatmapComponent implements AfterViewInit {\n\n  @Input('debug') set debug(debug: boolean) {\n    this._debug = debug;\n    this.LOG.setDebug(debug);\n  }\n\n  get debug() {\n    return this._debug;\n  }\n\n  @Input('data') set data(data: Datum[]) {\n    this.LOG.debug(['data'], data);\n    if (data) {\n      this._data = data;\n      this.calculateDimensions();\n    }\n  }\n\n  get data(): Datum[] {\n    return this._data;\n  }\n\n  @Input('minColor') set minColor(minColor: string) {\n    this._minColor = minColor;\n    this.calculateDimensions();\n  }\n\n  get minColor() {\n    return this._minColor;\n  }\n\n  @Input('maxColor') set maxColor(maxColor: string) {\n    this._maxColor = maxColor;\n    this.calculateDimensions();\n  }\n\n  get maxColor() {\n    return this._maxColor;\n  }\n\n  private static DEF_MIN_COLOR = '#ffffff';\n  private static DEF_MAX_COLOR = '#333333';\n\n  constructor(private el: ElementRef) {\n    this.LOG = new Logger(CalendarHeatmapComponent, this.debug);\n  }\n\n\n  @ViewChild('chart', {static: true}) div: ElementRef;\n\n  @Input('width') width = ChartLib.DEFAULT_WIDTH;\n  @Input('height') height = ChartLib.DEFAULT_HEIGHT;\n  @Input('overview') overview = 'global';\n\n  @Output('handler') handler = new EventEmitter<any>();\n  @Output('change') change = new EventEmitter<any>();\n\n  private LOG: Logger;\n  // tslint:disable-next-line:variable-name\n  private _data: Datum[];\n  // tslint:disable-next-line:variable-name\n  private _debug = false;\n  // tslint:disable-next-line:variable-name\n  private _minColor: string = CalendarHeatmapComponent.DEF_MIN_COLOR;\n  // tslint:disable-next-line:variable-name\n  private _maxColor: string = CalendarHeatmapComponent.DEF_MAX_COLOR;\n// Defaults\n  private gutter = 5;\n  private gWidth = 1000;\n  private gHeight = 200;\n  private itemSize = 10;\n  private labelPadding = 40;\n  private transitionDuration = 250;\n  private inTransition = false;\n  // Tooltip defaults\n  private tooltipWidth = 450;\n  private tooltipPadding = 15;\n  // Overview defaults\n  private history = ['global'];\n  private selected: Datum = new Datum();\n  // D3 related variables\n  private svg: Selection<SVGElement, {}, null, undefined>;\n  private items: Selection<SVGElement, {}, null, undefined>;\n  private labels: Selection<SVGElement, {}, null, undefined>;\n  private buttons: Selection<SVGElement, {}, null, undefined>;\n  private tooltip: Selection<HTMLDivElement, {}, null, undefined>;\n  private parentWidth = -1;\n  private chart: HTMLElement;\n  private resizeTimer;\n\n  static getNumberOfWeeks(): number {\n    const dayIndex = Math.round((+moment.utc() - +moment.utc().subtract(1, 'year').startOf('week')) / 86400000);\n    return Math.trunc(dayIndex / 7) + 1;\n  }\n\n  @HostListener('window:resize')\n  onResize() {\n    if (this.el.nativeElement.parentElement.clientWidth !== this.parentWidth) {\n      this.calculateDimensions();\n    }\n  }\n\n  ngAfterViewInit() {\n    this.chart = this.div.nativeElement as HTMLElement;\n    // Initialize svg element\n    this.svg = select(this.chart).append('svg').attr('class', 'svg');\n    // Initialize main svg elements\n    this.items = this.svg.append('g');\n    this.labels = this.svg.append('g');\n    this.buttons = this.svg.append('g');\n    // Add tooltip to the same element as main svg\n    this.tooltip = select(this.chart)\n      .append('div')\n      .attr('class', 'heatmap-tooltip')\n      .style('opacity', 0);\n    // Calculate chart dimensions\n    this.calculateDimensions();\n    //  this.drawChart();\n  }\n\n  calculateDimensions() {\n    clearTimeout(this.resizeTimer);\n    this.resizeTimer = setTimeout(() => {\n      if (this.el.nativeElement.parentElement.clientWidth !== 0) {\n        this.gWidth = this.chart.clientWidth < 1000 ? 1000 : this.chart.clientWidth;\n        this.itemSize = ((this.gWidth - this.labelPadding) / CalendarHeatmapComponent.getNumberOfWeeks() - this.gutter);\n        this.gHeight = this.labelPadding + 7 * (this.itemSize + this.gutter);\n        this.svg.attr('width', this.gWidth).attr('height', this.gHeight);\n        this.LOG.debug(['calculateDimensions'], this._data);\n        if (!!this._data && !!this._data[0] && !!this._data[0].summary) {\n          this.drawChart();\n        }\n      } else {\n        this.calculateDimensions();\n      }\n    }, 250);\n  }\n\n\n  private groupBy(xs, key) {\n    return xs.reduce((rv, x) => {\n      (rv[x[key]] = rv[x[key]] || []).push(x);\n      return rv;\n    }, {});\n  }\n\n  updateDataSummary() {\n    // Get daily summary if that was not provided\n    if (!this._data[0].summary) {\n      this._data.map((d: Datum) => {\n        const summary = d.details.reduce((uniques: any, project: any) => {\n          if (!uniques[project.name]) {\n            uniques[project.name] = {value: project.value};\n          } else {\n            uniques[project.name].value += project.value;\n          }\n          return uniques;\n        }, {});\n        const unsortedSummary = Object.keys(summary).map((key) => {\n          return {\n            name: key,\n            total: summary[key].value\n          };\n        });\n        d.summary = unsortedSummary.sort((a, b) => {\n          return b.total - a.total;\n        });\n        return d;\n      });\n    }\n  }\n\n  drawChart() {\n    if (!this.svg || !this._data) {\n      return;\n    }\n    this.LOG.debug(['drawChart'], [this.overview, this.selected]);\n    switch (this.overview) {\n      case 'global':\n        this.drawGlobalOverview();\n        this.change.emit({\n          overview: this.overview,\n          start: moment(this._data[0].date),\n          end: moment(this._data[this._data.length - 1].date),\n        });\n        break;\n      case 'year':\n        this.drawYearOverview();\n        this.change.emit({\n          overview: this.overview,\n          start: moment(this.selected.date).startOf('year'),\n          end: moment(this.selected.date).endOf('year'),\n        });\n        break;\n      case 'month':\n        this.drawMonthOverview();\n        this.change.emit({\n          overview: this.overview,\n          start: moment(this.selected.date).startOf('month'),\n          end: moment(this.selected.date).endOf('month'),\n        });\n        break;\n      case 'week':\n        this.drawWeekOverview();\n        this.change.emit({\n          overview: this.overview,\n          start: moment(this.selected.date).startOf('week'),\n          end: moment(this.selected.date).endOf('week'),\n        });\n        break;\n      case 'day':\n        this.drawDayOverview();\n        this.change.emit({\n          overview: this.overview,\n          start: moment(this.selected.date).startOf('day'),\n          end: moment(this.selected.date).endOf('day'),\n        });\n        break;\n      default:\n        break;\n    }\n  }\n\n  drawGlobalOverview() {\n    // Add current overview to the history\n    if (this.history[this.history.length - 1] !== this.overview) {\n      this.history.push(this.overview);\n    }\n    // Define start and end of the dataset\n    const startPeriod: Moment = moment.utc(this._data[0].date.startOf('y'));\n    const endPeriod: Moment = moment.utc(this._data[this._data.length - 1].date.endOf('y'));\n    // Define array of years and total values\n    const yData: Datum[] = this._data.filter((d: Datum) => d.date.isBetween(startPeriod, endPeriod, null, '[]'));\n    yData.forEach((d: Datum) => {\n      const summary: Summary[] = [];\n      const group = this.groupBy(d.details, 'name');\n      Object.keys(group).forEach(k => {\n        summary.push({\n          name: k,\n          total: group[k].reduce((acc, o) => {\n            return acc + o.value;\n          }, 0),\n          color: group[k][0].color,\n          id: group[k][0].id,\n        });\n      });\n      d.summary = summary;\n    });\n    const duration = Math.ceil(moment.duration(endPeriod.diff(startPeriod)).asYears());\n    const scale = [];\n    for (let i = 0; i < duration; i++) {\n      const d = moment.utc().year(startPeriod.year() + i).month(0).date(1).startOf('y');\n      scale.push(d);\n    }\n    let yearData: Datum[] = yData.map((d: Datum) => {\n      const date: Moment = d.date;\n      return {\n        date,\n        total: yData.reduce((prev: number, current: any) => {\n          if ((current.date as Moment).year() === date.year()) {\n            prev += current.total;\n          }\n          return prev;\n        }, 0),\n        summary: (() => {\n          const summary: Summary = yData.reduce((s: any, data: any) => {\n            if ((data.date as Moment).year() === date.year()) {\n              data.summary.forEach(_summary => {\n                if (!s[_summary.name]) {\n                  s[_summary.name] = {\n                    total: _summary.total,\n                    color: _summary.color,\n                  };\n                } else {\n                  s[_summary.name].total += _summary.total;\n                }\n              });\n            }\n            return s;\n          }, {});\n          const unsortedSummary: Summary[] = Object.keys(summary).map((key) => {\n            return {\n              name: key,\n              total: summary[key].total,\n              color: summary[key].color,\n            };\n          });\n          return unsortedSummary.sort((a, b) => b.total - a.total);\n        })(),\n      };\n    });\n    // Calculate max value of all the years in the dataset\n    yearData = GTSLib.cleanArray(yearData);\n    const maxValue = max(yearData, (d: Datum) => d.total);\n    // Define year labels and axis\n    const yearLabels = scale.map((d: Moment) => d);\n    const yearScale = scaleBand()\n      .rangeRound([0, this.gWidth])\n      .padding(0.05)\n      .domain(yearLabels.map((d: Moment) => d.year().toString()));\n\n    const color = scaleLinear<string>()\n      .range([this.minColor || CalendarHeatmapComponent.DEF_MIN_COLOR, this.maxColor || CalendarHeatmapComponent.DEF_MAX_COLOR])\n      .domain([-0.15 * maxValue, maxValue]);\n    // Add global data items to the overview\n    this.items.selectAll('.item-block-year').remove();\n    this.items.selectAll('.item-block-year')\n      .data(yearData)\n      .enter()\n      .append('rect')\n      .attr('class', 'item item-block-year')\n      .attr('width', () => (this.gWidth - this.labelPadding) / yearLabels.length - this.gutter * 5)\n      .attr('height', () => this.gHeight - this.labelPadding)\n      .attr('transform', (d: Datum) => 'translate(' + yearScale((d.date as Moment).year().toString()) + ',' + this.tooltipPadding * 2 + ')')\n      .attr('fill', (d: Datum) => color(d.total) || CalendarHeatmapComponent.DEF_MAX_COLOR)\n      .on('click', (d: Datum) => {\n        if (this.inTransition) {\n          return;\n        }\n        // Set in_transition flag\n        this.inTransition = true;\n        // Set selected date to the one clicked on\n        this.selected = d;\n        // Hide tooltip\n        this.hideTooltip();\n        // Remove all global overview related items and labels\n        this.removeGlobalOverview();\n        // Redraw the chart\n        this.overview = 'year';\n        this.drawChart();\n      })\n      .style('opacity', 0)\n      .on('mouseover', (d: Datum) => {\n        if (this.inTransition) {\n          return;\n        }\n        // Calculate tooltip position\n        let x = yearScale(d.date.year().toString()) + this.tooltipPadding * 2;\n        while (this.gWidth - x < (this.tooltipWidth + this.tooltipPadding * 5)) {\n          x -= 10;\n        }\n        const y = this.tooltipPadding * 4;\n        // Show tooltip\n        this.tooltip.html(this.getTooltip(d))\n          .style('left', x + 'px')\n          .style('top', y + 'px')\n          .transition()\n          .duration(this.transitionDuration / 2)\n          .ease(easeLinear)\n          .style('opacity', 1);\n      })\n      .on('mouseout', () => {\n        if (this.inTransition) {\n          return;\n        }\n        this.hideTooltip();\n      })\n      .transition()\n      .delay((d: any, i: number) => this.transitionDuration * (i + 1) / 10)\n      .duration(() => this.transitionDuration)\n      .ease(easeLinear)\n      .style('opacity', 1)\n      .call((transition: any, callback: any) => {\n        if (transition.empty()) {\n          callback();\n        }\n        let n = 0;\n        transition.each(() => ++n).on('end', function() {\n          if (!--n) {\n            callback.apply(this, arguments);\n          }\n        });\n      }, () => this.inTransition = false);\n    // Add year labels\n    this.labels.selectAll('.label-year').remove();\n    this.labels.selectAll('.label-year')\n      .data(yearLabels)\n      .enter()\n      .append('text')\n      .attr('class', 'label label-year')\n      .attr('font-size', () => Math.floor(this.labelPadding / 3) + 'px')\n      .text((d: Moment) => d.year())\n      .attr('x', (d: Moment) => yearScale(d.year().toString()))\n      .attr('y', this.labelPadding / 2)\n      .on('mouseenter', (yearLabel: Moment) => {\n        if (this.inTransition) {\n          return;\n        }\n        this.items.selectAll('.item-block-year')\n          .transition()\n          .duration(this.transitionDuration)\n          .ease(easeLinear)\n          .style('opacity', (d: Datum) => (d.date.year() === yearLabel.year()) ? 1 : 0.1);\n      })\n      .on('mouseout', () => {\n        if (this.inTransition) {\n          return;\n        }\n        this.items.selectAll('.item-block-year')\n          .transition()\n          .duration(this.transitionDuration)\n          .ease(easeLinear)\n          .style('opacity', 1);\n      })\n      .on('click', () => {\n        if (this.inTransition) {\n          return;\n        }\n        // Set in_transition flag\n        this.inTransition = true;\n        // Set selected year to the one clicked on\n        this.selected = yearData[0];\n        // Hide tooltip\n        this.hideTooltip();\n        // Remove all global overview related items and labels\n        this.removeGlobalOverview();\n        // Redraw the chart\n        this.overview = 'year';\n        this.drawChart();\n      });\n  }\n\n\n  /**\n   * Draw year overview\n   */\n  drawYearOverview() {\n    // Add current overview to the history\n    if (this.history[this.history.length - 1] !== this.overview) {\n      this.history.push(this.overview);\n    }\n    // Define start and end date of the selected year\n    const startOfYear: Moment = moment(this.selected.date).startOf('year');\n    const endOfYear: Moment = moment(this.selected.date).endOf('year');\n    // Filter data down to the selected year\n    let yearData: Datum[] = this._data.filter((d: Datum) => d.date.isBetween(startOfYear, endOfYear, null, '[]'));\n    yearData.forEach((d: Datum) => {\n      const summary: Summary[] = [];\n      const group = this.groupBy(d.details, 'name');\n      Object.keys(group).forEach(k => {\n        summary.push({\n          name: k,\n          total: group[k].reduce((acc, o) => {\n            return acc + o.value;\n          }, 0),\n          color: group[k][0].color,\n          id: group[k][0].id,\n        });\n      });\n      d.summary = summary;\n    });\n    yearData = GTSLib.cleanArray(yearData);\n    // Calculate max value of the year data\n    const maxValue = max(yearData, (d: Datum) => d.total);\n    const color = scaleLinear<string>()\n      .range([this.minColor || CalendarHeatmapComponent.DEF_MIN_COLOR, this.maxColor || CalendarHeatmapComponent.DEF_MAX_COLOR])\n      .domain([-0.15 * maxValue, maxValue]);\n    this.items.selectAll('.item-circle').remove();\n    this.items.selectAll('.item-circle')\n      .data(yearData)\n      .enter()\n      .append('rect')\n      .attr('class', 'item item-circle').style('opacity', 0)\n      .attr('x', (d: Datum) => this.calcItemX(d, startOfYear) + (this.itemSize - this.calcItemSize(d, maxValue)) / 2)\n      .attr('y', (d: Datum) => this.calcItemY(d) + (this.itemSize - this.calcItemSize(d, maxValue)) / 2)\n      .attr('rx', (d: Datum) => this.calcItemSize(d, maxValue))\n      .attr('ry', (d: Datum) => this.calcItemSize(d, maxValue))\n      .attr('width', (d: Datum) => this.calcItemSize(d, maxValue))\n      .attr('height', (d: Datum) => this.calcItemSize(d, maxValue))\n      .attr('fill', (d: Datum) => (d.total > 0) ? color(d.total) : 'transparent')\n      .on('click', (d: Datum) => {\n        if (this.inTransition) {\n          return;\n        }\n        // Don't transition if there is no data to show\n        if (d.total === 0) {\n          return;\n        }\n        this.inTransition = true;\n        // Set selected date to the one clicked on\n        this.selected = d;\n        // Hide tooltip\n        this.hideTooltip();\n        // Remove all year overview related items and labels\n        this.removeYearOverview();\n        // Redraw the chart\n        this.overview = 'day';\n        this.drawChart();\n      })\n      .on('mouseover', (d: Datum) => {\n        if (this.inTransition) {\n          return;\n        }\n        // Pulsating animation\n        const circle = select(event.currentTarget);\n        const repeat = () => {\n          circle.transition()\n            .duration(this.transitionDuration)\n            .ease(easeLinear)\n            .attr('x', (data: Datum) => this.calcItemX(data, startOfYear) - (this.itemSize * 1.1 - this.itemSize) / 2)\n            .attr('y', (data: Datum) => this.calcItemY(data) - (this.itemSize * 1.1 - this.itemSize) / 2)\n            .attr('width', this.itemSize * 1.1)\n            .attr('height', this.itemSize * 1.1)\n            .transition()\n            .duration(this.transitionDuration)\n            .ease(easeLinear)\n            .attr('x', (data: Datum) => this.calcItemX(data, startOfYear) + (this.itemSize - this.calcItemSize(data, maxValue)) / 2)\n            .attr('y', (data: Datum) => this.calcItemY(data) + (this.itemSize - this.calcItemSize(data, maxValue)) / 2)\n            .attr('width', (data: Datum) => this.calcItemSize(data, maxValue))\n            .attr('height', (data: Datum) => this.calcItemSize(data, maxValue))\n            .on('end', repeat);\n        };\n        repeat();\n        // Construct tooltip\n        // Calculate tooltip position\n        let x = this.calcItemX(d, startOfYear) + this.itemSize / 2;\n        if (this.gWidth - x < (this.tooltipWidth + this.tooltipPadding * 3)) {\n          x -= this.tooltipWidth + this.tooltipPadding * 2;\n        }\n        const y = this.calcItemY(d) + this.itemSize / 2;\n        // Show tooltip\n        this.tooltip.html(this.getTooltip(d))\n          .style('left', x + 'px')\n          .style('top', y + 'px')\n          .transition()\n          .duration(this.transitionDuration / 2)\n          .ease(easeLinear)\n          .style('opacity', 1);\n      })\n      .on('mouseout', () => {\n        if (this.inTransition) {\n          return;\n        }\n        // Set circle radius back to what it's supposed to be\n        select(event.currentTarget).transition()\n          .duration(this.transitionDuration / 2)\n          .ease(easeLinear)\n          .attr('x', (d: Datum) => this.calcItemX(d, startOfYear) + (this.itemSize - this.calcItemSize(d, maxValue)) / 2)\n          .attr('y', (d: Datum) => this.calcItemY(d) + (this.itemSize - this.calcItemSize(d, maxValue)) / 2)\n          .attr('width', (d: Datum) => this.calcItemSize(d, maxValue))\n          .attr('height', (d: Datum) => this.calcItemSize(d, maxValue));\n        // Hide tooltip\n        this.hideTooltip();\n      })\n      .transition()\n      .delay(() => (Math.cos(Math.PI * Math.random()) + 1) * this.transitionDuration)\n      .duration(() => this.transitionDuration)\n      .ease(easeLinear)\n      .style('opacity', 1)\n      .call((transition: any, callback: any) => {\n        if (transition.empty()) {\n          callback();\n        }\n        let n = 0;\n        transition.each(() => ++n).on('end', function() {\n          if (!--n) {\n            callback.apply(this, arguments);\n          }\n        });\n      }, () => this.inTransition = false);\n    // Add month labels\n    const duration = Math.ceil(moment.duration(endOfYear.diff(startOfYear)).asMonths());\n    const monthLabels: Moment[] = [];\n    for (let i = 1; i < duration; i++) {\n      monthLabels.push(moment(this.selected.date).month((startOfYear.month() + i) % 12).startOf('month'));\n    }\n    const monthScale = scaleLinear().range([0, this.gWidth]).domain([0, monthLabels.length]);\n    this.labels.selectAll('.label-month').remove();\n    this.labels.selectAll('.label-month')\n      .data(monthLabels)\n      .enter()\n      .append('text')\n      .attr('class', 'label label-month')\n      .attr('font-size', () => Math.floor(this.labelPadding / 3) + 'px')\n      .text((d: Moment) => d.format('MMM'))\n      .attr('x', (d: Moment, i: number) => monthScale(i) + (monthScale(i) - monthScale(i - 1)) / 2)\n      .attr('y', this.labelPadding / 2)\n      .on('mouseenter', (d: Moment) => {\n        if (this.inTransition) {\n          return;\n        }\n        const selectedMonth = moment(d);\n        this.items.selectAll('.item-circle')\n          .transition()\n          .duration(this.transitionDuration)\n          .ease(easeLinear)\n          .style('opacity', (data: Datum) => moment(data.date).isSame(selectedMonth, 'month') ? 1 : 0.1);\n      })\n      .on('mouseout', () => {\n        if (this.inTransition) {\n          return;\n        }\n        this.items.selectAll('.item-circle')\n          .transition()\n          .duration(this.transitionDuration)\n          .ease(easeLinear)\n          .style('opacity', 1);\n      })\n      .on('click', (d: Moment) => {\n        if (this.inTransition) {\n          return;\n        }\n        // Check month data\n        const monthData = this._data.filter((e: Datum) => e.date.isBetween(\n          moment(d).startOf('month'),\n          moment(d).endOf('month'),\n          null, '[]'\n        ));\n        // Don't transition if there is no data to show\n        if (!monthData.length) {\n          return;\n        }\n        // Set selected month to the one clicked on\n        this.selected = {date: d};\n        this.inTransition = true;\n        // Hide tooltip\n        this.hideTooltip();\n        // Remove all year overview related items and labels\n        this.removeYearOverview();\n        // Redraw the chart\n        this.overview = 'month';\n        this.drawChart();\n      });\n\n    // Add day labels\n    const dayLabels: Date[] = timeDays(\n      moment.utc().startOf('week').toDate(),\n      moment.utc().endOf('week').toDate()\n    );\n    const dayScale = scaleBand()\n      .rangeRound([this.labelPadding, this.gHeight])\n      .domain(dayLabels.map((d: Date) => moment.utc(d).weekday().toString()));\n    this.labels.selectAll('.label-day').remove();\n    this.labels.selectAll('.label-day')\n      .data(dayLabels)\n      .enter()\n      .append('text')\n      .attr('class', 'label label-day')\n      .attr('x', this.labelPadding / 3)\n      .attr('y', (d: Date, i: number) => dayScale(i.toString()) + dayScale.bandwidth() / 1.75)\n      .style('text-anchor', 'left')\n      .attr('font-size', () => Math.floor(this.labelPadding / 3) + 'px')\n      .text((d: Date) => moment.utc(d).format('dddd')[0])\n      .on('mouseenter', (d: Date) => {\n        if (this.inTransition) {\n          return;\n        }\n        const selectedDay = moment.utc(d);\n        this.items.selectAll('.item-circle')\n          .transition()\n          .duration(this.transitionDuration)\n          .ease(easeLinear)\n          .style('opacity', (data: Datum) => (moment(data.date).day() === selectedDay.day()) ? 1 : 0.1);\n      })\n      .on('mouseout', () => {\n        if (this.inTransition) {\n          return;\n        }\n        this.items.selectAll('.item-circle')\n          .transition()\n          .duration(this.transitionDuration)\n          .ease(easeLinear)\n          .style('opacity', 1);\n      });\n    // Add button to switch back to previous overview\n    this.drawButton();\n  }\n\n  drawMonthOverview() {\n    // Add current overview to the history\n    if (this.history[this.history.length - 1] !== this.overview) {\n      this.history.push(this.overview);\n    }\n    // Define beginning and end of the month\n    const startOfMonth: Moment = moment(this.selected.date).startOf('month');\n    const endOfMonth: Moment = moment(this.selected.date).endOf('month');\n    // Filter data down to the selected month\n    let monthData: Datum[] = [];\n    this._data.filter((data: Datum) => data.date.isBetween(startOfMonth, endOfMonth, null, '[]'))\n      .map((d: Datum) => {\n        const scale: Datum[] = [];\n        d.details.forEach((det: Detail) => {\n          const date: Moment = moment.utc(det.date);\n          const i = Math.floor(date.hours() / 3);\n          if (!scale[i]) {\n            scale[i] = {\n              date: date.startOf('hour'),\n              total: 0,\n              details: [],\n              summary: []\n            };\n          }\n          scale[i].total += det.value;\n          scale[i].details.push(det);\n        });\n        scale.forEach((s: Datum) => {\n          const group = this.groupBy(s.details, 'name');\n          Object.keys(group).forEach((k: string) => {\n            s.summary.push({\n              name: k,\n              total: sum(group[k], (data: any) => data.total),\n              color: group[k][0].color\n            });\n          });\n        });\n        monthData = monthData.concat(scale);\n      });\n    monthData = GTSLib.cleanArray(monthData);\n    this.LOG.debug(['drawMonthOverview'], [this.overview, this.selected, monthData]);\n    const maxValue: number = max(monthData, (d: any) => d.total);\n    // Define day labels and axis\n    const dayLabels: Date[] = timeDays(\n      moment(this.selected.date).startOf('week').toDate(),\n      moment(this.selected.date).endOf('week').toDate()\n    );\n    const dayScale = scaleBand()\n      .rangeRound([this.labelPadding, this.gHeight])\n      .domain(dayLabels.map((d: Date) => moment.utc(d).weekday().toString()));\n\n    // Define week labels and axis\n    const weekLabels: Moment[] = [startOfMonth];\n    const incWeek = moment(startOfMonth);\n    while (incWeek.week() !== endOfMonth.week()) {\n      weekLabels.push(moment(incWeek.add(1, 'week')));\n    }\n    monthData.forEach((d: Datum) => {\n      const summary = [];\n      const group = this.groupBy(d.details, 'name');\n      Object.keys(group).forEach((k: string) => {\n        summary.push({\n          name: k,\n          total: group[k].reduce((acc, o) => acc + o.value, 0),\n          color: group[k][0].color,\n          id: group[k][0].id,\n        });\n      });\n      d.summary = summary;\n    });\n    const weekScale = scaleBand()\n      .rangeRound([this.labelPadding, this.gWidth])\n      .padding(0.05)\n      .domain(weekLabels.map((weekday) => weekday.week() + ''));\n    const color = scaleLinear<string>()\n      .range([this.minColor || CalendarHeatmapComponent.DEF_MIN_COLOR, this.maxColor || CalendarHeatmapComponent.DEF_MAX_COLOR])\n      .domain([-0.15 * maxValue, maxValue]);\n    // Add month data items to the overview\n    this.items.selectAll('.item-block-month').remove();\n    this.items.selectAll('.item-block-month')\n      .data(monthData)\n      .enter().append('rect')\n      .style('opacity', 0)\n      .attr('class', 'item item-block-month')\n      .attr('y', (d: Datum) => this.calcItemY(d)\n        + (this.itemSize - this.calcItemSize(d, maxValue)) / 2)\n      .attr('x', (d: Datum) => this.calcItemXMonth(d, startOfMonth, weekScale(d.date.week().toString()))\n        + (this.itemSize - this.calcItemSize(d, maxValue)) / 2)\n      .attr('rx', (d: Datum) => this.calcItemSize(d, maxValue))\n      .attr('ry', (d: Datum) => this.calcItemSize(d, maxValue))\n      .attr('width', (d: Datum) => this.calcItemSize(d, maxValue))\n      .attr('height', (d: Datum) => this.calcItemSize(d, maxValue))\n      .attr('fill', (d: Datum) => (d.total > 0) ? color(d.total) : 'transparent')\n      .on('click', (d: Datum) => {\n        if (this.inTransition) {\n          return;\n        }\n        // Don't transition if there is no data to show\n        if (d.total === 0) {\n          return;\n        }\n        this.inTransition = true;\n        // Set selected date to the one clicked on\n        this.selected = d;\n        // Hide tooltip\n        this.hideTooltip();\n        // Remove all month overview related items and labels\n        this.removeMonthOverview();\n        // Redraw the chart\n        this.overview = 'day';\n        this.drawChart();\n      })\n      .on('mouseover', (d: Datum) => {\n        if (this.inTransition) {\n          return;\n        }\n        // Construct tooltip\n        // Calculate tooltip position\n        let x = weekScale(d.date.week().toString()) + this.tooltipPadding;\n        while (this.gWidth - x < (this.tooltipWidth + this.tooltipPadding * 3)) {\n          x -= 10;\n        }\n        const y = dayScale(d.date.weekday().toString()) + this.tooltipPadding;\n        // Show tooltip\n        this.tooltip.html(this.getTooltip(d))\n          .style('left', x + 'px')\n          .style('top', y + 'px')\n          .transition()\n          .duration(this.transitionDuration / 2)\n          .ease(easeLinear)\n          .style('opacity', 1);\n      })\n      .on('mouseout', () => {\n        if (this.inTransition) {\n          return;\n        }\n        this.hideTooltip();\n      })\n      .transition()\n      .delay(() => (Math.cos(Math.PI * Math.random()) + 1) * this.transitionDuration)\n      .duration(() => this.transitionDuration)\n      .ease(easeLinear)\n      .style('opacity', 1)\n      .call((transition: any, callback: any) => {\n        if (transition.empty()) {\n          callback();\n        }\n        let n = 0;\n        transition.each(() => ++n).on('end', function() {\n          if (!--n) {\n            callback.apply(this, arguments);\n          }\n        });\n      }, () => this.inTransition = false);\n    // Add week labels\n    this.labels.selectAll('.label-week').remove();\n    this.labels.selectAll('.label-week')\n      .data(weekLabels)\n      .enter()\n      .append('text')\n      .attr('class', 'label label-week')\n      .attr('font-size', () => Math.floor(this.labelPadding / 3) + 'px')\n      .text((d: Moment) => 'Week ' + d.week())\n      .attr('x', (d: Moment) => weekScale(d.week().toString()))\n      .attr('y', this.labelPadding / 2)\n      .on('mouseenter', (weekday: Moment) => {\n        if (this.inTransition) {\n          return;\n        }\n        this.items.selectAll('.item-block-month')\n          .transition()\n          .duration(this.transitionDuration)\n          .ease(easeLinear)\n          .style('opacity', (d: Datum) => {\n            return (moment(d.date).week() === weekday.week()) ? 1 : 0.1;\n          });\n      })\n      .on('mouseout', () => {\n        if (this.inTransition) {\n          return;\n        }\n        this.items.selectAll('.item-block-month')\n          .transition()\n          .duration(this.transitionDuration)\n          .ease(easeLinear)\n          .style('opacity', 1);\n      })\n      .on('click', (d: Moment) => {\n        if (this.inTransition) {\n          return;\n        }\n        this.inTransition = true;\n        // Set selected month to the one clicked on\n        this.selected = {date: d};\n        // Hide tooltip\n        this.hideTooltip();\n        // Remove all year overview related items and labels\n        this.removeMonthOverview();\n        // Redraw the chart\n        this.overview = 'week';\n        this.drawChart();\n      });\n    // Add day labels\n    this.labels.selectAll('.label-day').remove();\n    this.labels.selectAll('.label-day')\n      .data(dayLabels)\n      .enter()\n      .append('text')\n      .attr('class', 'label label-day')\n      .attr('x', this.labelPadding / 3)\n      .attr('y', (d: Date, i: any) => dayScale(i) + dayScale.bandwidth() / 1.75)\n      .style('text-anchor', 'left')\n      .attr('font-size', () => Math.floor(this.labelPadding / 3) + 'px')\n      .text((d: Date) => moment.utc(d).format('dddd')[0])\n      .on('mouseenter', (d: Date) => {\n        if (this.inTransition) {\n          return;\n        }\n        const selectedDay = moment.utc(d);\n        this.items.selectAll('.item-block-month')\n          .transition()\n          .duration(this.transitionDuration)\n          .ease(easeLinear)\n          .style('opacity', (data: Datum) => (moment(data.date).day() === selectedDay.day()) ? 1 : 0.1);\n      })\n      .on('mouseout', () => {\n        if (this.inTransition) {\n          return;\n        }\n        this.items.selectAll('.item-block-month')\n          .transition()\n          .duration(this.transitionDuration)\n          .ease(easeLinear)\n          .style('opacity', 1);\n      });\n    // Add button to switch back to previous overview\n    this.drawButton();\n  }\n\n  drawWeekOverview() {\n    // Add current overview to the history\n    if (this.history[this.history.length - 1] !== this.overview) {\n      this.history.push(this.overview);\n    }\n    // Define beginning and end of the week\n    const startOfWeek: Moment = moment(this.selected.date).startOf('week');\n    const endOfWeek: Moment = moment(this.selected.date).endOf('week');\n    // Filter data down to the selected week\n    let weekData: Datum[] = [];\n    this._data.filter((d: Datum) => {\n      return d.date.isBetween(startOfWeek, endOfWeek, null, '[]');\n    }).map((d: Datum) => {\n      const scale: Datum[] = [];\n      d.details.forEach((det: Detail) => {\n        const date: Moment = moment(det.date);\n        const i = date.hours();\n        if (!scale[i]) {\n          scale[i] = {\n            date: date.startOf('hour'),\n            total: 0,\n            details: [],\n            summary: []\n          };\n        }\n        scale[i].total += det.value;\n        scale[i].details.push(det);\n      });\n      scale.forEach(s => {\n        const group = this.groupBy(s.details, 'name');\n        Object.keys(group).forEach(k =>\n          s.summary.push({\n            name: k,\n            total: sum(group[k], (data: any) => data.value),\n            color: group[k][0].color\n          }));\n      });\n      weekData = weekData.concat(scale);\n    });\n    weekData = GTSLib.cleanArray(weekData);\n    const maxValue: number = max(weekData, (d: Datum) => d.total);\n    // Define day labels and axis\n    const dayLabels = timeDays(moment.utc().startOf('week').toDate(), moment.utc().endOf('week').toDate());\n    const dayScale = scaleBand()\n      .rangeRound([this.labelPadding, this.gHeight])\n      .domain(dayLabels.map((d: Date) => moment.utc(d).weekday().toString()));\n    // Define hours labels and axis\n    const hoursLabels: string[] = [];\n    range(0, 24).forEach(h => hoursLabels.push(moment.utc().hours(h).startOf('hour').format('HH:mm')));\n    const hourScale = scaleBand().rangeRound([this.labelPadding, this.gWidth]).padding(0.01).domain(hoursLabels);\n    const color = scaleLinear<string>()\n      .range([this.minColor || CalendarHeatmapComponent.DEF_MIN_COLOR, this.maxColor || CalendarHeatmapComponent.DEF_MAX_COLOR])\n      .domain([-0.15 * maxValue, maxValue]);\n    // Add week data items to the overview\n    this.items.selectAll('.item-block-week').remove();\n    this.items.selectAll('.item-block-week')\n      .data(weekData)\n      .enter()\n      .append('rect')\n      .style('opacity', 0)\n      .attr('class', 'item item-block-week')\n      .attr('y', (d: Datum) => this.calcItemY(d)\n        + (this.itemSize - this.calcItemSize(d, maxValue)) / 2)\n      .attr('x', (d: Datum) => this.gutter\n        + hourScale(moment(d.date).startOf('hour').format('HH:mm'))\n        + (this.itemSize - this.calcItemSize(d, maxValue)) / 2)\n      .attr('rx', (d: Datum) => this.calcItemSize(d, maxValue))\n      .attr('ry', (d: Datum) => this.calcItemSize(d, maxValue))\n      .attr('width', (d: Datum) => this.calcItemSize(d, maxValue))\n      .attr('height', (d: Datum) => this.calcItemSize(d, maxValue))\n      .attr('fill', (d: Datum) => (d.total > 0) ? color(d.total) : 'transparent')\n      .on('click', (d: Datum) => {\n        if (this.inTransition) {\n          return;\n        }\n        // Don't transition if there is no data to show\n        if (d.total === 0) {\n          return;\n        }\n        this.inTransition = true;\n        // Set selected date to the one clicked on\n        this.selected = d;\n        // Hide tooltip\n        this.hideTooltip();\n        // Remove all week overview related items and labels\n        this.removeWeekOverview();\n        // Redraw the chart\n        this.overview = 'day';\n        this.drawChart();\n      }).on('mouseover', (d: Datum) => {\n      if (this.inTransition) {\n        return;\n      }\n      // Calculate tooltip position\n      let x = hourScale(moment(d.date).startOf('hour').format('HH:mm')) + this.tooltipPadding;\n      while (this.gWidth - x < (this.tooltipWidth + this.tooltipPadding * 3)) {\n        x -= 10;\n      }\n      const y = dayScale(d.date.weekday().toString()) + this.tooltipPadding;\n      // Show tooltip\n      this.tooltip.html(this.getTooltip(d))\n        .style('left', x + 'px')\n        .style('top', y + 'px')\n        .transition()\n        .duration(this.transitionDuration / 2)\n        .ease(easeLinear)\n        .style('opacity', 1);\n    })\n      .on('mouseout', () => {\n        if (this.inTransition) {\n          return;\n        }\n        this.hideTooltip();\n      })\n      .transition()\n      .delay(() => (Math.cos(Math.PI * Math.random()) + 1) * this.transitionDuration)\n      .duration(() => this.transitionDuration)\n      .ease(easeLinear)\n      .style('opacity', 1)\n      .call((transition: any, callback: any) => {\n        if (transition.empty()) {\n          callback();\n        }\n        let n = 0;\n        transition.each(() => ++n).on('end', function() {\n          if (!--n) {\n            callback.apply(this, arguments);\n          }\n        });\n      }, () => this.inTransition = false);\n\n    // Add week labels\n    this.labels.selectAll('.label-week').remove();\n    this.labels.selectAll('.label-week')\n      .data(hoursLabels)\n      .enter()\n      .append('text')\n      .attr('class', 'label label-week')\n      .attr('font-size', () => Math.floor(this.labelPadding / 3) + 'px')\n      .text((d: string) => d)\n      .attr('x', (d: string) => hourScale(d))\n      .attr('y', this.labelPadding / 2)\n      .on('mouseenter', (hour: string) => {\n        if (this.inTransition) {\n          return;\n        }\n        this.items.selectAll('.item-block-week')\n          .transition()\n          .duration(this.transitionDuration)\n          .ease(easeLinear)\n          .style('opacity', (d: Datum) => (moment(d.date).startOf('hour').format('HH:mm') === hour) ? 1 : 0.1);\n      })\n      .on('mouseout', () => {\n        if (this.inTransition) {\n          return;\n        }\n        this.items.selectAll('.item-block-week')\n          .transition()\n          .duration(this.transitionDuration)\n          .ease(easeLinear)\n          .style('opacity', 1);\n      });\n    // Add day labels\n    this.labels.selectAll('.label-day').remove();\n    this.labels.selectAll('.label-day')\n      .data(dayLabels)\n      .enter()\n      .append('text')\n      .attr('class', 'label label-day')\n      .attr('x', this.labelPadding / 3)\n      .attr('y', (d: Date, i: number) => dayScale(i.toString()) + dayScale.bandwidth() / 1.75)\n      .style('text-anchor', 'left')\n      .attr('font-size', () => Math.floor(this.labelPadding / 3) + 'px')\n      .text((d: Date) => moment.utc(d).format('dddd')[0])\n      .on('mouseenter', (d: Date) => {\n        if (this.inTransition) {\n          return;\n        }\n        const selectedDay = moment.utc(d);\n        this.items.selectAll('.item-block-week')\n          .transition()\n          .duration(this.transitionDuration)\n          .ease(easeLinear)\n          .style('opacity', (data: Datum) => (moment(data.date).day() === selectedDay.day()) ? 1 : 0.1);\n      })\n      .on('mouseout', () => {\n        if (this.inTransition) {\n          return;\n        }\n        this.items.selectAll('.item-block-week')\n          .transition()\n          .duration(this.transitionDuration)\n          .ease(easeLinear)\n          .style('opacity', 1);\n      });\n\n    // Add button to switch back to previous overview\n    this.drawButton();\n  }\n\n  drawDayOverview() {\n    // Add current overview to the history\n    if (this.history[this.history.length - 1] !== this.overview) {\n      this.history.push(this.overview);\n    }\n    // Initialize selected date to today if it was not set\n    if (!Object.keys(this.selected).length) {\n      this.selected = this._data[this._data.length - 1];\n    }\n    const startOfDay: Moment = moment(this.selected.date).startOf('day');\n    const endOfDay: Moment = moment(this.selected.date).endOf('day');\n    // Filter data down to the selected month\n    let dayData: Datum[] = [];\n    this._data.filter((d: Datum) => {\n      return d.date.isBetween(startOfDay, endOfDay, null, '[]');\n    }).map((d: Datum) => {\n      const scale = [];\n      d.details.forEach((det: Detail) => {\n        const date: Moment = moment(det.date);\n        const i = date.hours();\n        if (!scale[i]) {\n          scale[i] = {\n            date: date.startOf('hour'),\n            total: 0,\n            details: [],\n            summary: []\n          };\n        }\n        scale[i].total += det.value;\n        scale[i].details.push(det);\n      });\n      scale.forEach(s => {\n        const group = this.groupBy(s.details, 'name');\n        Object.keys(group).forEach(k => {\n          s.summary.push({\n            name: k,\n            total: sum(group[k], (item: any) => item.value),\n            color: group[k][0].color\n          });\n        });\n      });\n      dayData = dayData.concat(scale);\n    });\n    const data: Summary[] = [];\n    dayData.forEach((d: Datum) => {\n      const date = d.date;\n      d.summary.forEach((s: Summary) => {\n        s.date = date;\n        data.push(s);\n      });\n    });\n    dayData = GTSLib.cleanArray(dayData);\n    const maxValue: number = max(data, (d: Summary) => d.total);\n    const gtsNames = this.selected.summary.map((summary: Summary) => summary.name);\n    const gtsNameScale = scaleBand().rangeRound([this.labelPadding, this.gHeight]).domain(gtsNames);\n    const hourLabels: string[] = [];\n    range(0, 24).forEach(h => hourLabels.push(moment.utc().hours(h).startOf('hour').format('HH:mm')));\n    const dayScale = scaleBand()\n      .rangeRound([this.labelPadding, this.gWidth])\n      .padding(0.01)\n      .domain(hourLabels);\n    this.items.selectAll('.item-block').remove();\n    this.items.selectAll('.item-block')\n      .data(data)\n      .enter()\n      .append('rect')\n      .attr('class', 'item item-block')\n      .attr('x', (d: Summary) => this.gutter\n        + dayScale(moment(d.date).startOf('hour').format('HH:mm'))\n        + (this.itemSize - this.calcItemSize(d, maxValue)) / 2)\n      .attr('y', (d: Summary) => {\n        return (gtsNameScale(d.name) || 1) - (this.itemSize - this.calcItemSize(d, maxValue)) / 2;\n      })\n      .attr('rx', (d: Summary) => this.calcItemSize(d, maxValue))\n      .attr('ry', (d: Summary) => this.calcItemSize(d, maxValue))\n      .attr('width', (d: Summary) => this.calcItemSize(d, maxValue))\n      .attr('height', (d: Summary) => this.calcItemSize(d, maxValue))\n      .attr('fill', (d: Summary) => {\n        const color = scaleLinear<string>()\n          .range(['#ffffff', d.color || CalendarHeatmapComponent.DEF_MIN_COLOR])\n          .domain([-0.5 * maxValue, maxValue]);\n        return color(d.total);\n      })\n      .style('opacity', 0)\n      .on('mouseover', (d: Summary) => {\n        if (this.inTransition) {\n          return;\n        }\n        // Calculate tooltip position\n        let x = dayScale(moment(d.date).startOf('hour').format('HH:mm')) + this.tooltipPadding;\n        while (this.gWidth - x < (this.tooltipWidth + this.tooltipPadding * 3)) {\n          x -= 10;\n        }\n        const y = gtsNameScale(d.name) + this.tooltipPadding;\n        // Show tooltip\n        this.tooltip.html(this.getTooltip(d))\n          .style('left', x + 'px')\n          .style('top', y + 'px')\n          .transition()\n          .duration(this.transitionDuration / 2)\n          .ease(easeLinear)\n          .style('opacity', 1);\n      })\n      .on('mouseout', () => {\n        if (this.inTransition) {\n          return;\n        }\n        this.hideTooltip();\n      })\n      .on('click', (d: Summary) => {\n        if (this.handler) {\n          this.handler.emit(d);\n        }\n      })\n      .transition()\n      .delay(() => (Math.cos(Math.PI * Math.random()) + 1) * this.transitionDuration)\n      .duration(() => this.transitionDuration)\n      .ease(easeLinear)\n      .style('opacity', 1)\n      .call((transition: any, callback: any) => {\n        if (transition.empty()) {\n          callback();\n        }\n        let n = 0;\n        transition.each(() => ++n).on('end', function() {\n          if (!--n) {\n            callback.apply(this, arguments);\n          }\n        });\n      }, () => this.inTransition = false);\n\n    // Add time labels\n    this.labels.selectAll('.label-time').remove();\n    this.labels.selectAll('.label-time')\n      .data(hourLabels)\n      .enter()\n      .append('text')\n      .attr('class', 'label label-time')\n      .attr('font-size', () => Math.floor(this.labelPadding / 3) + 'px')\n      .text((d: string) => d)\n      .attr('x', (d: string) => dayScale(d))\n      .attr('y', this.labelPadding / 2)\n      .on('mouseenter', (d: string) => {\n        if (this.inTransition) {\n          return;\n        }\n        const selected = d;\n        // const selected = itemScale(moment.utc(d));\n        this.items.selectAll('.item-block')\n          .transition()\n          .duration(this.transitionDuration)\n          .ease(easeLinear)\n          .style('opacity', (item: any) => (item.date.format('HH:mm') === selected) ? 1 : 0.1);\n      })\n      .on('mouseout', () => {\n        if (this.inTransition) {\n          return;\n        }\n        this.items.selectAll('.item-block')\n          .transition()\n          .duration(this.transitionDuration)\n          .ease(easeLinear)\n          .style('opacity', 1);\n      });\n    // Add project labels\n    const labelPadding = this.labelPadding;\n    this.labels.selectAll('.label-project').remove();\n    this.labels.selectAll('.label-project')\n      .data(gtsNames)\n      .enter()\n      .append('text')\n      .attr('class', 'label label-project')\n      .attr('x', this.gutter)\n      .attr('y', (d: string) => gtsNameScale(d) + this.itemSize / 2)\n      .attr('min-height', () => gtsNameScale.bandwidth())\n      .style('text-anchor', 'left')\n      .attr('font-size', () => Math.floor(this.labelPadding / 3) + 'px')\n      .text((d: string) => d)\n      .each(function() {\n        const obj = select(this);\n        let textLength = obj.node().getComputedTextLength();\n        let text = obj.text();\n        while (textLength > (labelPadding * 1.5) && text.length > 0) {\n          text = text.slice(0, -1);\n          obj.text(text + '...');\n          textLength = obj.node().getComputedTextLength();\n        }\n      })\n      .on('mouseenter', (gtsName: string) => {\n        if (this.inTransition) {\n          return;\n        }\n        this.items.selectAll('.item-block')\n          .transition()\n          .duration(this.transitionDuration)\n          .ease(easeLinear)\n          .style('opacity', (d: Summary) => (d.name === gtsName) ? 1 : 0.1);\n      })\n      .on('mouseout', () => {\n        if (this.inTransition) {\n          return;\n        }\n        this.items.selectAll('.item-block')\n          .transition()\n          .duration(this.transitionDuration)\n          .ease(easeLinear)\n          .style('opacity', 1);\n      });\n    // Add button to switch back to previous overview\n    this.drawButton();\n  }\n\n  private calcItemX(d: Datum, startOfYear: Moment) {\n    const dayIndex = Math.round((+moment(d.date) - +startOfYear.startOf('week')) / 86400000);\n    const colIndex = Math.trunc(dayIndex / 7);\n    return colIndex * (this.itemSize + this.gutter) + this.labelPadding;\n  }\n\n  private calcItemXMonth(d: Datum, start: Moment, offset: number) {\n    const hourIndex = moment(d.date).hours();\n    const colIndex = Math.trunc(hourIndex / 3);\n    return colIndex * (this.itemSize + this.gutter) + offset;\n  }\n\n  private calcItemY(d: Datum) {\n    return this.labelPadding + d.date.weekday() * (this.itemSize + this.gutter);\n  }\n\n  private calcItemSize(d: Datum | Summary, m: number) {\n    if (m <= 0) {\n      return this.itemSize;\n    }\n    return this.itemSize * 0.75 + (this.itemSize * d.total / m) * 0.25;\n  }\n\n  private drawButton() {\n    this.buttons.selectAll('.button').remove();\n    const button = this.buttons.append('g')\n      .attr('class', 'button button-back')\n      .style('opacity', 0)\n      .on('click', () => {\n        if (this.inTransition) {\n          return;\n        }\n        // Set transition boolean\n        this.inTransition = true;\n        // Clean the canvas from whichever overview type was on\n        if (this.overview === 'year') {\n          this.removeYearOverview();\n        } else if (this.overview === 'month') {\n          this.removeMonthOverview();\n        } else if (this.overview === 'week') {\n          this.removeWeekOverview();\n        } else if (this.overview === 'day') {\n          this.removeDayOverview();\n        }\n        // Redraw the chart\n        this.history.pop();\n        this.overview = this.history.pop();\n        this.drawChart();\n      });\n    button.append('circle')\n      .attr('cx', this.labelPadding / 2.25)\n      .attr('cy', this.labelPadding / 2.5)\n      .attr('r', this.itemSize / 2);\n    button.append('text')\n      .attr('x', this.labelPadding / 2.25)\n      .attr('y', this.labelPadding / 2.5)\n      .attr('dy', () => {\n        return Math.floor(this.gWidth / 100) / 3;\n      })\n      .attr('font-size', () => {\n        return Math.floor(this.labelPadding / 3) + 'px';\n      })\n      .html('&#x2190;');\n    button.transition()\n      .duration(this.transitionDuration)\n      .ease(easeLinear)\n      .style('opacity', 1);\n  }\n\n  private removeGlobalOverview() {\n    this.items.selectAll('.item-block-year')\n      .transition()\n      .duration(this.transitionDuration)\n      .ease(easeLinear)\n      .style('opacity', 0)\n      .remove();\n    this.labels.selectAll('.label-year').remove();\n  }\n\n  private removeYearOverview() {\n    this.items.selectAll('.item-circle')\n      .transition()\n      .duration(this.transitionDuration)\n      .ease(easeLinear)\n      .style('opacity', 0)\n      .remove();\n    this.labels.selectAll('.label-day').remove();\n    this.labels.selectAll('.label-month').remove();\n    this.hideBackButton();\n  }\n\n  private removeMonthOverview() {\n    this.items.selectAll('.item-block-month')\n      .transition()\n      .duration(this.transitionDuration)\n      .ease(easeLinear)\n      .style('opacity', 0)\n      .remove();\n    this.labels.selectAll('.label-day').remove();\n    this.labels.selectAll('.label-week').remove();\n    this.hideBackButton();\n  }\n\n  private removeWeekOverview() {\n    this.items.selectAll('.item-block-week')\n      .transition()\n      .duration(this.transitionDuration)\n      .ease(easeLinear)\n      .style('opacity', 0)\n      .attr('x', (d: any, i: number) => (i % 2 === 0) ? -this.gWidth / 3 : this.gWidth / 3)\n      .remove();\n    this.labels.selectAll('.label-day').remove();\n    this.labels.selectAll('.label-week').remove();\n    this.hideBackButton();\n  }\n\n  private removeDayOverview() {\n    this.items.selectAll('.item-block')\n      .transition()\n      .duration(this.transitionDuration)\n      .ease(easeLinear)\n      .style('opacity', 0)\n      .attr('x', (d: any, i: number) => (i % 2 === 0) ? -this.gWidth / 3 : this.gWidth / 3)\n      .remove();\n    this.labels.selectAll('.label-time').remove();\n    this.labels.selectAll('.label-project').remove();\n    this.hideBackButton();\n  }\n\n  private hideTooltip() {\n    this.tooltip.transition()\n      .duration(this.transitionDuration / 2)\n      .ease(easeLinear)\n      .style('opacity', 0);\n  }\n\n  /**\n   * Helper function to hide the back button\n   */\n  private hideBackButton() {\n    this.buttons.selectAll('.button')\n      .transition()\n      .duration(this.transitionDuration)\n      .ease(easeLinear)\n      .style('opacity', 0)\n      .remove();\n  }\n\n  private getTooltip = (d: any) => {\n    let tooltipHtml = '<div class=\"header\"><strong>' + d.date.format('dddd, MMM Do YYYY HH:mm') + '</strong></div><ul>';\n    (d.summary || []).forEach(s => {\n      tooltipHtml += `<li>\n  <div class=\"round\" style=\"background-color:${ColorLib.transparentize(s.color)}; border-color:${s.color}\"></div>\n${GTSLib.formatLabel(s.name)}: ${s.total}</li>`;\n    });\n    if (d.total !== undefined && d.name) {\n      tooltipHtml += `<li><div class=\"round\"\nstyle=\"background-color: ${ColorLib.transparentize(d.color)}; border-color: ${d.color}\"\n></div> ${GTSLib.formatLabel(d.name)}: ${d.total}</li>`;\n    }\n    tooltipHtml += '</ul>';\n    return tooltipHtml;\n  }\n}\n","/*\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */\n\nimport {AfterViewInit, Component, EventEmitter, Input, Output, ViewChild, ViewEncapsulation} from '@angular/core';\nimport {DataModel} from '../../model/dataModel';\nimport {Logger} from '../../utils/logger';\nimport {GTSLib} from '../../utils/gts.lib';\nimport {WarpViewModalComponent} from '../warp-view-modal/warp-view-modal.component';\nimport {Param} from '../../model/param';\nimport deepEqual from 'deep-equal';\nimport {ChartLib} from '../../utils/chart-lib';\n\n/**\n *\n */\n@Component({\n  selector: 'warpview-gts-popup',\n  templateUrl: './warp-view-gts-popup.component.html',\n  styleUrls: ['./warp-view-gts-popup.component.scss'],\n  encapsulation: ViewEncapsulation.ShadowDom\n})\nexport class WarpViewGtsPopupComponent implements AfterViewInit {\n  @ViewChild('modal', {static: true}) modal: WarpViewModalComponent;\n\n  @Input('options') set options(options: Param | string) {\n    this.LOG.debug(['onOptions'], options);\n    if (typeof options === 'string') {\n      options = JSON.parse(options);\n    }\n    if (!deepEqual(options, this._options)) {\n      this.LOG.debug(['options', 'changed'], options);\n      this._options = ChartLib.mergeDeep(this._options, options as Param) as Param;\n      this.prepareData();\n    }\n  }\n\n  @Input('gtsList') set gtsList(gtsList: DataModel) {\n    this._gtsList = gtsList;\n    this.LOG.debug(['_gtsList'], this._gtsList);\n\n    this.prepareData();\n  }\n\n  get gtslist(): DataModel {\n    return this._gtsList;\n  }\n\n  @Input('debug') set debug(debug: boolean) {\n    this._debug = debug;\n    this.LOG.setDebug(debug);\n  }\n\n  get debug() {\n    return this._debug;\n  }\n\n  @Input('data') set data(data: DataModel) {\n    this.LOG.debug(['data'], data);\n    if (data) {\n      this._data = data;\n    }\n  }\n\n  get data(): DataModel {\n    return this._data;\n  }\n\n\n  @Input('hiddenData') set hiddenData(hiddenData: number[]) {\n    this._hiddenData = hiddenData;\n    this.prepareData();\n  }\n\n  get hiddenData(): number[] {\n    return this._hiddenData;\n  }\n\n  @Input('maxToShow') maxToShow = 5;\n\n  @Input('kbdLastKeyPressed') set kbdLastKeyPressed(kbdLastKeyPressed: string[]) {\n    this._kbdLastKeyPressed = kbdLastKeyPressed;\n    if (kbdLastKeyPressed[0] === 's' && !this.modalOpenned) {\n      this.showPopup();\n    } else if (this.modalOpenned) {\n      switch (kbdLastKeyPressed[0]) {\n        case'ArrowUp':\n        case'j':\n          this.current = Math.max(0, this.current - 1);\n          this.prepareData();\n          break;\n        case 'ArrowDown':\n        case 'k':\n          this.current = Math.min(this._gts.length - 1, this.current + 1);\n          this.prepareData();\n          break;\n        case ' ':\n          this.warpViewSelectedGTS.emit({\n            gts: this._gts[this.current],\n            selected: this.hiddenData.indexOf(this._gts[this.current].id) > -1\n          });\n          break;\n        default:\n          return;\n      }\n    }\n  }\n\n  get kbdLastKeyPressed(): string[] {\n    return this._kbdLastKeyPressed;\n  }\n\n  @Output('warpViewSelectedGTS') warpViewSelectedGTS = new EventEmitter<any>();\n  @Output('warpViewModalOpen') warpViewModalOpen = new EventEmitter<any>();\n  @Output('warpViewModalClose') warpViewModalClose = new EventEmitter<any>();\n\n  current = 0;\n  // tslint:disable-next-line:variable-name\n  _gts: any[] = [];\n  _options: Param = new Param();\n\n  // tslint:disable-next-line:variable-name\n  private _kbdLastKeyPressed: string[] = [];\n  // tslint:disable-next-line:variable-name\n  private _hiddenData: number[] = [];\n  // tslint:disable-next-line:variable-name\n  private _debug = false;\n  // tslint:disable-next-line:variable-name\n  private _gtsList: DataModel;\n  // tslint:disable-next-line:variable-name\n  private _data: DataModel;\n  private displayed: any[] = [];\n  private modalOpenned = false;\n  private LOG: Logger;\n\n  constructor() {\n    this.LOG = new Logger(WarpViewGtsPopupComponent, this.debug);\n  }\n\n  ngAfterViewInit(): void {\n    this.prepareData();\n  }\n\n  onWarpViewModalOpen() {\n    this.modalOpenned = true;\n    this.warpViewModalOpen.emit({});\n  }\n\n  onWarpViewModalClose() {\n    this.modalOpenned = false;\n    this.warpViewModalClose.emit({});\n  }\n\n  public isOpened(): Promise<boolean> {\n    return this.modal.isOpened();\n  }\n\n  private showPopup() {\n    this.current = 0;\n    this.prepareData();\n    this.modal.open();\n  }\n\n  public close() {\n    this.modal.close();\n  }\n\n  private prepareData() {\n    if (this._gtsList && this._gtsList.data) {\n      this._gts = GTSLib.flatDeep([this._gtsList.data]);\n      this.displayed = this._gts.slice(\n        Math.max(0, Math.min(this.current - this.maxToShow, this._gts.length - 2 * this.maxToShow)),\n        Math.min(this._gts.length, this.current + this.maxToShow + Math.abs(Math.min(this.current - this.maxToShow, 0)))\n      ) as any[];\n      this.LOG.debug(['prepareData'], this.displayed);\n    }\n  }\n\n  isHidden(gts) {\n    return !this.displayed.find(g => !!gts ? gts.id === g.id : false);\n  }\n\n  identify(index, item) {\n    return index;\n  }\n}\n","/*\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */\n\nimport {AfterViewInit, Component, ElementRef, EventEmitter, HostListener, Input, Output, ViewEncapsulation} from '@angular/core';\n\n@Component({\n  selector: 'warpview-modal',\n  templateUrl: './warp-view-modal.component.html',\n  styleUrls: ['./warp-view-modal.component.scss'],\n  encapsulation: ViewEncapsulation.ShadowDom\n})\nexport class WarpViewModalComponent implements AfterViewInit {\n\n\n  @Input('modalTitle') modalTitle = '';\n  @Input('kbdLastKeyPressed') kbdLastKeyPressed: string[] = [];\n\n  @Output('warpViewModalOpen') warpViewModalOpen = new EventEmitter<any>();\n  @Output('warpViewModalClose') warpViewModalClose = new EventEmitter<any>();\n\n  private opened = false;\n\n  public open() {\n    this.el.nativeElement.style.display = 'block';\n    this.el.nativeElement.style.zIndex = '999999';\n    this.opened = true;\n    this.warpViewModalOpen.emit({});\n  }\n\n  public close() {\n    this.el.nativeElement.style.display = 'none';\n    this.el.nativeElement.style.zIndex = '-1';\n    this.opened = false;\n    this.warpViewModalClose.emit({});\n  }\n\n  public isOpened(): Promise<boolean> {\n    return new Promise<boolean>(resolve => {\n      resolve(this.opened);\n    });\n  }\n\n  @HostListener('kbdLastKeyPressed', ['$event'])\n  handleKeyDown($event: string[]) {\n    if ('Escape' === $event[0]) {\n      this.close();\n    }\n  }\n\n  constructor(public el: ElementRef) {\n  }\n\n  ngAfterViewInit(): void {\n    this.el.nativeElement.addEventListener('click', (event: any) => {\n      if (event.path[0].nodeName === 'WARP-VIEW-MODAL') {\n        this.close();\n      }\n    });\n  }\n}\n","/*\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */\n\nimport {\n  AfterViewInit,\n  Component,\n  ElementRef,\n  EventEmitter,\n  Input,\n  NgZone,\n  Output,\n  Renderer2,\n  ViewChild,\n  ViewEncapsulation\n} from '@angular/core';\nimport {WarpViewComponent} from '../warp-view-component';\nimport {Param} from '../../model/param';\nimport {ChartLib} from '../../utils/chart-lib';\nimport {GTSLib} from '../../utils/gts.lib';\nimport {DataModel} from '../../model/dataModel';\nimport {SizeService} from '../../services/resize.service';\nimport {Logger} from '../../utils/logger';\nimport {Subject} from 'rxjs';\n\n/**\n *\n */\n@Component({\n  selector: 'warpview-gts-tree',\n  templateUrl: './warp-view-gts-tree.component.html',\n  styleUrls: ['./warp-view-gts-tree.component.scss'],\n  encapsulation: ViewEncapsulation.ShadowDom\n})\nexport class WarpViewGtsTreeComponent extends WarpViewComponent implements AfterViewInit {\n  @ViewChild('root', {static: true}) root: ElementRef;\n\n  @Input('kbdLastKeyPressed') kbdLastKeyPressed: string[] = [];\n\n  @Input('gtsFilter') set gtsFilter(gtsFilter: string) {\n    this._gtsFilter = gtsFilter;\n  }\n\n  get gtsFilter() {\n    return this._gtsFilter;\n  }\n\n  @Output('warpViewSelectedGTS') warpViewSelectedGTS = new EventEmitter<any>();\n\n  private _gtsFilter = 'x';\n  gtsList: any[] = [];\n  params: Param[] = [] as Param[];\n  expand = false;\n\n  initOpen: Subject<void> = new Subject<void>();\n  constructor(\n    public el: ElementRef,\n    public renderer: Renderer2,\n    public sizeService: SizeService,\n    public ngZone: NgZone\n  ) {\n    super(el, renderer, sizeService, ngZone);\n    this.LOG = new Logger(WarpViewGtsTreeComponent, this._debug);\n  }\n\n  ngAfterViewInit(): void {\n    this.LOG.debug(['componentDidLoad', 'data'], this._data);\n    if (!!this._options.foldGTSTree && !this.expand) {\n      this.foldAll();\n    }\n    if (!this._options.foldGTSTree) {\n      this.initOpen.next();\n    }\n    if (this._data) {\n      this.doRender();\n    }\n  }\n\n  update(options: Param, refresh: boolean): void {\n    if (!!this._options.foldGTSTree && !this.expand) {\n      this.foldAll();\n    }\n    this.doRender();\n  }\n\n  private doRender() {\n    this.LOG.debug(['doRender', 'gtsList'], this._data);\n    if (!this._data) {\n      return;\n    }\n    this._options = ChartLib.mergeDeep(this.defOptions, this._options) as Param;\n    const dataList = GTSLib.getData(this._data).data;\n    this.params = this._data.params || [];\n    this.LOG.debug(['doRender', 'gtsList', 'dataList'], dataList);\n    if (!dataList) {\n      return;\n    }\n    this.expand = !this._options.foldGTSTree;\n    this.gtsList = GTSLib.flattenGtsIdArray(dataList as any[], 0).res;\n    this.LOG.debug(['doRender', 'gtsList'], this.gtsList, this._options.foldGTSTree, this.expand);\n    this.loading = false;\n    this.chartDraw.emit();\n  }\n\n  private foldAll() {\n    if (!this.root) {\n      setTimeout(() => this.foldAll());\n    } else {\n      this.expand = false;\n    }\n  }\n\n  toggleVisibility() {\n    requestAnimationFrame(() => this.expand = !this.expand);\n  }\n\n  protected convert(data: DataModel): any[] {\n    return [];\n  }\n\n  warpViewSelectedGTSHandler(event) {\n    this.LOG.debug(['warpViewSelectedGTS'], event);\n    this.warpViewSelectedGTS.emit(event);\n  }\n\n}\n","/*\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */\n\nimport {Component, EventEmitter, Input, OnDestroy, OnInit, Output, ViewEncapsulation} from '@angular/core';\nimport {Logger} from '../../../utils/logger';\nimport {GTSLib} from '../../../utils/gts.lib';\nimport {Param} from '../../../model/param';\nimport {Observable, Subject, Subscription} from 'rxjs';\n\n@Component({\n  selector: 'warpview-tree-view',\n  templateUrl: './warp-view-tree-view.component.html',\n  styleUrls: ['./warp-view-tree-view.component.scss'],\n  encapsulation: ViewEncapsulation.ShadowDom\n})\nexport class WarpViewTreeViewComponent implements OnInit, OnDestroy {\n\n  @Input('debug') set debug(debug: boolean) {\n    this._debug = debug;\n    this.LOG.setDebug(debug);\n  }\n\n  get debug() {\n    return this._debug;\n  }\n\n  @Input('hiddenData') set hiddenData(hiddenData: number[]) {\n    this._hiddenData = [...hiddenData];\n  }\n\n  get hiddenData(): number[] {\n    return this._hiddenData;\n  }\n\n  @Input('options') options: Param;\n  @Input('gtsFilter') gtsFilter = 'x';\n  @Input('gtsList') gtsList: any[];\n  @Input('params') params: Param[];\n  @Input('branch') branch = false;\n  @Input('hidden') hidden = false;\n  @Input() events: Observable<void>;\n\n  @Output('warpViewSelectedGTS') warpViewSelectedGTS = new EventEmitter<any>();\n\n  hide: any = {};\n  initOpen: Subject<void> = new Subject<void>();\n  stateChange: Subject<boolean> = new Subject<boolean>();\n\n  private LOG: Logger;\n  private _debug = false;\n  private _hiddenData: number[] = [];\n  private eventsSubscription: Subscription;\n  private _kbdLastKeyPressed: string[] = [];\n\n  @Input('kbdLastKeyPressed')\n  set kbdLastKeyPressed(kbdLastKeyPressed: string[]) {\n    this.LOG.debug(['kbdLastKeyPressed'], kbdLastKeyPressed);\n    this._kbdLastKeyPressed = kbdLastKeyPressed;\n    if (kbdLastKeyPressed[0] === 'a') {\n      this.stateChange.next(true);\n    }\n    if (kbdLastKeyPressed[0] === 'n') {\n      this.stateChange.next(false);\n    }\n  }\n\n  get kbdLastKeyPressed() {\n    return this._kbdLastKeyPressed;\n  }\n\n  constructor() {\n    this.LOG = new Logger(WarpViewTreeViewComponent, this.debug);\n  }\n\n  ngOnInit(): void {\n    this.eventsSubscription = this.events.subscribe(() => this.open());\n    this.LOG.debug(['ngOnInit'], this.gtsList);\n    const size = this.gtsList.length;\n    for (let i = 0; i < size; i++) {\n      this.hide[i + ''] = false;\n    }\n  }\n\n  ngOnDestroy() {\n    this.eventsSubscription.unsubscribe();\n  }\n\n\n  toggleVisibility(index: number) {\n    this.LOG.debug(['toggleVisibility'], index, this.hide);\n    this.hide[index + ''] = !this.hide[index + ''];\n  }\n\n  isHidden(index: number) {\n    return !!this.hide[index + ''] ? !!this.hide[index + ''] : false;\n  }\n\n  isGts(node) {\n    return GTSLib.isGts(node);\n  }\n\n  identify(index, item) {\n    return index;\n  }\n\n  warpViewSelectedGTSHandler(event) {\n    // this.LOG.debug(['warpViewSelectedGTS'], event);\n    this.warpViewSelectedGTS.emit(event);\n  }\n\n  open() {\n    this.gtsList.forEach((g, index) => this.hide[index + ''] = true);\n    setTimeout(() => this.initOpen.next());\n  }\n}\n","/*\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */\n\nimport {Label} from './label';\n\nexport class GTS {\n  c: string;\n  l: Label[];\n  a: Label[];\n  v: any[][];\n  id?: number;\n}\n","/*\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */\n\nimport {\n  AfterViewInit,\n  Component,\n  ElementRef,\n  EventEmitter,\n  Input,\n  OnDestroy,\n  OnInit,\n  Output,\n  Renderer2,\n  ViewChild,\n  ViewEncapsulation\n} from '@angular/core';\nimport {GTS} from '../../../model/GTS';\nimport {Logger} from '../../../utils/logger';\nimport {GTSLib} from '../../../utils/gts.lib';\nimport {ColorLib} from '../../../utils/color-lib';\nimport {Param} from '../../../model/param';\nimport {Observable, Subscription} from 'rxjs';\n\n/**\n *\n */\n@Component({\n  selector: 'warpview-chip',\n  templateUrl: './warp-view-chip.component.html',\n  styleUrls: ['./warp-view-chip.component.scss'],\n  encapsulation: ViewEncapsulation.ShadowDom\n})\nexport class WarpViewChipComponent implements OnInit, AfterViewInit, OnDestroy {\n  private eventsSubscription: Subscription;\n\n  @ViewChild('chip') chip: ElementRef;\n\n  @Input('node') node: any;\n  @Input('param') param: Param = new Param();\n  @Input('options') options: Param = new Param();\n  @Input() events: Observable<boolean>;\n\n  @Input('debug') set debug(debug: boolean) {\n    this._debug = debug;\n    this.LOG.setDebug(debug);\n  }\n\n  get debug() {\n    return this._debug;\n  }\n\n  @Input('hiddenData') set hiddenData(hiddenData: number[]) {\n    if (JSON.stringify(hiddenData) !== JSON.stringify(this._hiddenData)) {\n      this._hiddenData = hiddenData;\n      this.LOG.debug(['hiddenData'], hiddenData, this._node, this._node.gts, this._node.gts.c);\n      if (!!this._node && !!this._node.gts && !!this._node.gts.c) {\n        this.setState(this._hiddenData.indexOf(this._node.gts.id) === -1);\n      }\n    }\n  }\n\n  get hiddenData(): number[] {\n    return this._hiddenData;\n  }\n\n  @Input('gtsFilter') set gtsFilter(gtsFilter: string) {\n    this._gtsFilter = gtsFilter;\n    if (this._gtsFilter.slice(1) !== '') {\n      this.setState(new RegExp(this._gtsFilter.slice(1), 'gi').test(GTSLib.serializeGtsMetadata(this._node.gts)));\n    } else {\n      this.setState(true);\n    }\n  }\n\n  get gtsFilter() {\n    return this._gtsFilter;\n  }\n\n  @Output('warpViewSelectedGTS') warpViewSelectedGTS = new EventEmitter<any>();\n\n  private LOG: Logger;\n  // the first character triggers change each filter apply to trigger events. it must be discarded.\n  private _gtsFilter = 'x';\n  private _debug = false;\n  private _hiddenData: number[] = [];\n  _node: any = {\n    selected: true,\n    gts: GTS,\n  };\n\n  constructor(private renderer: Renderer2) {\n    this.LOG = new Logger(WarpViewChipComponent, this.debug);\n  }\n\n  ngOnInit(): void {\n    this._node = {...this.node, selected: this._hiddenData.indexOf(this.node.gts.id) === -1};\n    if(!!this.events) {\n      this.eventsSubscription = this.events.subscribe(state => this.setState(state));\n    }\n  }\n\n  ngOnDestroy() {\n    if(!!this.eventsSubscription) {\n      this.eventsSubscription.unsubscribe();\n    }\n  }\n\n  ngAfterViewInit() {\n    if (this.gtsFilter.slice(1) !== '' && new RegExp(this.gtsFilter.slice(1), 'gi').test(GTSLib.serializeGtsMetadata(this._node.gts))\n      || this.hiddenData.indexOf(this._node.gts.id) > -1) {\n      this.setState(false);\n    } else {\n      this.colorizeChip();\n    }\n  }\n\n  private colorizeChip() {\n    if (!!this.chip) {\n      if (!!this._node.selected) {\n        const c = ColorLib.getColor(this._node.gts.id, this.options.scheme);\n        const color = (this.param || {datasetColor: c}).datasetColor || c;\n        this.renderer.setStyle(this.chip.nativeElement, 'background-color', color);\n        this.renderer.setStyle(this.chip.nativeElement, 'border-color', color);\n      } else {\n        this.renderer.setStyle(this.chip.nativeElement, 'background-color', 'transparent');\n      }\n    }\n  }\n\n  toArray(obj) {\n    if (obj === undefined) {\n      return [];\n    }\n    return Object.keys(obj).map(key => ({name: key, value: obj[key]}));\n  }\n\n  switchPlotState(event: UIEvent) {\n    event.preventDefault();\n    this.setState(!this._node.selected);\n    return false;\n  }\n\n  private setState(state: boolean) {\n    if (this._node && this._node.gts) {\n      this.LOG.debug(['switchPlotState'], state, this._node.selected);\n      if (this._node.selected !== state) {\n        this._node.selected = !!state;\n        this.LOG.debug(['switchPlotState'], 'emit');\n        this.warpViewSelectedGTS.emit(this._node);\n      }\n      this.colorizeChip();\n    }\n  }\n\n  identify(index, item) {\n    return index;\n  }\n}\n","/*\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */\n\nimport {AfterViewInit, Component, ElementRef, HostListener, Input, NgZone, Renderer2, ViewEncapsulation} from '@angular/core';\nimport {WarpViewComponent} from '../warp-view-component';\nimport {Param} from '../../model/param';\nimport {ChartLib} from '../../utils/chart-lib';\nimport {DataModel} from '../../model/dataModel';\nimport {GTSLib} from '../../utils/gts.lib';\nimport {SizeService} from '../../services/resize.service';\nimport {Logger} from '../../utils/logger';\n\n/**\n *\n */\n@Component({\n  selector: 'warpview-image',\n  templateUrl: './warp-view-image.component.html',\n  styleUrls: ['./warp-view-image.component.scss'],\n  encapsulation: ViewEncapsulation.ShadowDom\n})\nexport class WarpViewImageComponent extends WarpViewComponent implements AfterViewInit {\n  @Input('imageTitle') imageTitle = '';\n\n  toDisplay: string[];\n\n  private resizeTimer;\n  private parentWidth = -1;\n\n  constructor(\n    public el: ElementRef,\n    public renderer: Renderer2,\n    public sizeService: SizeService,\n    public ngZone: NgZone\n  ) {\n    super(el, renderer, sizeService, ngZone);\n    this.LOG = new Logger(WarpViewImageComponent, this._debug);\n  }\n\n  ngAfterViewInit(): void {\n    this.LOG.debug(['ngAfterViewInit'], this._options);\n    this.drawChart();\n  }\n\n  update(options: Param, refresh: boolean): void {\n    this.drawChart();\n  }\n\n  @HostListener('window:resize')\n  onResize() {\n    if (this.el.nativeElement.parentElement.clientWidth !== this.parentWidth || this.parentWidth <= 0) {\n      this.parentWidth = this.el.nativeElement.parentElement.clientWidth;\n      clearTimeout(this.resizeTimer);\n      this.resizeTimer = setTimeout(() => {\n        if (this.el.nativeElement.parentElement.clientWidth > 0) {\n          this.LOG.debug(['onResize'], this.el.nativeElement.parentElement.clientWidth);\n          this.drawChart();\n        } else {\n          this.onResize();\n        }\n      }, 150);\n    }\n  }\n\n  private drawChart() {\n    if (!this._data || !this._data.data || this._data.data.length === 0) {\n      return;\n    }\n    this.initChart(this.el);\n    this.toDisplay = [];\n    let gts: DataModel = this._data;\n    this.LOG.debug(['drawChart', 'gts'], gts);\n    if (typeof gts === 'string') {\n      try {\n        gts = JSON.parse(gts as string);\n      } catch (error) {\n        // empty : it's a base64 string\n      }\n    }\n    if (gts.data && gts.data.length > 0 && GTSLib.isEmbeddedImage(gts.data[0])) {\n      this._options = ChartLib.mergeDeep(this._options, gts.globalParams || {}) as Param;\n      this.toDisplay.push(gts.data[0]);\n    } else if (gts.data && GTSLib.isEmbeddedImage(gts.data)) {\n      this.toDisplay.push(gts.data as string);\n    }\n    this.LOG.debug(['drawChart', 'this.data', 'this.toDisplay'], this.data, this.toDisplay);\n    this.loading = false;\n    this.chartDraw.emit();\n  }\n\n  getStyle() {\n    this.LOG.debug(['getStyle'], this._options);\n    if (!this._options) {\n      return {};\n    } else {\n      const style: any = {'background-color': this._options.bgColor || 'transparent', width: this.width, height: 'auto'};\n      if (this._options.fontColor) {\n        style.color = this._options.fontColor;\n      }\n      this.LOG.debug(['getStyle', 'style'], style);\n      return style;\n    }\n  }\n\n  protected convert(data: DataModel): any[] {\n    return [];\n  }\n}\n","/*\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */\n\nimport {GTSLib} from './gts.lib';\nimport {ColorLib} from './color-lib';\nimport {Logger} from './logger';\nimport {Param} from '../model/param';\n\nexport class MapLib {\n  static BASE_RADIUS = 2;\n  private static LOG: Logger = new Logger(MapLib, true);\n\n  static mapTypes: any = {\n    NONE: undefined,\n    DEFAULT: {\n      link: 'https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',\n      attribution: '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\n    },\n    HOT: {\n      link: 'https://{s}.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png',\n      attribution: `&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors, Tiles\n style by <a href=\"https://www.hotosm.org/\" target=\"_blank\">Humanitarian OpenStreetMap Team</a> hosted by\n <a href=\"https://openstreetmap.fr/\" target=\"_blank\">OpenStreetMap France</a>`\n    },\n    TOPO: {\n      link: 'https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png',\n      attribution: `Map data: &copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors,\n <a href=\"http://viewfinderpanoramas.org\">SRTM</a> | Map style: &copy; <a href=\"https://opentopomap.org\">OpenTopoMap</a>\n  (<a href=\"https://creativecommons.org/licenses/by-sa/3.0/\">CC-BY-SA</a>)`\n    },\n    TOPO2: {\n      link: 'https://server.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer/tile/{z}/{y}/{x}',\n      attribution: `Tiles &copy; Esri &mdash; Esri, DeLorme, NAVTEQ, TomTom, Intermap, iPC, USGS, FAO, NPS, NRCAN,\n       GeoBase, Kadaster NL, Ordnance Survey, Esri Japan, METI, Esri China (Hong Kong), and the GIS User Community`\n    },\n    SURFER: {\n      link: 'https://maps.heigit.org/openmapsurfer/tiles/roads/webmercator/{z}/{x}/{y}.png',\n      attribution: `Imagery from <a href=\"http://giscience.uni-hd.de/\">GIScience Research Group @ University of\n Heidelberg</a> | Map data &copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors`\n    },\n    HYDRA: {\n      link: 'https://{s}.tile.openstreetmap.se/hydda/full/{z}/{x}/{y}.png',\n      attribution: `Tiles courtesy of <a href=\"http://openstreetmap.se/\" target=\"_blank\">OpenStreetMap Sweden</a>\n &mdash; Map data &copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors`\n    },\n    HYDRA2: {\n      link: 'https://{s}.tile.openstreetmap.se/hydda/base/{z}/{x}/{y}.png',\n      attribution: `Tiles courtesy of <a href=\"http://openstreetmap.se/\" target=\"_blank\">OpenStreetMap Sweden</a>\n &mdash; Map data &copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors`\n    },\n    TONER: {\n      link: 'https://stamen-tiles-{s}.a.ssl.fastly.net/toner/{z}/{x}/{y}{r}.png',\n      attribution: `Map tiles by <a href=\"http://stamen.com\">Stamen Design</a>,\n <a href=\"http://creativecommons.org/licenses/by/3.0\">CC BY 3.0</a> &mdash; Map data &copy;\n  <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors`,\n      subdomains: 'abcd'\n    },\n    TONER_LITE: {\n      link: 'https://stamen-tiles-{s}.a.ssl.fastly.net/toner-lite/{z}/{x}/{y}{r}.png',\n      attribution: `Map tiles by <a href=\"http://stamen.com\">Stamen Design</a>,\n <a href=\"http://creativecommons.org/licenses/by/3.0\">CC BY 3.0</a> &mdash; Map data &copy;\n  <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors`,\n      subdomains: 'abcd',\n    },\n    TERRAIN: {\n      link: 'https://stamen-tiles-{s}.a.ssl.fastly.net/terrain/{z}/{x}/{y}{r}.png',\n      attribution: `Map tiles by <a href=\"http://stamen.com\">Stamen Design</a>,\n <a href=\"http://creativecommons.org/licenses/by/3.0\">CC BY 3.0</a> &mdash; Map data &copy;\n <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors`,\n      subdomains: 'abcd',\n    },\n    ESRI: {\n      link: 'https://server.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer/tile/{z}/{y}/{x}',\n      attribution: `Tiles &copy; Esri &mdash; Source: Esri, DeLorme, NAVTEQ, USGS, Intermap, iPC, NRCAN, Esri Japan,\n METI, Esri China (Hong Kong), Esri (Thailand), TomTom, 2012`\n    },\n    SATELLITE: {\n      link: 'https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}',\n      attribution: `Tiles &copy; Esri &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN,\n IGP, UPR-EGP, and the GIS User Community`\n    },\n    OCEANS: {\n      link: 'https://server.arcgisonline.com/ArcGIS/rest/services/Ocean_Basemap/MapServer/tile/{z}/{y}/{x}',\n      attribution: 'Tiles &copy; Esri &mdash; Sources: GEBCO, NOAA, CHS, OSU, UNH, CSUMB, National Geographic, DeLorme, NAVTEQ, and Esri',\n    },\n    GRAY: {\n      link: 'https://server.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer/tile/{z}/{y}/{x}',\n      attibs: ''\n    },\n    GRAYSCALE: {\n      link: 'https://server.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer/tile/{z}/{y}/{x}',\n      attribution: 'Tiles &copy; Esri &mdash; Esri, DeLorme, NAVTEQ',\n    },\n    WATERCOLOR: {\n      link: 'https://stamen-tiles-{s}.a.ssl.fastly.net/watercolor/{z}/{x}/{y}.jpg',\n      attribution: `Map tiles by <a href=\"http://stamen.com\">Stamen Design</a>,\n <a href=\"http://creativecommons.org/licenses/by/3.0\">CC BY 3.0</a> &mdash; Map data &copy;\n  <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors`,\n      subdomains: 'abcd',\n    },\n    CARTODB: {\n      link: 'https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png',\n      attribution: `&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors &copy;\n <a href=\"https://carto.com/attributions\">CartoDB</a>`,\n      subdomains: 'abcd',\n    },\n    CARTODB_DARK: {\n      link: 'https://cartodb-basemaps-{s}.global.ssl.fastly.net/dark_all/{z}/{x}/{y}.png',\n      attribution: `&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors &copy;\n <a href=\"https://carto.com/attributions\">CartoDB</a>`,\n      subdomains: 'abcd',\n    },\n  };\n\n  static toLeafletMapPaths(data: { gts: any[]; params: any[] }, hiddenData: number[], scheme: string) {\n    const paths = [];\n    const size = (data.gts || []).length;\n    for (let i = 0; i < size; i++) {\n      const gts = data.gts[i];\n      let params = (data.params || [])[i];\n      if (!params) {\n        params = {};\n      }\n      if (GTSLib.isGtsToPlotOnMap(gts) && (hiddenData || []).filter(id => id === gts.id).length === 0) {\n        const path: any = {};\n        MapLib.extractCommonParameters(path, params, i, scheme);\n\n        path.path = MapLib.gtsToPath(gts);\n        if (!!params.render) {\n          path.render = params.render;\n        }\n        if (!!params.marker) {\n          path.marker = params.marker;\n        }\n        path.line = params.hasOwnProperty('line') ? params.line : true;\n        path.render = path.render || 'dots';\n        if (path.render === 'weightedDots') {\n          MapLib.validateWeightedDotsPositionArray(path, params);\n        }\n        if (path.render === 'coloredWeightedDots') {\n          MapLib.validateWeightedColoredDotsPositionArray(path, params);\n        }\n        if (data.params && data.params[i] && data.params[i].key) {\n          path.key = data.params[i].key;\n        } else {\n          path.key = GTSLib.serializeGtsMetadata(gts);\n        }\n        if (data.params && data.params[i] && data.params[i].color) {\n          path.color = data.params[i].color;\n        } else {\n          path.color = ColorLib.getColor(i, scheme);\n        }\n        paths.push(path);\n      }\n    }\n    return paths;\n  }\n\n  static gtsToPath(gts) {\n    const path = [];\n    const size = (gts.v || []).length;\n    for (let i = 0; i < size; i++) {\n      const v = gts.v[i];\n      const l = v.length;\n      if (l >= 4) {\n        // timestamp, lat, lon, elev?, value\n        path.push({ts: Math.floor(v[0]), lat: v[1], lon: v[2], val: v[l - 1]});\n      }\n    }\n    return path;\n  }\n\n  private static extractCommonParameters(obj, params, index, scheme: string) {\n    params = params || {};\n    obj.key = params.key || '';\n    obj.color = params.color || ColorLib.getColor(index, scheme);\n    obj.borderColor = params.borderColor;\n    obj.properties = params.properties || {};\n    if (params.baseRadius === undefined\n      || isNaN(parseInt(params.baseRadius, 10))\n      || parseInt(params.baseRadius, 10) < 0) {\n      obj.baseRadius = MapLib.BASE_RADIUS;\n    } else {\n      obj.baseRadius = params.baseRadius;\n    }\n  }\n\n  private static validateWeightedDotsPositionArray(posArray, params) {\n    if (params.minValue === undefined || params.maxValue === undefined) {\n      MapLib.LOG.error(['validateWeightedDotsPositionArray'], 'When using \\'weightedDots\\' or ' +\n        '\\'weightedColoredDots\\' rendering, \\'maxValue\\' and \\'minValue\\' parameters are compulsory');\n      posArray.render = undefined;\n      return;\n    }\n    posArray.maxValue = params.maxValue;\n    posArray.minValue = params.minValue;\n    if (typeof posArray.minValue !== 'number' ||\n      typeof posArray.maxValue !== 'number' ||\n      posArray.minValue >= posArray.maxValue) {\n      MapLib.LOG.error(['validateWeightedDotsPositionArray'], 'When using \\'weightedDots\\' or ' +\n        '\\'weightedColoredDots\\' rendering, \\'maxValue\\' and \\'minValue\\' must be numbers and \\'maxValue\\' ' +\n        'must be greater than \\'minValue\\'');\n      posArray.render = undefined;\n      return;\n    }\n    if (!GTSLib.isPositionsArrayWithValues(posArray) && !GTSLib.isPositionsArrayWithTwoValues(posArray)) {\n      MapLib.LOG.error(['validateWeightedDotsPositionArray'], 'When using \\'weightedDots\\' or ' +\n        '\\'weightedColoredDots\\' rendering, positions must have an associated value');\n      posArray.render = undefined;\n      return;\n    }\n\n    if (params.numSteps === undefined || isNaN(parseInt(params.numSteps, 10)) || parseInt(params.numSteps, 10) < 0) {\n      posArray.numSteps = 5;\n    } else {\n      posArray.numSteps = params.numSteps;\n    }\n    const step = (posArray.maxValue - posArray.minValue) / posArray.numSteps;\n    const steps = [];\n    for (let i = 0; i < posArray.numSteps - 1; i++) {\n      steps[i] = posArray.minValue + (i + 1) * step;\n    }\n    steps[posArray.numSteps - 1] = posArray.maxValue;\n\n    const size = (posArray || []).length;\n    for (let i = 0; i < size; i++) {\n      const pos = posArray[i];\n      const value = pos[2];\n      pos[4] = posArray.numSteps - 1;\n      for (const k in steps) {\n        if (value <= steps[k]) {\n          pos[4] = k;\n          break;\n        }\n      }\n    }\n    return true;\n  }\n\n  static toLeafletMapPositionArray(data: { gts: any[]; params: any[] }, hiddenData: number[], scheme: string) {\n    const positions = [];\n    const size = (data.gts || []).length;\n    for (let i = 0; i < size; i++) {\n      const gts = data.gts[i];\n      if (GTSLib.isPositionArray(gts) && (hiddenData || []).filter(id => id === gts.id).length === 0) {\n        this.LOG.debug(['toLeafletMapPositionArray'], gts, data.params ? data.params[i] : '');\n        const posArray = gts;\n        const params = data.params ? data.params[i] || {} : {};\n        MapLib.extractCommonParameters(posArray, params, i, scheme);\n        posArray.render = params.render || 'dots';\n        posArray.maxValue = params.maxValue || 0;\n        posArray.minValue = params.minValue || 0;\n        posArray.line = params.hasOwnProperty('line') ? params.line : false;\n        if (posArray.render === 'weightedDots') {\n          MapLib.validateWeightedDotsPositionArray(posArray, params);\n        }\n        if (posArray.render === 'coloredWeightedDots') {\n          MapLib.validateWeightedColoredDotsPositionArray(posArray, params);\n        }\n        if (posArray.render === 'marker') {\n          posArray.marker = params.marker;\n        }\n        if (data.params && data.params[i] && data.params[i].color) {\n          posArray.color = data.params[i].color;\n        } else {\n          posArray.color = ColorLib.getColor(i, scheme);\n        }\n        this.LOG.debug(['toLeafletMapPositionArray', 'posArray'], posArray);\n        positions.push(posArray);\n      }\n    }\n    return positions;\n  }\n\n  private static validateWeightedColoredDotsPositionArray(posArray: any, params: Param) {\n    if (!MapLib.validateWeightedDotsPositionArray(posArray, params)) {\n      return;\n    }\n    if (!params.minColor || !params.maxColor || !params.startColor || !params.endColor) {\n      MapLib.LOG.error(['validateWeightedColoredDotsPositionArray'], 'When using ' +\n        '\\'weightedColoredDots\\' rendering, \\'maxColorValue\\', \\'minColorValue\\', \\'startColor\\' ' +\n        'and \\'endColor\\' parameters are compulsory');\n      posArray.render = undefined;\n      return;\n    }\n\n    posArray.maxColorValue = params.maxColor;\n    posArray.minColorValue = params.minColor;\n\n    if (typeof posArray.minColorValue !== 'number' ||\n      typeof posArray.maxColorValue !== 'number' ||\n      posArray.minColorValue >= posArray.maxColorValue) {\n      MapLib.LOG.error(['validateWeightedColoredDotsPositionArray'], ['When using ' +\n      'weightedColoredDots\\' rendering, \\'maxColorValue\\' and \\'minColorValue\\' must be numbers ' +\n      'and \\'maxColorValue\\' must be greater than \\'minColorValue\\'', {\n        maxColorValue: posArray.maxColorValue,\n        minColorValue: posArray.minColorValue,\n      }]);\n      posArray.render = undefined;\n      return;\n    }\n    const re = /^#(?:[0-9a-f]{3}){1,2}$/i;\n    if (typeof params.startColor !== 'string'\n      || typeof params.endColor !== 'string'\n      || !re.test(params.startColor)\n      || !re.test(params.endColor)) {\n      MapLib.LOG.error(['validateWeightedColoredDotsPositionArray'], ['When using ' +\n      'weightedColoredDots\\' rendering, \\'startColor\\' and \\'endColor\\' parameters must be RGB ' +\n      'colors in #rrggbb format', {\n        startColor: params.startColor,\n        endColor: params.endColor,\n        tests: [\n          typeof params.startColor,\n          typeof params.endColor,\n          re.test(params.startColor),\n          re.test(params.endColor),\n          re.test(params.startColor),\n        ],\n      }]);\n      posArray.render = undefined;\n      return;\n    }\n\n    posArray.startColor = {\n      r: parseInt(params.startColor.substring(1, 3), 16),\n      g: parseInt(params.startColor.substring(3, 5), 16),\n      b: parseInt(params.startColor.substring(5, 7), 16),\n    };\n\n    posArray.endColor = {\n      r: parseInt(params.endColor.substring(1, 3), 16),\n      g: parseInt(params.endColor.substring(3, 5), 16),\n      b: parseInt(params.endColor.substring(5, 7), 16),\n    };\n\n    if (!params.numColorSteps) {\n      posArray.numColorSteps = 5;\n    } else {\n      posArray.numColorSteps = params.numColorSteps;\n    }\n\n    posArray.colorGradient = ColorLib.hsvGradientFromRgbColors(\n      posArray.startColor,\n      posArray.endColor,\n      posArray.numColorSteps);\n\n    const step = (posArray.maxColorValue - posArray.minColorValue) / posArray.numColorSteps;\n    const steps = [];\n    for (let j = 0; j < posArray.numColorSteps; j++) {\n      steps[j] = posArray.minColorValue + (j + 1) * step;\n    }\n\n    posArray.steps = steps;\n\n    posArray.positions.forEach(pos => {\n      const colorValue = pos[3];\n      pos[5] = posArray.numColorSteps - 1;\n      for (let k = 0; k < steps.length - 1; k++) {\n        if (colorValue < steps[k]) {\n          pos[5] = k;\n          break;\n        }\n      }\n    });\n  }\n\n  static getBoundsArray(paths, positionsData, annotationsData, geoJson) {\n    const pointsArray = [];\n    let size;\n    this.LOG.debug(['getBoundsArray', 'paths'], paths);\n    size = (paths || []).length;\n    for (let i = 0; i < size; i++) {\n      const path = paths[i];\n      const s = (path.path || []).length;\n      for (let j = 0; j < s; j++) {\n        const p = path.path[j];\n        pointsArray.push([p.lat, p.lon]);\n      }\n    }\n    this.LOG.debug(['getBoundsArray', 'positionsData'], positionsData);\n    size = (positionsData || []).length;\n    for (let i = 0; i < size; i++) {\n      const position = positionsData[i];\n      const s = (position.positions || []).length;\n      for (let j = 0; j < s; j++) {\n        const p = position.positions[j];\n        pointsArray.push([p[0], p[1]]);\n      }\n    }\n    this.LOG.debug(['getBoundsArray', 'annotationsData'], annotationsData);\n    size = (annotationsData || []).length;\n    for (let i = 0; i < size; i++) {\n      const annotation = annotationsData[i];\n      const s = (annotation.path || []).length;\n      for (let j = 0; j < s; j++) {\n        const p = annotation.path[j];\n        pointsArray.push([p.lat, p.lon]);\n      }\n    }\n    size = (geoJson || []).length;\n    for (let i = 0; i < size; i++) {\n      const g = geoJson[i];\n      switch (g.geometry.type) {\n        case 'MultiPolygon':\n          g.geometry.coordinates.forEach(c => c.forEach(m => m.forEach(p => pointsArray.push([p[1], p[0]]))));\n          break;\n        case 'Polygon':\n          g.geometry.coordinates.forEach(c => c.forEach(p => pointsArray.push([p[1], p[0]])));\n          break;\n        case 'LineString':\n          g.geometry.coordinates.forEach(p => pointsArray.push([p[1], p[0]]));\n          break;\n        case 'Point':\n          pointsArray.push([g.geometry.coordinates[1], g.geometry.coordinates[0]]);\n          break;\n      }\n    }\n    if (pointsArray.length === 1) {\n      return pointsArray;\n    }\n    let south = 90;\n    let west = -180;\n    let north = -90;\n    let east = 180;\n    this.LOG.debug(['getBoundsArray'], pointsArray);\n    size = (pointsArray || []).length;\n    for (let i = 0; i < size; i++) {\n      const point = pointsArray[i];\n      if (point[0] > north) {\n        north = point[0];\n      }\n      if (point[0] < south) {\n        south = point[0];\n      }\n      if (point[1] > west) {\n        west = point[1];\n      }\n      if (point[1] < east) {\n        east = point[1];\n      }\n    }\n    return [[south, west], [north, east]];\n  }\n\n  static pathDataToLeaflet(pathData: any[]) {\n    const path = [];\n    const size = pathData.length;\n    for (let i = 0; i < size; i++) {\n      path.push([pathData[i].lat, pathData[i].lon]);\n    }\n    return path;\n  }\n\n  static toGeoJSON(data: { gts: any[]; params: any[] }) {\n    const defShapes = ['Point', 'LineString', 'Polygon', 'MultiPolygon'];\n    const geoJsons = [];\n    data.gts.forEach(d => {\n      if (d && d.type && d.type === 'Feature' && d.geometry && d.geometry.type && defShapes.indexOf(d.geometry.type) > -1) {\n        geoJsons.push(d);\n      } else if (d && d.type && defShapes.indexOf(d.type) > -1) {\n        geoJsons.push({type: 'Feature', geometry: d});\n      }\n    });\n    return geoJsons;\n  }\n\n  static updatePositionArrayToLeaflet(positionArray: any[]) {\n    const latLng = [];\n    const size = (positionArray || []).length;\n    for (let i = 0; i < size; i++) {\n      const pos = positionArray[i];\n      latLng.push([pos[0], pos[1]]);\n    }\n    return latLng;\n  }\n}\n","/*\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */\n\nimport {Component, ElementRef, EventEmitter, Input, OnInit, Output, Renderer2, ViewChild, ViewEncapsulation} from '@angular/core';\nimport {Param} from '../../model/param';\nimport {Logger} from '../../utils/logger';\nimport Leaflet, {TileLayerOptions} from 'leaflet';\nimport 'leaflet.heat';\nimport 'leaflet.markercluster';\nimport {ColorLib} from '../../utils/color-lib';\nimport {ChartLib} from '../../utils/chart-lib';\nimport {DataModel} from '../../model/dataModel';\nimport {MapLib} from '../../utils/map-lib';\nimport {GTSLib} from '../../utils/gts.lib';\nimport moment from 'moment-timezone';\nimport deepEqual from 'deep-equal';\nimport {SizeService} from '../../services/resize.service';\nimport {Timsort} from '../../utils/timsort';\nimport {antPath} from 'leaflet-ant-path';\n\n/**\n *\n */\n@Component({\n  selector: 'warpview-map',\n  templateUrl: './warp-view-map.component.html',\n  styleUrls: ['./warp-view-map.component.scss'],\n  encapsulation: ViewEncapsulation.None\n})\nexport class WarpViewMapComponent implements OnInit {\n\n  @ViewChild('mapDiv', {static: true}) mapDiv: ElementRef<HTMLDivElement>;\n  @ViewChild('wrapper', {static: true}) wrapper: ElementRef<HTMLDivElement>;\n  @ViewChild('timeSlider') timeSlider: ElementRef<HTMLDivElement>;\n  @ViewChild('timeRangeSlider') timeRangeSlider: ElementRef<HTMLDivElement>;\n\n  @Input('heatData') heatData: any[] = [];\n  @Input('responsive') responsive = false;\n  @Input('showLegend') showLegend = true;\n  @Input('width') width = ChartLib.DEFAULT_WIDTH;\n  @Input('height') height = ChartLib.DEFAULT_HEIGHT;\n  private bounds: Leaflet.LatLngBounds;\n\n  @Input('debug') set debug(debug: boolean) {\n    this._debug = debug;\n    this.LOG.setDebug(debug);\n  }\n\n  get debug() {\n    return this._debug;\n  }\n\n  @Input('options') set options(options: Param) {\n    this.LOG.debug(['onOptions'], options);\n    if (!deepEqual(this._options, options)) {\n      const reZoom =\n        options.map.startZoom !== this._options.map.startZoom\n        || options.map.startLat !== this._options.map.startLat\n        || options.map.startLong !== this._options.map.startLong;\n      this._options = options;\n      this.divider = GTSLib.getDivider(this._options.timeUnit);\n      this.drawMap(reZoom);\n    }\n  }\n\n  @Input('data') set data(data: any) {\n    this.LOG.debug(['onData'], data);\n    this.pointslayer = [];\n    this.annotationsMarkers = [];\n    this.positionArraysMarkers = [];\n    if (!!data) {\n      this._data = data;\n      this.drawMap(true);\n    }\n  }\n\n  get data() {\n    return this._data;\n  }\n\n  @Input('hiddenData') set hiddenData(hiddenData: number[]) {\n    this._hiddenData = hiddenData;\n    this.drawMap(false);\n  }\n\n  get hiddenData(): number[] {\n    return this._hiddenData;\n  }\n\n  @Output('change') change = new EventEmitter();\n  @Output('chartDraw') chartDraw = new EventEmitter();\n\n  currentZoom: number;\n  currentLat: number;\n  currentLong: number;\n  minTimeValue: number;\n  maxTimeValue: number;\n  divider = 1;\n  lowerTimeBound: number;\n  upperTimeBound: number;\n  timeSpan: number;\n  _options: Param = new Param();\n\n  private _firstDraw = true;\n  private LOG: Logger;\n  private _data: any;\n  private _debug = false;\n  private defOptions: Param = ChartLib.mergeDeep<Param>(\n    new Param(), {\n      map: {\n        heatControls: false,\n        tiles: [],\n        dotsLimit: 1000,\n        animate: false\n      },\n      timeMode: 'date',\n      showRangeSelector: true,\n      gridLineColor: '#8e8e8e',\n      showDots: false,\n      timeZone: 'UTC',\n      timeUnit: 'us',\n      bounds: {}\n    });\n\n  private _map: Leaflet.Map;\n  private _hiddenData: number[];\n  private pointslayer = [];\n  private annotationsMarkers = [];\n  private positionArraysMarkers = [];\n  private _iconAnchor: Leaflet.PointExpression = [20, 38];\n  private _popupAnchor: Leaflet.PointExpression = [0, -50];\n  private _heatLayer: any;\n  private pathData: any[] = [];\n  private positionData: any[] = [];\n  private geoJson: any[] = [];\n  private timeStart: number;\n  private timeEnd: number;\n  private firstDraw = true;\n  private finalHeight = 0;\n  // Layers\n  private pathDataLayer = Leaflet.featureGroup();\n  private positionDataLayer = Leaflet.featureGroup();\n  private tileLayerGroup = Leaflet.featureGroup();\n  private geoJsonLayer = Leaflet.featureGroup();\n  private tilesLayer: Leaflet.TileLayer;\n\n  constructor(public el: ElementRef, public sizeService: SizeService, private renderer: Renderer2) {\n    this.LOG = new Logger(WarpViewMapComponent, this.debug);\n    this.LOG.debug(['constructor'], this.debug);\n    this.sizeService.sizeChanged$.subscribe(() => {\n      if (this._map) {\n        this.resizeMe();\n      }\n    });\n  }\n\n  ngOnInit(): void {\n    this._options = ChartLib.mergeDeep(this.defOptions, this._options) as Param;\n  }\n\n  resizeMe() {\n    this.LOG.debug(['resizeMe'], this.wrapper.nativeElement.parentElement.getBoundingClientRect());\n    let height = this.wrapper.nativeElement.parentElement.getBoundingClientRect().height;\n    const width = this.wrapper.nativeElement.parentElement.getBoundingClientRect().width;\n    if (this._options.map.showTimeSlider && this.timeSlider && this.timeSlider.nativeElement) {\n      height -= this.timeSlider.nativeElement.getBoundingClientRect().height;\n    }\n    if (this._options.map.showTimeRange && this.timeRangeSlider && this.timeRangeSlider.nativeElement) {\n      height -= this.timeRangeSlider.nativeElement.getBoundingClientRect().height;\n    }\n    this.finalHeight = height;\n    this.renderer.setStyle(this.mapDiv.nativeElement, 'width', 'calc(' + width + 'px - '\n      + getComputedStyle(this.wrapper.nativeElement).getPropertyValue('--warp-view-map-margin').trim()\n      + ' - '\n      + getComputedStyle(this.wrapper.nativeElement).getPropertyValue('--warp-view-map-margin').trim()\n      + ')');\n    this.renderer.setStyle(this.mapDiv.nativeElement, 'height', 'calc(' + height + 'px - '\n      + getComputedStyle(this.wrapper.nativeElement).getPropertyValue('--warp-view-map-margin').trim()\n      + ' - '\n      + getComputedStyle(this.wrapper.nativeElement).getPropertyValue('--warp-view-map-margin').trim()\n      + ')');\n    this.width = width;\n    this.height = height;\n    if (!!this._map) {\n      setTimeout(() => this._map.invalidateSize());\n    }\n  }\n\n  heatRadiusDidChange(event) {\n    this._heatLayer.setOptions({radius: event.detail.valueAsNumber});\n    this.LOG.debug(['heatRadiusDidChange'], event.detail.valueAsNumber);\n  }\n\n  heatBlurDidChange(event) {\n    this._heatLayer.setOptions({blur: event.detail.valueAsNumber});\n    this.LOG.debug(['heatBlurDidChange'], event.detail.valueAsNumber);\n  }\n\n  heatOpacityDidChange(event) {\n    const minOpacity = event.detail.valueAsNumber / 100;\n    this._heatLayer.setOptions({minOpacity});\n    this.LOG.debug(['heatOpacityDidChange'], event.detail.valueAsNumber);\n  }\n\n  private drawMap(reZoom: boolean) {\n    this.LOG.debug(['drawMap'], this._data);\n    this._options = ChartLib.mergeDeep(this.defOptions, this._options) as Param;\n    this.timeStart = this._options.map.timeStart;\n    moment.tz.setDefault(this._options.timeZone);\n    let gts: any = this._data;\n    if (!gts) {\n      return;\n    }\n    if (typeof gts === 'string') {\n      try {\n        gts = JSON.parse(gts as string);\n      } catch (error) {\n        return;\n      }\n    }\n    if (GTSLib.isArray(gts) && gts[0] && (gts[0] instanceof DataModel || gts[0].hasOwnProperty('data'))) {\n      gts = gts[0];\n    }\n    if (!!this._map) {\n      this._map.invalidateSize(true);\n    }\n    let dataList: any[];\n    let params: any[];\n    this.LOG.debug(['drawMap', 'this._options'], {... this._options});\n    if (gts.data) {\n      dataList = gts.data as any[];\n      this._options = ChartLib.mergeDeep<Param>(gts.globalParams || {}, this._options);\n      this.timeSpan = this.timeSpan || this._options.map.timeSpan;\n      params = gts.params;\n    } else {\n      dataList = gts;\n      params = [];\n    }\n    this.divider = GTSLib.getDivider(this._options.timeUnit);\n    this.LOG.debug(['drawMap'], dataList, this._options, gts.globalParams);\n    const flattenGTS = GTSLib.flatDeep(dataList);\n\n    const size = flattenGTS.length;\n    for (let i = 0; i < size; i++) {\n      const item = flattenGTS[i];\n      if (GTSLib.isGts(item)) {\n        Timsort.sort(item.v, (a, b) => a[0] - b[0]);\n        item.i = i;\n        i++;\n      }\n    }\n    this.LOG.debug(['GTSLib.flatDeep(dataList)'], flattenGTS);\n    this.displayMap({gts: flattenGTS, params}, reZoom);\n  }\n\n  private icon(color: string, marker = '') {\n    const c = `${color.slice(1)}`;\n    const m = marker !== '' ? marker : 'circle';\n    return Leaflet.icon({\n      // tslint:disable-next-line:max-line-length\n      iconUrl: `https://cdn.mapmarker.io/api/v1/font-awesome/v4/pin?icon=fa-${m}&iconSize=17&size=40&hoffset=${m === 'circle' ? 0 : -1}&voffset=-4&color=fff&background=${c}`,\n      iconAnchor: this._iconAnchor,\n      popupAnchor: this._popupAnchor\n    });\n  }\n\n  private patchMapTileGapBug() {\n    // Workaround for 1px lines appearing in some browsers due to fractional transforms\n    // and resulting anti-aliasing. adapted from @cmulders' solution:\n    // https://github.com/Leaflet/Leaflet/issues/3575#issuecomment-150544739\n    // @ts-ignore\n    const originalInitTile = Leaflet.GridLayer.prototype._initTile;\n    if (originalInitTile.isPatched) {\n      return;\n    }\n    Leaflet.GridLayer.include({\n      _initTile(tile) {\n        originalInitTile.call(this, tile);\n        const tileSize = this.getTileSize();\n        tile.style.width = tileSize.x + 1.5 + 'px';\n        tile.style.height = tileSize.y + 1 + 'px';\n      }\n    });\n    // @ts-ignore\n    Leaflet.GridLayer.prototype._initTile.isPatched = true;\n  }\n\n  private displayMap(data: { gts: any[], params: any[] }, reDraw = false) {\n    this.pointslayer = [];\n    this.LOG.debug(['drawMap'], data, this._options, this._hiddenData || []);\n    if (!this.lowerTimeBound) {\n      this.lowerTimeBound = this._options.map.timeSliderMin / this.divider;\n      this.upperTimeBound = this._options.map.timeSliderMax / this.divider;\n    }\n    let height = this.height || ChartLib.DEFAULT_HEIGHT;\n    const width = this.width || ChartLib.DEFAULT_WIDTH;\n    if (this.responsive && this.finalHeight === 0) {\n      this.resizeMe();\n    } else {\n      if (this._options.map.showTimeSlider && this.timeSlider && this.timeSlider.nativeElement) {\n        height -= this.timeSlider.nativeElement.getBoundingClientRect().height;\n      }\n      if (this._options.map.showTimeRange && this.timeRangeSlider && this.timeRangeSlider.nativeElement) {\n        height -= this.timeRangeSlider.nativeElement.getBoundingClientRect().height;\n      }\n    }\n    this.width = width;\n    this.height = height;\n    if (data.gts.length === 0) {\n      return;\n    }\n    this.pathData = MapLib.toLeafletMapPaths(data, this._hiddenData || [], this._options.scheme) || [];\n    this.LOG.debug(['displayMap'], 'this.pathData', this.pathData);\n    this.positionData = MapLib.toLeafletMapPositionArray(data, this._hiddenData || [], this._options.scheme) || [];\n    this.LOG.debug(['displayMap'], 'this.positionData', this.positionData);\n    this.geoJson = MapLib.toGeoJSON(data);\n    this.LOG.debug(['displayMap'], 'this.geoJson', this.geoJson);\n    if (this._options.map.mapType !== 'NONE') {\n      const map = MapLib.mapTypes[this._options.map.mapType || 'DEFAULT'];\n      this.LOG.debug(['displayMap'], 'map', map);\n      const mapOpts: TileLayerOptions = {\n        maxZoom: 24,\n        maxNativeZoom: 19,\n      };\n      if (map.attribution) {\n        mapOpts.attribution = map.attribution;\n      }\n      if (map.subdomains) {\n        mapOpts.subdomains = map.subdomains;\n      }\n      this.tilesLayer = Leaflet.tileLayer(map.link, mapOpts);\n    }\n\n    if (!!this._map) {\n      this.LOG.debug(['displayMap'], 'map exists');\n      this.pathDataLayer.clearLayers();\n      this.positionDataLayer.clearLayers();\n      this.geoJsonLayer.clearLayers();\n      this.tileLayerGroup.clearLayers();\n    } else {\n      this.LOG.debug(['displayMap'], 'build map');\n      this._map = Leaflet.map(this.mapDiv.nativeElement, {\n        preferCanvas: true,\n        layers: [this.tileLayerGroup, this.geoJsonLayer, this.pathDataLayer, this.positionDataLayer],\n        zoomAnimation: true,\n        maxZoom: 24\n      });\n      this.geoJsonLayer.bringToBack();\n      this.tilesLayer.bringToBack(); // TODO: tester\n      this._map.on('load', () => this.LOG.debug(['displayMap', 'load'], this._map.getCenter().lng, this.currentLong, this._map.getZoom()));\n      this._map.on('zoomend', () => {\n        if (!this.firstDraw) {\n          this.currentZoom = this._map.getZoom();\n        }\n      });\n      this._map.on('moveend', () => {\n        if (!this.firstDraw) {\n          this.currentLat = this._map.getCenter().lat;\n          this.currentLong = this._map.getCenter().lng;\n        }\n      });\n    }\n    this.tilesLayer.addTo(this.tileLayerGroup);\n    this.LOG.debug(['displayMap'], 'build map', this.tilesLayer);\n    // For each path\n    const pathDataSize = (this.pathData || []).length;\n    for (let i = 0; i < pathDataSize; i++) {\n      const path = this.pathData[i];\n      if (!!path) {\n        this.updateGtsPath(path);\n      }\n    }\n    // For each position\n    const positionsSize = (this.positionData || []).length;\n    for (let i = 0; i < positionsSize; i++) {\n      this.updatePositionArray(this.positionData[i]);\n    }\n\n    (this._options.map.tiles || []).forEach((t) => { // TODO to test\n      this.LOG.debug(['displayMap'], t);\n      if (this._options.map.showTimeRange) {\n        this.tileLayerGroup.addLayer(Leaflet.tileLayer(t\n            .replace('{start}', moment(this.timeStart).toISOString())\n            .replace('{end}', moment(this.timeEnd).toISOString()), {\n            subdomains: 'abcd',\n            maxNativeZoom: 19,\n            maxZoom: 40\n          }\n        ));\n      } else {\n        this.tileLayerGroup.addLayer(Leaflet.tileLayer(t, {\n          subdomains: 'abcd',\n          maxNativeZoom: 19,\n          maxZoom: 40\n        }));\n      }\n    });\n    this.LOG.debug(['displayMap', 'geoJson'], this.geoJson);\n    const size = (this.geoJson || []).length;\n    for (let i = 0; i < size; i++) {\n      const m = this.geoJson[i];\n      const color = ColorLib.getColor(i, this._options.scheme);\n      const opts = {\n        style: () => ({\n          color: (data.params && data.params[i]) ? data.params[i].color || color : color,\n          fillColor: (data.params && data.params[i])\n            ? ColorLib.transparentize(data.params[i].fillColor || color)\n            : ColorLib.transparentize(color),\n        })\n      } as any;\n      if (m.geometry.type === 'Point') {\n        opts.pointToLayer = (geoJsonPoint, latlng) => Leaflet.marker(latlng, {\n          icon: this.icon(color, (data.params && data.params[i]) ? data.params[i].marker : 'circle'),\n          opacity: 1,\n        });\n      }\n      let display = '';\n      const geoShape = Leaflet.geoJSON(m, opts);\n      if (m.properties) {\n        Object.keys(m.properties).forEach(k => display += `<b>${k}</b>: ${m.properties[k]}<br />`);\n        geoShape.bindPopup(display);\n      }\n      geoShape.addTo(this.geoJsonLayer);\n    }\n\n    if (this.pathData.length > 0 || this.positionData.length > 0 || this.geoJson.length > 0) {\n      // Fit map to curves\n      const group = Leaflet.featureGroup([this.geoJsonLayer, this.positionDataLayer, this.pathDataLayer]);\n      this.LOG.debug(['displayMap', 'setView'], 'fitBounds', group.getBounds());\n      this.LOG.debug(['displayMap', 'setView'], {lat: this.currentLat, lng: this.currentLong}, {\n        lat: this._options.map.startLat,\n        lng: this._options.map.startLong\n      });\n      this.bounds = group.getBounds();\n      setTimeout(() => {\n        if (!!this.bounds && this.bounds.isValid()) {\n          if ((this.currentLat || this._options.map.startLat) && (this.currentLong || this._options.map.startLong)) {\n            this.LOG.debug(['displayMap', 'setView'], 'fitBounds', 'already have bounds');\n            this._map.setView({\n                lat: this.currentLat || this._options.map.startLat || 0,\n                lng: this.currentLong || this._options.map.startLong || 0\n              }, this.currentZoom || this._options.map.startZoom || 10,\n              {animate: false, duration: 500});\n          } else {\n            this.LOG.debug(['displayMap', 'setView'], 'fitBounds', 'this.bounds', this.bounds);\n            this._map.fitBounds(this.bounds, {padding: [1, 1], animate: false, duration: 0});\n          }\n          this.currentLat = this._map.getCenter().lat;\n          this.currentLong = this._map.getCenter().lng;\n        } else {\n          this.LOG.debug(['displayMap', 'setView'], 'invalid bounds', {lat: this.currentLat, lng: this.currentLong});\n          this._map.setView({\n              lat: this.currentLat || this._options.map.startLat || 0,\n              lng: this.currentLong || this._options.map.startLong || 0\n            }, this.currentZoom || this._options.map.startZoom || 10,\n            {\n              animate: false,\n              duration: 500\n            });\n        }\n      }, 10);\n    } else {\n      this.LOG.debug(['displayMap', 'lost'], 'lost', this.currentZoom, this._options.map.startZoom);\n      this._map.setView(\n        [\n          this.currentLat || this._options.map.startLat || 0,\n          this.currentLong || this._options.map.startLong || 0\n        ],\n        this.currentZoom || this._options.map.startZoom || 2,\n        {\n          animate: false,\n          duration: 0\n        }\n      );\n    }\n    if (this.heatData && this.heatData.length > 0) {\n      this._heatLayer = (Leaflet as any).heatLayer(this.heatData, {\n        radius: this._options.map.heatRadius,\n        blur: this._options.map.heatBlur,\n        minOpacity: this._options.map.heatOpacity\n      });\n      this._heatLayer.addTo(this._map);\n    }\n    this.firstDraw = false;\n    this.resizeMe();\n    this.patchMapTileGapBug();\n    this.chartDraw.emit(true);\n  }\n\n  private getGTSDots(gts) {\n\n    const dots = [];\n    let icon;\n    let size;\n    switch (gts.render) {\n      case 'marker':\n        icon = this.icon(gts.color, gts.marker);\n        size = (gts.path || []).length;\n        for (let i = 0; i < size; i++) {\n          const g = gts.path[i];\n          const marker = Leaflet.marker(g, {icon, opacity: 1});\n          this.addPopup(gts, g.val, g.ts, marker);\n          dots.push(marker);\n        }\n        break;\n      case 'weightedDots':\n        size = (gts.path || []).length;\n        for (let i = 0; i < size; i++) {\n          const p = gts.path[i];\n          if ((this._hiddenData || []).filter(h => h === gts.key).length === 0) {\n            let v = parseInt(p.val, 10);\n            if (isNaN(v)) {\n              v = 0;\n            }\n            const radius = 50 * v / ((gts.maxValue || 1) - (gts.minValue || 0));\n            const marker = Leaflet.circleMarker(\n              p, {\n                radius: radius === 0 ? 1 : radius,\n                color: gts.borderColor || 'transparent',\n                fillColor: gts.color, fillOpacity: 0.5,\n                weight: 1\n              });\n            this.addPopup(gts, p.val, p.ts, marker);\n            dots.push(marker);\n          }\n        }\n        break;\n      case 'dots':\n      default:\n        size = (gts.path || []).length;\n        for (let i = 0; i < size; i++) {\n          const g = gts.path[i];\n          const marker = Leaflet.circleMarker(\n            g, {\n              radius: gts.baseRadius || MapLib.BASE_RADIUS,\n              color: gts.color,\n              fillColor: gts.color,\n              fillOpacity: 1\n            }\n          );\n          this.addPopup(gts, g.val, g.ts, marker);\n          dots.push(marker);\n        }\n        break;\n    }\n    return dots;\n  }\n\n  private updateGtsPath(gts: any) {\n    const path = MapLib.pathDataToLeaflet(gts.path);\n    const group = Leaflet.featureGroup();\n    if ((path || []).length > 1 && !!gts.line && gts.render === 'dots') {\n      if (!!this._options.map.animate) {\n        group.addLayer(antPath(path || [], {\n          delay: 800, dashArray: [10, 100],\n          weight: 5, color: ColorLib.transparentize(gts.color, 0.5),\n          pulseColor: gts.color,\n          paused: false, reverse: false, hardwareAccelerated: true, hardwareAcceleration: true\n        }));\n      } else {\n        group.addLayer(Leaflet.polyline(path || [], {color: gts.color, opacity: 0.5}));\n      }\n    }\n    const dots = this.getGTSDots(gts);\n    const size = (dots || []).length;\n    for (let i = 0; i < size; i++) {\n      group.addLayer(dots[i]);\n    }\n    this.pathDataLayer.addLayer(group);\n  }\n\n  private addPopup(positionData: any, value: any, ts: any, marker: any) {\n    if (!!positionData) {\n      let date;\n      if (ts && !this._options.timeMode || this._options.timeMode !== 'timestamp') {\n        date = (GTSLib.toISOString(ts, this.divider, this._options.timeZone) || '')\n          .replace('Z', this._options.timeZone === 'UTC' ? 'Z' : '');\n      }\n      let content = '';\n      content = `<p>${date}</p><p><b>${positionData.key}</b>: ${value || 'na'}</p>`;\n      Object.keys(positionData.properties || []).forEach(k => content += `<b>${k}</b>: ${positionData.properties[k]}<br />`);\n      marker.bindPopup(content);\n    }\n  }\n\n  private updatePositionArray(positionData: any) {\n    const group = Leaflet.featureGroup();\n    if ((this._hiddenData || []).filter(h => h === positionData.key).length === 0) {\n      const path = MapLib.updatePositionArrayToLeaflet(positionData.positions);\n      if ((positionData.positions || []).length > 1 && !!positionData.line) {\n        if (!!this._options.map.animate) {\n          group.addLayer(antPath(path || [], {\n            delay: 800, dashArray: [10, 100],\n            weight: 5, color: ColorLib.transparentize(positionData.color, 0.5),\n            pulseColor: positionData.color,\n            paused: false, reverse: false, hardwareAccelerated: true, hardwareAcceleration: true\n          }));\n        } else {\n          group.addLayer(Leaflet.polyline(path || [], {color: positionData.color, opacity: 0.5}));\n        }\n      }\n      let icon;\n      let result;\n      let inStep;\n      let size;\n      this.LOG.debug(['updatePositionArray'], positionData);\n\n      switch (positionData.render) {\n        case 'marker':\n          icon = this.icon(positionData.color, positionData.marker);\n          size = (positionData.positions || []).length;\n          for (let i = 0; i < size; i++) {\n            const p = positionData.positions[i];\n            const marker = Leaflet.marker({lat: p[0], lng: p[1]}, {icon, opacity: 1});\n            this.addPopup(positionData, p[2], undefined, marker);\n            group.addLayer(marker);\n          }\n          this.LOG.debug(['updatePositionArray', 'build marker'], icon);\n          break;\n        case 'coloredWeightedDots':\n          this.LOG.debug(['updatePositionArray', 'coloredWeightedDots'], positionData);\n          result = [];\n          inStep = [];\n          for (let j = 0; j < positionData.numColorSteps; j++) {\n            result[j] = 0;\n            inStep[j] = 0;\n          }\n          size = (positionData.positions || []).length;\n          for (let i = 0; i < size; i++) {\n            const p = positionData.positions[i];\n            const radius = (parseInt(p[2], 10) - (positionData.minValue || 0)) * 50 / (positionData.maxValue || 50);\n\n            this.LOG.debug(['updatePositionArray', 'coloredWeightedDots', 'radius'], positionData.baseRadius * p[4]);\n            const marker = Leaflet.circleMarker(\n              {lat: p[0], lng: p[1]},\n              {\n                radius,\n                color: positionData.borderColor || positionData.color,\n                fillColor: ColorLib.rgb2hex(\n                  positionData.colorGradient[p[5]].r,\n                  positionData.colorGradient[p[5]].g,\n                  positionData.colorGradient[p[5]].b),\n                fillOpacity: 0.3,\n              });\n            this.addPopup(positionData, p[2], undefined, marker);\n            group.addLayer(marker);\n          }\n          break;\n        case 'weightedDots':\n          size = (positionData.positions || []).length;\n          for (let i = 0; i < size; i++) {\n            const p = positionData.positions[i];\n            const radius = (parseInt(p[2], 10) - (positionData.minValue || 0)) * 50 / (positionData.maxValue || 50);\n            const marker = Leaflet.circleMarker(\n              {lat: p[0], lng: p[1]}, {\n                radius,\n                color: positionData.borderColor || positionData.color,\n                fillColor: positionData.color,\n                weight: 2,\n                fillOpacity: 0.3,\n              });\n            this.addPopup(positionData, p[2], undefined, marker);\n            group.addLayer(marker);\n          }\n          break;\n        case 'dots':\n        default:\n          size = (positionData.positions || []).length;\n          for (let i = 0; i < size; i++) {\n            const p = positionData.positions[i];\n            const marker = Leaflet.circleMarker(\n              {lat: p[0], lng: p[1]}, {\n                radius: positionData.baseRadius || MapLib.BASE_RADIUS,\n                color: positionData.borderColor || positionData.color,\n                fillColor: positionData.color,\n                weight: 2,\n                fillOpacity: 0.7,\n              });\n            this.addPopup(positionData, p[2] || 'na', undefined, marker);\n            group.addLayer(marker);\n          }\n          break;\n      }\n    }\n    this.positionDataLayer.addLayer(group);\n  }\n\n  public resize(): Promise<boolean> {\n    return new Promise<boolean>(resolve => {\n      this.resizeMe();\n      resolve(true);\n    });\n  }\n\n  onRangeSliderChange(event) {\n    this.LOG.debug(['onRangeSliderChange'], event);\n    this.timeStart = event.value || moment().valueOf();\n    this.timeEnd = event.highValue || moment().valueOf();\n    this.drawMap(true);\n  }\n\n  onRangeSliderWindowChange(event) {\n    this.LOG.debug(['onRangeSliderWindowChange'], event);\n    if (this.lowerTimeBound !== event.min || this.upperTimeBound !== event.max) {\n      this.lowerTimeBound = event.min;\n      this.upperTimeBound = event.max;\n    }\n  }\n\n  onSliderChange(event) {\n    this.LOG.debug(['onSliderChange'], event, moment(event.value).toISOString());\n    this._firstDraw = false;\n    if (this.timeEnd !== event.value) {\n      this.timeSpan = this.timeSpan || this._options.map.timeSpan;\n      this.timeEnd = event.value || moment().valueOf();\n      this.timeStart = (event.value || moment().valueOf()) - this.timeSpan / this.divider;\n      this.LOG.debug(['onSliderChange'], moment(this.timeStart).toISOString(), moment(this.timeEnd).toISOString());\n      this.change.emit(this.timeStart);\n      this.drawMap(true);\n    }\n  }\n\n  updateTimeSpan(event) {\n    this.LOG.debug(['updateTimeSpan'], event.target.value);\n    if (this.timeSpan !== event.target.value) {\n      this.timeSpan = event.target.value;\n      this.timeStart = (this.timeEnd || moment().valueOf()) - this.timeSpan / this.divider;\n      this.drawMap(true);\n    }\n  }\n}\n","/*\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */\n\nimport {Component, EventEmitter, Input, Output, ViewEncapsulation} from '@angular/core';\n\n@Component({\n  selector: 'warpview-heatmap-sliders',\n  templateUrl: './warp-view-heatmap-sliders.component.html',\n  styleUrls: ['./warp-view-heatmap-sliders.component.scss'],\n  encapsulation: ViewEncapsulation.ShadowDom\n})\nexport class WarpViewHeatmapSlidersComponent {\n\n  @Input('radiusValue') radiusValue: number;\n  @Input('minRadiusValue') minRadiusValue: number;\n  @Input('maxRadiusValue') maxRadiusValue: number;\n  @Input('blurValue') blurValue: number;\n  @Input('minBlurValue') minBlurValue: number;\n  @Input('maxBlurValue') maxBlurValue: number;\n\n  @Output('heatRadiusDidChange') heatRadiusDidChange = new EventEmitter<any>();\n  @Output('heatBlurDidChange') heatBlurDidChange = new EventEmitter<any>();\n  @Output('heatOpacityDidChange') heatOpacityDidChange = new EventEmitter<any>();\n\n  radiusChanged(value) {\n    this.heatRadiusDidChange.emit(value);\n  }\n\n  blurChanged(value) {\n    this.heatBlurDidChange.emit(value);\n  }\n\n  opacityChanged(value) {\n    this.heatOpacityDidChange.emit(value);\n  }\n}\n","/*\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */\n\nimport {Component, ElementRef, EventEmitter, Input, NgZone, OnInit, Output, Renderer2, ViewEncapsulation} from '@angular/core';\nimport {WarpViewComponent} from '../warp-view-component';\nimport {DataModel} from '../../model/dataModel';\nimport {ColorLib} from '../../utils/color-lib';\nimport deepEqual from 'deep-equal';\nimport {SizeService} from '../../services/resize.service';\nimport {Logger} from '../../utils/logger';\nimport {ChartLib} from '../../utils/chart-lib';\nimport {Param} from '../../model/param';\nimport {GTSLib} from '../../utils/gts.lib';\nimport {GTS} from '../../model/GTS';\n\n@Component({\n  selector: 'warpview-pie',\n  templateUrl: './warp-view-pie.component.html',\n  styleUrls: ['./warp-view-pie.component.scss'],\n  encapsulation: ViewEncapsulation.ShadowDom\n})\nexport class WarpViewPieComponent extends WarpViewComponent implements OnInit {\n\n  @Input('type') set type(type: string) {\n    this._type = type;\n    this.drawChart();\n  }\n\n  @Output('chartDraw') chartDraw = new EventEmitter<any>();\n\n  private _type = 'pie';\n  layout: Partial<any> = {\n    showlegend: true,\n    legend: {\n      orientation: 'h',\n      bgcolor: 'transparent',\n    },\n    orientation: 270,\n    margin: {\n      t: 10,\n      b: 25,\n      r: 10,\n      l: 10\n    }\n  };\n\n  update(options, refresh): void {\n    this.LOG.debug(['onOptions', 'before'], this._options, options);\n    if (!deepEqual(options, this._options)) {\n      this.LOG.debug(['options', 'changed'], options);\n      this._options = ChartLib.mergeDeep(this._options, options as Param) as Param;\n    }\n    this.drawChart();\n  }\n\n  constructor(\n    public el: ElementRef,\n    public renderer: Renderer2,\n    public sizeService: SizeService,\n    public ngZone: NgZone\n  ) {\n    super(el, renderer, sizeService, ngZone);\n    this.LOG = new Logger(WarpViewPieComponent, this._debug);\n  }\n\n  ngOnInit(): void {\n    this._options = this._options || this.defOptions;\n  }\n\n  drawChart() {\n    if (!this.initChart(this.el)) {\n      return;\n    }\n    this.LOG.debug(['drawChart', 'this.layout'], this.layout);\n    this.LOG.debug(['drawChart', 'this.plotlyConfig'], this.plotlyConfig);\n    this.LOG.debug(['drawChart', 'this.plotlyData'], this.plotlyData);\n    this.layout.legend.font = {\n      color: this.getCSSColor(this.el.nativeElement, '--warp-view-font-color', '#000')\n    };\n    this.layout.textfont = {\n      color: this.getCSSColor(this.el.nativeElement, '--warp-view-font-color', '#000')\n    };\n    this.loading = false;\n  }\n\n  protected convert(data: DataModel): Partial<any>[] {\n    const gtsList = GTSLib.flatDeep(data.data as any[]);\n    const plotData = [] as Partial<any>[];\n    this.LOG.debug(['convert', 'gtsList'], gtsList);\n    const pieData = {\n      values: [],\n      labels: [],\n      marker: {\n        colors: [],\n        line: {\n          width: 3,\n          color: [],\n        }\n      },\n      textfont: {\n        color: this.getLabelColor(this.el.nativeElement)\n      },\n      hoverlabel: {\n        bgcolor: this.getCSSColor(this.el.nativeElement, '--warp-view-chart-legend-bg', '#000000'),\n        bordercolor: 'grey',\n        font: {\n          color: this.getCSSColor(this.el.nativeElement, '--warp-view-chart-legend-color', '#ffffff')\n        }\n      },\n      type: 'pie'\n    } as any;\n    const dataList = [];\n    this.LOG.debug(['convert', 'gtsList'], gtsList);\n    if (!gtsList || gtsList.length === 0) {\n      return;\n    }\n    const dataStruct = [];\n    if (GTSLib.isGts(gtsList[0])) {\n      gtsList.forEach((gts: GTS, i) => {\n        const values = (gts.v || []);\n        const val = values[values.length - 1] || [];\n        let value = 0;\n        if (val.length > 0) {\n          value = val[val.length - 1];\n        }\n        dataStruct.push({\n          key: GTSLib.serializeGtsMetadata(gts),\n          value\n        });\n      });\n    } else {\n      // custom data format\n      gtsList.forEach((gts, i) => {\n        dataStruct.push({\n          key: gts.key || '',\n          value: gts.value || Number.MIN_VALUE\n        });\n      });\n    }\n    this.LOG.debug(['convert', 'dataStruct'], dataStruct);\n    dataStruct.forEach((d: any, i) => {\n        const c = ColorLib.getColor(i, this._options.scheme);\n        const color = ((data.params || [])[i] || {datasetColor: c}).datasetColor || c;\n        pieData.values.push(d.value);\n        pieData.labels.push(d.key);\n        pieData.marker.colors.push(ColorLib.transparentize(color));\n        pieData.marker.line.color.push(color);\n        if (this._type === 'donut') {\n          pieData.hole = 0.5;\n        }\n        if (this.unit) {\n          pieData.title = {\n            text: this.unit\n          };\n        }\n    });\n    if (pieData.values.length > 0) {\n      plotData.push(pieData);\n    }\n    this.noData = plotData.length === 0;\n    return plotData;\n  }\n}\n","/*\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */\n\nimport {Component, ElementRef, Input, NgZone, OnInit, Renderer2, ViewEncapsulation} from '@angular/core';\nimport {WarpViewComponent} from '../warp-view-component';\nimport {DataModel} from '../../model/dataModel';\nimport gauge from 'canvas-gauges';\nimport {ColorLib} from '../../utils/color-lib';\nimport deepEqual from 'deep-equal';\nimport {SizeService} from '../../services/resize.service';\nimport {Logger} from '../../utils/logger';\nimport {ChartLib} from '../../utils/chart-lib';\nimport {Param} from '../../model/param';\nimport {GTSLib} from '../../utils/gts.lib';\nimport {GTS} from '../../model/GTS';\n\n@Component({\n  selector: 'warpview-gauge',\n  templateUrl: './warp-view-gauge.component.html',\n  styleUrls: ['./warp-view-gauge.component.scss'],\n  encapsulation: ViewEncapsulation.ShadowDom\n})\nexport class WarpViewGaugeComponent extends WarpViewComponent implements OnInit {\n  @Input('type') set type(type: string) {\n    this._type = type;\n    this.drawChart();\n  }\n\n  private CHART_MARGIN = 0.05;\n  private lineHeight = 50;\n  // tslint:disable-next-line:variable-name\n  private _type = 'gauge'; // gauge or bullet\n  layout: Partial<any> = {\n    showlegend: false,\n    autosize: false,\n    autoexpand: false,\n    margin: {\n      t: 10,\n      b: 2,\n      r: 10,\n      l: 10\n    },\n  };\n\n  constructor(\n    public el: ElementRef,\n    public renderer: Renderer2,\n    public sizeService: SizeService,\n    public ngZone: NgZone\n  ) {\n    super(el, renderer, sizeService, ngZone);\n    this.LOG = new Logger(WarpViewGaugeComponent, this._debug);\n  }\n\n  ngOnInit(): void {\n    this._options = this._options || this.defOptions;\n  }\n\n  update(options, refresh): void {\n    this.LOG.debug(['onOptions', 'before'], this._options, options);\n    if (!deepEqual(options, this._options)) {\n      this.LOG.debug(['options', 'changed'], options);\n      this._options = ChartLib.mergeDeep(this._options, options as Param) as Param;\n    }\n    this.drawChart();\n  }\n\n  drawChart() {\n    if (!this.initChart(this.el)) {\n      return;\n    }\n    this._autoResize = this._type !== 'bullet';\n    this.LOG.debug(['drawChart', 'plotlyData'], this.plotlyData, this._type);\n    // this.layout.autosize = true;\n    this.layout.grid = {\n      rows: Math.ceil(this.plotlyData.length / 2),\n      columns: 2,\n      pattern: 'independent',\n      xgap: 0.2,\n      ygap: 0.2\n    };\n    this.layout.margin = {t: 25, r: 25, l: 25, b: 25};\n    if (this._type === 'bullet') {\n      this.layout.height = 100;\n      this.layout.yaxis = {\n        automargin: true\n      };\n      this.layout.grid = {rows: this.plotlyData.length, columns: 1, pattern: 'independent', ygap: 0.5};\n      const count = this.plotlyData.length;\n      let calculatedHeight = this.lineHeight * count + this.layout.margin.t + this.layout.margin.b;\n      calculatedHeight += this.layout.grid.ygap * calculatedHeight;\n      this.el.nativeElement.style.height = calculatedHeight + 'px';\n      (this.el.nativeElement as HTMLDivElement).style.height = calculatedHeight + 'px';\n      this.height = calculatedHeight;\n      this.layout.height = this.height;\n      this.layout.autosize = false;\n    }\n    this.loading = false;\n  }\n\n  protected convert(data: DataModel): any[] {\n    this.LOG.debug(['convert'], data);\n    let gtsList = data.data as any[];\n    const dataList = [];\n    let overallMax = this._options.maxValue || Number.MIN_VALUE;\n    this.LOG.debug(['convert', 'gtsList'], gtsList);\n    if (!gtsList || gtsList.length === 0) {\n      return;\n    }\n    gtsList = GTSLib.flatDeep(gtsList);\n    let dataStruct = [];\n    if (GTSLib.isGts(gtsList[0])) {\n      gtsList.forEach((gts: GTS, i) => {\n        let max: number = Number.MIN_VALUE;\n        const values = (gts.v || []);\n        const val = values[values.length - 1] || [];\n        let value = 0;\n        if (val.length > 0) {\n          value = val[val.length - 1];\n        }\n        if (!!data.params && !!data.params[i] && !!data.params[i].maxValue) {\n          max = data.params[i].maxValue;\n        } else {\n          if (overallMax < value) {\n            overallMax = value;\n          }\n        }\n        dataStruct.push({\n          key: GTSLib.serializeGtsMetadata(gts),\n          value,\n          max\n        });\n      });\n    } else {\n      // custom data format\n      gtsList.forEach((gts, i) => {\n        let max: number = Number.MIN_VALUE;\n        if (!!data.params && !!data.params[i] && !!data.params[i].maxValue) {\n          max = data.params[i].maxValue;\n        } else {\n          if (overallMax < gts.value || Number.MIN_VALUE) {\n            overallMax = gts.value || Number.MIN_VALUE;\n          }\n        }\n        dataStruct.push({\n          key: gts.key || '',\n          value: gts.value || Number.MIN_VALUE,\n          max\n        });\n      });\n    }\n    //  dataStruct.reverse();\n    this.LOG.debug(['convert', 'dataStruct'], dataStruct);\n    this.layout.annotations = [];\n    let count = Math.ceil(dataStruct.length / 2);\n    if (this._type === 'bullet') {\n      count = dataStruct.length;\n    }\n    const itemHeight = 1 / count;\n    let x = 0;\n    let y = -1 * itemHeight;\n\n    if (this._type === 'bullet') {\n      y = this.CHART_MARGIN;\n    }\n    dataStruct.forEach((gts, i) => {\n      if (this._type === 'bullet') {\n        y += itemHeight;\n      } else {\n        if (i % 2 === 0) {\n          y += itemHeight;\n          x = 0;\n        } else {\n          x = 0.5;\n        }\n      }\n      const c = ColorLib.getColor(i, this._options.scheme);\n      const color = ((data.params || [])[i] || {datasetColor: c}).datasetColor || c;\n      const domain = dataStruct.length > 1 ? {\n        x: [x + this.CHART_MARGIN, x + 0.5 - this.CHART_MARGIN],\n        y: [y - itemHeight + this.CHART_MARGIN, y - this.CHART_MARGIN]\n      } : {\n        x: [0, 1],\n        y: [0, 1]\n      };\n      if (this._type === 'bullet') {\n        domain.x = [0, 1];\n        domain.y = [y - itemHeight + this.CHART_MARGIN * 2, y - this.CHART_MARGIN * 2];\n        // domain.y = [(i > 0 ? i / dataStruct.length : 0) + this.CHART_MARGIN * 2, (i + 1) / dataStruct.length - this.CHART_MARGIN * 2];\n        this.layout.annotations.push({\n          xref: 'x domain',\n          yref: 'y domain',\n          x: 0,\n          xanchor: 'left',\n          y: (i + 1) / count + this.CHART_MARGIN,\n          yanchor: 'top',\n          text: gts.key,\n          showarrow: false,\n          align: 'left',\n          font: {\n            size: 14,\n            color: this.getLabelColor(this.el.nativeElement)\n          }\n        });\n      }\n      dataList.push(\n        {\n          domain,\n          align: 'left',\n          value: gts.value,\n          delta: {\n            reference: !!data.params && !!data.params[i] && !!data.params[i].delta ? data.params[i].delta + gts.value : 0,\n            font: {color: this.getLabelColor(this.el.nativeElement)}\n          },\n          title: {\n            text: this._type === 'bullet'\n            || (!!data.params && !!data.params[i] && !!data.params[i].type && data.params[i].type === 'bullet') ? '' : gts.key,\n            align: 'center',\n            font: {color: this.getLabelColor(this.el.nativeElement)}\n          },\n          number: {\n            font: {color: this.getLabelColor(this.el.nativeElement)}\n          },\n          type: 'indicator',\n          mode: !!data.params && !!data.params[i] && !!data.params[i].delta ? 'number+delta+gauge' : 'gauge+number',\n          gauge: {\n            bgcolor: 'transparent',\n            shape: !!data.params && !!data.params[i] && !!data.params[i].type ? data.params[i].type : this._type || 'gauge',\n            bordercolor: this.getGridColor(this.el.nativeElement),\n            axis: {\n              range: [null, overallMax === Number.MIN_VALUE ? gts.max : overallMax],\n              tickcolor: this.getGridColor(this.el.nativeElement),\n              tickfont: {color: this.getGridColor(this.el.nativeElement)}\n            },\n            bar: {\n              color: ColorLib.transparentize(color),\n              thickness: 1,\n              line: {\n                width: 1,\n                color\n              }\n            }\n          }\n        });\n      this.LOG.debug(['convert', 'dataList'], i);\n    });\n    this.LOG.debug(['convert', 'dataList'], dataList);\n    return dataList;\n  }\n}\n","/*\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */\n\nimport {Component, ElementRef, EventEmitter, HostListener, Input, NgZone, Output, Renderer2, ViewEncapsulation} from '@angular/core';\nimport {WarpViewComponent} from '../warp-view-component';\nimport {Param} from '../../model/param';\nimport {ChartLib} from '../../utils/chart-lib';\nimport moment from 'moment-timezone';\nimport {DataModel} from '../../model/dataModel';\nimport {GTSLib} from '../../utils/gts.lib';\nimport {GTS} from '../../model/GTS';\nimport {ColorLib} from '../../utils/color-lib';\nimport {SizeService} from '../../services/resize.service';\nimport {Logger} from '../../utils/logger';\nimport {ChartBounds} from '../../model/chartBounds';\n\n@Component({\n  selector: 'warpview-annotation',\n  templateUrl: './warp-view-annotation.component.html',\n  styleUrls: ['./warp-view-annotation.component.scss'],\n  encapsulation: ViewEncapsulation.ShadowDom\n})\nexport class WarpViewAnnotationComponent extends WarpViewComponent {\n\n  @Input('hiddenData') set hiddenData(hiddenData: number[]) {\n    const previousVisibility = JSON.stringify(this.visibility);\n    this.LOG.debug(['hiddenData', 'previousVisibility'], previousVisibility);\n    this._hiddenData = hiddenData;\n    this.visibility = [];\n    this.visibleGtsId.forEach(id => this.visibility.push(hiddenData.indexOf(id) < 0 && (id !== -1)));\n    this.LOG.debug(['hiddenData', 'hiddendygraphfullv'], this.visibility);\n    const newVisibility = JSON.stringify(this.visibility);\n    this.LOG.debug(['hiddenData', 'json'], previousVisibility, newVisibility);\n    if (previousVisibility !== newVisibility) {\n      const visible = [];\n      const hidden = [];\n      this.gtsId.forEach((id, i) => {\n        if (this._hiddenData.indexOf(id) > -1) {\n          hidden.push(i);\n        } else {\n          visible.push(i);\n        }\n      });\n      if (visible.length > 0) {\n        this.graph.restyleChart({visible: true}, visible);\n      }\n      if (hidden.length > 0) {\n        this.graph.restyleChart({visible: false}, hidden);\n      }\n      this.LOG.debug(['hiddendygraphtrig', 'destroy'], 'redraw by visibility change');\n    }\n  }\n\n  @Input('type') set type(type: string) {\n    this._type = type;\n    this.drawChart();\n  }\n\n  @Input('standalone') set standalone(isStandalone: boolean) {\n    if (this._standalone !== isStandalone) {\n      this._standalone = isStandalone;\n      this.drawChart();\n    }\n  }\n\n  get standalone(): boolean {\n    return this._standalone;\n  }\n\n  @Output('pointHover') pointHover = new EventEmitter<any>();\n  @Output('chartDraw') chartDraw = new EventEmitter<any>();\n  @Output('boundsDidChange') boundsDidChange = new EventEmitter<any>();\n\n  displayExpander = true;\n  layout: Partial<any> = {\n    showlegend: false,\n    hovermode: 'closest',\n    xaxis: {\n      gridwidth: 1,\n      fixedrange: false,\n      autorange: false,\n      automargin: false,\n      showticklabels: true,\n      showgrid: false\n    },\n    autosize: false,\n    autoexpand: false,\n    yaxis: {\n      showticklabels: false,\n      fixedrange: true,\n      dtick: 1,\n      gridwidth: 1,\n      tick0: 0,\n      nticks: 2,\n      rangemode: 'tozero',\n      tickson: 'boundaries',\n      automargin: true,\n      showline: false,\n      zeroline: true\n    },\n    margin: {\n      t: 30,\n      b: 2,\n      r: 10,\n      l: 10\n    },\n  };\n  marginLeft = 50;\n  expanded = false;\n  // tslint:disable-next-line:variable-name\n  private _type = 'line';\n  private visibility: boolean[] = [];\n  private _standalone = true;\n  private trimmed;\n  private maxTick = Number.MIN_VALUE;\n  private minTick = Number.MAX_VALUE;\n  private visibleGtsId = [];\n  private gtsId = [];\n  private dataHashset = {};\n  private lineHeight = 30;\n  private chartBounds: ChartBounds = new ChartBounds();\n\n  @HostListener('keydown', ['$event'])\n  @HostListener('document:keydown', ['$event'])\n  handleKeyDown($event: KeyboardEvent) {\n    if ($event.key === 'Control') {\n      this.trimmed = setInterval(() => {\n        if (!!this.toolTip.nativeElement.querySelector('#tooltip-body')) {\n          this.toolTip.nativeElement.querySelector('#tooltip-body').classList.add('full');\n        }\n      }, 100);\n    }\n  }\n\n  @HostListener('keyup', ['$event'])\n  @HostListener('document:keyup', ['$event'])\n  handleKeyup($event: KeyboardEvent) {\n    this.LOG.debug(['document:keyup'], $event);\n    if ($event.key === 'Control') {\n      if (!!this.toolTip.nativeElement.querySelector('#tooltip-body')) {\n        if (this.trimmed) {\n          clearInterval(this.trimmed);\n        }\n        this.toolTip.nativeElement.querySelector('#tooltip-body').classList.remove('full');\n      }\n    }\n  }\n\n  constructor(\n    public el: ElementRef,\n    public renderer: Renderer2,\n    public sizeService: SizeService,\n    public ngZone: NgZone\n  ) {\n    super(el, renderer, sizeService, ngZone);\n    this._autoResize = false;\n    this.LOG = new Logger(WarpViewAnnotationComponent, this._debug);\n  }\n\n  update(options: Param, refresh: boolean): void {\n    if (!!options) {\n      this._options = ChartLib.mergeDeep(this._options, options) as Param;\n    }\n    this.drawChart(refresh);\n  }\n\n  updateBounds(min, max, marginLeft) {\n    this.LOG.debug(['updateBounds'], min, max, this._options);\n    this._options.bounds.minDate = min;\n    this._options.bounds.maxDate = max;\n    this.layout.xaxis.autorange = false;\n    this.LOG.debug(['updateBounds'], GTSLib.toISOString(min, this.divider, this._options.timeZone),\n      GTSLib.toISOString(max, this.divider, this._options.timeZone));\n    this.minTick = min;\n    this.maxTick = max;\n    if (this._options.timeMode && this._options.timeMode === 'timestamp') {\n      this.layout.xaxis.tick0 = min / this.divider;\n      this.layout.xaxis.range = [min / this.divider, max / this.divider];\n    } else {\n      this.layout.xaxis.tick0 = GTSLib.toISOString(min, this.divider, this._options.timeZone);\n      this.layout.xaxis.range = [\n        GTSLib.toISOString(min, this.divider, this._options.timeZone),\n        GTSLib.toISOString(max, this.divider, this._options.timeZone)\n      ];\n    }\n    this.layout.margin.l = marginLeft;\n    this.marginLeft = marginLeft;\n    this.layout = {...this.layout};\n    this.LOG.debug(['updateBounds'], {...this.layout.xaxis.range});\n  }\n\n  drawChart(reparseNewData: boolean = false) {\n    this.layout.margin.l = !!this._standalone ? 10 : 50;\n    this.layout.margin.b = !!this._standalone ? 50 : 1;\n    this.height = this.lineHeight + this.layout.margin.t + this.layout.margin.b;\n    if (!this.initChart(this.el)) {\n      return;\n    }\n    this.el.nativeElement.style.display = 'block';\n    this.LOG.debug(['drawChart', 'this.plotlyData'], this.plotlyData);\n    this.LOG.debug(['drawChart', 'hiddenData'], this._hiddenData);\n    this.LOG.debug(['drawChart', 'this._options.bounds'], this._options.bounds);\n    this.layout.yaxis.color = this.getGridColor(this.el.nativeElement);\n    this.layout.yaxis.gridcolor = this.getGridColor(this.el.nativeElement);\n    this.layout.yaxis.showline = !!this._standalone;\n    this.layout.yaxis.zerolinecolor = this.getGridColor(this.el.nativeElement);\n    this.layout.xaxis.color = this.getGridColor(this.el.nativeElement);\n    this.layout.xaxis.gridcolor = this.getGridColor(this.el.nativeElement);\n    this.layout.xaxis.autorange = !!this._standalone;\n    this.layout.xaxis.showticklabels = !!this._standalone;\n    this.displayExpander = (this.plotlyData.length > 1);\n    const count = this.plotlyData.filter(d => d.y.length > 0).length;\n    const calculatedHeight = (this.expanded ? this.lineHeight * count : this.lineHeight) + this.layout.margin.t + this.layout.margin.b;\n    this.el.nativeElement.style.height = calculatedHeight + 'px';\n    this.height = calculatedHeight;\n    this.layout.height = this.height;\n    this.LOG.debug(['drawChart', 'height'], this.height, count, calculatedHeight, this.expanded);\n    this.layout.yaxis.range = [0, this.expanded ? count : 1];\n    this.LOG.debug(['drawChart', 'this.layout'], this.layout);\n    if (this._options.timeMode && this._options.timeMode === 'timestamp') {\n      this.layout.xaxis.tick0 = this.minTick;\n      this.layout.xaxis.range = [this.minTick, this.maxTick];\n      this.layout.xaxis.type = 'linear';\n    } else {\n      this.layout.xaxis.tick0 =\n        GTSLib.toISOString(this.minTick, this.divider, this._options.timeZone);\n      this.layout.xaxis.range = [\n        GTSLib.toISOString(this.minTick, this.divider, this._options.timeZone),\n        GTSLib.toISOString(this.maxTick, this.divider, this._options.timeZone)\n      ];\n      this.layout.xaxis.type = 'date';\n    }\n    this.plotlyConfig.scrollZoom = true;\n    this.layout.xaxis.showgrid = false;\n    setTimeout(() => {\n      this.plotlyConfig = {...this.plotlyConfig};\n      this.layout = {...this.layout};\n      this.loading = false;\n    });\n    this.LOG.debug(['drawChart', 'this.plotlyConfig'], this.plotlyConfig, this.plotlyData);\n  }\n\n  relayout(data: any) {\n    if (data['xaxis.range'] && data['xaxis.range'].length === 2) {\n      this.LOG.debug(['relayout', 'updateBounds', 'xaxis.range'], data['xaxis.range']);\n      this.chartBounds.msmin = data['xaxis.range'][0];\n      this.chartBounds.msmax = data['xaxis.range'][1];\n      this.chartBounds.tsmin = moment.tz(moment(this.chartBounds.msmin), this._options.timeZone).valueOf();\n      this.chartBounds.tsmax = moment.tz(moment(this.chartBounds.msmax), this._options.timeZone).valueOf();\n    } else if (data['xaxis.range[0]'] && data['xaxis.range[1]']) {\n      this.LOG.debug(['relayout', 'updateBounds', 'xaxis.range[x]'], data['xaxis.range[0]']);\n      this.chartBounds.msmin = data['xaxis.range[0]'];\n      this.chartBounds.msmax = data['xaxis.range[1]'];\n      this.chartBounds.tsmin = moment.tz(moment(this.chartBounds.msmin), this._options.timeZone).valueOf();\n      this.chartBounds.tsmax = moment.tz(moment(this.chartBounds.msmax), this._options.timeZone).valueOf();\n    } else if (data['xaxis.autorange']) {\n      this.LOG.debug(['relayout', 'updateBounds', 'autorange'], data);\n      this.chartBounds.tsmin = this.minTick / this.divider;\n      this.chartBounds.tsmax = this.maxTick / this.divider;\n    }\n    this.emitNewBounds(moment.utc(this.chartBounds.tsmin).valueOf(), moment.utc(this.chartBounds.msmax).valueOf());\n  }\n\n  hover(data: any) {\n    this.LOG.debug(['hover'], data);\n    const tooltip = this.toolTip.nativeElement;\n    this.pointHover.emit({\n      x: data.event.offsetX,\n      y: data.event.offsetY\n    });\n    let x = data.xvals[0];\n    if (!!data.points[0]) {\n      x = data.points[0].x;\n    }\n    const layout = this.el.nativeElement.getBoundingClientRect();\n    const count = this.plotlyData.filter(d => d.y.length > 0).length;\n    tooltip.style.opacity = '1';\n    tooltip.style.display = 'block';\n    tooltip.style.paddingLeft = (this._standalone ? 0 : 40) + 'px';\n    tooltip.style.top = (\n      (this.expanded ? count - 1 - (data.points[0].y + 0.5) : -1) * (this.lineHeight) + this.layout.margin.t\n    ) + 6 + 'px';\n    tooltip.classList.remove('right', 'left');\n    tooltip.innerHTML = `<div class=\"tooltip-body trimmed\" id=\"tooltip-body\">\n<span class=\"tooltip-date\">${this._options.timeMode === 'timestamp'\n      ? x\n      : (moment.utc(x).toISOString().replace('Z', this._options.timeZone === 'UTC' ? 'Z' : '') || '')}</span>\n<ul>\n<li>${GTSLib.formatLabel(data.points[0].data.name)}: <span class=\"value\">${data.points[0].text}</span></li>\n</ul>\n      </div>`;\n    if (data.event.offsetX > layout.width / 2) {\n      tooltip.classList.add('left');\n    } else {\n      tooltip.classList.add('right');\n    }\n    tooltip.style.pointerEvents = 'none';\n  }\n\n  unhover() {\n    this.toolTip.nativeElement.style.display = 'none';\n  }\n\n  afterPlot(div) {\n    this.loading = false;\n    this.chartBounds.tsmin = this.minTick;\n    this.chartBounds.tsmax = this.maxTick;\n    this.chartDraw.emit(this.chartBounds);\n    this.LOG.debug(['afterPlot'], this.chartBounds, div);\n  }\n\n  private emitNewBounds(min, max) {\n    if (this._options.timeMode && this._options.timeMode === 'timestamp') {\n      this.boundsDidChange.emit({bounds: {min, max}, source: 'annotation'});\n    } else {\n      this.boundsDidChange.emit({\n        bounds: {\n          min: moment.tz(min, this._options.timeZone).valueOf(),\n          max: moment.tz(max, this._options.timeZone).valueOf()\n        },\n        source: 'annotation'\n      });\n    }\n  }\n\n  protected convert(data: DataModel): Partial<any>[] {\n    const dataset: Partial<any>[] = [];\n    let gtsList = GTSLib.flatDeep(GTSLib.flattenGtsIdArray(data.data as any[], 0).res);\n    this.maxTick = Number.NEGATIVE_INFINITY;\n    this.minTick = Number.POSITIVE_INFINITY;\n    this.visibleGtsId = [];\n    this.gtsId = [];\n    const nonPlottable = gtsList.filter(g => g.v && GTSLib.isGtsToPlot(g));\n    gtsList = gtsList.filter(g => g.v && !GTSLib.isGtsToPlot(g));\n    let timestampMode = true;\n    const tsLimit = 100 * GTSLib.getDivider(this._options.timeUnit);\n    gtsList.forEach((gts: GTS) => {\n      const ticks = gts.v.map(t => t[0]);\n      const size = gts.v.length;\n      timestampMode = timestampMode && (ticks[0] > -tsLimit && ticks[0] < tsLimit);\n      timestampMode = timestampMode && (ticks[size - 1] > -tsLimit && ticks[size - 1] < tsLimit);\n    });\n    if (timestampMode || this._options.timeMode === 'timestamp') {\n      this.layout.xaxis.type = 'linear';\n    } else {\n      this.layout.xaxis.type = 'date';\n    }\n    gtsList.forEach((gts: GTS, i) => {\n      if (gts.v) {\n        const size = gts.v.length;\n        const label = GTSLib.serializeGtsMetadata(gts);\n        const c = ColorLib.getColor(gts.id, this._options.scheme);\n        const color = ((data.params || [])[i] || {datasetColor: c}).datasetColor || c;\n        const series: Partial<any> = {\n          type: 'scattergl',\n          mode: 'markers',\n          name: label,\n          x: [],\n          y: [],\n          text: [],\n          hoverinfo: 'none',\n          connectgaps: false,\n          visible: !(this._hiddenData.filter(h => h === gts.id).length > 0),\n          line: {color},\n          marker: {\n            symbol: 'line-ns-open',\n            color,\n            size: 20,\n            width: 5,\n          }\n        };\n        this.visibleGtsId.push(gts.id);\n        this.gtsId.push(gts.id);\n        if (timestampMode || this._options.timeMode && this._options.timeMode === 'timestamp') {\n          this.layout.xaxis.type = 'linear';\n        } else {\n          this.layout.xaxis.type = 'date';\n        }\n        const ticks = [];\n        series.text = [];\n        series.y = [];\n        if (size > 0) {\n          this.minTick = gts.v[0][0];\n          this.maxTick = gts.v[0][0];\n          for (let v = 0; v < size; v++) {\n            const val = gts.v[v];\n            const t = val[0];\n            ticks.push(t);\n            series.text.push(val[val.length - 1]);\n            series.y.push((this.expanded ? i : 0) + 0.5);\n            this.minTick = (t < this.minTick) ? t : this.minTick;\n            this.maxTick = (t > this.maxTick) ? t : this.maxTick;\n          }\n        }\n        if (timestampMode || this._options.timeMode === 'timestamp') {\n          series.x = ticks;\n        } else {\n          series.x = ticks.map(t => GTSLib.toISOString(t, this.divider, this._options.timeZone));\n        }\n        if (series.x.length > 0) {\n          dataset.push(series);\n        }\n      }\n    });\n    this.LOG.debug(['convert'], 'forEach value end', this.minTick, this.maxTick);\n    if (nonPlottable.length > 0) {\n      nonPlottable.forEach(g => {\n        g.v.forEach(value => {\n          const ts = value[0];\n          if (ts < this.minTick) {\n            this.minTick = ts;\n          }\n          if (ts > this.maxTick) {\n            this.maxTick = ts;\n          }\n        });\n      });\n      // if there is not any plottable data, we must add a fake one with id -1. This one will always be hidden.\n      if (0 === gtsList.length) {\n        if (!this.dataHashset[this.minTick]) {\n          this.dataHashset[this.minTick] = [0];\n        }\n        if (!this.dataHashset[this.maxTick]) {\n          this.dataHashset[this.maxTick] = [0];\n        }\n        this.visibility.push(false);\n        this.visibleGtsId.push(-1);\n      }\n    }\n    const x = {tick0: undefined, range: []};\n    if (timestampMode || this._options.timeMode && this._options.timeMode === 'timestamp') {\n      x.tick0 = this.minTick;\n      x.range = [this.minTick, this.maxTick];\n    } else {\n      x.tick0 = GTSLib.toISOString(this.minTick, this.divider, this._options.timeZone);\n      x.range = [\n        GTSLib.toISOString(this.minTick, this.divider, this._options.timeZone),\n        GTSLib.toISOString(this.maxTick, this.divider, this._options.timeZone)\n      ];\n    }\n    this.layout.xaxis = x;\n    this.noData = dataset.length === 0;\n    return dataset;\n  }\n\n  toggle() {\n    this.expanded = !this.expanded;\n    this.drawChart();\n  }\n\n  setRealBounds(chartBounds: ChartBounds) {\n    this.minTick = chartBounds.tsmin;\n    this.maxTick = chartBounds.tsmax;\n    this._options.bounds = this._options.bounds || {};\n    this._options.bounds.minDate = this.minTick;\n    this._options.bounds.maxDate = this.maxTick;\n    const x: any = {\n      tick0: undefined,\n      range: [],\n    };\n    if (this._options.showRangeSelector) {\n      x.rangeslider = {\n        bgcolor: 'transparent',\n        thickness: 40 / this.height\n      };\n    }\n    if (this._options.timeMode && this._options.timeMode === 'timestamp') {\n      x.tick0 = this.minTick / this.divider;\n      x.range = [this.minTick, this.maxTick];\n    } else {\n      x.tick0 = GTSLib.toISOString(this.minTick, this.divider, this._options.timeZone);\n      x.range = [\n        GTSLib.toISOString(this.minTick, this.divider, this._options.timeZone),\n        GTSLib.toISOString(this.maxTick, this.divider, this._options.timeZone)\n      ];\n    }\n    this.layout.xaxis = x;\n    this.layout = {...this.layout};\n  }\n}\n","/*\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */\n\nimport {Component, ElementRef, NgZone, OnInit, Renderer2, ViewEncapsulation} from '@angular/core';\nimport {WarpViewComponent} from '../warp-view-component';\nimport {DataModel} from '../../model/dataModel';\nimport {ColorLib} from '../../utils/color-lib';\nimport {GTS} from '../../model/GTS';\nimport {GTSLib} from '../../utils/gts.lib';\nimport {SizeService} from '../../services/resize.service';\nimport {Logger} from '../../utils/logger';\nimport deepEqual from 'deep-equal';\nimport {ChartLib} from '../../utils/chart-lib';\nimport {Param} from '../../model/param';\n\n@Component({\n  selector: 'warpview-polar',\n  templateUrl: './warp-view-polar.component.html',\n  styleUrls: ['./warp-view-polar.component.scss'],\n  encapsulation: ViewEncapsulation.ShadowDom\n})\n/**\n *\n */\nexport class WarpViewPolarComponent extends WarpViewComponent implements OnInit {\n  layout: Partial<any> = {\n    paper_bgcolor: 'rgba(0,0,0,0)',\n    showlegend: true,\n    legend: {orientation: 'h'},\n    font: {size: 12, familly: '\\'Quicksand\\', sans-serif'},\n    polar: {\n      bgcolor: 'rgba(0,0,0,0)',\n      angularaxis: {\n        type: 'category'\n      },\n      radialaxis: {\n        visible: true,\n      }\n    },\n    orientation: 270,\n    margin: {\n      t: 10,\n      b: 25,\n      r: 10,\n      l: 10\n    }\n  };\n\n  constructor(\n    public el: ElementRef,\n    public renderer: Renderer2,\n    public sizeService: SizeService,\n    public ngZone: NgZone\n  ) {\n    super(el, renderer, sizeService, ngZone);\n    this.LOG = new Logger(WarpViewPolarComponent, this._debug);\n  }\n\n  update(options, refresh): void {\n    this.LOG.debug(['onOptions', 'before'], this._options, options);\n    if (!deepEqual(options, this._options)) {\n      this.LOG.debug(['options', 'changed'], options);\n      this._options = ChartLib.mergeDeep(this._options, options as Param) as Param;\n    }\n    this.drawChart();\n  }\n\n  ngOnInit(): void {\n    this._options = this._options || this.defOptions;\n  }\n\n  private drawChart() {\n    if (!this.initChart(this.el)) {\n      return;\n    }\n    this.layout.polar.radialaxis.color = this.getGridColor(this.el.nativeElement);\n    this.layout.polar.angularaxis.color = this.getGridColor(this.el.nativeElement);\n    this.layout.showlegend = !!this.showLegend;\n    this.LOG.debug(['drawChart', 'this.layout'], this.layout);\n    this.LOG.debug(['drawChart', 'this.plotlyConfig'], this.plotlyConfig);\n    this.LOG.debug(['drawChart', 'this.plotlyData'], this.plotlyData);\n    this.loading = false;\n  }\n\n  protected convert(data: DataModel): Partial<any>[] {\n    const dataset: Partial<any>[] = [];\n    const divider = GTSLib.getDivider(this._options.timeUnit);\n    const gtsList = GTSLib.flatDeep(GTSLib.flattenGtsIdArray(data.data as any[], 0).res);\n    this.LOG.debug(['convert', 'gtsList'], gtsList);\n    let minVal = Number.MAX_VALUE;\n    let maxVal = Number.MIN_VALUE;\n    gtsList.forEach((gts: GTS, i) => {\n      const c = ColorLib.getColor(i, this._options.scheme);\n      const color = ((data.params || [])[gts.id] || {datasetColor: c}).datasetColor || c;\n      const series: any = {\n        r: [],\n        theta: [],\n        marker: {\n          line: {color, width: 1},\n          color: ColorLib.transparentize(color),\n        },\n        fillcolor: ColorLib.transparentize(color),\n        hoverinfo: 'none',\n        name: GTSLib.serializeGtsMetadata(gts),\n        text: GTSLib.serializeGtsMetadata(gts),\n        fill: 'toself',\n        type: 'barpolar',\n      };\n      gts.v.forEach(value => {\n        const ts = value[0];\n        minVal = Math.min(minVal, value[value.length - 1]);\n        maxVal = Math.max(maxVal, value[value.length - 1]);\n        series.r.push(value[value.length - 1]);\n        if (this._options.timeMode && this._options.timeMode === 'timestamp') {\n          series.theta.push(ts.toString());\n        } else {\n          series.theta.push(GTSLib.toISOString(ts, this.divider, this._options.timeZone));\n        }\n      });\n      if (this.unit) {\n        series.title = {\n          text: this.unit\n        };\n      }\n      dataset.push(series);\n    });\n    this.layout.polar.radialaxis.range = [minVal, maxVal];\n    return dataset;\n  }\n}\n","/*\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */\n\nimport {Component, ElementRef, NgZone, OnInit, Renderer2, ViewEncapsulation} from '@angular/core';\nimport {WarpViewComponent} from '../warp-view-component';\nimport {DataModel} from '../../model/dataModel';\nimport {GTSLib} from '../../utils/gts.lib';\nimport {GTS} from '../../model/GTS';\nimport {ColorLib} from '../../utils/color-lib';\nimport deepEqual from 'deep-equal';\nimport {SizeService} from '../../services/resize.service';\nimport {Logger} from '../../utils/logger';\nimport {ChartLib} from '../../utils/chart-lib';\nimport {Param} from '../../model/param';\n\n@Component({\n  selector: 'warpview-radar',\n  templateUrl: './warp-view-radar.component.html',\n  styleUrls: ['./warp-view-radar.component.scss'],\n  encapsulation: ViewEncapsulation.ShadowDom\n})\n/**\n *\n */\nexport class WarpViewRadarComponent extends WarpViewComponent implements OnInit {\n\n  layout: Partial<any> = {\n    paper_bgcolor: 'transparent',\n    showlegend: true,\n    legend: {orientation: 'h'},\n    font: {size: 12},\n    polar: {\n      bgcolor: 'transparent',\n      angularaxis: {type: 'category'},\n      radialaxis: {visible: true}\n    },\n    margin: {\n      t: 0,\n      b: 25,\n      r: 10,\n      l: 10\n    }\n  };\n\n  update(options, refresh): void {\n    this.LOG.debug(['onOptions', 'before'], this._options, options);\n    if (!deepEqual(options, this._options)) {\n      this.LOG.debug(['options', 'changed'], options);\n      this._options = ChartLib.mergeDeep(this._options, options as Param) as Param;\n    }\n    this.drawChart();\n  }\n\n  constructor(\n    public el: ElementRef,\n    public renderer: Renderer2,\n    public sizeService: SizeService,\n    public ngZone: NgZone\n  ) {\n    super(el, renderer, sizeService, ngZone);\n    this.LOG = new Logger(WarpViewRadarComponent, this._debug);\n  }\n\n  ngOnInit(): void {\n    this._options = this._options || this.defOptions;\n  }\n\n  private drawChart() {\n    if (!this.initChart(this.el)) {\n      return;\n    }\n    this.layout.polar.radialaxis.color = this.getGridColor(this.el.nativeElement);\n    this.layout.polar.angularaxis.color = this.getGridColor(this.el.nativeElement);\n    this.layout.showlegend = this.showLegend;\n    this.LOG.debug(['drawChart', 'this.layout'], this.layout);\n    this.LOG.debug(['drawChart', 'this.plotlyConfig'], this.plotlyConfig);\n    this.LOG.debug(['drawChart', 'this.plotlyData'], this.plotlyData);\n    this.loading = false;\n  }\n\n  protected convert(data: DataModel): any[] {\n    const dataset: any[] = [];\n    const divider = GTSLib.getDivider(this._options.timeUnit);\n    const gtsList = GTSLib.flatDeep(GTSLib.flattenGtsIdArray(data.data as any[], 0).res);\n    this.LOG.debug(['convert', 'gtsList'], gtsList);\n    let minVal = Number.MAX_VALUE;\n    let maxVal = Number.MIN_VALUE;\n    gtsList.forEach((gts: GTS, i) => {\n      const c = ColorLib.getColor(i, this._options.scheme);\n      const color = ((data.params || [])[gts.id] || {datasetColor: c}).datasetColor || c;\n      const series: any = {\n        r: [],\n        theta: [],\n        line: {color},\n        marker: {\n          line: {color, width: 1},\n          color: ColorLib.transparentize(color)\n        },\n        fillcolor: ColorLib.transparentize(color),\n        hoverinfo: 'none',\n        name: GTSLib.serializeGtsMetadata(gts),\n        text: GTSLib.serializeGtsMetadata(gts),\n        type: 'scatterpolar',\n        fill: 'toself'\n      };\n      gts.v.forEach(value => {\n        const ts = value[0];\n        series.r.push(value[value.length - 1]);\n        minVal = Math.min(minVal, value[value.length - 1]);\n        maxVal = Math.max(maxVal, value[value.length - 1]);\n        if (this._options.timeMode && this._options.timeMode === 'timestamp') {\n          series.theta.push(ts.toString());\n        } else {\n          series.theta.push(GTSLib.toISOString(ts, this.divider, this._options.timeZone));\n        }\n      });\n      dataset.push(series);\n    });\n    this.layout.polar.radialaxis.range = [minVal, maxVal];\n    return dataset;\n  }\n}\n","/*\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */\n\nimport {\n  AfterViewInit,\n  Component,\n  ElementRef,\n  EventEmitter,\n  HostListener,\n  Input,\n  NgZone,\n  OnInit,\n  Output,\n  Renderer2,\n  ViewChild,\n  ViewEncapsulation\n} from '@angular/core';\nimport {WarpViewComponent} from '../warp-view-component';\nimport {WarpViewModalComponent} from '../warp-view-modal/warp-view-modal.component';\nimport {Param} from '../../model/param';\nimport {WarpViewChartComponent} from '../warp-view-chart/warp-view-chart.component';\nimport {WarpViewAnnotationComponent} from '../warp-view-annotation/warp-view-annotation.component';\nimport {WarpViewMapComponent} from '../warp-view-map/warp-view-map.component';\nimport {WarpViewGtsPopupComponent} from '../warp-view-gts-popup/warp-view-gts-popup.component';\nimport {ChartBounds} from '../../model/chartBounds';\nimport moment from 'moment-timezone';\nimport {GTSLib} from '../../utils/gts.lib';\nimport {GTS} from '../../model/GTS';\nimport {DataModel} from '../../model/dataModel';\nimport {Size, SizeService} from '../../services/resize.service';\nimport {Logger} from '../../utils/logger';\n\n/**\n *\n */\n@Component({\n  selector: 'warpview-plot',\n  templateUrl: './warp-view-plot.component.html',\n  styleUrls: ['./warp-view-plot.component.scss'],\n  encapsulation: ViewEncapsulation.None\n})\nexport class WarpViewPlotComponent extends WarpViewComponent implements OnInit, AfterViewInit {\n  @ViewChild('mainPlotDiv', {static: true}) mainPlotDiv: ElementRef;\n  @ViewChild('timeClip', {static: true}) timeClip: WarpViewModalComponent;\n  @ViewChild('modal', {static: true}) modal: WarpViewModalComponent;\n  @ViewChild('chart') chart: WarpViewChartComponent;\n  @ViewChild('gtsPopupModal') gtsPopupModal: WarpViewGtsPopupComponent;\n  @ViewChild('annotation') annotation: WarpViewAnnotationComponent;\n  @ViewChild('map') map: WarpViewMapComponent;\n  @ViewChild('timeClipElement', {static: true}) timeClipElement: ElementRef;\n  @ViewChild('GTSTree', {static: true}) GTSTree: ElementRef;\n  @ViewChild('controls', {static: true}) controls: ElementRef;\n  @ViewChild('filterInput', {static: true}) filterInput: ElementRef;\n  @ViewChild('tzSelector') tzSelector: ElementRef;\n  @ViewChild('line') line: ElementRef;\n  @ViewChild('main') main: ElementRef;\n\n  @Input('type') set type(type: string) {\n    this._type = type;\n    this.drawChart();\n  }\n\n  get type() {\n    return this._type;\n  }\n\n  @Input('gtsFilter') set gtsFilter(gtsFilter) {\n    this._gtsFilter = gtsFilter;\n    this.drawChart();\n  }\n\n  get gtsFilter() {\n    return this._gtsFilter;\n  }\n\n  @Input('isAlone') isAlone = false;\n  @Input('initialChartHeight') initialChartHeight = 400;\n  @Input('initialMapHeight') initialMapHeight = 400;\n\n  @Output('warpViewChartResize') warpViewChartResize = new EventEmitter<any>();\n  @Output('warpViewNewOptions') warpViewNewOptions = new EventEmitter<any>();\n\n  _options: Param = {\n    ...new Param(), ...{\n      showControls: true,\n      showGTSTree: true,\n      showDots: true,\n      timeZone: 'UTC',\n      timeUnit: 'us',\n      timeMode: 'date',\n      bounds: {}\n    }\n  };\n  _toHide: number[] = [];\n  showChart = true;\n  showMap = false;\n  timeClipValue = '';\n  kbdLastKeyPressed: string[] = [];\n  warningMessage = '';\n  loading = false;\n  gtsIdList: number[] = [];\n  gtsList: DataModel | GTS[] | string;\n\n  private kbdCounter = 0;\n  private gtsFilterCount = 0;\n  private gtsBrowserIndex = -1;\n  private _gtsFilter = 'x';\n  private _type = 'line';\n  private chartBounds: ChartBounds = {\n    tsmin: Number.MAX_VALUE,\n    tsmax: Number.MIN_VALUE,\n    msmax: '',\n    msmin: '',\n    marginLeft: 0\n  };\n  // key event are trapped in plot component.\n  // if one of this key is pressed, default action is prevented.\n  private preventDefaultKeyList: string[] = ['Escape', '/'];\n  private preventDefaultKeyListInModals: string[] = ['Escape', 'ArrowUp', 'ArrowDown', ' ', '/'];\n  private showLine = false;\n  private left: number;\n\n  constructor(\n    public el: ElementRef,\n    public renderer: Renderer2,\n    public sizeService: SizeService,\n    public ngZone: NgZone\n  ) {\n    super(el, renderer, sizeService, ngZone);\n    this.LOG = new Logger(WarpViewPlotComponent, this._debug);\n  }\n\n  ngOnInit(): void {\n    this._options = this._options || this.defOptions;\n  }\n\n  ngAfterViewInit(): void {\n    this.drawChart(true);\n    this.resizeArea();\n  }\n\n  @HostListener('keydown', ['$event'])\n  handleKeydown(ev: KeyboardEvent) {\n    this.LOG.debug(['handleKeydown'], ev);\n    if (!this.isAlone) {\n      this.handleKeyPress(ev).then(() => {\n        // empty\n      });\n    }\n  }\n\n  stateChange(event: any) {\n    this.LOG.debug(['stateChange'], event);\n    switch (event.id) {\n      case 'timeSwitch' :\n        if (event.state) {\n          this._options.timeMode = 'timestamp';\n        } else {\n          this._options.timeMode = 'date';\n        }\n        this.drawChart(true);\n        break;\n      case 'typeSwitch' :\n        if (event.state) {\n          this._type = 'step';\n        } else {\n          this._type = 'line';\n        }\n        this.drawChart(true);\n        break;\n      case 'chartSwitch' :\n        this.showChart = event.state;\n        this.drawChart(false);\n        break;\n      case 'mapSwitch' :\n        this.showMap = event.state;\n        if (this.showMap) {\n          requestAnimationFrame(() => this.map.resize());\n        }\n        break;\n    }\n    this.warpViewNewOptions.emit(this._options);\n  }\n\n  boundsDidChange(event) {\n    this.LOG.debug(['updateBounds'], event);\n    this._options.bounds = this._options.bounds || {};\n    if (this._options.bounds.minDate !== event.bounds.min && this._options.bounds.maxDate !== event.bounds.max) {\n      this._options.bounds = this._options.bounds || {};\n      this._options.bounds.minDate = event.bounds.min;\n      this._options.bounds.maxDate = event.bounds.max;\n      this.warpViewNewOptions.emit(this._options);\n      if (event.source === 'chart') {\n        this.annotation.updateBounds(event.bounds.min, event.bounds.max, event.bounds.marginLeft);\n      } else if (event.source === 'annotation') {\n        this.chart.updateBounds(event.bounds.min, event.bounds.max);\n      }\n      this.LOG.debug(['updateBounds'],\n        GTSLib.toISOString(event.bounds.min, 1, this._options.timeZone),\n        GTSLib.toISOString(event.bounds.max, 1, this._options.timeZone));\n      this.line.nativeElement.style.left = '-100px';\n    }\n  }\n\n  onWarpViewModalClose() {\n    this.mainPlotDiv.nativeElement.focus();\n  }\n\n  warpViewSelectedGTS(event) {\n    this.LOG.debug(['warpViewSelectedGTS'], event);\n    if (!this._toHide.find(i => {\n      return i === event.gts.id;\n    }) && !event.selected) { // if not in toHide and state false, put id in toHide\n      this._toHide.push(event.gts.id);\n    } else {\n      if (event.selected) { // if in toHide and state true, remove it from toHide\n        this._toHide = this._toHide.filter(i => {\n          return i !== event.gts.id;\n        });\n      }\n    }\n    this.LOG.debug(['warpViewSelectedGTS', 'this._toHide'], this._toHide);\n    this.ngZone.run(() => {\n      this._toHide = [...this._toHide];\n    });\n  }\n\n  handleMouseMove(evt: MouseEvent) {\n    evt.preventDefault();\n    if (this.showLine && this.line) {\n      this.line.nativeElement.style.left = Math.max(evt.pageX - this.left, 50) + 'px';\n    }\n  }\n\n  handleMouseEnter(evt: MouseEvent) {\n    evt.preventDefault();\n    this.left = this.left || this.main.nativeElement.getBoundingClientRect().left;\n    this.showLine = true;\n    if (this.line) {\n      this.renderer.setStyle(this.line.nativeElement, 'display', 'block');\n    }\n  }\n\n  handleMouseOut(evt: MouseEvent) {\n    // evt.preventDefault();\n    if (this.line) {\n      this.showLine = false;\n      this.renderer.setStyle(this.line.nativeElement, 'left', '-100px');\n      this.renderer.setStyle(this.line.nativeElement, 'display', 'none');\n    }\n  }\n\n  update(options, refresh): void {\n    this.drawChart(refresh);\n  }\n\n  inputTextKeyboardEvents(e: KeyboardEvent) {\n    e.stopImmediatePropagation();\n    if (e.key === 'Enter') {\n      this.applyFilter();\n    } else if (e.key === 'Escape') {\n      this.pushKbdEvent('Escape');\n      this.modal.close();\n    }\n  }\n\n  tzSelected(event) {\n    const timeZone = this.tzSelector.nativeElement.value;\n    this.LOG.debug(['timezone', 'tzselect'], timeZone, event);\n    delete this._options.bounds;\n    this._options.timeZone = timeZone;\n    this.tzSelector.nativeElement.setAttribute('class', timeZone === 'UTC' ? 'defaulttz' : 'customtz');\n    this.drawChart();\n  }\n\n  public getTimeClip(): Promise<ChartBounds> {\n    this.LOG.debug(['getTimeClip'], this.chart.getTimeClip());\n    return this.chart.getTimeClip();\n  }\n\n  resizeChart(event) {\n    if (this.initialChartHeight !== event) {\n      this.LOG.debug(['resizeChart'], event);\n      this.initialChartHeight = event;\n      this.sizeService.change(new Size(this.width, event));\n    }\n  }\n\n  drawChart(firstDraw: boolean = false) {\n    this.LOG.debug(['drawCharts'], this._data, this._options);\n    if (!this._data || !this._data.data || this._data.data.length === 0) {\n      return;\n    }\n    if (this.timeClip) {\n      this.timeClip.close();\n    }\n    if (this.modal) {\n      this.modal.close();\n    }\n    this.LOG.debug(['PPts'], 'firstdraw ', firstDraw);\n    if (firstDraw) { // on the first draw, we can set some default options.\n      // automatically switch to timestamp mode\n      // when the first tick and last tick of all the series are in the interval [-100ms 100ms]\n      const tsLimit = 100 * GTSLib.getDivider(this._options.timeUnit);\n      const dataList = this._data.data;\n      if (dataList) {\n        let gtsList = GTSLib.flattenGtsIdArray(dataList as any, 0).res;\n        gtsList = GTSLib.flatDeep(gtsList);\n        let timestampMode = true;\n        let totalDatapoints = 0;\n        gtsList.forEach(g => {\n          this.gtsIdList.push(g.id); // usefull for gts browse shortcut\n          if (g.v.length > 0) { // if gts not empty\n            timestampMode = timestampMode && (g.v[0][0] > -tsLimit && g.v[0][0] < tsLimit);\n            timestampMode = timestampMode && (g.v[g.v.length - 1][0] > -tsLimit && g.v[g.v.length - 1][0] < tsLimit);\n            totalDatapoints += g.v.length;\n          }\n        });\n        if (timestampMode) {\n          this._options.timeMode = 'timestamp';\n        }\n        this.LOG.debug(['drawCharts', 'parsed', 'timestampMode'], timestampMode);\n      }\n    }\n    this.gtsList = this._data;\n    this._options = {...this._options};\n\n    this.LOG.debug(['drawCharts', 'parsed'], this._data, this._options);\n    this.resizeArea();\n  }\n\n  focus(event: any) {\n    // read the first 4 letters of id of all elements in the click tree\n    const idListClicked = event.path.map(el => (el.id || '').slice(0, 4));\n    // if not alone on the page, and click is not on the timezone selector and not on the map, force focus.\n    if (!this.isAlone && idListClicked.indexOf('tzSe') < 0 && idListClicked.indexOf('map-') < 0) {\n      this.mainPlotDiv.nativeElement.focus();\n    } // prevent stealing focus of the timezone selector.\n  }\n\n  private async handleKeyPress(ev: KeyboardEvent) {\n    this.LOG.debug(['handleKeyPress'], ev);\n    if (this.preventDefaultKeyList.indexOf(ev.key) >= 0) {\n      ev.preventDefault();\n    }\n    if (await this.timeClip.isOpened() || await this.modal.isOpened() || await this.gtsPopupModal.isOpened()) {\n      if (this.preventDefaultKeyListInModals.indexOf(ev.key) >= 0) {\n        ev.preventDefault();\n      }\n    }\n    if (ev.key === '/') {\n      this.modal.open();\n      this.filterInput.nativeElement.focus();\n      this.filterInput.nativeElement.select();\n    } else if (ev.key === 't') {\n      this.chart.getTimeClip().then(tc => {\n        this.timeClipValue = `<p>keep data between\n          ${this._options.timeMode === 'timestamp' ? tc.tsmin : moment.tz(tc.tsmin, this._options.timeZone).toLocaleString()} and\n          ${this._options.timeMode === 'timestamp' ? tc.tsmax : moment.tz(tc.tsmax, this._options.timeZone).toLocaleString()}\n          ${this._options.timeUnit !== 'us' ? ' (for a ' + this._options.timeUnit + ' platform)' : ''}</p>\n          <pre><code>${Math.round(tc.tsmax)} ${Math.round(tc.tsmax - tc.tsmin)} TIMECLIP</code></pre>`;\n        this.timeClip.open();\n      });\n    } else if (ev.key === 'b' || ev.key === 'B') { // browse among all gts\n      if (this.gtsBrowserIndex < 0) {\n        this.gtsBrowserIndex = 0;\n      }\n      if (ev.key === 'b') { // increment index\n        this.gtsBrowserIndex++;\n        if (this.gtsBrowserIndex === this.gtsIdList.length) {\n          this.gtsBrowserIndex = 0;\n        }\n      } else { // decrement index\n        this.gtsBrowserIndex--;\n        if (this.gtsBrowserIndex < 0) {\n          this.gtsBrowserIndex = this.gtsIdList.length - 1;\n        }\n      }\n      this._toHide = this.gtsIdList.filter(v => v !== this.gtsIdList[this.gtsBrowserIndex]); // hide all but one\n    } else if (ev.key === 'n') {\n      this._toHide = [...this.gtsIdList];\n      return false;\n    } else if (ev.key === 'a') {\n      this._toHide = [];\n    } else if (ev.key === 'Escape') {\n      this.timeClip.isOpened().then(r => {\n        if (r) {\n          this.timeClip.close();\n        }\n      });\n      this.modal.isOpened().then(r => {\n        if (r) {\n          this.modal.close();\n        }\n      });\n      this.gtsPopupModal.isOpened().then(r => {\n        if (r) {\n          this.gtsPopupModal.close();\n        }\n      });\n    } else {\n      this.pushKbdEvent(ev.key);\n    }\n    this.LOG.debug(['handleKeyPress', 'this.gtsIdList'], this._toHide, this.gtsBrowserIndex);\n  }\n\n  applyFilter() {\n    this.gtsFilterCount++;\n    this._gtsFilter = this.gtsFilterCount.toString().slice(0, 1) + this.filterInput.nativeElement.value;\n    this.modal.close();\n  }\n\n  private pushKbdEvent(key: string) {\n    this.kbdCounter++;\n    this.kbdLastKeyPressed = [key, this.kbdCounter.toString()];\n  }\n\n  getTZ() {\n    return moment.tz.names();\n  }\n\n  protected convert(data: DataModel): any[] {\n    return [];\n  }\n\n  onChartDraw($event: any, component) {\n    if (\n      this.chartBounds\n      && $event\n      && this.chartBounds.tsmin !== Math.min(this.chartBounds.tsmin, $event.tsmin)\n      && this.chartBounds.tsmax !== Math.max(this.chartBounds.tsmax, $event.tsmax)\n    ) {\n      this.chartBounds.tsmin = Math.min(this.chartBounds.tsmin, $event.tsmin);\n      this.chartBounds.tsmax = Math.max(this.chartBounds.tsmax, $event.tsmax);\n      this.annotation.setRealBounds(this.chartBounds);\n      this.chart.setRealBounds(this.chartBounds);\n      this.chartDraw.emit();\n      this.LOG.debug(['onChartDraw', 'this.chartBounds'], component, this.chartBounds, $event);\n    } else {\n      this.chartDraw.emit($event);\n    }\n    this.resizeArea();\n  }\n\n  private resizeArea() {\n    if (this.showChart && !!this.chart) {\n      let h = this.chart.el.nativeElement.getBoundingClientRect().height;\n      if (h > 0) {\n        if (!!this.GTSTree) {\n          h -= this.GTSTree.nativeElement.getBoundingClientRect().height;\n        }\n        if (!!this.controls) {\n          h -= this.controls.nativeElement.getBoundingClientRect().height;\n        }\n        this.initialChartHeight = h;\n      } else {\n        setTimeout(() => this.resizeArea(), 100);\n      }\n    }\n  }\n}\n","/*\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */\n\nimport {AfterViewInit, Component, ElementRef, EventEmitter, Input, Output, Renderer2, ViewChild, ViewEncapsulation} from '@angular/core';\nimport {Logger} from '../../utils/logger';\n\n/**\n *\n */\n@Component({\n  selector: 'warpview-resize',\n  templateUrl: './warp-view-resize.component.html',\n  styleUrls: ['./warp-view-resize.component.scss'],\n  encapsulation: ViewEncapsulation.None\n})\nexport class WarpViewResizeComponent implements AfterViewInit {\n  @ViewChild('handleDiv', {static: true}) handleDiv: ElementRef;\n  @ViewChild('wrapper', {static: true}) wrapper: ElementRef;\n  @Input('minHeight') minHeight = '10';\n  @Input('initialHeight') initialHeight = 100;\n\n  @Input('debug') set debug(debug: boolean) {\n    this._debug = debug;\n    this.LOG.setDebug(debug);\n  }\n\n  get debug() {\n    return this._debug;\n  }\n\n  @Output('resize') resize = new EventEmitter();\n\n  private dragging = false;\n  private moveListener: EventListener;\n  private clickUpListener: EventListener;\n  private LOG: Logger;\n  private _debug = false;\n\n  constructor(private el: ElementRef, private renderer: Renderer2) {\n    this.LOG = new Logger(WarpViewResizeComponent, this._debug);\n  }\n\n  ngAfterViewInit(): void {\n    this.LOG.debug(['ngAfterViewInit'], this.initialHeight);\n    this.renderer.setStyle(this.wrapper.nativeElement, 'height', this.initialHeight + 'px');\n    // the click event on the handlebar attach mousemove and mouseup events to document.\n    this.handleDiv.nativeElement.addEventListener('mousedown', (ev: MouseEvent) => {\n      if (0 === ev.button) {\n        // keep left click only\n        this.moveListener = this.handleDraggingMove.bind(this);\n        this.clickUpListener = this.handleDraggingEnd.bind(this);\n        document.addEventListener('mousemove', this.moveListener, false);\n        document.addEventListener('mouseup', this.clickUpListener, false);\n      }\n    });\n  }\n\n  private handleDraggingEnd() {\n    this.dragging = false;\n    // the mouseup detach mousemove and mouseup events from document.\n    if (this.moveListener) {\n      document.removeEventListener('mousemove', this.moveListener, false);\n      this.moveListener = null;\n    }\n    if (this.clickUpListener) {\n      document.removeEventListener('mouseup', this.clickUpListener, false);\n      this.clickUpListener = null;\n    }\n  }\n\n  private handleDraggingMove(ev: MouseEvent) {\n    ev.preventDefault();\n    this.LOG.debug(['handleDraggingMove'], ev);\n    // compute Y of the parent div top relative to page\n    const yTopParent = this.handleDiv.nativeElement.parentElement.getBoundingClientRect().top\n      - document.body.getBoundingClientRect().top;\n    // compute new parent height\n    let h = ev.pageY - yTopParent + this.handleDiv.nativeElement.getBoundingClientRect().height / 2;\n    if (h < parseInt(this.minHeight, 10)) {\n      h = parseInt(this.minHeight, 10);\n    }\n    // apply new height\n    this.renderer.setStyle(this.handleDiv.nativeElement.parentElement, 'height', h + 'px');\n    this.LOG.debug(['handleDraggingMove'], h);\n    this.resize.emit(h);\n  }\n}\n","/*\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */\nimport {AfterViewInit, Component, ElementRef, EventEmitter, Input, Output, ViewChild, ViewEncapsulation} from '@angular/core';\nimport moment from 'moment';\nimport {Logger} from '../../utils/logger';\nimport * as noUiSlider from 'nouislider';\n\n/**\n *\n */\n@Component({\n  selector: 'warpview-slider',\n  templateUrl: './warp-view-slider.component.html',\n  styleUrls: ['./warp-view-slider.component.scss'],\n  encapsulation: ViewEncapsulation.ShadowDom\n})\nexport class WarpViewSliderComponent implements AfterViewInit {\n  @ViewChild('slider') slider: ElementRef<HTMLDivElement>;\n\n  @Input('min') set min(m) {\n    this.LOG.debug(['min'], m);\n    this._min = m;\n    this.setOptions();\n  }\n\n  get min() {\n    return this._min;\n  }\n\n  @Input('max') set max(m) {\n    this.LOG.debug(['max'], m);\n    this._max = m;\n    this.setOptions();\n  }\n\n  get max() {\n    return this._max;\n  }\n\n\n  @Input('value') value: number;\n\n  @Input('step') set step(step: number) {\n    this.LOG.debug(['step'], step);\n    if (this._step !== step) {\n      this._step = step;\n      this.setOptions();\n    }\n  }\n\n  get step() {\n    return this._step;\n  }\n\n  @Input('mode') mode = 'timestamp';\n\n  @Input('debug') set debug(debug: boolean) {\n    this._debug = debug;\n    this.LOG.setDebug(debug);\n  }\n\n  get debug() {\n    return this._debug;\n  }\n\n  @Output('change') change = new EventEmitter();\n\n  _min: number;\n  _max: number;\n  show = false;\n  protected _uiSlider;\n  protected _step = 0;\n  protected LOG: Logger;\n  loaded = false;\n  protected manualRefresh: EventEmitter<void> = new EventEmitter<void>();\n  protected _debug = false;\n\n  constructor() {\n    this.LOG = new Logger(WarpViewSliderComponent, this.debug);\n    this.LOG.debug(['constructor'], this.debug);\n  }\n\n  ngAfterViewInit(): void {\n    this.loaded = false;\n    this.setOptions();\n  }\n\n  protected setOptions() {\n    if (!this._min && !this._max) {\n      return;\n    }\n    this.LOG.debug(['_step'], this._step);\n    const tmpVAl = Math.min(Math.max(this.value || Number.MIN_VALUE, this._min), this._max);\n    if (tmpVAl !== this.value && this.loaded) {\n      this.change.emit(tmpVAl);\n    }\n    this.value = tmpVAl;\n    this.loaded = true;\n    this.LOG.debug(['noUiSlider'], this.slider);\n    if (this.slider) {\n      if (!this._uiSlider) {\n        const opts = {\n          start: [this.value + 1],\n          tooltips: [this.getFormat()],\n          range: {min: [this._min], max: [this._max]}\n        } as any;\n        if (!!this._step && this._step > 0) {\n          opts.step = Math.floor((this._max - this._min) / this._step);\n        }\n        this._uiSlider = noUiSlider.create(this.slider.nativeElement, opts);\n        this._uiSlider.on('end', event => {\n          this.LOG.debug(['onChange'], event);\n          this.value = parseInt(event[0], 10);\n          this.change.emit({value: parseInt(event[0], 10)});\n        });\n      } else {\n        this.updateSliderOptions();\n      }\n    }\n  }\n\n  protected updateSliderOptions() {\n    // tslint:disable-next-line:no-string-literal\n    this.slider.nativeElement['noUiSlider'].set([this.value]);\n    const opts = {range: {min: [this._min], max: [this._max]}} as any;\n    if (!!this._step && this._step > 0) {\n      opts.step = Math.floor((this._max - this._min) / this._step);\n    }\n    // tslint:disable-next-line:no-string-literal\n    this.slider.nativeElement['noUiSlider'].updateOptions(opts);\n  }\n\n  format(value: number) {\n    if (this.mode !== 'timestamp') {\n      return moment(value).utc(true).format('YYYY/MM/DD hh:mm:ss');\n    } else {\n      return value.toString();\n    }\n  }\n\n  protected getFormat() {\n    return {\n      to: value => this.format(value),\n      from: value => value.replace(',-', '')\n    };\n  }\n}\n","/*\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */\nimport {AfterViewInit, Component, ElementRef, Input, OnInit, ViewChild, ViewEncapsulation} from '@angular/core';\nimport {WarpViewSliderComponent} from '../warp-view-slider/warp-view-slider.component';\nimport {Logger} from '../../utils/logger';\nimport * as noUiSlider from 'nouislider';\n\n/**\n *\n */\n@Component({\n  selector: 'warpview-range-slider',\n  templateUrl: './warp-view-range-slider.component.html',\n  styleUrls: ['./warp-view-range-slider.component.scss'],\n  encapsulation: ViewEncapsulation.ShadowDom\n})\nexport class WarpViewRangeSliderComponent extends WarpViewSliderComponent implements OnInit, AfterViewInit {\n  @ViewChild('slider') slider: ElementRef<HTMLDivElement>;\n  @Input('minValue') minValue: number;\n  @Input('maxValue') maxValue: number;\n\n  constructor() {\n    super();\n    this.LOG = new Logger(WarpViewRangeSliderComponent, this.debug);\n    this.LOG.debug(['constructor'], this.debug);\n  }\n\n  ngOnInit(): void {\n    this.setOptions();\n    this.minValue = this.minValue || this._min;\n    this.maxValue = this.maxValue || this._max;\n  }\n\n  ngAfterViewInit(): void {\n    this.loaded = false;\n    this.setOptions();\n  }\n\n  onChange(val) {\n    this.change.emit({value: this.minValue, highValue: this.maxValue});\n    this.LOG.debug(['onChange'], val, {value: this.minValue, highValue: this.maxValue});\n  }\n\n  protected setOptions() {\n    this.LOG.debug(['setOptions'], this._min, this._max);\n    if (!this._min && !this._max) {\n      return;\n    }\n    this.loaded = true;\n    this.value = Math.max(this.value || Number.MIN_VALUE, this._min);\n    this.LOG.debug(['noUiSlider'], this.slider);\n    if (this.slider) {\n      if (!this._uiSlider) {\n        const opts = {\n          start: [this.minValue, this.maxValue],\n          connect: true,\n          tooltips: [this.getFormat(), this.getFormat()],\n          range: {min: [this._min], max: [this._max]}\n        } as any;\n        if (!!this._step && this._step > 0) {\n          opts.step = Math.floor((this._max - this._min) / this._step);\n        }\n        const uiSlider = noUiSlider.create(this.slider.nativeElement, opts);\n        uiSlider.on('end', event => {\n          this.LOG.debug(['onChange'], event);\n          this.change.emit({\n            min: parseInt(event[0], 10),\n            max: parseInt(event[1], 10)\n          });\n        });\n      } else {\n        this.updateSliderOptions();\n      }\n    }\n  }\n}\n","/*\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */\n\nimport {Component, ElementRef, Input, NgZone, Renderer2, ViewEncapsulation} from '@angular/core';\nimport {VisibilityState, WarpViewComponent} from '../warp-view-component';\nimport {DataModel} from '../../model/dataModel';\nimport {Param} from '../../model/param';\nimport {ColorLib} from '../../utils/color-lib';\nimport {GTSLib} from '../../utils/gts.lib';\nimport {GTS} from '../../model/GTS';\nimport {SizeService} from '../../services/resize.service';\nimport {Logger} from '../../utils/logger';\n\n@Component({\n  selector: 'warpview-spectrum',\n  templateUrl: './warp-view-spectrum.component.html',\n  styleUrls: ['./warp-view-spectrum.component.scss'],\n  encapsulation: ViewEncapsulation.ShadowDom\n})\nexport class WarpViewSpectrumComponent extends WarpViewComponent {\n\n  @Input('type') set type(type: string) {\n    this._type = type;\n    this.drawChart();\n  }\n\n  layout: Partial<any> = {\n    showlegend: false,\n    xaxis: {},\n    yaxis: {},\n    margin: {\n      t: 10,\n      b: 25,\n      r: 10,\n      l: 50\n    }\n  };\n  private _type = 'histogram2d';\n  private visibility: boolean[] = [];\n  private visibilityStatus: VisibilityState = 'unknown';\n  private maxTick = 0;\n  private minTick = 0;\n  private visibleGtsId = [];\n\n  constructor(\n    public el: ElementRef,\n    public renderer: Renderer2,\n    public sizeService: SizeService,\n    public ngZone: NgZone\n  ) {\n    super(el, renderer, sizeService, ngZone);\n    this.LOG = new Logger(WarpViewSpectrumComponent, this._debug);\n  }\n\n  update(options: Param): void {\n    this.drawChart();\n  }\n\n  private drawChart() {\n    if (!this.initChart(this.el)) {\n      return;\n    }\n    this.plotlyConfig.scrollZoom = true;\n    this.buildGraph();\n  }\n\n  protected convert(data: DataModel): Partial<any>[] {\n    const type = this._options.histo || {histnorm: 'density', histfunc: 'count'};\n    const dataset: Partial<any>[] = [];\n    this.LOG.debug(['convert'], this._options);\n    this.visibility = [];\n    let gtsList = GTSLib.flatDeep(GTSLib.flattenGtsIdArray([data.data] as any[], 0).res) || [];\n    this.maxTick = Number.NEGATIVE_INFINITY;\n    this.minTick = Number.POSITIVE_INFINITY;\n    this.visibleGtsId = [];\n    const nonPlottable = gtsList.filter(g => {\n      this.LOG.debug(['convert'], GTSLib.isGtsToPlot(g));\n      return (g.v && !GTSLib.isGtsToPlot(g));\n    });\n    gtsList = gtsList.filter(g => {\n      return (g.v && GTSLib.isGtsToPlot(g));\n    });\n    // initialize visibility status\n    if (this.visibilityStatus === 'unknown') {\n      this.visibilityStatus = gtsList.length > 0 ? 'plottableShown' : 'nothingPlottable';\n    }\n\n    if (this._options.timeMode && this._options.timeMode === 'timestamp') {\n      this.layout.xaxis.type = 'linear';\n    } else {\n      this.layout.xaxis.type = 'date';\n    }\n    gtsList.forEach((gts: GTS, i) => {\n      if (gts.v && GTSLib.isGtsToPlot(gts)) {\n        const label = GTSLib.serializeGtsMetadata(gts);\n        const c = ColorLib.getColor(i, this._options.scheme);\n        const color = ((data.params || [])[gts.id] || {datasetColor: c}).datasetColor || c;\n        const series: Partial<any> = {\n          type: this._type,\n          histnorm: type.histnorm || 'density',\n          histfunc: type.histfunc || 'count',\n          contours: {\n            showlabels: true,\n            labelfont: {\n              color: 'white'\n            }\n          },\n          colorbar: {\n            tickcolor: this.getGridColor(this.el.nativeElement),\n            thickness: 0,\n            tickfont: {\n              color: this.getLabelColor(this.el.nativeElement)\n            },\n            x: 1 + gts.id / 20,\n            xpad: 0\n          },\n          showscale: this.showLegend,\n          colorscale: ColorLib.getColorGradient(gts.id, this._options.scheme),\n          autocolorscale: false,\n          name: label,\n          text: label,\n          x: [],\n          y: [],\n          line: {color},\n          hoverinfo: 'none',\n          connectgaps: false,\n          visible: this._hiddenData.filter(h => h === gts.id).length >= 0,\n        };\n        gts.v.forEach(value => {\n          const ts = value[0];\n          series.y.push(value[value.length - 1]);\n          if (this._options.timeMode && this._options.timeMode === 'timestamp') {\n            series.x.push(ts);\n          } else {\n            series.x.push(GTSLib.toISOString(ts, this.divider, this._options.timeZone));\n          }\n        });\n        dataset.push(series);\n      }\n    });\n    this.LOG.debug(['convert', 'dataset'], dataset);\n\n    return dataset;\n  }\n\n  private buildGraph() {\n    this.LOG.debug(['drawChart', 'this.layout'], this.responsive);\n    this.LOG.debug(['drawChart', 'this.layout'], this.layout);\n    this.LOG.debug(['drawChart', 'this.plotlyConfig'], this.plotlyConfig);\n    this.layout.showlegend = this.showLegend;\n    this.layout.yaxis.color = this.getGridColor(this.el.nativeElement);\n    this.layout.xaxis.color = this.getGridColor(this.el.nativeElement);\n    this.loading = false;\n  }\n}\n","import {\n  Component,\n  DoCheck,\n  ElementRef,\n  EventEmitter,\n  Input,\n  IterableDiffer,\n  IterableDiffers,\n  KeyValueDiffer,\n  KeyValueDiffers,\n  OnDestroy,\n  OnInit,\n  Output,\n  ViewChild,\n  ViewEncapsulation\n} from '@angular/core';\nimport * as Plotlyjs from 'plotly.js-dist';\nimport {Config, Data, Layout, PlotlyHTMLElement, Plots} from 'plotly.js-dist';\nimport {Logger} from '../utils/logger';\n\nexport interface Figure {\n  data: Data[];\n  layout: Partial<Layout>;\n  frames: Partial<Config>;\n}\n\n@Component({\n  selector: 'warpview-plotly',\n  templateUrl: './plotly.component.html',\n  styleUrls: ['./plotly.component.scss'],\n  encapsulation: ViewEncapsulation.ShadowDom\n})\nexport class PlotlyComponent implements OnInit, OnDestroy, DoCheck {\n  protected defaultClassName = 'js-plotly-plot';\n  protected LOG: Logger;\n  private _data;\n  private _layout;\n  private _config;\n  private _debug = false;\n  public plotlyInstance: PlotlyHTMLElement;\n  public resizeHandler?: (instance: PlotlyHTMLElement) => void;\n  public layoutDiffer: KeyValueDiffer<string, any>;\n  public dataDiffer: IterableDiffer<Partial<any>>;\n\n  @ViewChild('plot', {static: true}) plotEl: ElementRef;\n\n  /*\n   this.LOG.debug(['ngOnChanges'], changes);\n      const revision: SimpleChange = changes.revision;\n      if (changes.debug) {\n        this.debug = changes.debug.currentValue;\n      }\n      if (!!changes.data && !deepEqual(changes.data.currentValue, changes.data.previousValue)) {\n        this.updatePlot();\n      } else if (!changes.layout && ((revision && !revision.isFirstChange()) || !!changes.data || !!changes.config)) {\n        this.updatePlot();\n      }\n      if (!!changes.debug) {\n        this.LOG.setDebug(changes.debug.currentValue);\n      }\n      this.updateWindowResizeHandler();\n      this.LOG.debug(['ngOnChanges'], changes);\n   */\n  @Input() set data(data: Partial<any>[]) {\n    this._data = data;\n    this.updatePlot();\n    this.updateWindowResizeHandler();\n  }\n\n  get data(): Partial<any>[] {\n    return this._data;\n  }\n\n  @Input() set layout(layout: Partial<any>) {\n    this._layout = layout;\n    if (!!this._data && !!this.plotEl.nativeElement) {\n      try {\n        Plotlyjs.relayout(this.plotEl.nativeElement, layout);\n        this.updateWindowResizeHandler();\n      } catch (e) {\n        //\n      }\n    }\n  }\n\n  get layout(): Partial<any> {\n    return this._layout;\n  }\n\n  @Input() set config(config: Partial<Config>) {\n    this._config = config;\n    this.updatePlot();\n    this.updateWindowResizeHandler();\n  }\n\n  get config(): Partial<Config> {\n    return this._config;\n  }\n\n  @Input() set debug(debug: boolean) {\n    this._debug = debug;\n  }\n\n  get debug(): boolean {\n    return this._debug;\n  }\n\n  @Input() frames?: Partial<any>[];\n  @Input() style?: { [key: string]: string };\n\n  @Input() divId?: string;\n  @Input() revision = 0;\n  @Input() className?: string | string[];\n  @Input() useResizeHandler = false;\n\n  @Input() updateOnLayoutChange = true;\n  @Input() updateOnDataChange = true;\n  @Input() updateOnlyWithRevision = true;\n\n  @Output() initialized = new EventEmitter<PlotlyHTMLElement>();\n  @Output() update = new EventEmitter<Figure>();\n  @Output() purge = new EventEmitter<Figure>();\n  @Output() error = new EventEmitter<Error>();\n\n  @Output() afterExport = new EventEmitter();\n  @Output() afterPlot = new EventEmitter();\n  @Output() animated = new EventEmitter();\n  @Output() animatingFrame = new EventEmitter();\n  @Output() animationInterrupted = new EventEmitter();\n  @Output() autoSize = new EventEmitter();\n  @Output() beforeExport = new EventEmitter();\n  @Output() buttonClicked = new EventEmitter();\n  @Output() click = new EventEmitter();\n  @Output() plotly_click = new EventEmitter();\n  @Output() clickAnnotation = new EventEmitter();\n  @Output() deselect = new EventEmitter();\n  @Output() doubleClick = new EventEmitter();\n  @Output() framework = new EventEmitter();\n  @Output() hover = new EventEmitter();\n  @Output() legendClick = new EventEmitter();\n  @Output() legendDoubleClick = new EventEmitter();\n  @Output() relayout = new EventEmitter();\n  @Output() restyle = new EventEmitter();\n  @Output() redraw = new EventEmitter();\n  @Output() selected = new EventEmitter();\n  @Output() selecting = new EventEmitter();\n  @Output() sliderChange = new EventEmitter();\n  @Output() sliderEnd = new EventEmitter();\n  @Output() sliderStart = new EventEmitter();\n  @Output() transitioning = new EventEmitter();\n  @Output() transitionInterrupted = new EventEmitter();\n  @Output() unhover = new EventEmitter();\n  @Output() relayouting = new EventEmitter();\n\n  public eventNames = [\n    // 'afterExport',\n    //   'afterPlot', // 'animated', 'animatingFrame', 'animationInterrupted', 'autoSize',\n    // 'beforeExport', 'buttonClicked', 'clickAnnotation', 'deselect', 'doubleClick', 'framework',\n    'hover', 'unhover',\n    // 'legendClick', 'legendDoubleClick',\n    'relayout',\n    // 'restyle', 'redraw', 'selected', 'selecting', 'sliderChange',\n    // 'sliderEnd', 'sliderStart', 'transitioning', 'transitionInterrupted', 'relayouting'\n  ];\n  rect: any;\n\n  constructor(\n    public iterableDiffers: IterableDiffers,\n    public el: ElementRef,\n    public keyValueDiffers: KeyValueDiffers\n  ) {\n    this.LOG = new Logger(PlotlyComponent, this.debug);\n  }\n\n  ngOnInit() {\n    this.createPlot().then(() => {\n      const figure = this.createFigure();\n      this.LOG.debug(['figure'], figure);\n      this.initialized.emit(this.plotlyInstance);\n    });\n  }\n\n  ngOnDestroy() {\n    if (typeof this.resizeHandler === 'function') {\n      this.getWindow().removeEventListener('resize', this.resizeHandler as any);\n      this.resizeHandler = undefined;\n    }\n\n    const figure = this.createFigure();\n    this.purge.emit(figure);\n    this.remove(this.plotlyInstance);\n  }\n\n  ngDoCheck() {\n    if (this.updateOnlyWithRevision) {\n      return false;\n    }\n    let shouldUpdate = false;\n    if (this.updateOnLayoutChange) {\n      if (this.layoutDiffer) {\n        const layoutHasDiff = this.layoutDiffer.diff(this.layout);\n        if (layoutHasDiff) {\n          shouldUpdate = true;\n        }\n      } else if (this.layout) {\n        this.layoutDiffer = this.keyValueDiffers.find(this.layout).create();\n      } else {\n        this.layoutDiffer = undefined;\n      }\n    }\n\n    if (this.updateOnDataChange) {\n      if (this.dataDiffer) {\n        const dataHasDiff = this.dataDiffer.diff(this.data);\n        if (dataHasDiff) {\n          shouldUpdate = true;\n        }\n      } else if (Array.isArray(this.data)) {\n        this.dataDiffer = this.iterableDiffers.find(this.data).create(this.dataDifferTrackBy);\n      } else {\n        this.dataDiffer = undefined;\n      }\n    }\n    if (shouldUpdate && this.plotlyInstance) {\n      this.updatePlot();\n    }\n  }\n\n  getWindow(): any {\n    return window;\n  }\n\n  getBoundingClientRect() {\n    return this.rect;\n  }\n\n  getClassName(): string {\n    let classes = [this.defaultClassName];\n    if (Array.isArray(this.className)) {\n      classes = classes.concat(this.className);\n    } else if (!!this.className) {\n      classes.push(this.className);\n    }\n\n    return classes.join(' ');\n  }\n\n  restyleChart(properties: any, curves: any[]) {\n    Plotlyjs.restyle(this.plotlyInstance, properties, curves);\n  }\n\n  createPlot(): Promise<void> {\n    this.LOG.debug(['createPlot'], this.data, this.layout, this.config, this.plotlyInstance);\n    return Plotlyjs.react(this.plotEl.nativeElement, this.data, this.layout, this.config).then(plotlyInstance => {\n      this.rect = this.el.nativeElement.getBoundingClientRect();\n      this.plotlyInstance = plotlyInstance;\n      this.LOG.debug(['plotlyInstance'], plotlyInstance);\n      this.getWindow().gd = this.debug ? plotlyInstance : undefined;\n\n      this.eventNames.forEach(name => {\n        const eventName = `plotly_${name.toLowerCase()}`;\n        // @ts-ignore\n        plotlyInstance.on(eventName, (data: any) => {\n          this.LOG.debug(['plotlyEvent', eventName], data);\n          (this[name] as EventEmitter<any>).emit(data);\n        });\n      });\n\n      plotlyInstance.on('plotly_click', (data: any) => {\n        this.click.emit(data);\n        this.plotly_click.emit(data);\n      });\n\n      this.updateWindowResizeHandler();\n      this.afterPlot.emit(plotlyInstance);\n    }, err => {\n      console.error('Error while plotting:', err);\n      this.error.emit(err);\n    });\n  }\n\n  createFigure(): Figure {\n    const p: any = this.plotlyInstance;\n    return {\n      data: p.data,\n      layout: p.layout,\n      frames: p._transitionData ? p._transitionData._frames : null\n    };\n  }\n\n  updatePlot() {\n    this.LOG.debug(['updatePlot'], this.data, this.layout, {...this.config});\n    if (!this.plotlyInstance) {\n      const error = new Error(`Plotly component wasn't initialized`);\n      this.error.emit(error);\n      return;\n    }\n    Plotlyjs.purge(this.plotlyInstance);\n    this.createPlot().then(() => {\n      const figure = this.createFigure();\n      this.update.emit(figure);\n    }, err => {\n      console.error('Error while updating plot:', err);\n      this.error.emit(err);\n    });\n  }\n\n  updateWindowResizeHandler() {\n    if (this.useResizeHandler) {\n      if (this.resizeHandler === undefined) {\n        this.resizeHandler = () => setTimeout(() => Plots.resize(this.plotlyInstance));\n        this.getWindow().addEventListener('resize', this.resizeHandler as any);\n      }\n    } else {\n      if (typeof this.resizeHandler === 'function') {\n        this.getWindow().removeEventListener('resize', this.resizeHandler as any);\n        this.resizeHandler = undefined;\n      }\n    }\n  }\n\n  dataDifferTrackBy(_: number, item: any): any {\n    const obj = Object.assign({}, item, {uid: ''});\n    return JSON.stringify(obj);\n  }\n\n\n  remove(div: PlotlyHTMLElement) {\n    Plotlyjs.purge(div);\n    delete this.plotlyInstance;\n  }\n\n  resize(layout: { width: number; height: any }) {\n    Plotlyjs.relayout(this.plotEl.nativeElement, layout);\n  }\n}\n","import {Component, ElementRef, Input, NgZone, OnInit, Renderer2, ViewEncapsulation} from '@angular/core';\nimport {WarpViewComponent} from '../warp-view-component';\nimport {DataModel} from '../../model/dataModel';\nimport {Param} from '../../model/param';\nimport {SizeService} from '../../services/resize.service';\nimport {Logger} from '../../utils/logger';\nimport {ColorLib} from '../../utils/color-lib';\nimport {GTSLib} from '../../utils/gts.lib';\nimport {GTS} from '../../model/GTS';\nimport moment from 'moment-timezone';\n\n@Component({\n  selector: 'warpview-box',\n  templateUrl: './warp-view-box.component.html',\n  styleUrls: ['./warp-view-box.component.scss'],\n  encapsulation: ViewEncapsulation.ShadowDom\n})\nexport class WarpViewBoxComponent extends WarpViewComponent implements OnInit {\n\n  @Input('type') set type(type: string) {\n    this._type = type;\n    this.drawChart();\n  }\n\n  layout: Partial<any> = {\n    showlegend: false,\n    xaxis: {\n      type: '-'\n    },\n    yaxis: {zeroline: false},\n    boxmode: 'group',\n    margin: {\n      t: 10,\n      b: 25,\n      r: 10,\n      l: 10\n    }\n  };\n  private _type = 'box';\n\n  constructor(\n    public el: ElementRef,\n    public renderer: Renderer2,\n    public sizeService: SizeService,\n    public ngZone: NgZone\n  ) {\n    super(el, renderer, sizeService, ngZone);\n    this.LOG = new Logger(WarpViewBoxComponent, this._debug);\n  }\n\n  ngOnInit() {\n    this.drawChart();\n  }\n\n  update(options: Param): void {\n    this.drawChart();\n  }\n\n  private drawChart() {\n    if (!this.initChart(this.el)) {\n      return;\n    }\n    this.plotlyConfig.scrollZoom = true;\n    this.buildGraph();\n  }\n\n  protected convert(data: DataModel): Partial<any>[] {\n    const dataset: Partial<any>[] = [];\n    this.LOG.debug(['convert'], this._options, this._type);\n    let gtsList = GTSLib.flatDeep(GTSLib.flattenGtsIdArray(data.data as any[], 0).res);\n    gtsList = gtsList.filter(g => {\n      return (g.v && GTSLib.isGtsToPlot(g));\n    });\n    const pattern = 'YYYY/MM/DD hh:mm:ss';\n    const format = pattern.slice(0, pattern.lastIndexOf(this._options.split || 'D') + 1);\n    gtsList.forEach((gts: GTS, i) => {\n      if (gts.v) {\n        const label = GTSLib.serializeGtsMetadata(gts);\n        const c = ColorLib.getColor(gts.id, this._options.scheme);\n        const color = ((data.params || [])[i] || {datasetColor: c}).datasetColor || c;\n        const series: Partial<any> = {\n          type: 'box',\n          boxmean: 'sd',\n          marker: {color},\n          name: label,\n          x: this._type === 'box' ? undefined : [],\n          y: [],\n          //  hoverinfo: 'none',\n          boxpoints: false\n        };\n        if (!!this._options.showDots) {\n          series.boxpoints = 'all';\n        }\n        gts.v.forEach(value => {\n          series.y.push(value[value.length - 1]);\n          if (this._type === 'box-date') {\n            series.x.push(GTSLib.toISOString(value[0], this.divider, this._options.timeZone));\n          }\n        });\n        dataset.push(series);\n      }\n    });\n    this.LOG.debug(['convert', 'dataset'], dataset, format);\n    return dataset;\n  }\n\n  private buildGraph() {\n    this.LOG.debug(['drawChart', 'this.layout'], this.responsive);\n    this.LOG.debug(['drawChart', 'this.layout'], this.layout);\n    this.LOG.debug(['drawChart', 'this.plotlyConfig'], this.plotlyConfig);\n    this.layout.showlegend = this.showLegend;\n    this.layout.xaxis.showticklabels = this._type === 'box-date';\n    this.layout.yaxis.color = this.getGridColor(this.el.nativeElement);\n    this.layout.xaxis.color = this.getGridColor(this.el.nativeElement);\n    this.loading = false;\n  }\n\n  hover(data: any) {\n\n  }\n}\n","import {Component, ElementRef, Input, NgZone, OnInit, Renderer2, ViewEncapsulation} from '@angular/core';\nimport {WarpViewComponent} from '../warp-view-component';\nimport {SizeService} from '../../services/resize.service';\nimport {Logger} from '../../utils/logger';\nimport {Param} from '../../model/param';\nimport {DataModel} from '../../model/dataModel';\nimport {GTSLib} from '../../utils/gts.lib';\nimport {GTS} from '../../model/GTS';\nimport {ColorLib} from '../../utils/color-lib';\n\n@Component({\n  selector: 'warpview-3d-line',\n  templateUrl: './warp-view-3d-line.component.html',\n  styleUrls: ['./warp-view-3d-line.component.scss'],\n  encapsulation: ViewEncapsulation.ShadowDom\n})\nexport class WarpView3dLineComponent extends WarpViewComponent implements OnInit {\n\n  @Input('type') set type(type: string) {\n    this._type = type;\n    this.drawChart();\n  }\n\n  layout: Partial<any> = {\n    showlegend: false,\n    xaxis: {},\n    yaxis: {},\n    zaxis: {},\n    margin: {\n      t: 10,\n      b: 25,\n      r: 10,\n      l: 10\n    }\n  };\n  private _type = 'line3d';\n\n  constructor(\n    public el: ElementRef,\n    public renderer: Renderer2,\n    public sizeService: SizeService,\n    public ngZone: NgZone\n  ) {\n    super(el, renderer, sizeService, ngZone);\n    this.LOG = new Logger(WarpView3dLineComponent, this._debug);\n  }\n\n  ngOnInit() {\n    this.drawChart();\n  }\n\n  update(options: Param): void {\n    this.drawChart();\n  }\n\n  private drawChart() {\n    if (!this.initChart(this.el)) {\n      return;\n    }\n    this.plotlyConfig.scrollZoom = true;\n    this.buildGraph();\n  }\n\n  protected convert(data: DataModel): Partial<any>[] {\n    const dataset: Partial<any>[] = [];\n    this.LOG.debug(['convert'], data, this._options, this._type);\n    GTSLib.flatDeep(GTSLib.flattenGtsIdArray(data.data as any[], 0).res)\n      .filter(g => (g.v && GTSLib.isGts(g)))\n      .forEach((gts: GTS, i) => {\n        if (gts.v) {\n          const label = GTSLib.serializeGtsMetadata(gts);\n          const c = ColorLib.getColor(gts.id, this._options.scheme);\n          const color = ((data.params || [])[i] || {datasetColor: c}).datasetColor || c;\n          const series: Partial<any> = {\n            mode: 'line',\n            type: 'scatter3d',\n            marker: {\n              color: ColorLib.transparentize(color),\n              size: 3,\n              symbol: 'circle',\n              line: {\n                color,\n                width: 0\n              }\n            },\n            line: {\n              color,\n              width: 1\n            },\n            name: label,\n            x: [],\n            y: [],\n            z: [],\n            //     hoverinfo: 'none',\n          };\n          gts.v.forEach(value => {\n            if (value.length > 2) { // lat lon\n              series.x.push(value[1]);\n              series.y.push(value[2]);\n              series.z.push(value[3]);\n            } else { // time value\n              series.x.push(value[0]);\n              series.y.push(value[1]);\n              series.z.push(1);\n            }\n          });\n          dataset.push(series);\n        }\n      });\n    return dataset;\n  }\n\n  private buildGraph() {\n    this.LOG.debug(['drawChart', 'this.layout'], this.responsive);\n    this.LOG.debug(['drawChart', 'this.layout'], this.layout);\n    this.LOG.debug(['drawChart', 'this.plotlyConfig'], this.plotlyConfig);\n    this.layout.showlegend = this.showLegend;\n    this.layout.yaxis.color = this.getGridColor(this.el.nativeElement);\n    this.layout.xaxis.color = this.getGridColor(this.el.nativeElement);\n    this.layout.zaxis.color = this.getGridColor(this.el.nativeElement);\n    this.loading = false;\n  }\n}\n","import {Component, ElementRef, Input, NgZone, OnInit, Renderer2, ViewEncapsulation} from '@angular/core';\nimport {WarpViewComponent} from '../warp-view-component';\nimport {SizeService} from '../../services/resize.service';\nimport {Logger} from '../../utils/logger';\nimport {Param} from '../../model/param';\nimport {DataModel} from '../../model/dataModel';\nimport {GTSLib} from '../../utils/gts.lib';\nimport {GTS} from '../../model/GTS';\nimport {ColorLib} from '../../utils/color-lib';\nimport {MapLib} from '../../utils/map-lib';\n\n@Component({\n  selector: 'warpview-globe',\n  templateUrl: './warp-view-globe.component.html',\n  styleUrls: ['./warp-view-globe.component.scss'],\n  encapsulation: ViewEncapsulation.ShadowDom\n})\nexport class WarpViewGlobeComponent extends WarpViewComponent implements OnInit {\n\n\n  @Input('type') set type(type: string) {\n    this._type = type;\n    this.drawChart();\n  }\n\n  layout: Partial<any> = {\n    showlegend: false,\n    margin: {\n      t: 10,\n      b: 25,\n      r: 10,\n      l: 10\n    },\n    geo: {\n      projection: {\n        type: 'orthographic',\n      },\n      showframe: true,\n      fitbounds: 'locations',\n      showocean: true,\n      oceancolor: ColorLib.transparentize('#004eff', 0.2),\n      showland: true,\n      landcolor: ColorLib.transparentize('#6F694E', 0.2),\n      showlakes: true,\n      lakecolor: ColorLib.transparentize('#004eff', 0.2),\n      showcountries: true,\n      lonaxis: {\n        showgrid: true,\n        gridcolor: 'rgb(102, 102, 102)'\n      },\n      lataxis: {\n        showgrid: true,\n        gridcolor: 'rgb(102, 102, 102)'\n      }\n    }\n  };\n  private _type = 'scattergeo';\n  private geoData: { path: { lat: number, lon: number }[] }[] = [];\n\n  constructor(\n    public el: ElementRef,\n    public renderer: Renderer2,\n    public sizeService: SizeService,\n    public ngZone: NgZone\n  ) {\n    super(el, renderer, sizeService, ngZone);\n    this.LOG = new Logger(WarpViewGlobeComponent, this._debug);\n  }\n\n  ngOnInit() {\n    this.drawChart();\n  }\n\n  update(options: Param): void {\n    this.drawChart();\n  }\n\n  private drawChart() {\n    if (!this.initChart(this.el)) {\n      return;\n    }\n    this.plotlyConfig.scrollZoom = true;\n    this.buildGraph();\n  }\n\n  protected convert(data: DataModel): Partial<any>[] {\n    const dataset: Partial<any>[] = [];\n    this.geoData = [];\n    this.LOG.debug(['convert'], data, this._options, this._type);\n    GTSLib.flatDeep(GTSLib.flattenGtsIdArray(data.data as any[], 0).res)\n      .filter(g => (g.v && GTSLib.isGts(g)))\n      .forEach((gts: GTS, i) => {\n        if (gts.v) {\n          const geoData = {path: []};\n          const label = GTSLib.serializeGtsMetadata(gts);\n          const c = ColorLib.getColor(gts.id, this._options.scheme);\n          const color = ((data.params || [])[i] || {datasetColor: c}).datasetColor || c;\n          const series: Partial<any> = {\n            mode: 'lines',\n            type: 'scattergeo',\n            marker: {\n              color: ColorLib.transparentize(color),\n              size: 3,\n              symbol: 'circle',\n              line: {\n                color,\n                width: 0\n              }\n            },\n            line: {\n              color,\n              width: 1\n            },\n            name: label,\n            lon: [],\n            lat: [],\n            hoverinfo: 'none',\n          };\n          gts.v.forEach(value => {\n            if (value.length > 2) {\n              series.lat.push(value[1]);\n              series.lon.push(value[2]);\n              geoData.path.push({lat: value[1], lon: value[2]});\n            }\n          });\n          this.geoData.push(geoData);\n          dataset.push(series);\n        }\n      });\n    return dataset;\n  }\n\n  private buildGraph() {\n    this.LOG.debug(['drawChart', 'this.layout'], this._responsive);\n    this.LOG.debug(['drawChart', 'this.layout'], this.layout);\n    this.LOG.debug(['drawChart', 'this.plotlyConfig'], this.plotlyConfig);\n    this.layout.showlegend = this._showLegend;\n    const bounds = MapLib.getBoundsArray(this.geoData, [], [], []);\n    this.LOG.debug(['drawChart', 'bounds'], bounds);\n    this.layout.geo.lonaxis.color = this.getGridColor(this.el.nativeElement);\n    this.layout.geo.lataxis.range = [bounds[0][0], bounds[1][0]];\n    this.layout.geo.lonaxis.range = [bounds[0][1], bounds[1][1]];\n    this.layout.geo.lataxis.color = this.getGridColor(this.el.nativeElement);\n    this.layout = {...this.layout};\n    this.loading = false;\n  }\n\n}\n","import {\n  Component,\n  ElementRef,\n  EventEmitter,\n  Input,\n  NgZone,\n  OnDestroy,\n  OnInit,\n  Output,\n  Renderer2,\n  ViewChild,\n  ViewEncapsulation\n} from '@angular/core';\nimport {WarpViewComponent} from '../warp-view-component';\nimport {SizeService} from '../../services/resize.service';\nimport {Logger} from '../../utils/logger';\nimport deepEqual from 'deep-equal';\nimport {ChartLib} from '../../utils/chart-lib';\nimport {Param} from '../../model/param';\nimport {DataModel} from '../../model/dataModel';\nimport {ColorLib} from '../../utils/color-lib';\nimport * as d3 from 'd3';\nimport eventDrops from 'event-drops';\nimport {GTSLib} from '../../utils/gts.lib';\nimport moment from 'moment-timezone';\nimport {select} from 'd3-selection';\n\n@Component({\n  selector: 'warpview-event-drop',\n  templateUrl: './warp-view-event-drop.component.html',\n  styleUrls: ['./warp-view-event-drop.component.scss'],\n  encapsulation: ViewEncapsulation.None\n})\nexport class WarpViewEventDropComponent extends WarpViewComponent implements OnInit, OnDestroy {\n  @ViewChild('elemChart', {static: true}) elemChart: ElementRef;\n\n  @Input('type') set type(type: string) {\n    this._type = type;\n    this.drawChart();\n  }\n\n\n  @Input('hiddenData') set hiddenData(hiddenData: number[]) {\n    const previousVisibility = JSON.stringify(this.visibility);\n    this.LOG.debug(['hiddenData', 'previousVisibility'], previousVisibility);\n    this._hiddenData = hiddenData;\n    this.visibility = [];\n    this.visibleGtsId.forEach(id => this.visibility.push(hiddenData.indexOf(id) < 0 && (id !== -1)));\n    this.LOG.debug(['hiddenData', 'hiddendygraphfullv'], this.visibility);\n    const newVisibility = JSON.stringify(this.visibility);\n    this.LOG.debug(['hiddenData', 'json'], previousVisibility, newVisibility);\n    if (previousVisibility !== newVisibility) {\n      this.drawChart();\n      this.LOG.debug(['hiddendygraphtrig', 'destroy'], 'redraw by visibility change');\n    }\n  }\n\n  @Output('pointHover') pointHover = new EventEmitter<any>();\n  @Output('warpViewChartResize') warpViewChartResize = new EventEmitter<any>();\n  @Output('chartDraw') chartDraw = new EventEmitter<any>();\n  @Output('boundsDidChange') boundsDidChange = new EventEmitter<any>();\n\n  private visibility: boolean[] = [];\n  private maxTick = Number.MIN_VALUE;\n  private minTick = Number.MAX_VALUE;\n  private visibleGtsId = [];\n  private _type = 'drops';\n  private eventConf = {\n    d3,\n    axis: {\n      verticalGrid: true,\n      tickPadding: 6,\n    },\n    indicator: false,\n    label: {\n      text: row => row.name,\n    },\n    drop: {\n      date: d => new Date(d.date),\n      color: d => d.color,\n      onMouseOver: g => {\n        this.LOG.debug(['onMouseOver'], g);\n        this.pointHover.emit({\n          x: d3.event.offsetX,\n          y: d3.event.offsetY\n        });\n        const t = d3\n          .select(this.toolTip.nativeElement);\n        t.transition()\n          .duration(200)\n          .style('opacity', 1)\n          .style('pointer-events', 'auto');\n        t.html(`<div class=\"tooltip-body\">\n<b class=\"tooltip-date\">${this._options.timeMode === 'timestamp'\n          ? g.date\n          : (moment(g.date.valueOf()).utc().toISOString() || '')}</b>\n<div><i class=\"chip\"  style=\"background-color: ${ColorLib.transparentize(g.color, 0.7)};border: 2px solid ${g.color};\"></i>\n${GTSLib.formatLabel(g.name)}: <span class=\"value\">${g.value}</span>\n</div></div>`\n        )\n          .style('left', `${d3.event.offsetX - 30}px`)\n          .style('top', `${d3.event.offsetY + 20}px`);\n      },\n      onMouseOut: () => {\n        select(this.toolTip.nativeElement)\n          .transition()\n          .duration(500)\n          .style('opacity', 0)\n          .style('pointer-events', 'none');\n      },\n    },\n  };\n\n  constructor(\n    public el: ElementRef,\n    public renderer: Renderer2,\n    public sizeService: SizeService,\n    public ngZone: NgZone\n  ) {\n    super(el, renderer, sizeService, ngZone);\n    this.LOG = new Logger(WarpViewEventDropComponent, this._debug);\n  }\n\n\n  ngOnInit(): void {\n    this._options = this._options || this.defOptions;\n  }\n\n  ngOnDestroy(): void {\n    if (!!this.elemChart) {\n      select(this.elemChart.nativeElement).remove();\n    }\n  }\n\n  update(options, refresh): void {\n    this.LOG.debug(['onOptions', 'before'], this._options, options);\n    if (!deepEqual(options, this._options)) {\n      this.LOG.debug(['options', 'changed'], options);\n      this._options = ChartLib.mergeDeep(this._options, options as Param) as Param;\n    }\n    this.drawChart();\n  }\n\n  updateBounds(min, max) {\n    this.LOG.debug(['updateBounds'], min, max, this._options);\n    this._options.bounds.minDate = min;\n    this._options.bounds.maxDate = max;\n\n    if (this._options.timeMode && this._options.timeMode === 'timestamp') {\n      this.eventConf['range'] = {start: min, end: max};\n    } else {\n      this.eventConf['range'] = {\n        start: moment.tz(moment.utc(this.minTick / this.divider), this._options.timeZone).toDate(),\n        end: moment.tz(moment.utc(this.maxTick / this.divider), this._options.timeZone).toDate(),\n      };\n    }\n    this.eventConf = {...this.eventConf};\n    this.LOG.debug(['updateBounds'], this.eventConf);\n  }\n\n  drawChart() {\n    if (!this.initChart(this.el)) {\n      return;\n    }\n    this.loading = false;\n    this.LOG.debug(['drawChart', 'plotlyData'], this.plotlyData, this._type);\n    if (this.elemChart.nativeElement) {\n      setTimeout(() => select(this.elemChart.nativeElement).data([this.plotlyData]).call(eventDrops(this.eventConf)));\n      this.loading = false;\n      this.chartDraw.emit();\n    }\n  }\n\n  protected convert(data: DataModel): any[] {\n    this.LOG.debug(['convert'], data);\n    let labelsSize = 0;\n    const gtsList = GTSLib.flatDeep(data.data as any[]);\n    const dataList = [];\n    this.LOG.debug(['convert', 'gtsList'], gtsList);\n    if (!gtsList || gtsList.length === 0 || gtsList[0].length < 2) {\n      return;\n    }\n    gtsList.forEach((gts, i) => {\n      const c = ColorLib.getColor(gts.id || i, this._options.scheme);\n      const color = ((data.params || [])[i] || {datasetColor: c}).datasetColor || c;\n      const gtsName = GTSLib.serializeGtsMetadata(gts);\n      labelsSize = Math.max(gtsName.length * 8);\n      const dataSet = {name: gtsName, color, data: []};\n      const size = (gts.v || []).length;\n      for (let v = 0; v < size; v++) {\n        const point = (gts.v || [])[v];\n        const ts = point[0];\n        this.minTick = Math.min(this.minTick, ts);\n        this.maxTick = Math.max(this.maxTick, ts);\n        let value = point[point.length - 1];\n        if (isNaN(value)) {\n          value = 1;\n        }\n        dataSet.data.push({\n          date: moment.tz(moment.utc(ts / this.divider), this._options.timeZone).toDate(),\n          color,\n          value,\n          name: dataSet.name\n        });\n      }\n      dataList.push(dataSet);\n    });\n    this.LOG.debug(['convert', 'dataList'], dataList);\n    this.eventConf.label ['width'] = labelsSize;\n    this.eventConf  ['range'] = {\n      start: moment.tz(moment.utc(this.minTick / this.divider), this._options.timeZone).toDate(),\n      end: moment.tz(moment.utc(this.maxTick / this.divider), this._options.timeZone).toDate(),\n    };\n    return dataList;\n  }\n}\n","import {Component, ElementRef, EventEmitter, Input, NgZone, Output, Renderer2} from '@angular/core';\nimport {WarpViewComponent} from '../warp-view-component';\nimport {Size, SizeService} from '../../services/resize.service';\nimport {Logger} from '../../utils/logger';\nimport {Param} from '../../model/param';\nimport {DataModel} from '../../model/dataModel';\nimport {ChartLib} from '../../utils/chart-lib';\nimport {ResizedEvent} from 'angular-resize-event';\nimport {GTSLib} from '../../utils/gts.lib';\n\n@Component({\n  selector: 'warpview-result-tile',\n  templateUrl: './warp-view-result-tile.component.html',\n  styleUrls: ['./warp-view-result-tile.component.scss']\n})\nexport class WarpViewResultTileComponent extends WarpViewComponent {\n\n  @Input('type') set type(type: string) {\n    this._type = type;\n  }\n\n  get type(): string {\n    if (this.dataModel && this.dataModel.globalParams) {\n      return this.dataModel.globalParams.type || this._options.type || this._type || 'plot';\n    } else {\n      return this._type || 'plot';\n    }\n  }\n\n  @Input('standalone') standalone = true;\n\n  @Output('pointHover') pointHover = new EventEmitter<any>();\n  @Output('warpViewChartResize') warpViewChartResize = new EventEmitter<any>();\n  @Output('chartDraw') chartDraw = new EventEmitter<any>();\n  @Output('boundsDidChange') boundsDidChange = new EventEmitter<any>();\n  @Output('warpViewNewOptions') warpViewNewOptions = new EventEmitter<any>();\n\n  loading = true;\n  dataModel: DataModel;\n  graphs = {\n    spectrum: ['histogram2dcontour', 'histogram2d'],\n    chart: ['line', 'spline', 'step', 'step-after', 'step-before', 'area', 'scatter'],\n    pie: ['pie', 'donut'],\n    polar: ['polar'],\n    radar: ['radar'],\n    bar: ['bar'],\n    bubble: ['bubble'],\n    annotation: ['annotation'],\n    'gts-tree': ['gts-tree'],\n    datagrid: ['datagrid'],\n    display: ['display'],\n    drilldown: ['drilldown'],\n    image: ['image'],\n    map: ['map'],\n    gauge: ['gauge', 'bullet'],\n    plot: ['plot'],\n    box: ['box', 'box-date'],\n    line3d: ['line3d'],\n    globe: ['globe'],\n    drops: ['drops']\n  };\n\n  private _type;\n  private isRefresh = false;\n\n  constructor(\n    public el: ElementRef,\n    public renderer: Renderer2,\n    public sizeService: SizeService,\n    public ngZone: NgZone\n  ) {\n    super(el, renderer, sizeService, ngZone);\n    this.LOG = new Logger(WarpViewResultTileComponent, this._debug);\n  }\n\n  protected update(options: Param, refresh: boolean): void {\n    setTimeout(() => this.loading = !refresh);\n    this.LOG.debug(['parseGTS', 'data'], this._data);\n    this.dataModel = this._data;\n    if (!!this.dataModel) {\n      this._options = ChartLib.mergeDeep(this._options, options) as Param;\n      this._options = ChartLib.mergeDeep(ChartLib.mergeDeep(this.defOptions, options),\n        this._data ? this._data.globalParams || {} : {}) as Param;\n      this.LOG.debug(['parseGTS', 'data'], this._data);\n      this.dataModel = this._data;\n      if (this._options) {\n        this._unit = this._options.unit || this._unit;\n        this._type = this._options.type || this._type || 'plot';\n      }\n      this.LOG.debug(['parseGTS', '_type'], this._type);\n      setTimeout(() => this.loading = false);\n    }\n  }\n\n  protected convert(data: DataModel): Partial<any>[] {\n    setTimeout(() => this.loading = !this.isRefresh);\n    this.LOG.debug(['convert', 'data'], this._data, data);\n    this.dataModel = data;\n    if (this.dataModel.globalParams) {\n      this._unit = this.dataModel.globalParams.unit || this._unit;\n      this._type = this.dataModel.globalParams.type || this._type || 'plot';\n    }\n    this.LOG.debug(['convert', '_type'], this._type);\n    return [];\n  }\n\n  onResized(event: ResizedEvent) {\n    this.width = event.newWidth;\n    this.height = event.newHeight;\n    this.LOG.debug(['onResized'], event.newWidth, event.newHeight);\n    this.sizeService.change(new Size(this.width, this.height));\n  }\n\n  chartDrawn() {\n    this.LOG.debug(['chartDrawn']);\n    setTimeout(() => this.loading = false);\n    this.chartDraw.emit();\n  }\n\n  setResult(data: string, isRefresh: boolean) {\n    this.isRefresh = isRefresh;\n    if (data) {\n      this._data = GTSLib.getData(data);\n      this._options.isRefresh = isRefresh;\n      this.update(this._options, isRefresh);\n      this.LOG.debug(['onData'], this._data);\n    }\n  }\n\n  onWarpViewNewOptions(opts) {\n    this.warpViewNewOptions.emit(opts);\n  }\n}\n","/*\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */\n\nimport {NgModule} from '@angular/core';\nimport {CommonModule} from '@angular/common';\nimport {WarpViewChartComponent} from './elements/warp-view-chart/warp-view-chart.component';\nimport {WarpViewTileComponent} from './elements/warp-view-tile/warp-view-tile.component';\nimport {WarpViewSpinnerComponent} from './elements/warp-view-spinner/warp-view-spinner.component';\nimport {HttpClientModule} from '@angular/common/http';\nimport {HttpErrorHandler} from './services/http-error-handler.service';\nimport {WarpViewToggleComponent} from './elements/warp-view-toggle/warp-view-toggle.component';\nimport {WarpViewBarComponent} from './elements/warp-view-bar/warp-view-bar.component';\nimport {WarpViewBubbleComponent} from './elements/warp-view-bubble/warp-view-bubble.component';\nimport {WarpViewDatagridComponent} from './elements/warp-view-datagrid/warp-view-datagrid.component';\nimport {WarpViewPaginableComponent} from './elements/warp-view-datagrid/warp-view-paginable/warp-view-paginable.component';\nimport {WarpViewDisplayComponent} from './elements/warp-view-display/warp-view-display.component';\nimport {WarpViewDrillDownComponent} from './elements/warp-view-drill-down/warp-view-drill-down.component';\nimport {CalendarHeatmapComponent} from './elements/warp-view-drill-down/calendar-heatmap/calendar-heatmap.component';\nimport {WarpViewGtsPopupComponent} from './elements/warp-view-gts-popup/warp-view-gts-popup.component';\nimport {WarpViewModalComponent} from './elements/warp-view-modal/warp-view-modal.component';\nimport {WarpViewGtsTreeComponent} from './elements/warp-view-gts-tree/warp-view-gts-tree.component';\nimport {WarpViewTreeViewComponent} from './elements/warp-view-gts-tree/warp-view-tree-view/warp-view-tree-view.component';\nimport {WarpViewChipComponent} from './elements/warp-view-gts-tree/warp-view-chip/warp-view-chip.component';\nimport {WarpViewImageComponent} from './elements/warp-view-image/warp-view-image.component';\nimport {WarpViewMapComponent} from './elements/warp-view-map/warp-view-map.component';\nimport {WarpViewHeatmapSlidersComponent} from './elements/warp-view-map/warp-view-heatmap-sliders/warp-view-heatmap-sliders.component';\nimport {WarpViewPieComponent} from './elements/warp-view-pie/warp-view-pie.component';\nimport {WarpViewGaugeComponent} from './elements/warp-view-gauge/warp-view-gauge.component';\nimport {WarpViewAnnotationComponent} from './elements/warp-view-annotation/warp-view-annotation.component';\nimport {WarpViewPolarComponent} from './elements/warp-view-polar/warp-view-polar.component';\nimport {WarpViewRadarComponent} from './elements/warp-view-radar/warp-view-radar.component';\nimport {WarpViewPlotComponent} from './elements/warp-view-plot/warp-view-plot.component';\nimport {WarpViewResizeComponent} from './elements/warp-view-resize/warp-view-resize.component';\nimport {WarpViewSliderComponent} from './elements/warp-view-slider/warp-view-slider.component';\nimport {WarpViewRangeSliderComponent} from './elements/warp-view-range-slider/warp-view-range-slider.component';\nimport {FormsModule} from '@angular/forms';\nimport {AngularResizedEventModule} from 'angular-resize-event';\nimport {SizeService} from './services/resize.service';\nimport {WarpViewSpectrumComponent} from './elements/warp-view-spectrum/warp-view-spectrum.component';\nimport {PlotlyComponent} from './plotly/plotly.component';\nimport {WarpViewBoxComponent} from './elements/warp-view-box/warp-view-box.component';\nimport {WarpView3dLineComponent} from './elements/warp-view-3d-line/warp-view-3d-line.component';\nimport {WarpViewGlobeComponent} from './elements/warp-view-globe/warp-view-globe.component';\nimport {WarpViewEventDropComponent} from './elements/warp-view-event-drop/warp-view-event-drop.component';\nimport {WarpViewResultTileComponent} from './elements/warp-view-result-tile/warp-view-result-tile.component';\n\n@NgModule({\n  declarations: [\n    WarpViewTileComponent,\n    WarpViewChartComponent,\n    WarpViewSpinnerComponent,\n    WarpViewToggleComponent,\n    WarpViewBarComponent,\n    WarpViewBubbleComponent,\n    WarpViewDatagridComponent,\n    WarpViewPaginableComponent,\n    WarpViewDisplayComponent,\n    WarpViewDrillDownComponent,\n    CalendarHeatmapComponent,\n    WarpViewGtsPopupComponent,\n    WarpViewModalComponent,\n    WarpViewGtsTreeComponent,\n    WarpViewTreeViewComponent,\n    WarpViewChipComponent,\n    WarpViewImageComponent,\n    WarpViewMapComponent,\n    WarpViewHeatmapSlidersComponent,\n    WarpViewPieComponent,\n    WarpViewGaugeComponent,\n    WarpViewAnnotationComponent,\n    WarpViewPolarComponent,\n    WarpViewRadarComponent,\n    WarpViewPlotComponent,\n    WarpViewResizeComponent,\n    WarpViewSliderComponent,\n    WarpViewRangeSliderComponent,\n    WarpViewSpectrumComponent,\n    PlotlyComponent,\n    WarpViewBoxComponent,\n    WarpView3dLineComponent,\n    WarpViewGlobeComponent,\n    WarpViewEventDropComponent,\n    WarpViewResultTileComponent\n  ],\n  imports: [\n    CommonModule,\n    HttpClientModule,\n    AngularResizedEventModule,\n    FormsModule\n  ],\n  exports: [\n    WarpViewTileComponent,\n    WarpViewChartComponent,\n    WarpViewSpinnerComponent,\n    WarpViewToggleComponent,\n    WarpViewBarComponent,\n    WarpViewBubbleComponent,\n    WarpViewDatagridComponent,\n    WarpViewPaginableComponent,\n    WarpViewDisplayComponent,\n    WarpViewDrillDownComponent,\n    CalendarHeatmapComponent,\n    WarpViewGtsPopupComponent,\n    WarpViewModalComponent,\n    WarpViewGtsTreeComponent,\n    WarpViewTreeViewComponent,\n    WarpViewChipComponent,\n    WarpViewImageComponent,\n    WarpViewMapComponent,\n    WarpViewHeatmapSlidersComponent,\n    WarpViewPieComponent,\n    WarpViewGaugeComponent,\n    WarpViewAnnotationComponent,\n    WarpViewPolarComponent,\n    WarpViewRadarComponent,\n    WarpViewPlotComponent,\n    WarpViewResizeComponent,\n    WarpViewSliderComponent,\n    WarpViewRangeSliderComponent,\n    WarpViewSpectrumComponent,\n    WarpViewBoxComponent,\n    WarpView3dLineComponent,\n    WarpViewGlobeComponent,\n    WarpViewEventDropComponent,\n    WarpViewResultTileComponent\n  ],\n  providers: [HttpErrorHandler, SizeService],\n  entryComponents: [\n    WarpViewTileComponent,\n    WarpViewChartComponent,\n    WarpViewSpinnerComponent,\n    WarpViewToggleComponent,\n    WarpViewBarComponent,\n    WarpViewBubbleComponent,\n    WarpViewDatagridComponent,\n    WarpViewPaginableComponent,\n    WarpViewDisplayComponent,\n    WarpViewDrillDownComponent,\n    CalendarHeatmapComponent,\n    WarpViewGtsPopupComponent,\n    WarpViewModalComponent,\n    WarpViewGtsTreeComponent,\n    WarpViewTreeViewComponent,\n    WarpViewChipComponent,\n    WarpViewImageComponent,\n    WarpViewMapComponent,\n    WarpViewHeatmapSlidersComponent,\n    WarpViewPieComponent,\n    WarpViewGaugeComponent,\n    WarpViewAnnotationComponent,\n    WarpViewPolarComponent,\n    WarpViewRadarComponent,\n    WarpViewPlotComponent,\n    WarpViewResizeComponent,\n    WarpViewSliderComponent,\n    WarpViewRangeSliderComponent,\n    WarpViewSpectrumComponent,\n    PlotlyComponent,\n    WarpViewBoxComponent,\n    WarpView3dLineComponent,\n    WarpViewGlobeComponent,\n    WarpViewEventDropComponent,\n    WarpViewResultTileComponent\n  ]\n})\nexport class WarpViewAngularModule {\n}\n","/*\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */\n\n/*\n * Public API Surface of warpview-ng\n */\nimport {WarpViewTileComponent} from './src/lib/elements/warp-view-tile/warp-view-tile.component';\nimport {WarpViewChartComponent} from './src/lib/elements/warp-view-chart/warp-view-chart.component';\nimport {WarpViewSpinnerComponent} from './src/lib/elements/warp-view-spinner/warp-view-spinner.component';\nimport {WarpViewToggleComponent} from './src/lib/elements/warp-view-toggle/warp-view-toggle.component';\nimport {WarpViewBarComponent} from './src/lib/elements/warp-view-bar/warp-view-bar.component';\nimport {WarpViewBubbleComponent} from './src/lib/elements/warp-view-bubble/warp-view-bubble.component';\nimport {WarpViewDatagridComponent} from './src/lib/elements/warp-view-datagrid/warp-view-datagrid.component';\nimport {WarpViewPaginableComponent} from './src/lib/elements/warp-view-datagrid/warp-view-paginable/warp-view-paginable.component';\nimport {WarpViewDisplayComponent} from './src/lib/elements/warp-view-display/warp-view-display.component';\nimport {WarpViewDrillDownComponent} from './src/lib/elements/warp-view-drill-down/warp-view-drill-down.component';\nimport {CalendarHeatmapComponent} from './src/lib/elements/warp-view-drill-down/calendar-heatmap/calendar-heatmap.component';\nimport {WarpViewGtsPopupComponent} from './src/lib/elements/warp-view-gts-popup/warp-view-gts-popup.component';\nimport {WarpViewModalComponent} from './src/lib/elements/warp-view-modal/warp-view-modal.component';\nimport {WarpViewGtsTreeComponent} from './src/lib/elements/warp-view-gts-tree/warp-view-gts-tree.component';\nimport {WarpViewTreeViewComponent} from './src/lib/elements/warp-view-gts-tree/warp-view-tree-view/warp-view-tree-view.component';\nimport {WarpViewChipComponent} from './src/lib/elements/warp-view-gts-tree/warp-view-chip/warp-view-chip.component';\nimport {WarpViewImageComponent} from './src/lib/elements/warp-view-image/warp-view-image.component';\nimport {WarpViewMapComponent} from './src/lib/elements/warp-view-map/warp-view-map.component';\nimport {WarpViewHeatmapSlidersComponent} from './src/lib/elements/warp-view-map/warp-view-heatmap-sliders/warp-view-heatmap-sliders.component';\nimport {WarpViewPieComponent} from './src/lib/elements/warp-view-pie/warp-view-pie.component';\nimport {WarpViewGaugeComponent} from './src/lib/elements/warp-view-gauge/warp-view-gauge.component';\nimport {WarpViewAnnotationComponent} from './src/lib/elements/warp-view-annotation/warp-view-annotation.component';\nimport {WarpViewPolarComponent} from './src/lib/elements/warp-view-polar/warp-view-polar.component';\nimport {WarpViewRadarComponent} from './src/lib/elements/warp-view-radar/warp-view-radar.component';\nimport {WarpViewPlotComponent} from './src/lib/elements/warp-view-plot/warp-view-plot.component';\nimport {WarpViewResizeComponent} from './src/lib/elements/warp-view-resize/warp-view-resize.component';\nimport {WarpViewSliderComponent} from './src/lib/elements/warp-view-slider/warp-view-slider.component';\nimport {WarpViewRangeSliderComponent} from './src/lib/elements/warp-view-range-slider/warp-view-range-slider.component';\nimport {WarpViewSpectrumComponent} from './src/lib/elements/warp-view-spectrum/warp-view-spectrum.component';\nimport {PlotlyComponent} from './src/lib/plotly/plotly.component';\nimport {WarpViewBoxComponent} from './src/lib/elements/warp-view-box/warp-view-box.component';\nimport {WarpView3dLineComponent} from './src/lib/elements/warp-view-3d-line/warp-view-3d-line.component';\nimport {WarpViewGlobeComponent} from './src/lib/elements/warp-view-globe/warp-view-globe.component';\nimport {WarpViewEventDropComponent} from './src/lib/elements/warp-view-event-drop/warp-view-event-drop.component';\nimport {WarpViewResultTileComponent} from './src/lib/elements/warp-view-result-tile/warp-view-result-tile.component';\n\nexport * from './src/lib/warp-view-angular.module';\nexport {Param} from './src/lib/model/param';\n\n\nexport {WarpViewTileComponent} from './src/lib/elements/warp-view-tile/warp-view-tile.component';\nexport {WarpViewChartComponent} from './src/lib/elements/warp-view-chart/warp-view-chart.component';\nexport {WarpViewSpinnerComponent} from './src/lib/elements/warp-view-spinner/warp-view-spinner.component';\nexport {WarpViewToggleComponent} from './src/lib/elements/warp-view-toggle/warp-view-toggle.component';\nexport {WarpViewBarComponent} from './src/lib/elements/warp-view-bar/warp-view-bar.component';\nexport {WarpViewBubbleComponent} from './src/lib/elements/warp-view-bubble/warp-view-bubble.component';\nexport {WarpViewDatagridComponent} from './src/lib/elements/warp-view-datagrid/warp-view-datagrid.component';\nexport {WarpViewPaginableComponent} from './src/lib/elements/warp-view-datagrid/warp-view-paginable/warp-view-paginable.component';\nexport {WarpViewDisplayComponent} from './src/lib/elements/warp-view-display/warp-view-display.component';\nexport {WarpViewDrillDownComponent} from './src/lib/elements/warp-view-drill-down/warp-view-drill-down.component';\nexport {CalendarHeatmapComponent} from './src/lib/elements/warp-view-drill-down/calendar-heatmap/calendar-heatmap.component';\nexport {WarpViewGtsPopupComponent} from './src/lib/elements/warp-view-gts-popup/warp-view-gts-popup.component';\nexport {WarpViewModalComponent} from './src/lib/elements/warp-view-modal/warp-view-modal.component';\nexport {WarpViewGtsTreeComponent} from './src/lib/elements/warp-view-gts-tree/warp-view-gts-tree.component';\nexport {WarpViewTreeViewComponent} from './src/lib/elements/warp-view-gts-tree/warp-view-tree-view/warp-view-tree-view.component';\nexport {WarpViewChipComponent} from './src/lib/elements/warp-view-gts-tree/warp-view-chip/warp-view-chip.component';\nexport {WarpViewImageComponent} from './src/lib/elements/warp-view-image/warp-view-image.component';\nexport {WarpViewMapComponent} from './src/lib/elements/warp-view-map/warp-view-map.component';\nexport {\n  WarpViewHeatmapSlidersComponent\n} from './src/lib/elements/warp-view-map/warp-view-heatmap-sliders/warp-view-heatmap-sliders.component';\nexport {WarpViewPieComponent} from './src/lib/elements/warp-view-pie/warp-view-pie.component';\nexport {WarpViewGaugeComponent} from './src/lib/elements/warp-view-gauge/warp-view-gauge.component';\nexport {WarpViewAnnotationComponent} from './src/lib/elements/warp-view-annotation/warp-view-annotation.component';\nexport {WarpViewPolarComponent} from './src/lib/elements/warp-view-polar/warp-view-polar.component';\nexport {WarpViewRadarComponent} from './src/lib/elements/warp-view-radar/warp-view-radar.component';\nexport {WarpViewPlotComponent} from './src/lib/elements/warp-view-plot/warp-view-plot.component';\nexport {WarpViewResizeComponent} from './src/lib/elements/warp-view-resize/warp-view-resize.component';\nexport {WarpViewSliderComponent} from './src/lib/elements/warp-view-slider/warp-view-slider.component';\nexport {WarpViewRangeSliderComponent} from './src/lib/elements/warp-view-range-slider/warp-view-range-slider.component';\nexport {WarpViewSpectrumComponent} from './src/lib/elements/warp-view-spectrum/warp-view-spectrum.component';\nexport {PlotlyComponent} from './src/lib/plotly/plotly.component';\nexport {WarpViewBoxComponent} from './src/lib/elements/warp-view-box/warp-view-box.component';\nexport {WarpView3dLineComponent} from './src/lib/elements/warp-view-3d-line/warp-view-3d-line.component';\nexport {WarpViewGlobeComponent} from './src/lib/elements/warp-view-globe/warp-view-globe.component';\nexport {WarpViewEventDropComponent} from './src/lib/elements/warp-view-event-drop/warp-view-event-drop.component';\nexport {WarpViewResultTileComponent} from './src/lib/elements/warp-view-result-tile/warp-view-result-tile.component';\n\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n\nexport {WarpViewComponent as ɵa} from './src/lib/elements/warp-view-component';\nexport {HttpErrorHandler as ɵc} from './src/lib/services/http-error-handler.service';\nexport {SizeService as ɵb} from './src/lib/services/resize.service';\nexport {Warp10Service as ɵd} from './src/lib/services/warp10.service';"],"names":["moment","EventEmitter","Injectable","deepEqual","Directive","ElementRef","Renderer2","NgZone","ViewChild","Input","Output","Subject","throttleTime","Component","ViewEncapsulation","of","tap","catchError","HttpClient","HostListener","fitty","select","max","scaleBand","scaleLinear","easeLinear","event","timeDays","sum","range","Leaflet","antPath","noUiSlider.create","Plotlyjs.relayout","Plotlyjs.restyle","Plotlyjs.react","Plotlyjs.purge","Plots","IterableDiffers","KeyValueDiffers","d3.event","d3\n                        .select","eventDrops","NgModule","CommonModule","HttpClientModule","AngularResizedEventModule","FormsModule"],"mappings":"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"}