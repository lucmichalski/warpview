<!--
  ~
  ~    Copyright 2016  Cityzen Data
  ~
  ~    Licensed under the Apache License, Version 2.0 (the "License");
  ~    you may not use this file except in compliance with the License.
  ~    You may obtain a copy of the License at
  ~
  ~      http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~    Unless required by applicable law or agreed to in writing, software
  ~    distributed under the License is distributed on an "AS IS" BASIS,
  ~    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~    See the License for the specific language governing permissions and
  ~    limitations under the License.
  ~
  -->

<!DOCTYPE html>
<html dir="ltr" lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=5.0">
  <title>Quantumviz</title>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css" integrity="sha384-9gVQ4dYFwwWSjIDZnLEWnxCjeSWFphJiwGPXr1jddIhOegiu1FwO5qRGvFXOdJZ4"
    crossorigin="anonymous">

  <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
    crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ"
    crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm"
    crossorigin="anonymous"></script>


  <script src="/build/quantumviz.js"></script>
</head>

<body>
<quantum-tile type="area" show-legend="false" responsive="true" url="https://warp.cityzendata.net/api/v0/exec">

  500.0 'b' STORE
  160.0 'c' STORE
  200.0 'a' STORE
  NEWGTS 'gaussianGTS' RENAME
  1 1000
  <%
  'i' STORE
  $i
  NaN
  NaN
  NaN
  $i $b - 2 **   $c 2 ** -2.0 *  / EXP $a * TOLONG
  ADDVALUE %> FOR
  'gaussianbell' STORE

  //$gaussianbell


  //Box Muller Method to Generate Random Normal Values
  0.0 'mu' STORE
  50.0 'sigma' STORE
  NEWGTS 'normally distributed set' RENAME
  1 10000 <%
  NaN NaN NaN
  RAND PI * 2 * COS  RAND LOG -2.0 * SQRT  * $sigma * $mu + TOLONG
  ADDVALUE
  %> FOR
  'normallyDistributedGTS' STORE

  $normallyDistributedGTS
  $normallyDistributedGTS false MUSIGMA

  NEWGTS 'valuedistribution' RENAME
  $normallyDistributedGTS VALUEHISTOGRAM //produce a map with value count
  <%
  'v' STORE
  'k' STORE
  $k NaN NaN NaN $v ADDVALUE
  %> FOREACH


  [
  $normallyDistributedGTS

  10.0 bucketizer.percentile //probability of being less than x is 10%. this bucketizer will returns x.
  0 //last bucket
  0 //bucket span
  1 //bucket count
  ] BUCKETIZE
  0 GET VALUES
</quantum-tile>
  <!--<quantum-map width="100%" height="800px" map-title="test" start-lat = 30 start-long = 0 start-zoom = 3
    data=
    '[{
      "gts":[
          {"c":"","l":{},"a":{},"v":[
            [1460540141224657,51.45877850241959,-0.01000002957880497,1000,8.090169943749475],
            [1460540131224657,51.49510562885553,-0.02000005915760994,1000,3.0901699437494745],
            [1460540121224657,51.49510562885553,-0.030000004917383194,1000,-3.0901699437494736],
            [1460540111224657,51.45877850241959,-0.040000034496188164,1000,-8.090169943749473],
            [1460540101224657,51.39999998733401,-0.050000064074993134,1000,-10.0],
            [1460540091224657,51.341221472248435,-0.06000000983476639,1000,-8.090169943749475],
            [1460540081224657,51.3048943458125,-0.07000003941357136,1000,-3.0901699437494754],
            [1460540071224657,51.3048943458125,-0.08000006899237633,1000,3.0901699437494723],
            [1460540061224657,51.341221472248435,-0.09000001475214958,1000,8.090169943749473],
            [1460540051224657,51.39999998733401,-0.10000004433095455,1000,10.0]
          ]},
          {"c":"","l":{},"a":{},"v":[
              [1460540141224657,51.49999998975545,-0.10000004433095455,10],
              [1460540131224657,51.45999999716878,-0.09000001475214958,9],
              [1460540121224657,51.41999996267259,-0.08000006899237633,8],
              [1460540111224657,51.39999998733401,-0.07000003941357136,7],
              [1460540101224657,51.439999979920685,-0.06000000983476639,6],
              [1460540091224657,51.47999997250736,-0.050000064074993134,8],
              [1460540081224657,51.49999998975545,-0.030000004917383194,10],
              [1460540071224657,51.51999996509403,-0.02000005915760994,9],
              [1460540061224657,51.539999982342124,-0.01000002957880497,8],
              [1460540051224657,51.55999999959022,0.0,9]
          ]},
          {"c":"","l":{},"a":{},"v":[
              [1460540141224657,51.49999998975545,-0.10000004433095455,"a"],
              [1460540131224657,51.45999999716878,-0.09000001475214958,"b"],
              [1460540121224657,51.41999996267259,-0.08000006899237633,"c"],
              [1460540111224657,51.39999998733401,-0.07000003941357136,"d"]
          ]},
          {"c":"","l":{},"a":{},"v":[
              [1460540136224657,51.439999979920685,0.05999992601573467,true],
              [1460540116224657,51.47999997250736,0.04999998025596142,false],
              [1460540096224657,51.49999998975545,0.02999992109835148,true],
              [1460540076224657,51.51999996509403,0.019999975338578224,false],
              [1460540056224657,51.539999982342124,0.009999945759773254,true]
          ]},
          {"positions":[[51.5,-0.22],[51.46,-0.3],[51.42,-0.2]]},
          {"positions":[[51.2,-0.52,42],[51.36,-0.4,21],[51.32,-0.6,84]]},
          {"positions":[[51.1,-0.52,42,10],[51.56,-0.4,21,30],[51.42,-0.6,84,40],[51.3,-0.82,42,1],[51.76,-0.7,21,20],[51.62,-0.9,84,45]
      ]}],
      "params":[
          {"color":"#ff1010", "key":"path", "legend":"A", "displayDots": "true"},
          {"color":"#1010ff", "key":"path", "legend":"B"},
          {"key":"point", "render":"marker", "marker":"fuel", "color":"#ff0000"},
          {"key":"point", "render":"dot", "radius":5, "fillColor":"#ff0000", "fillOpacity":"0.9"},
          {"edgeColor":"#ffa", "radius":20, "fillColor":"#0f0"},
          { "fillColor":"#00f"},
          {}
      ]}]'
  heat-radius=25 heat-blur=15 heat-opacity=0.5 heat-controls=true heat-data="[[51.4,-0.3, 0.3], [51.4,-0.32, 0.6], [51.1,-0.32, 0.4], [51.1,-0.315, 0.5], [51.105,-0.31, 0.9], [51.5,-0.3, 0.5], [51.6,-0.3, 0.7], [51.3, -0.3, 1]]"
  />-->

  <quantum-map width="100%" height="800px" map-title="test" start-lat = 30 start-long = 0 start-zoom = 3
    data=
    '[{
      "gts":[
          {"c":"","l":{},"a":{},"v":[
            [1, 80, -150],
            [2, 75, 160],
            [3, 70, -155],
            [4, 65, 150],
            [5, 60, -165],
            [6, -1, 160]

          ]}

      ],
      "params":[
          {"color":"#ff1010", "key":"path", "legend":"A", "displayDots": "true"}
      ]}]' />


  <script>

  </script>
</body>

</html>
