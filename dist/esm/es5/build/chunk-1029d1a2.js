var LEVEL,Logger=function(){function t(t,n){void 0===n&&(n=!1),this.isDebug=!1,this.className=t.name,this.isDebug=n}return t.prototype.log=function(t,n,r){var s=[];switch(s.push("["+this.className+"] "+n.join(" - ")),s=s.concat(r),t){case LEVEL.DEBUG:this.isDebug&&console.debug.apply(console,s);break;case LEVEL.ERROR:console.error.apply(console,s);break;case LEVEL.INFO:console.log.apply(console,s);break;case LEVEL.WARN:console.warn.apply(console,s);break;default:this.isDebug&&console.log.apply(console,s)}},t.prototype.debug=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];this.log(LEVEL.DEBUG,t,n)},t.prototype.error=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];this.log(LEVEL.ERROR,t,n)},t.prototype.warn=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];this.log(LEVEL.WARN,t,n)},t.prototype.info=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];this.log(LEVEL.INFO,t,n)},t}();!function(t){t[t.DEBUG=0]="DEBUG",t[t.ERROR=1]="ERROR",t[t.WARN=2]="WARN",t[t.INFO=3]="INFO"}(LEVEL||(LEVEL={}));var DataModel=function(){},GTSLib=function(){function t(){}return t.cleanArray=function(t){return t.filter(function(t){return!!t})},t.unique=function(t){for(var n={},r=[],s=0,e=t.length;s<e;++s)n.hasOwnProperty(t[s])||(r.push(t[s]),n[t[s]]=1);return r},t.isArray=function(t){return t&&"object"==typeof t&&t instanceof Array&&"number"==typeof t.length&&"function"==typeof t.splice&&!t.propertyIsEnumerable("length")},t.isValidResponse=function(n){var r;try{r=JSON.parse(n)}catch(t){return this.LOG.error(["isValidResponse"],"Response non JSON compliant",n),!1}return!!t.isArray(r)||(this.LOG.error(["isValidResponse"],"Response isn't an Array",r),!1)},t.isEmbeddedImage=function(t){return!("string"!=typeof t||!/^data:image/.test(t))},t.isEmbeddedImageObject=function(n){return!(null===n||null===n.image||null===n.caption||!t.isEmbeddedImage(n.image))},t.isPositionArray=function(n){if(!n||!n.positions)return!1;if(t.isPositionsArrayWithValues(n)||t.isPositionsArrayWithTwoValues(n))return!0;for(var r in n.positions){if(n.positions[r].length<2||n.positions[r].length>3)return!1;for(var s in n.positions[r])if("number"!=typeof n.positions[r][s])return!1}return!0},t.isPositionsArrayWithValues=function(t){if(null===t||null===t.positions)return!1;for(var n in t.positions){if(3!==t.positions[n].length)return!1;for(var r in t.positions[n])if("number"!=typeof t.positions[n][r])return!1}return!0},t.isPositionsArrayWithTwoValues=function(t){if(null===t||null===t.positions)return!1;for(var n in t.positions){if(4!==t.positions[n].length)return!1;for(var r in t.positions[n])if("number"!=typeof t.positions[n][r])return!1}return!0},t.gtsFromJSON=function(t,n){return{gts:{c:t.c,l:t.l,a:t.a,v:t.v,id:n}}},t.gtsFromJSONList=function(n,r){var s,e=[];return(n||[]).forEach(function(n,o){var a=n;n.gts&&(a=n.gts),s=void 0!==r&&""!==r?r+"-"+o:o,t.isArray(a)&&e.push(t.gtsFromJSONList(a,s)),t.isGts(a)&&e.push(t.gtsFromJSON(a,s)),t.isEmbeddedImage(a)&&e.push({image:a,caption:"Image",id:s}),t.isEmbeddedImageObject(a)&&e.push({image:a.image,caption:a.caption,id:s})}),{content:e||[]}},t.flatDeep=function(n){return t.isArray(n)||(n=[n]),n.reduce(function(n,r){return Array.isArray(r)?n.concat(t.flatDeep(r)):n.concat(r)},[])},t.flattenGtsIdArray=function(n,r){var s=[];return t.isGts(n)&&(n=[n]),n.forEach(function(n){if(t.isArray(n)){var e=t.flattenGtsIdArray(n,r);s.push(e.res),r=e.r}else n.v&&(n.id=r,s.push(n),r++)}),{res:s,r:r}},t.serializeGtsMetadata=function(t){var n=[],r=[];return t.l&&Object.keys(t.l).forEach(function(r){n.push(r+"="+t.l[r])}),t.a&&Object.keys(t.a).forEach(function(n){r.push(n+"="+t.a[n])}),t.c+"{"+n.join(",")+(r.length>0?",":"")+r.join(",")+"}"},t.gtsToPath=function(t,n){void 0===n&&(n=1e3);for(var r=[],s=0;s<t.v.length;s++){var e=t.v[s];4===e.length&&r.push({ts:Math.floor(e[0]/n),lat:e[1],lon:e[2],val:e[3]}),5===e.length&&r.push({ts:Math.floor(e[0]/n),lat:e[1],lon:e[2],elev:e[3],val:e[4]})}return r},t.equalMetadata=function(t,n){if(!(void 0!==t.c&&void 0!==n.c&&void 0!==t.l&&void 0!==n.l&&t.l instanceof Object&&n.l instanceof Object))return this.LOG.error(["equalMetadata"],"Error in GTS, metadata is not well formed"),!1;if(t.c!==n.c)return!1;for(var r in t.l)if(!n.l.hasOwnProperty(r)||t.l[r]!==n.l[r])return!1;for(var r in n.l)if(!t.l.hasOwnProperty(r))return!1;return!0},t.isGts=function(n){return!(!n||null===n.c||null===n.l||null===n.a||null===n.v||!t.isArray(n.v))},t.isGtsToPlot=function(n){if(!t.isGts(n)||0===n.v.length)return!1;for(var r=0;r<n.v.length;r++)if(null!==n.v[r][n.v[r].length-1]){if("number"==typeof n.v[r][n.v[r].length-1]||void 0!==n.v[r][n.v[r].length-1].constructor.prototype.toFixed)return!0;break}return!1},t.isGtsToAnnotate=function(n){if(!t.isGts(n)||0===n.v.length)return!1;for(var r=0;r<n.v.length;r++)if(null!==n.v[r][n.v[r].length-1]){if("number"!=typeof n.v[r][n.v[r].length-1]&&n.v[r][n.v[r].length-1].constructor&&"Big"!==n.v[r][n.v[r].length-1].constructor.name&&void 0===n.v[r][n.v[r].length-1].constructor.prototype.toFixed)return!0;break}return!1},t.gtsSort=function(t){t.isSorted||(t.v=t.v.sort(function(t,n){return t[0]-n[0]}),t.isSorted=!0)},t.getData=function(n){return"string"==typeof n?t.getData(JSON.parse(n)):n&&n.hasOwnProperty("data")?n:t.isArray(n)&&n.length>0&&n[0].data?n[0]:t.isArray(n)?{data:n}:new DataModel},t.getDivider=function(t){var n=1e3;return"ms"===t&&(n=1),"ns"===t&&(n=1e6),n},t}();GTSLib.LOG=new Logger(GTSLib),GTSLib.formatLabel=function(t){var n=t.split("{"),r="<span class=\"gtsInfo\"><span class='gts-classname'>"+n[0]+"</span>";if(n.length>1){r+="<span class='gts-separator'>{</span>";var s=n[1].substr(0,n[1].length-1).split(",");s.length>0&&s.forEach(function(t,n){var e=t.split("=");t.length>1&&(r+="<span><span class='gts-labelname'>"+e[0]+"</span><span class='gts-separator'>=</span><span class='gts-labelvalue'>"+e[1]+"</span>",n!==s.length-1&&(r+="<span>, </span>"))}),r+="<span class='gts-separator'>}</span>"}if(n.length>2){r+="<span class='gts-separator'>{</span>";var e=n[2].substr(0,n[2].length-1).split(",");e.length>0&&e.forEach(function(t,n){var s=t.split("=");t.length>1&&(r+="<span><span class='gts-attrname'>"+s[0]+"</span><span class='gts-separator'>=</span><span class='gts-attrvalue'>"+s[1]+"</span>",n!==e.length-1&&(r+="<span>, </span>"))}),r+="<span class='gts-separator'>}</span>"}return r+="</span>"};export{GTSLib as a,Logger as b,DataModel as c};