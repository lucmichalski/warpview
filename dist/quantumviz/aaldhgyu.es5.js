/*! Built with http://stenciljs.com */
quantumviz.loadBundle("aaldhgyu",["exports","./chunk-0497819c.js","./chunk-a824490f.js","./chunk-12ee72ee.js"],function(t,e,i,o){var s=window.quantumviz.h,r=function(){function t(){this.unit="",this.type="line",this.chartTitle="",this.responsive=!1,this.showLegend=!1,this.data="[]",this.options="{}",this.width="",this.height="",this.config="{}",this._xSlider={element:null,min:0,max:0},this._ySlider={element:null,min:0,max:0},this._config={rail:{class:""},cursor:{class:""}}}return t.prototype.redraw=function(t,e){e!==t&&this.drawChart()},t.prototype.changeScale=function(t,e){if(e!==t){var i=JSON.parse(t);"timestamp"===i.time.timeMode?(this._chart.options.scales.xAxes[0].time.stepSize=i.time.stepSize,this._chart.options.scales.xAxes[0].time.unit=i.time.unit,this._chart.options.scales.xAxes[0].time.displayFormats.millisecond=i.time.displayFormats,this._chart.update()):(this._chart.options.scales.xAxes[0].time.stepSize=i.time.stepSize,this._chart.options.scales.xAxes[0].time.unit=i.time.unit,this._chart.update())}},t.prototype.hideData=function(t){var e=this._chart.getDatasetMeta(t);null===e.hidden?e.hidden=!0:e.hidden=null,this._chart.update(),this.didHideOrShowData.emit()},t.prototype.drawChart=function(){var t=this.el.shadowRoot.querySelector("#myChart");if(JSON.parse(this.data)){var i=this.gtsToData(JSON.parse(this.data)),o=this,s={animation:!1,legend:{display:!1},tooltips:{mode:"x",position:"nearest",custom:function(t){t.opacity>0?o.pointHover.emit({x:t.dataPoints[0].x+15,y:this._eventPosition.y}):o.pointHover.emit({x:-100,y:this._eventPosition.y})}},scales:{xAxes:[{time:{min:e.moment(this.timeMin?this.timeMin:i.ticks[0],"x"),max:e.moment(this.timeMax?this.timeMax:i.ticks[i.ticks.length-1],"x"),unit:"day"},type:"time"}],yAxes:[{afterFit:function(t){t.width=100},scaleLabel:{display:!0,labelString:this.unit}}]},responsive:this.responsive,zoom:{enabled:!0,drag:!1,sensitivity:.5,mode:"x"}};"spline"===this.type&&(s.elements={line:{lineTension:0}}),"area"===this.type&&(s.elements={line:{fill:"start"}}),this._chart=new e.Chart(t,{type:"bar"===this.type?this.type:"line",data:{labels:i.ticks,datasets:i.datasets},options:s});var r=[],n=[];i.datasets.forEach(function(t){var e=Math.max.apply(Math,t.data);e&&e!=1/0&&r.push(e)}),i.datasets.forEach(function(t){var e=Math.min.apply(Math,t.data);(0==e||e&&e!=1/0)&&n.push(e)}),this._ySlider.min=Math.min.apply(Math,n),this._ySlider.max=1.05*Math.max.apply(Math,r),this._chart.options.scales.yAxes[0].ticks.min=this._ySlider.min,this._chart.options.scales.yAxes[0].ticks.max=this._ySlider.max,this._chart.update(),this._xSlider.min=i.ticks[0],this._xSlider.max=i.ticks[i.ticks.length-1]}},t.prototype.xSliderInit=function(){var t=this.el.shadowRoot.querySelector("#xSlider");t.setAttribute("min-value",this._xSlider.min.toString()),t.setAttribute("max-value",this._xSlider.max.toString()),t.setAttribute("width",this.el.shadowRoot.querySelector("#myChart").getBoundingClientRect().width.toString()),this._xSlider.element=t},t.prototype.ySliderInit=function(){var t=this.el.shadowRoot.querySelector("#ySlider");t.setAttribute("min-value",this._ySlider.min.toString()),t.setAttribute("max-value",this._ySlider.max.toString()),t.setAttribute("height",this.el.shadowRoot.querySelector("#myChart").getBoundingClientRect().height.toString()),this._ySlider.element=t},t.prototype.gtsToData=function(t){var e=this,o=[],s=[];if(t)return t.forEach(function(t){t.gts&&(t.gts=i.GTSLib.flatDeep(t.gts),t.gts.forEach(function(r,n){var a=[];if(r.v){r.v.forEach(function(t){s.push(t[0]/1e3),a.push(t[t.length-1])});var l=i.GTSLib.getColor(n);t.params&&t.params[n]&&t.params[n].color&&(l=t.params[n].color);var h=i.GTSLib.serializeGtsMetadata(r);t.params&&t.params[n]&&t.params[n].key&&(h=t.params[n].key);var u={label:h,data:a,pointRadius:1,fill:!1,steppedLine:e.isStepped(),borderColor:l,borderWidth:1,backgroundColor:i.GTSLib.transparentize(l,.5)};if(t.params&&t.params[n]&&t.params[n].interpolate)switch(t.params[n].interpolate){case"line":u.lineTension=0;break;case"spline":break;case"area":u.fill=!0}o.push(u)}}))}),{datasets:o,ticks:i.GTSLib.unique(s)}},t.prototype.isStepped=function(){return!!this.type.startsWith("step")&&this.type.replace("step-","")},t.prototype.xZoomListener=function(t){var i=this._chart.options.scales.xAxes[0].time.min._i,o=this._chart.options.scales.xAxes[0].time.max._i,s=o-i;t.detail.zoomValue.zoomType>0?(i+=.1*s*t.detail.zoomValue.coef,o=(o-=.1*s*(1-t.detail.zoomValue.coef))>this._xSlider.max?this._xSlider.max:o,i=i<this._xSlider.min?this._xSlider.min:i,this._chart.options.scales.xAxes[0].time.min=e.moment(i,"x"),this._chart.options.scales.xAxes[0].time.max=e.moment(o,"x")):(i-=.15*s*t.detail.zoomValue.coef,o=(o+=.15*s*(1-t.detail.zoomValue.coef))>this._xSlider.max?this._xSlider.max:o,i=i<this._xSlider.min?this._xSlider.min:i,this._chart.options.scales.xAxes[0].time.min=e.moment(i,"x"),this._chart.options.scales.xAxes[0].time.max=e.moment(o,"x")),this._chart.update(),this._xSlider.element.setAttribute("max-value",(this._xSlider.max-(o-i)).toString());var r=(o-i)/(this._xSlider.max-this._xSlider.min),n=(i-this._xSlider.min)/(this._xSlider.max-this._xSlider.min);this._xSlider.element.setAttribute("cursor-size",JSON.stringify({cursorSize:r,cursorOffset:n})),this.boundsDidChange.emit({bounds:{min:i,max:o}})},t.prototype.yZoomListener=function(t){var e=this._chart.options.scales.yAxes[0].ticks.min,i=this._chart.options.scales.yAxes[0].ticks.max,o=i-e;t.detail.zoomValue.zoomType>0?(e+=.1*o*(1-t.detail.zoomValue.coef),i=(i-=.1*o*t.detail.zoomValue.coef)>this._ySlider.max?this._ySlider.max:i,e=e<this._ySlider.min?this._ySlider.min:e,this._chart.options.scales.yAxes[0].ticks.min=e,this._chart.options.scales.yAxes[0].ticks.max=i):(e-=.15*o*(1-t.detail.zoomValue.coef),i=(i=i+.15*o*1-t.detail.zoomValue.coef)>this._ySlider.max?this._ySlider.max:i,e=e<this._ySlider.min?this._ySlider.min:e,this._chart.options.scales.yAxes[0].ticks.min=e,this._chart.options.scales.yAxes[0].ticks.max=i),this._chart.update(),this._ySlider.element.setAttribute("max-value",(this._ySlider.max-(i-e)).toString());var s=(i-e)/(this._ySlider.max-this._ySlider.min),r=(this._ySlider.max-i)/(this._ySlider.max-this._ySlider.min);this._ySlider.element.setAttribute("cursor-size",JSON.stringify({cursorSize:s,cursorOffset:r}))},t.prototype.xSliderListener=function(t){var i=this._chart.options.scales.xAxes[0].time.min._i,o=this._chart.options.scales.xAxes[0].time.max._i,s=t.detail.sliderValue-i;this._chart.options.scales.xAxes[0].time.min=e.moment(i+s,"x"),this._chart.options.scales.xAxes[0].time.max=e.moment(o+s,"x"),this._chart.update()},t.prototype.ySliderListener=function(t){var e=this._chart.options.scales.yAxes[0].ticks.min,i=this._chart.options.scales.yAxes[0].ticks.max,o=t.detail.sliderValue-e;this._chart.options.scales.yAxes[0].ticks.min=e+o,this._chart.options.scales.yAxes[0].ticks.max=i+o,this._chart.update()},t.prototype.componentWillLoad=function(){this._config=i.GTSLib.mergeDeep(this._config,JSON.parse(this.config))},t.prototype.componentDidLoad=function(){this.drawChart(),this.xSliderInit(),this.ySliderInit()},t.prototype.render=function(){return s("div",null,s("h1",null,this.chartTitle),s("div",{class:"chart-container"},s("quantum-vertical-zoom-slider",{id:"ySlider","min-value":"","max-value":"",config:JSON.stringify(this._config)}),this.responsive?s("canvas",{id:"myChart"}):s("canvas",{id:"myChart",width:this.width,height:this.height}),s("quantum-horizontal-zoom-slider",{id:"xSlider","min-value":"","max-value":"",config:JSON.stringify(this._config)})))},Object.defineProperty(t,"is",{get:function(){return"quantum-chart"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"encapsulation",{get:function(){return"shadow"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"properties",{get:function(){return{chartTitle:{type:String,attr:"chart-title"},config:{type:String,attr:"config"},data:{type:String,attr:"data",watchCallbacks:["redraw"]},el:{elementRef:!0},height:{type:String,attr:"height"},hiddenData:{type:Number,attr:"hidden-data",watchCallbacks:["hideData"]},options:{type:String,attr:"options",watchCallbacks:["changeScale"]},responsive:{type:Boolean,attr:"responsive"},showLegend:{type:Boolean,attr:"show-legend"},timeMax:{type:Number,attr:"time-max"},timeMin:{type:Number,attr:"time-min"},type:{type:String,attr:"type"},unit:{type:String,attr:"unit"},width:{type:String,attr:"width"}}},enumerable:!0,configurable:!0}),Object.defineProperty(t,"events",{get:function(){return[{name:"pointHover",method:"pointHover",bubbles:!0,cancelable:!0,composed:!0},{name:"didHideOrShowData",method:"didHideOrShowData",bubbles:!0,cancelable:!0,composed:!0},{name:"boundsDidChange",method:"boundsDidChange",bubbles:!0,cancelable:!0,composed:!0}]},enumerable:!0,configurable:!0}),Object.defineProperty(t,"listeners",{get:function(){return[{name:"xZoom",method:"xZoomListener"},{name:"yZoom",method:"yZoomListener"},{name:"xSliderValueChanged",method:"xSliderListener"},{name:"ySliderValueChanged",method:"ySliderListener"}]},enumerable:!0,configurable:!0}),Object.defineProperty(t,"style",{get:function(){return"quantum-chart .chart-container{width:var(--quantum-chart-width,100%);height:var(--quantum-chart-height,100%);position:relative}"},enumerable:!0,configurable:!0}),t}(),n=function(){function t(){this.cursorSize="{}",this.config="{}",this._config={rail:{class:""},cursor:{class:""}},this._cursorMinWidth=30}return t.prototype.changeCursorSize=function(t,e){if(e!==t){var i=JSON.parse(t);i.cursorOffset+i.cursorSize<=100&&(this._cursor.style.left=(100*i.cursorOffset).toString()+"%",i.cursorSize*this._rail.getBoundingClientRect().width<this._cursorMinWidth?this._cursor.style.width=this._cursorMinWidth.toString()+"px":this._cursor.style.width=(100*i.cursorSize).toString()+"%")}},t.prototype.initSize=function(t,e){e!==t&&(this._rail.style.width=(.94*t).toString()+"px",console.log("width",(.94*t).toString()),console.log(this._rail.getBoundingClientRect()))},t.prototype.componentWillLoad=function(){this._config=i.GTSLib.mergeDeep(this._config,JSON.parse(this.config))},t.prototype.componentDidLoad=function(){this._rail=this.el.shadowRoot.querySelector("#rail"),this._cursor=this.el.shadowRoot.querySelector("#cursor")},t.prototype.mouseDown=function(t){t.preventDefault();var e=this;this.dimsX(t),this._rail.onmousemove=function(t){e.dragX(t,e)},this._cursor.onmouseup=function(t){e.stopDrag(e)},this._rail.onmouseup=function(t){e.stopDrag(e)},this._rail.onmouseout=function(t){e.stopDrag(e)}},t.prototype.dimsX=function(t){var e=this._rail.getBoundingClientRect(),i=this._cursor.getBoundingClientRect();this._railMin=e.x,this._railMax=e.width+this._railMin,this._cursorWidth=i.width,this._mouseCursorLeftOffset=t.x-i.x,this._mouseCursorRightOffset=i.width-this._mouseCursorLeftOffset},t.prototype.dragX=function(t,e){if(t.preventDefault(),t.clientX-e._mouseCursorLeftOffset>=e._railMin&&t.clientX+e._mouseCursorRightOffset<=e._railMax){var i=t.clientX-e._rail.offsetLeft-e._mouseCursorLeftOffset;i=i<0?0:i,e._cursor.style.left=i+"px";var o=i/(this._railMax-this._railMin-this._cursorWidth)*(this.maxValue-this.minValue)+this.minValue;this.xSliderValueChanged.emit({sliderValue:o})}},t.prototype.stopDrag=function(t){t._rail.onmouseup=null,t._rail.onmousemove=null,t._cursor.onmouseup=null,t._rail.onmouseout=null},t.prototype.xWheel=function(t){t.preventDefault();var e=this._rail.getBoundingClientRect(),i=(t.pageX-this._rail.offsetLeft)/e.width;this.xZoom.emit({zoomValue:{coef:i,zoomType:-1*t.deltaY}})},t.prototype.yWheel=function(t){t.preventDefault()},t.prototype.render=function(){var t=this;return s("div",{id:"rail",class:"rail "+this._config.rail.class,onWheel:function(e){return t.xWheel(e)}},s("div",{id:"cursor",class:"cursor "+this._config.cursor.class,onMouseDown:function(e){return t.mouseDown(e)}}))},Object.defineProperty(t,"is",{get:function(){return"quantum-horizontal-zoom-slider"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"encapsulation",{get:function(){return"shadow"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"properties",{get:function(){return{config:{type:String,attr:"config"},cursorSize:{type:String,attr:"cursor-size",watchCallbacks:["changeCursorSize"]},el:{elementRef:!0},maxValue:{type:Number,attr:"max-value"},minValue:{type:Number,attr:"min-value"},width:{type:Number,attr:"width",watchCallbacks:["initSize"]}}},enumerable:!0,configurable:!0}),Object.defineProperty(t,"events",{get:function(){return[{name:"xSliderValueChanged",method:"xSliderValueChanged",bubbles:!0,cancelable:!0,composed:!0},{name:"xZoom",method:"xZoom",bubbles:!0,cancelable:!0,composed:!0}]},enumerable:!0,configurable:!0}),Object.defineProperty(t,"style",{get:function(){return".rail{position:relative;background:grey;opacity:.7;float:right;left:0;height:20px;margin:0;border:1px solid #000;border-radius:6px;padding:0 1px 1px 0}.rail:hover{opacity:1}.cursor{background:red;position:relative;cursor:move;width:100%;height:20px;border:1px solid #000;border-radius:6px;left:0;-webkit-transition:left .01s;transition:left .01s}"},enumerable:!0,configurable:!0}),t}(),a=function(){function t(){this.cursorSize="{}",this.config="{}",this._config={rail:{class:""},cursor:{class:""}},this._cursorMinHeight=30}return t.prototype.changeCursorSize=function(t,e){if(e!==t){var i=JSON.parse(t);i.cursorOffset+i.cursorSize<=100&&(this._cursor.style.top=(100*i.cursorOffset).toString()+"%",i.cursorSize*this._rail.getBoundingClientRect().height<this._cursorMinHeight?this._cursor.style.height=this._cursorMinHeight.toString()+"px":this._cursor.style.height=(100*i.cursorSize).toString()+"%")}},t.prototype.initSize=function(t,e){e!==t&&(this._rail.style.height=(.97*t).toString()+"px",console.log("width",(.94*t).toString()),console.log(this._rail.getBoundingClientRect()))},t.prototype.componentWillLoad=function(){this._config=i.GTSLib.mergeDeep(this._config,JSON.parse(this.config))},t.prototype.componentDidLoad=function(){this._rail=this.el.shadowRoot.querySelector("#rail"),this._cursor=this.el.shadowRoot.querySelector("#cursor")},t.prototype.mouseDown=function(t){console.log("min et max",this.minValue,this.maxValue),t.preventDefault();var e=this;this.dimsY(t),this._rail.onmousemove=function(t){e.dragY(t,e)},this._cursor.onmouseup=function(t){e.stopDrag(e)},this._rail.onmouseup=function(t){e.stopDrag(e)},this._rail.onmouseout=function(t){e.stopDrag(e)}},t.prototype.dimsY=function(t){var e=this._rail.getBoundingClientRect(),i=this._cursor.getBoundingClientRect();this._railMin=this._rail.offsetTop,this._railMax=e.height+this._rail.offsetTop,this._cursorHeight=i.height,this._mouseCursorTopOffset=t.pageY-this._rail.offsetTop-this._cursor.offsetTop,this._mouseCursorBottomOffset=i.height-this._mouseCursorTopOffset},t.prototype.dragY=function(t,e){if(t.preventDefault(),t.pageY-e._mouseCursorTopOffset>=e._railMin&&t.pageY+e._mouseCursorBottomOffset<=e._railMax){var i=t.pageY-e._rail.offsetTop-e._mouseCursorTopOffset;i=i<0?0:i,e._cursor.style.top=i+"px";var o=i/(this._railMax-this._railMin-this._cursorHeight)*(this.maxValue-this.minValue)+this.minValue;o=this.maxValue-this.minValue-o,this.ySliderValueChanged.emit({sliderValue:o}),console.log("V",i),console.log(o)}},t.prototype.stopDrag=function(t){t._rail.onmouseup=null,t._rail.onmousemove=null,t._cursor.onmouseup=null,t._rail.onmouseout=null},t.prototype.yWheel=function(t){t.preventDefault();var e=this._rail.getBoundingClientRect(),i=(t.pageY-this._rail.offsetTop)/e.height;this.yZoom.emit({zoomValue:{coef:i,zoomType:-1*t.deltaY}})},t.prototype.render=function(){var t=this;return s("div",{id:"rail",class:"rail "+this._config.rail.class,onWheel:function(e){return t.yWheel(e)}},s("div",{id:"cursor",class:"cursor "+this._config.cursor.class,onMouseDown:function(e){return t.mouseDown(e)}}))},Object.defineProperty(t,"is",{get:function(){return"quantum-vertical-zoom-slider"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"encapsulation",{get:function(){return"shadow"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"properties",{get:function(){return{config:{type:String,attr:"config"},cursorSize:{type:String,attr:"cursor-size",watchCallbacks:["changeCursorSize"]},el:{elementRef:!0},height:{type:Number,attr:"height",watchCallbacks:["initSize"]},maxValue:{type:Number,attr:"max-value"},minValue:{type:Number,attr:"min-value"}}},enumerable:!0,configurable:!0}),Object.defineProperty(t,"events",{get:function(){return[{name:"ySliderValueChanged",method:"ySliderValueChanged",bubbles:!0,cancelable:!0,composed:!0},{name:"yZoom",method:"yZoom",bubbles:!0,cancelable:!0,composed:!0}]},enumerable:!0,configurable:!0}),Object.defineProperty(t,"style",{get:function(){return".rail{position:absolute;background:grey;opacity:.7;width:20px;margin:0 0 20px 0;border:1px solid #000;border-radius:6px;padding:0}.rail:hover{opacity:1}.cursor{background:red;position:relative;cursor:move;width:20px;height:100%;border:1px solid #000;border-radius:6px;-webkit-transition:top .01s;transition:top .01s}"},enumerable:!0,configurable:!0}),t}();t.QuantumChart=r,t.QuantumHorizontalZoomSlider=n,t.QuantumVerticalZoomSlider=a,Object.defineProperty(t,"__esModule",{value:!0})});