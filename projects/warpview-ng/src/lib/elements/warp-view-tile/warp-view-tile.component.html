<!--
  ~  Copyright 2020  SenX S.A.S.
  ~
  ~  Licensed under the Apache License, Version 2.0 (the "License");
  ~  you may not use this file except in compliance with the License.
  ~  You may obtain a copy of the License at
  ~
  ~    http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~  Unless required by applicable law or agreed to in writing, software
  ~  distributed under the License is distributed on an "AS IS" BASIS,
  ~  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~  See the License for the specific language governing permissions and
  ~  limitations under the License.
  ~
  -->
<div class="wrapper" [ngClass]="{'full':  responsive}" (resized)="onResized($event)">
  <div class="tilewrapper">
    <h1 *ngIf="chartTitle">{{chartTitle}}</h1>
    <div [ngClass]="{'tile': true,'notitle':  !chartTitle || chartTitle === ''}">
      <warpview-spinner *ngIf="loading" message="Requesting data"></warpview-spinner>
      <p *ngIf="_options.showErrors && error" class="error">{{error}}</p>
      <div *ngIf="!error" style="height: calc(100% - 30px)" [hidden]="loading">
        <warpview-result-tile [debug]="_debug" [type]="type" [unit]="unit" [options]="_options"
                              [showLegend]="_showLegend" [data]="execResult"></warpview-result-tile>
      </div>
      <small *ngIf="_options.showStatus">{{status}}</small>
    </div>
  </div>
</div>

<div #warpRef style="display: none">
  <ng-content></ng-content>
</div>
