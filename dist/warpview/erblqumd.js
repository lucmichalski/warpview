/*! Built with http://stenciljs.com */
const{h:t}=window.warpview;import{a as e,b as i,d as a,c as n}from"./chunk-f6bb409c.js";import{a as s}from"./chunk-1b4e64a6.js";import{a as r}from"./chunk-07b61ac6.js";var o="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};o.setTimeout,o.clearTimeout;var l=o.performance||{},h=(l.now||l.mozNow||l.msNow||l.oNow||l.webkitNow,function(t,e,i,a,n,s){var r,o,l,h,d=a("pixelsPerLabel"),c=[];if(s)for(r=0;r<s.length;r++)c.push({v:s[r]});else{if(a("logscale")){h=Math.floor(i/d);var u=I(t,p,1),g=I(e,p,-1);-1==u&&(u=0),-1==g&&(g=p.length-1);var v=null;if(g-u>=h/4){for(var _=g;_>=u;_--){var f=p[_],y=Math.log(f/t)/Math.log(e/t)*i,x={v:f};null===v?v={tickValue:f,pixel_coord:y}:Math.abs(y-v.pixel_coord)>=d?v={tickValue:f,pixel_coord:y}:x.label="",c.push(x)}c.reverse()}}if(0===c.length){var m,b;a("labelsKMG2")?(m=[1,2,4,8,16,32,64,128,256],b=16):(m=[1,2,5,10,20,50,100],b=10);var w,A,S,O=Math.ceil(i/d),C=Math.abs(e-t)/O,L=Math.floor(Math.log(C)/Math.log(b)),T=Math.pow(b,L);for(o=0;o<m.length&&(w=T*m[o],A=Math.floor(t/w)*w,S=Math.ceil(e/w)*w,!(i/(h=Math.abs(S-A)/w)>d));o++);for(A>S&&(w*=-1),r=0;r<=h;r++)l=A+r*w,c.push({v:l})}}var D=a("axisLabelFormatter");for(r=0;r<c.length;r++)void 0===c[r].label&&(c[r].label=D.call(n,c[r].v,0,a,n));return c}),d=function(t,e,i,a,n,s){var r=g(t,e,i,a);return r>=0?_(t,e,r,a,n):[]},c={MILLISECONDLY:0,TWO_MILLISECONDLY:1,FIVE_MILLISECONDLY:2,TEN_MILLISECONDLY:3,FIFTY_MILLISECONDLY:4,HUNDRED_MILLISECONDLY:5,FIVE_HUNDRED_MILLISECONDLY:6,SECONDLY:7,TWO_SECONDLY:8,FIVE_SECONDLY:9,TEN_SECONDLY:10,THIRTY_SECONDLY:11,MINUTELY:12,TWO_MINUTELY:13,FIVE_MINUTELY:14,TEN_MINUTELY:15,THIRTY_MINUTELY:16,HOURLY:17,TWO_HOURLY:18,SIX_HOURLY:19,DAILY:20,TWO_DAILY:21,WEEKLY:22,MONTHLY:23,QUARTERLY:24,BIANNUAL:25,ANNUAL:26,DECADAL:27,CENTENNIAL:28,NUM_GRANULARITIES:29},u=[];u[c.MILLISECONDLY]={datefield:6,step:1,spacing:1},u[c.TWO_MILLISECONDLY]={datefield:6,step:2,spacing:2},u[c.FIVE_MILLISECONDLY]={datefield:6,step:5,spacing:5},u[c.TEN_MILLISECONDLY]={datefield:6,step:10,spacing:10},u[c.FIFTY_MILLISECONDLY]={datefield:6,step:50,spacing:50},u[c.HUNDRED_MILLISECONDLY]={datefield:6,step:100,spacing:100},u[c.FIVE_HUNDRED_MILLISECONDLY]={datefield:6,step:500,spacing:500},u[c.SECONDLY]={datefield:5,step:1,spacing:1e3},u[c.TWO_SECONDLY]={datefield:5,step:2,spacing:2e3},u[c.FIVE_SECONDLY]={datefield:5,step:5,spacing:5e3},u[c.TEN_SECONDLY]={datefield:5,step:10,spacing:1e4},u[c.THIRTY_SECONDLY]={datefield:5,step:30,spacing:3e4},u[c.MINUTELY]={datefield:4,step:1,spacing:6e4},u[c.TWO_MINUTELY]={datefield:4,step:2,spacing:12e4},u[c.FIVE_MINUTELY]={datefield:4,step:5,spacing:3e5},u[c.TEN_MINUTELY]={datefield:4,step:10,spacing:6e5},u[c.THIRTY_MINUTELY]={datefield:4,step:30,spacing:18e5},u[c.HOURLY]={datefield:3,step:1,spacing:36e5},u[c.TWO_HOURLY]={datefield:3,step:2,spacing:72e5},u[c.SIX_HOURLY]={datefield:3,step:6,spacing:216e5},u[c.DAILY]={datefield:2,step:1,spacing:864e5},u[c.TWO_DAILY]={datefield:2,step:2,spacing:1728e5},u[c.WEEKLY]={datefield:2,step:7,spacing:6048e5},u[c.MONTHLY]={datefield:1,step:1,spacing:2629817280},u[c.QUARTERLY]={datefield:1,step:3,spacing:216e5*365.2524},u[c.BIANNUAL]={datefield:1,step:6,spacing:432e5*365.2524},u[c.ANNUAL]={datefield:0,step:1,spacing:864e5*365.2524},u[c.DECADAL]={datefield:0,step:10,spacing:315578073600},u[c.CENTENNIAL]={datefield:0,step:100,spacing:3155780736e3};var p=function(){for(var t=[],e=-39;e<=39;e++)for(var i=Math.pow(10,e),a=1;a<=9;a++){var n=i*a;t.push(n)}return t}(),g=function(t,e,i,a){for(var n=a("pixelsPerLabel"),s=0;s<c.NUM_GRANULARITIES;s++)if(i/v(t,e,s)>=n)return s;return-1},v=function(t,e,i){var a=u[i].spacing;return Math.round(1*(e-t)/a)},_=function(t,e,i,a,n){var s=a("axisLabelFormatter"),r=a("labelsUTC")?k:E,o=u[i].datefield,l=u[i].step,h=u[i].spacing,d=new Date(t),p=[];p[0]=r.getFullYear(d),p[1]=r.getMonth(d),p[2]=r.getDate(d),p[3]=r.getHours(d),p[4]=r.getMinutes(d),p[5]=r.getSeconds(d),p[6]=r.getMilliseconds(d);var g=p[o]%l;i==c.WEEKLY&&(g=r.getDay(d)),p[o]-=g;for(var v=o+1;v<7;v++)p[v]=2===v?1:0;var _=[],f=r.makeDate.apply(null,p),y=f.getTime();if(i<=c.HOURLY)for(y<t&&(y+=h,f=new Date(y));y<=e;)_.push({v:y,label:s.call(n,f,i,a,n)}),y+=h,f=new Date(y);else for(y<t&&(p[o]+=l,y=(f=r.makeDate.apply(null,p)).getTime());y<=e;)(i>=c.DAILY||r.getHours(f)%l==0)&&_.push({v:y,label:s.call(n,f,i,a,n)}),p[o]+=l,y=(f=r.makeDate.apply(null,p)).getTime();return _},f=Math.log(10),y=function(t){return Math.log(t)/f},x=function(t,e,i){var a=y(t),n=a+i*(y(e)-a);return Math.pow(10,n)},m=function(t){return t.getContext("2d")},b=function(t,e,i){t.addEventListener(e,i,!1)};function w(t,e,i){t.removeEventListener(e,i,!1)}function A(t){return(t=t||window.event).stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),t.cancelBubble=!0,t.cancel=!0,t.returnValue=!1,!1}function S(t,e,i){var a,n,s;if(0===e)a=i,n=i,s=i;else{var r=Math.floor(6*t),o=6*t-r,l=i*(1-e),h=i*(1-e*o),d=i*(1-e*(1-o));switch(r){case 1:a=h,n=i,s=l;break;case 2:a=l,n=i,s=d;break;case 3:a=l,n=h,s=i;break;case 4:a=d,n=l,s=i;break;case 5:a=i,n=l,s=h;break;case 6:case 0:a=i,n=d,s=l}}return"rgb("+(a=Math.floor(255*a+.5))+","+(n=Math.floor(255*n+.5))+","+(s=Math.floor(255*s+.5))+")"}function O(t){var e=t.getBoundingClientRect(),i=window,a=document.documentElement;return{x:e.left+(i.pageXOffset||a.scrollLeft),y:e.top+(i.pageYOffset||a.scrollTop)}}function C(t){return!t.pageX||t.pageX<0?0:t.pageX}function L(t){return!t.pageY||t.pageY<0?0:t.pageY}function T(t,e){return C(t)-e.px}function D(t,e){return L(t)-e.py}function P(t,e){return!!t&&null!==t.yval&&null!==t.x&&void 0!==t.x&&null!==t.y&&void 0!==t.y&&!(isNaN(t.x)||!e&&isNaN(t.y))}function M(t,e){var i=Math.min(Math.max(1,e||2),21);return Math.abs(t)<.001&&0!==t?t.toExponential(i-1):t.toPrecision(i)}function N(t){return t<10?"0"+t:""+t}var E={getFullYear:t=>t.getFullYear(),getMonth:t=>t.getMonth(),getDate:t=>t.getDate(),getHours:t=>t.getHours(),getMinutes:t=>t.getMinutes(),getSeconds:t=>t.getSeconds(),getMilliseconds:t=>t.getMilliseconds(),getDay:t=>t.getDay(),makeDate:function(t,e,i,a,n,s,r){return new Date(t,e,i,a,n,s,r)}},k={getFullYear:t=>t.getUTCFullYear(),getMonth:t=>t.getUTCMonth(),getDate:t=>t.getUTCDate(),getHours:t=>t.getUTCHours(),getMinutes:t=>t.getUTCMinutes(),getSeconds:t=>t.getUTCSeconds(),getMilliseconds:t=>t.getUTCMilliseconds(),getDay:t=>t.getUTCDay(),makeDate:function(t,e,i,a,n,s,r){return new Date(Date.UTC(t,e,i,a,n,s,r))}};function R(t,e,i,a){var n=N(t)+":"+N(e);if(i&&(n+=":"+N(i),a)){var s=""+a;n+="."+("000"+s).substring(s.length)}return n}function F(t,e){var i=e?k:E,a=new Date(t),n=i.getFullYear(a),s=i.getMonth(a),r=i.getDate(a),o=i.getHours(a),l=i.getMinutes(a),h=i.getSeconds(a),d=i.getMilliseconds(a),c=n+"/"+N(s+1)+"/"+N(r);return 3600*o+60*l+h+.001*d&&(c+=" "+R(o,l,h,d)),c}function H(t,e){var i=Math.pow(10,e);return Math.round(t*i)/i}function I(t,e,i,a,n){if(null!==a&&void 0!==a&&null!==n&&void 0!==n||(a=0,n=e.length-1),a>n)return-1;null!==i&&void 0!==i||(i=0);var s,r=function(t){return t>=0&&t<e.length},o=parseInt((a+n)/2,10),l=e[o];return l==t?o:l>t?i>0&&r(s=o-1)&&e[s]<t?o:I(t,e,i,a,o-1):l<t?i<0&&r(s=o+1)&&e[s]>t?o:I(t,e,i,o+1,n):-1}function Y(t){var e,i;if((-1==t.search("-")||-1!=t.search("T")||-1!=t.search("Z"))&&(i=X(t))&&!isNaN(i))return i;if(-1!=t.search("-")){for(e=t.replace("-","/","g");-1!=e.search("-");)e=e.replace("-","/");i=X(e)}else i=8==t.length?X(e=t.substr(0,4)+"/"+t.substr(4,2)+"/"+t.substr(6,2)):X(t);return i&&!isNaN(i)||console.error("Couldn't parse "+t+" as a date"),i}function X(t){return new Date(t).getTime()}function W(t,e){if(void 0!==e&&null!==e)for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t}function V(t,e){function i(t){return"object"==typeof Node?t instanceof Node:"object"==typeof t&&"number"==typeof t.nodeType&&"string"==typeof t.nodeName}if(void 0!==e&&null!==e)for(var a in e)e.hasOwnProperty(a)&&(null===e[a]?t[a]=null:Z(e[a])?t[a]=e[a].slice():i(e[a])?t[a]=e[a]:"object"==typeof e[a]?("object"==typeof t[a]&&null!==t[a]||(t[a]={}),V(t[a],e[a])):t[a]=e[a]);return t}function Z(t){var e=typeof t;return("object"==e||"function"==e&&"function"==typeof t.item)&&null!==t&&"number"==typeof t.length&&3!==t.nodeType}function G(t){return"object"==typeof t&&null!==t&&"function"==typeof t.getTime}function B(){return document.createElement("canvas")}function z(t){try{var e=window.devicePixelRatio,i=t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1;return void 0!==e?e/i:1}catch(t){return 1}}function U(t,e,i,a){e=e||0,i=i||t.length,this.hasNext=!0,this.peek=null,this.start_=e,this.array_=t,this.predicate_=a,this.end_=Math.min(t.length,e+i),this.nextIdx_=e-1,this.next()}function $(t,e,i,a){return new U(t,e,i,a)}U.prototype.next=function(){if(!this.hasNext)return null;for(var t=this.peek,e=this.nextIdx_+1,i=!1;e<this.end_;){if(!this.predicate_||this.predicate_(this.array_,e)){this.peek=this.array_[e],i=!0;break}e++}return this.nextIdx_=e,i||(this.hasNext=!1,this.peek=null),t};var K=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)};function j(t,e,i,a){var n,s=0,r=(new Date).getTime();if(t(s),1!=e){var o=e-1;!function l(){s>=e||K.call(window,function(){var e=(new Date).getTime()-r;n=s;var h=(s=Math.floor(e/i))-n;s+h>o||s>=o?(t(o),a()):(0!==h&&t(s),l())})}()}else a()}var q={annotationClickHandler:!0,annotationDblClickHandler:!0,annotationMouseOutHandler:!0,annotationMouseOverHandler:!0,axisLineColor:!0,axisLineWidth:!0,clickCallback:!0,drawCallback:!0,drawHighlightPointCallback:!0,drawPoints:!0,drawPointCallback:!0,drawGrid:!0,fillAlpha:!0,gridLineColor:!0,gridLineWidth:!0,hideOverlayOnMouseOut:!0,highlightCallback:!0,highlightCircleSize:!0,interactionModel:!0,labelsDiv:!0,labelsKMB:!0,labelsKMG2:!0,labelsSeparateLines:!0,labelsShowZeroValues:!0,legend:!0,panEdgeFraction:!0,pixelsPerYLabel:!0,pointClickCallback:!0,pointSize:!0,rangeSelectorPlotFillColor:!0,rangeSelectorPlotFillGradientColor:!0,rangeSelectorPlotStrokeColor:!0,rangeSelectorBackgroundStrokeColor:!0,rangeSelectorBackgroundLineWidth:!0,rangeSelectorPlotLineWidth:!0,rangeSelectorForegroundStrokeColor:!0,rangeSelectorForegroundLineWidth:!0,rangeSelectorAlpha:!0,showLabelsOnHighlight:!0,showRoller:!0,strokeWidth:!0,underlayCallback:!0,unhighlightCallback:!0,zoomCallback:!0},Q={DEFAULT:function(t,e,i,a,n,s,r){i.beginPath(),i.fillStyle=s,i.arc(a,n,r,0,2*Math.PI,!1),i.fill()}};function J(t){for(var e=0;e<t.length;e++){var i=t.charAt(e);if("\r"===i)return e+1<t.length&&"\n"===t.charAt(e+1)?"\r\n":i;if("\n"===i)return e+1<t.length&&"\r"===t.charAt(e+1)?"\n\r":i}return null}function tt(t,e){if(null===e||null===t)return!1;for(var i=t;i&&i!==e;)i=i.parentNode;return i===e}function et(t,e){return e<0?1/Math.pow(t,-e):Math.pow(t,e)}var it=/^rgba?\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})(?:,\s*([01](?:\.\d+)?))?\)$/;function at(t){var e=it.exec(t);if(!e)return null;var i=parseInt(e[1],10),a=parseInt(e[2],10),n=parseInt(e[3],10);return e[4]?{r:i,g:a,b:n,a:parseFloat(e[4])}:{r:i,g:a,b:n}}function nt(t){var e=at(t);if(e)return e;var i=document.createElement("div");i.style.backgroundColor=t,i.style.visibility="hidden",document.body.appendChild(i);var a=window.getComputedStyle(i,null).backgroundColor;return document.body.removeChild(i),at(a)}function st(t,e,i){var a=parseFloat(t);if(!isNaN(a))return a;if(/^ *$/.test(t))return null;if(/^ *nan *$/i.test(t))return NaN;var n="Unable to parse '"+t+"' as a number";return void 0!==i&&void 0!==e&&(n+=" on line "+(1+(e||0))+" ('"+i+"') of CSV."),console.error(n),null}var rt=["K","M","B","T","Q"],ot=["k","M","G","T","P","E","Z","Y"],lt=["m","u","n","p","f","a","z","y"];function ht(t,e){var i=e("sigFigs");if(null!==i)return M(t,i);var a,n=e("digitsAfterDecimal"),s=e("maxNumberWidth"),r=e("labelsKMB"),o=e("labelsKMG2");if(a=0!==t&&(Math.abs(t)>=Math.pow(10,s)||Math.abs(t)<Math.pow(10,-n))?t.toExponential(n):""+H(t,n),r||o){var l,h=[],d=[];r&&(l=1e3,h=rt),o&&(r&&console.warn("Setting both labelsKMB and labelsKMG2. Pick one!"),l=1024,h=ot,d=lt);for(var c=Math.abs(t),u=et(l,h.length),p=h.length-1;p>=0;p--,u/=l)if(c>=u){a=H(t/u,n)+h[p];break}if(o){var g=String(t.toExponential()).split("e-");2===g.length&&g[1]>=3&&g[1]<=24&&(a=g[1]%3>0?H(g[0]/et(10,g[1]%3),n):Number(g[0]).toFixed(2),a+=d[Math.floor(g[1]/3)-1])}}return a}function dt(t,e,i){return ht.call(this,t,i)}var ct=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function ut(t,e,i){var a=i("labelsUTC")?k:E,n=a.getFullYear(t),s=a.getMonth(t),r=a.getDate(t),o=a.getHours(t),l=a.getMinutes(t),h=a.getSeconds(t),d=a.getMilliseconds(t);if(e>=c.DECADAL)return""+n;if(e>=c.MONTHLY)return ct[s]+"&#160;"+n;if(0===3600*o+60*l+h+.001*d||e>=c.DAILY)return N(r)+"&#160;"+ct[s];if(e<c.SECONDLY){var u=""+d;return N(h)+"."+("000"+u).substring(u.length)}return e>c.MINUTELY?R(o,l,h,0):R(o,l,h,d)}function pt(t,e){return F(t,e("labelsUTC"))}var gt=function(t){this.dygraph_=t,this.points=[],this.setNames=[],this.annotations=[],this.yAxes_=null,this.xTicks_=null,this.yTicks_=null};gt.prototype.addDataset=function(t,e){this.points.push(e),this.setNames.push(t)},gt.prototype.getPlotArea=function(){return this.area_},gt.prototype.computePlotArea=function(){var t={x:0,y:0};t.w=this.dygraph_.width_-t.x-this.dygraph_.getOption("rightGap"),t.h=this.dygraph_.height_;var e={chart_div:this.dygraph_.graphDiv,reserveSpaceLeft:function(e){var i={x:t.x,y:t.y,w:e,h:t.h};return t.x+=e,t.w-=e,i},reserveSpaceRight:function(e){var i={x:t.x+t.w-e,y:t.y,w:e,h:t.h};return t.w-=e,i},reserveSpaceTop:function(e){var i={x:t.x,y:t.y,w:t.w,h:e};return t.y+=e,t.h-=e,i},reserveSpaceBottom:function(e){var i={x:t.x,y:t.y+t.h-e,w:t.w,h:e};return t.h-=e,i},chartRect:function(){return{x:t.x,y:t.y,w:t.w,h:t.h}}};this.dygraph_.cascadeEvents_("layout",e),this.area_=t},gt.prototype.setAnnotations=function(t){this.annotations=[];for(var e=this.dygraph_.getOption("xValueParser")||function(t){return t},i=0;i<t.length;i++){var a={};if(!t[i].xval&&void 0===t[i].x)return void console.error("Annotations must have an 'x' property");if(t[i].icon&&(!t[i].hasOwnProperty("width")||!t[i].hasOwnProperty("height")))return void console.error("Must set width and height when setting annotation.icon property");W(a,t[i]),a.xval||(a.xval=e(a.x)),this.annotations.push(a)}},gt.prototype.setXTicks=function(t){this.xTicks_=t},gt.prototype.setYAxes=function(t){this.yAxes_=t},gt.prototype.evaluate=function(){this._xAxis={},this._evaluateLimits(),this._evaluateLineCharts(),this._evaluateLineTicks(),this._evaluateAnnotations()},gt.prototype._evaluateLimits=function(){var t=this.dygraph_.xAxisRange();this._xAxis.minval=t[0],this._xAxis.maxval=t[1];var e=t[1]-t[0];this._xAxis.scale=0!==e?1/e:1,this.dygraph_.getOptionForAxis("logscale","x")&&(this._xAxis.xlogrange=y(this._xAxis.maxval)-y(this._xAxis.minval),this._xAxis.xlogscale=0!==this._xAxis.xlogrange?1/this._xAxis.xlogrange:1);for(var i=0;i<this.yAxes_.length;i++){var a=this.yAxes_[i];a.minyval=a.computedValueRange[0],a.maxyval=a.computedValueRange[1],a.yrange=a.maxyval-a.minyval,a.yscale=0!==a.yrange?1/a.yrange:1,this.dygraph_.getOption("logscale")&&(a.ylogrange=y(a.maxyval)-y(a.minyval),a.ylogscale=0!==a.ylogrange?1/a.ylogrange:1,isFinite(a.ylogrange)&&!isNaN(a.ylogrange)||console.error("axis "+i+" of graph at "+a.g+" can't be displayed in log scale for range ["+a.minyval+" - "+a.maxyval+"]"))}},gt.calcXNormal_=function(t,e,i){return i?(y(t)-y(e.minval))*e.xlogscale:(t-e.minval)*e.scale},gt.calcYNormal_=function(t,e,i){if(i){var a=1-(y(e)-y(t.minyval))*t.ylogscale;return isFinite(a)?a:NaN}return 1-(e-t.minyval)*t.yscale},gt.prototype._evaluateLineCharts=function(){for(var t=this.dygraph_.getOption("stackedGraph"),e=this.dygraph_.getOptionForAxis("logscale","x"),i=0;i<this.points.length;i++){for(var a=this.points[i],n=this.setNames[i],s=this.dygraph_.getOption("connectSeparatedPoints",n),r=this.dygraph_.axisPropertiesForSeries(n),o=this.dygraph_.attributes_.getForSeries("logscale",n),l=0;l<a.length;l++){var h=a[l];h.x=gt.calcXNormal_(h.xval,this._xAxis,e);var d=h.yval;t&&(h.y_stacked=gt.calcYNormal_(r,h.yval_stacked,o),null===d||isNaN(d)||(d=h.yval_stacked)),null===d&&(d=NaN,s||(h.yval=NaN)),h.y=gt.calcYNormal_(r,d,o)}this.dygraph_.dataHandler_.onLineEvaluated(a,r,o)}},gt.prototype._evaluateLineTicks=function(){var t,e,i,a,n,s;for(this.xticks=[],t=0;t<this.xTicks_.length;t++)i=(e=this.xTicks_[t]).label,n=(s=!("label_v"in e))?e.v:e.label_v,(a=this.dygraph_.toPercentXCoord(n))>=0&&a<1&&this.xticks.push({pos:a,label:i,has_tick:s});for(this.yticks=[],t=0;t<this.yAxes_.length;t++)for(var r=this.yAxes_[t],o=0;o<r.ticks.length;o++)i=(e=r.ticks[o]).label,n=(s=!("label_v"in e))?e.v:e.label_v,(a=this.dygraph_.toPercentYCoord(n,t))>0&&a<=1&&this.yticks.push({axis:t,pos:a,label:i,has_tick:s})},gt.prototype._evaluateAnnotations=function(){var t,e={};for(t=0;t<this.annotations.length;t++){var i=this.annotations[t];e[i.xval+","+i.series]=i}if(this.annotated_points=[],this.annotations&&this.annotations.length)for(var a=0;a<this.points.length;a++){var n=this.points[a];for(t=0;t<n.length;t++){var s=n[t],r=s.xval+","+s.name;r in e&&(s.annotation=e[r],this.annotated_points.push(s))}}},gt.prototype.removeAllDatasets=function(){delete this.points,delete this.setNames,delete this.setPointsLengths,delete this.setPointsOffsets,this.points=[],this.setNames=[],this.setPointsLengths=[],this.setPointsOffsets=[]};var vt=function(t,e,i,a){if(this.dygraph_=t,this.layout=a,this.element=e,this.elementContext=i,this.height=t.height_,this.width=t.width_,!function(t){try{(t||document.createElement("canvas")).getContext("2d")}catch(t){return!1}return!0}(this.element))throw"Canvas is not supported.";this.area=a.getPlotArea();var n=this.dygraph_.canvas_ctx_;n.beginPath(),n.rect(this.area.x,this.area.y,this.area.w,this.area.h),n.clip(),(n=this.dygraph_.hidden_ctx_).beginPath(),n.rect(this.area.x,this.area.y,this.area.w,this.area.h),n.clip()};vt.prototype.clear=function(){this.elementContext.clearRect(0,0,this.width,this.height)},vt.prototype.render=function(){this._updatePoints(),this._renderLineChart()},vt._getIteratorPredicate=function(t){return t?vt._predicateThatSkipsEmptyPoints:null},vt._predicateThatSkipsEmptyPoints=function(t,e){return null!==t[e].yval},vt._drawStyledLine=function(t,e,i,a,n,s,r){var o=t.dygraph,l=o.getBooleanOption("stepPlot",t.setName);Z(a)||(a=null);var h=o.getBooleanOption("drawGapEdgePoints",t.setName),d=t.points,c=t.setName,u=$(d,0,d.length,vt._getIteratorPredicate(o.getBooleanOption("connectSeparatedPoints",c))),p=a&&a.length>=2,g=t.drawingContext;g.save(),p&&g.setLineDash&&g.setLineDash(a);var v=vt._drawSeries(t,u,i,r,n,h,l,e);vt._drawPointsOnLine(t,v,s,e,r),p&&g.setLineDash&&g.setLineDash([]),g.restore()},vt._drawSeries=function(t,e,i,a,n,s,r,o){var l,h,d=null,c=null,u=null,p=[],g=!0,v=t.drawingContext;v.beginPath(),v.strokeStyle=o,v.lineWidth=i;for(var _=e.array_,f=e.end_,y=e.predicate_,x=e.start_;x<f;x++){if(h=_[x],y){for(;x<f&&!y(_,x);)x++;if(x==f)break;h=_[x]}if(null===h.canvasy||h.canvasy!=h.canvasy)r&&null!==d&&(v.moveTo(d,c),v.lineTo(h.canvasx,c)),d=c=null;else{if(l=!1,s||null===d){e.nextIdx_=x,e.next();var m=null===(u=e.hasNext?e.peek.canvasy:null)||u!=u;l=null===d&&m,s&&(!g&&null===d||e.hasNext&&m)&&(l=!0)}null!==d?i&&(r&&(v.moveTo(d,c),v.lineTo(h.canvasx,c)),v.lineTo(h.canvasx,h.canvasy)):v.moveTo(h.canvasx,h.canvasy),(n||l)&&p.push([h.canvasx,h.canvasy,h.idx]),d=h.canvasx,c=h.canvasy}g=!1}return v.stroke(),p},vt._drawPointsOnLine=function(t,e,i,a,n){for(var s=t.drawingContext,r=0;r<e.length;r++){var o=e[r];s.save(),i.call(t.dygraph,t.dygraph,t.setName,s,o[0],o[1],a,n,o[2]),s.restore()}},vt.prototype._updatePoints=function(){for(var t=this.layout.points,e=t.length;e--;)for(var i=t[e],a=i.length;a--;){var n=i[a];n.canvasx=this.area.w*n.x+this.area.x,n.canvasy=this.area.h*n.y+this.area.y}},vt.prototype._renderLineChart=function(t,e){var i,a,n=e||this.elementContext,s=this.layout.points,r=this.layout.setNames;this.colors=this.dygraph_.colorsMap_;var o=this.dygraph_.getOption("plotter"),l=o;Z(l)||(l=[l]);var h={};for(i=0;i<r.length;i++){a=r[i];var d=this.dygraph_.getOption("plotter",a);d!=o&&(h[a]=d)}for(i=0;i<l.length;i++)for(var c=l[i],u=i==l.length-1,p=0;p<s.length;p++)if(a=r[p],!t||a==t){var g=s[p],v=c;if(a in h){if(!u)continue;v=h[a]}var _=this.colors[a],f=this.dygraph_.getOption("strokeWidth",a);n.save(),n.strokeStyle=_,n.lineWidth=f,v({points:g,setName:a,drawingContext:n,color:_,strokeWidth:f,dygraph:this.dygraph_,axis:this.dygraph_.axisPropertiesForSeries(a),plotArea:this.area,seriesIndex:p,seriesCount:s.length,singleSeriesName:t,allSeriesPoints:s}),n.restore()}},vt._Plotters={linePlotter:function(t){vt._linePlotter(t)},fillPlotter:function(t){vt._fillPlotter(t)},errorPlotter:function(t){vt._errorPlotter(t)}},vt._linePlotter=function(t){var e=t.dygraph,i=t.setName,a=t.strokeWidth,n=e.getNumericOption("strokeBorderWidth",i),s=e.getOption("drawPointCallback",i)||Q.DEFAULT,r=e.getOption("strokePattern",i),o=e.getBooleanOption("drawPoints",i),l=e.getNumericOption("pointSize",i);n&&a&&vt._drawStyledLine(t,e.getOption("strokeBorderColor",i),a+2*n,r,o,s,l),vt._drawStyledLine(t,t.color,a,r,o,s,l)},vt._errorPlotter=function(t){var e=t.dygraph,i=t.setName;if(e.getBooleanOption("errorBars")||e.getBooleanOption("customBars")){e.getBooleanOption("fillGraph",i)&&console.warn("Can't use fillGraph option with error bars");var a,n=t.drawingContext,s=t.color,r=e.getNumericOption("fillAlpha",i),o=e.getBooleanOption("stepPlot",i),l=t.points,h=$(l,0,l.length,vt._getIteratorPredicate(e.getBooleanOption("connectSeparatedPoints",i))),d=NaN,c=NaN,u=[-1,-1],p=nt(s),g="rgba("+p.r+","+p.g+","+p.b+","+r+")";n.fillStyle=g,n.beginPath();for(var v=function(t){return null===t||void 0===t||isNaN(t)};h.hasNext;){var _=h.next();!o&&v(_.y)||o&&!isNaN(c)&&v(c)?d=NaN:(a=[_.y_bottom,_.y_top],o&&(c=_.y),isNaN(a[0])&&(a[0]=_.y),isNaN(a[1])&&(a[1]=_.y),a[0]=t.plotArea.h*a[0]+t.plotArea.y,a[1]=t.plotArea.h*a[1]+t.plotArea.y,isNaN(d)||(o?(n.moveTo(d,u[0]),n.lineTo(_.canvasx,u[0]),n.lineTo(_.canvasx,u[1])):(n.moveTo(d,u[0]),n.lineTo(_.canvasx,a[0]),n.lineTo(_.canvasx,a[1])),n.lineTo(d,u[1]),n.closePath()),u=a,d=_.canvasx)}n.fill()}},vt._fastCanvasProxy=function(t){var e=[],i=null,a=null,n=0,s=function(i){!function(t){if(!(e.length<=1)){for(var i=e.length-1;i>0;i--)if(2==(o=e[i])[0]){var a=e[i-1];a[1]==o[1]&&a[2]==o[2]&&e.splice(i,1)}for(i=0;i<e.length-1;)2==(o=e[i])[0]&&2==e[i+1][0]?e.splice(i,1):i++;if(e.length>2&&!t){var n=0;2==e[0][0]&&n++;var s=null,r=null;for(i=n;i<e.length;i++){var o;if(1==(o=e[i])[0])if(null===s&&null===r)s=i,r=i;else{var l=o[2];l<e[s][2]?s=i:l>e[r][2]&&(r=i)}}var h=e[s],d=e[r];e.splice(n,e.length-n),s<r?(e.push(h),e.push(d)):s>r?(e.push(d),e.push(h)):e.push(h)}}}(i);for(var s=0,r=e.length;s<r;s++){var o=e[s];1==o[0]?t.lineTo(o[1],o[2]):2==o[0]&&t.moveTo(o[1],o[2])}e.length&&(a=e[e.length-1][1]),n+=e.length,e=[]},r=function(t,n,r){var o=Math.round(n);null!==i&&o==i||(s(i-a>1||o-i>1),i=o),e.push([t,n,r])};return{moveTo:function(t,e){r(2,t,e)},lineTo:function(t,e){r(1,t,e)},stroke:function(){s(!0),t.stroke()},fill:function(){s(!0),t.fill()},beginPath:function(){s(!0),t.beginPath()},closePath:function(){s(!0),t.closePath()},_count:function(){return n}}},vt._fillPlotter=function(t){if(!t.singleSeriesName&&0===t.seriesIndex){for(var e=t.dygraph,i=e.getLabels().slice(1),a=i.length;a>=0;a--)e.visibility()[a]||i.splice(a,1);if(function(){for(var t=0;t<i.length;t++)if(e.getBooleanOption("fillGraph",i[t]))return!0;return!1}())for(var n,s,r,o=t.plotArea,l=t.allSeriesPoints,h=l.length,d=e.getBooleanOption("stackedGraph"),c=e.getColors(),u={},p=function(t,e,i,a){if(t.lineTo(e,i),d)for(var n=a.length-1;n>=0;n--){var s=a[n];t.lineTo(s[0],s[1])}},g=h-1;g>=0;g--){var v=t.drawingContext,_=i[g];if(e.getBooleanOption("fillGraph",_)){var f=e.getNumericOption("fillAlpha",_),y=e.getBooleanOption("stepPlot",_),x=c[g],m=e.axisPropertiesForSeries(_),b=1+m.minyval*m.yscale;b<0?b=0:b>1&&(b=1),b=o.h*b+o.y;var w,A=l[g],S=$(A,0,A.length,vt._getIteratorPredicate(e.getBooleanOption("connectSeparatedPoints",_))),O=NaN,C=[-1,-1],L=nt(x),T="rgba("+L.r+","+L.g+","+L.b+","+f+")";v.fillStyle=T,v.beginPath();var D,P=!0;(A.length>2*e.width_||Yt.FORCE_FAST_PROXY)&&(v=vt._fastCanvasProxy(v));for(var M,N=[];S.hasNext;)if((r=(M=S.next()).y)&&!isNaN(r)||y){if(d){if(!P&&D==M.xval)continue;var E;P=!1,D=M.xval,E=void 0===(n=u[M.canvasx])?b:s?n[0]:n,w=[M.canvasy,E],y?-1===C[0]?u[M.canvasx]=[M.canvasy,b]:u[M.canvasx]=[M.canvasy,C[0]]:u[M.canvasx]=M.canvasy}else w=isNaN(M.canvasy)&&y?[o.y+o.h,b]:[M.canvasy,b];isNaN(O)?(v.moveTo(M.canvasx,w[1]),v.lineTo(M.canvasx,w[0])):(y?(v.lineTo(M.canvasx,C[0]),v.lineTo(M.canvasx,w[0])):v.lineTo(M.canvasx,w[0]),d&&(N.push([O,C[1]]),s&&n?N.push([M.canvasx,n[1]]):N.push([M.canvasx,w[1]]))),C=w,O=M.canvasx}else p(v,O,C[1],N),N=[],O=NaN,null===M.y_stacked||isNaN(M.y_stacked)||(u[M.canvasx]=o.h*M.y_stacked+o.y);s=y,w&&M&&(p(v,M.canvasx,w[1],N),N=[]),v.fill()}}}};var _t={maybeTreatMouseOpAsClick:function(t,e,i){i.dragEndX=T(t,i),i.dragEndY=D(t,i);var a=Math.abs(i.dragEndX-i.dragStartX),n=Math.abs(i.dragEndY-i.dragStartY);a<2&&n<2&&void 0!==e.lastx_&&-1!=e.lastx_&&_t.treatMouseOpAsClick(e,t,i),i.regionWidth=a,i.regionHeight=n},startPan:function(t,e,i){var a,n;i.isPanning=!0;var s=e.xAxisRange();if(e.getOptionForAxis("logscale","x")?(i.initialLeftmostDate=y(s[0]),i.dateRange=y(s[1])-y(s[0])):(i.initialLeftmostDate=s[0],i.dateRange=s[1]-s[0]),i.xUnitsPerPixel=i.dateRange/(e.plotter_.area.w-1),e.getNumericOption("panEdgeFraction")){var r=e.width_*e.getNumericOption("panEdgeFraction"),o=e.xAxisExtremes(),l=e.toDomXCoord(o[0])-r,h=e.toDomXCoord(o[1])+r,d=e.toDataXCoord(l),c=e.toDataXCoord(h);i.boundedDates=[d,c];var u=[],p=e.height_*e.getNumericOption("panEdgeFraction");for(a=0;a<e.axes_.length;a++){var g=(n=e.axes_[a]).extremeRange,v=e.toDomYCoord(g[0],a)+p,_=e.toDomYCoord(g[1],a)-p,f=e.toDataYCoord(v,a),x=e.toDataYCoord(_,a);u[a]=[f,x]}i.boundedValues=u}for(i.is2DPan=!1,i.axes=[],a=0;a<e.axes_.length;a++){n=e.axes_[a];var m={},b=e.yAxisRange(a);e.attributes_.getForAxis("logscale",a)?(m.initialTopValue=y(b[1]),m.dragValueRange=y(b[1])-y(b[0])):(m.initialTopValue=b[1],m.dragValueRange=b[1]-b[0]),m.unitsPerPixel=m.dragValueRange/(e.plotter_.area.h-1),i.axes.push(m),n.valueRange&&(i.is2DPan=!0)}},movePan:function(t,e,i){i.dragEndX=T(t,i),i.dragEndY=D(t,i);var a=i.initialLeftmostDate-(i.dragEndX-i.dragStartX)*i.xUnitsPerPixel;i.boundedDates&&(a=Math.max(a,i.boundedDates[0]));var n=a+i.dateRange;if(i.boundedDates&&n>i.boundedDates[1]&&(n=(a-=n-i.boundedDates[1])+i.dateRange),e.getOptionForAxis("logscale","x")?e.dateWindow_=[Math.pow(10,a),Math.pow(10,n)]:e.dateWindow_=[a,n],i.is2DPan)for(var s=i.dragEndY-i.dragStartY,r=0;r<e.axes_.length;r++){var o=e.axes_[r],l=i.axes[r],h=s*l.unitsPerPixel,d=i.boundedValues?i.boundedValues[r]:null,c=l.initialTopValue+h;d&&(c=Math.min(c,d[1]));var u=c-l.dragValueRange;d&&u<d[0]&&(u=(c-=u-d[0])-l.dragValueRange),e.attributes_.getForAxis("logscale",r)?o.valueRange=[Math.pow(10,u),Math.pow(10,c)]:o.valueRange=[u,c]}e.drawGraph_(!1)}};_t.endPan=_t.maybeTreatMouseOpAsClick,_t.startZoom=function(t,e,i){i.isZooming=!0,i.zoomMoved=!1},_t.moveZoom=function(t,e,i){i.zoomMoved=!0,i.dragEndX=T(t,i),i.dragEndY=D(t,i);var a=Math.abs(i.dragStartX-i.dragEndX),n=Math.abs(i.dragStartY-i.dragEndY);i.dragDirection=a<n/2?2:1,e.drawZoomRect_(i.dragDirection,i.dragStartX,i.dragEndX,i.dragStartY,i.dragEndY,i.prevDragDirection,i.prevEndX,i.prevEndY),i.prevEndX=i.dragEndX,i.prevEndY=i.dragEndY,i.prevDragDirection=i.dragDirection},_t.treatMouseOpAsClick=function(t,e,i){for(var a=t.getFunctionOption("clickCallback"),n=t.getFunctionOption("pointClickCallback"),s=null,r=-1,o=Number.MAX_VALUE,l=0;l<t.selPoints_.length;l++){var h=t.selPoints_[l],d=Math.pow(h.canvasx-i.dragEndX,2)+Math.pow(h.canvasy-i.dragEndY,2);!isNaN(d)&&(-1==r||d<o)&&(o=d,r=l)}var c=t.getNumericOption("highlightCircleSize")+2;if(o<=c*c&&(s=t.selPoints_[r]),s){var u={cancelable:!0,point:s,canvasx:i.dragEndX,canvasy:i.dragEndY};if(t.cascadeEvents_("pointClick",u))return;n&&n.call(t,e,s)}u={cancelable:!0,xval:t.lastx_,pts:t.selPoints_,canvasx:i.dragEndX,canvasy:i.dragEndY},t.cascadeEvents_("click",u)||a&&a.call(t,e,t.lastx_,t.selPoints_)},_t.endZoom=function(t,e,i){e.clearZoomRect_(),i.isZooming=!1,_t.maybeTreatMouseOpAsClick(t,e,i);var a=e.getArea();if(i.regionWidth>=10&&1==i.dragDirection){var n=Math.min(i.dragStartX,i.dragEndX),s=Math.max(i.dragStartX,i.dragEndX);(n=Math.max(n,a.x))<(s=Math.min(s,a.x+a.w))&&e.doZoomX_(n,s),i.cancelNextDblclick=!0}else if(i.regionHeight>=10&&2==i.dragDirection){var r=Math.min(i.dragStartY,i.dragEndY),o=Math.max(i.dragStartY,i.dragEndY);(r=Math.max(r,a.y))<(o=Math.min(o,a.y+a.h))&&e.doZoomY_(r,o),i.cancelNextDblclick=!0}i.dragStartX=null,i.dragStartY=null},_t.startTouch=function(t,e,i){t.preventDefault(),t.touches.length>1&&(i.startTimeForDoubleTapMs=null);for(var a=[],n=0;n<t.touches.length;n++){var s=t.touches[n];a.push({pageX:s.pageX,pageY:s.pageY,dataX:e.toDataXCoord(s.pageX),dataY:e.toDataYCoord(s.pageY)})}if(i.initialTouches=a,1==a.length)i.initialPinchCenter=a[0],i.touchDirections={x:!0,y:!0};else if(a.length>=2){i.initialPinchCenter={pageX:.5*(a[0].pageX+a[1].pageX),pageY:.5*(a[0].pageY+a[1].pageY),dataX:.5*(a[0].dataX+a[1].dataX),dataY:.5*(a[0].dataY+a[1].dataY)};var r=180/Math.PI*Math.atan2(i.initialPinchCenter.pageY-a[0].pageY,a[0].pageX-i.initialPinchCenter.pageX);(r=Math.abs(r))>90&&(r=90-r),i.touchDirections={x:r<67.5,y:r>22.5}}i.initialRange={x:e.xAxisRange(),y:e.yAxisRange()}},_t.moveTouch=function(t,e,i){i.startTimeForDoubleTapMs=null;var a,n=[];for(a=0;a<t.touches.length;a++){var s=t.touches[a];n.push({pageX:s.pageX,pageY:s.pageY})}var r,o,l,h=i.initialTouches,d=i.initialPinchCenter,c={pageX:(r=1==n.length?n[0]:{pageX:.5*(n[0].pageX+n[1].pageX),pageY:.5*(n[0].pageY+n[1].pageY)}).pageX-d.pageX,pageY:r.pageY-d.pageY},u=i.initialRange.x[1]-i.initialRange.x[0],p=i.initialRange.y[0]-i.initialRange.y[1];if(c.dataX=c.pageX/e.plotter_.area.w*u,c.dataY=c.pageY/e.plotter_.area.h*p,1==n.length)o=1,l=1;else if(n.length>=2){var g=h[1].pageX-d.pageX;o=(n[1].pageX-r.pageX)/g;var v=h[1].pageY-d.pageY;l=(n[1].pageY-r.pageY)/v}o=Math.min(8,Math.max(.125,o)),l=Math.min(8,Math.max(.125,l));var _=!1;if(i.touchDirections.x&&(e.dateWindow_=[d.dataX-c.dataX+(i.initialRange.x[0]-d.dataX)/o,d.dataX-c.dataX+(i.initialRange.x[1]-d.dataX)/o],_=!0),i.touchDirections.y)for(a=0;a<1;a++){var f=e.axes_[a];e.attributes_.getForAxis("logscale",a)||(f.valueRange=[d.dataY-c.dataY+(i.initialRange.y[0]-d.dataY)/l,d.dataY-c.dataY+(i.initialRange.y[1]-d.dataY)/l],_=!0)}if(e.drawGraph_(!1),_&&n.length>1&&e.getFunctionOption("zoomCallback")){var y=e.xAxisRange();e.getFunctionOption("zoomCallback").call(e,y[0],y[1],e.yAxisRanges())}},_t.endTouch=function(t,e,i){if(0!==t.touches.length)_t.startTouch(t,e,i);else if(1==t.changedTouches.length){var a=(new Date).getTime(),n=t.changedTouches[0];i.startTimeForDoubleTapMs&&a-i.startTimeForDoubleTapMs<500&&i.doubleTapX&&Math.abs(i.doubleTapX-n.screenX)<50&&i.doubleTapY&&Math.abs(i.doubleTapY-n.screenY)<50?e.resetZoom():(i.startTimeForDoubleTapMs=a,i.doubleTapX=n.screenX,i.doubleTapY=n.screenY)}};var ft=function(t,e,i){return t<e?e-t:t>i?t-i:0};_t.defaultModel={mousedown:function(t,e,i){if(!t.button||2!=t.button){i.initializeMouseDown(t,e,i),t.altKey||t.shiftKey?_t.startPan(t,e,i):_t.startZoom(t,e,i);var a=function(t){i.isZooming?function(t,e){var i=O(e.canvas_),a={left:i.x,right:i.x+e.canvas_.offsetWidth,top:i.y,bottom:i.y+e.canvas_.offsetHeight},n={x:C(t),y:L(t)},s=ft(n.x,a.left,a.right),r=ft(n.y,a.top,a.bottom);return Math.max(s,r)}(t,e)<100?_t.moveZoom(t,e,i):null!==i.dragEndX&&(i.dragEndX=null,i.dragEndY=null,e.clearZoomRect_()):i.isPanning&&_t.movePan(t,e,i)},n=function(t){i.isZooming?null!==i.dragEndX?_t.endZoom(t,e,i):_t.maybeTreatMouseOpAsClick(t,e,i):i.isPanning&&_t.endPan(t,e,i),w(document,"mousemove",a),w(document,"mouseup",n),i.destroy()};e.addAndTrackEvent(document,"mousemove",a),e.addAndTrackEvent(document,"mouseup",n)}},willDestroyContextMyself:!0,touchstart:function(t,e,i){_t.startTouch(t,e,i)},touchmove:function(t,e,i){_t.moveTouch(t,e,i)},touchend:function(t,e,i){_t.endTouch(t,e,i)},dblclick:function(t,e,i){if(i.cancelNextDblclick)i.cancelNextDblclick=!1;else{var a={canvasx:i.dragEndX,canvasy:i.dragEndY,cancelable:!0};e.cascadeEvents_("dblclick",a)||t.altKey||t.shiftKey||e.resetZoom()}}},_t.nonInteractiveModel_={mousedown:function(t,e,i){i.initializeMouseDown(t,e,i)},mouseup:_t.maybeTreatMouseOpAsClick},_t.dragIsPanInteractionModel={mousedown:function(t,e,i){i.initializeMouseDown(t,e,i),_t.startPan(t,e,i)},mousemove:function(t,e,i){i.isPanning&&_t.movePan(t,e,i)},mouseup:function(t,e,i){i.isPanning&&_t.endPan(t,e,i)}};var yt={highlightCircleSize:3,highlightSeriesOpts:null,highlightSeriesBackgroundAlpha:.5,highlightSeriesBackgroundColor:"rgb(255, 255, 255)",labelsSeparateLines:!1,labelsShowZeroValues:!0,labelsKMB:!1,labelsKMG2:!1,showLabelsOnHighlight:!0,digitsAfterDecimal:2,maxNumberWidth:6,sigFigs:null,strokeWidth:1,strokeBorderWidth:0,strokeBorderColor:"white",axisTickSize:3,axisLabelFontSize:14,rightGap:5,showRoller:!1,xValueParser:void 0,delimiter:",",sigma:2,errorBars:!1,fractions:!1,wilsonInterval:!0,customBars:!1,fillGraph:!1,fillAlpha:.15,connectSeparatedPoints:!1,stackedGraph:!1,stackedGraphNaNFill:"all",hideOverlayOnMouseOut:!0,legend:"onmouseover",stepPlot:!1,xRangePad:0,yRangePad:null,drawAxesAtZero:!1,titleHeight:28,xLabelHeight:18,yLabelWidth:18,axisLineColor:"black",axisLineWidth:.3,gridLineWidth:.3,axisLabelWidth:50,gridLineColor:"rgb(128,128,128)",interactionModel:_t.defaultModel,animatedZooms:!1,showRangeSelector:!1,rangeSelectorHeight:40,rangeSelectorPlotStrokeColor:"#808FAB",rangeSelectorPlotFillGradientColor:"white",rangeSelectorPlotFillColor:"#A7B1C4",rangeSelectorBackgroundStrokeColor:"gray",rangeSelectorBackgroundLineWidth:1,rangeSelectorPlotLineWidth:1.5,rangeSelectorForegroundStrokeColor:"black",rangeSelectorForegroundLineWidth:1,rangeSelectorAlpha:.6,showInRangeSelector:null,plotter:[vt._fillPlotter,vt._errorPlotter,vt._linePlotter],plugins:[],axes:{x:{pixelsPerLabel:70,axisLabelWidth:60,axisLabelFormatter:ut,valueFormatter:pt,drawGrid:!0,drawAxis:!0,independentTicks:!0,ticker:d},y:{axisLabelWidth:50,pixelsPerLabel:30,valueFormatter:ht,axisLabelFormatter:dt,drawGrid:!0,drawAxis:!0,independentTicks:!0,ticker:h},y2:{axisLabelWidth:50,pixelsPerLabel:30,valueFormatter:ht,axisLabelFormatter:dt,drawAxis:!0,drawGrid:!1,independentTicks:!1,ticker:h}}},xt=function(t){this.dygraph_=t,this.yAxes_=[],this.xAxis_={},this.series_={},this.global_=this.dygraph_.attrs_,this.user_=this.dygraph_.user_attrs_||{},this.labels_=[],this.highlightSeries_=this.get("highlightSeriesOpts")||{},this.reparseSeries()};function mt(){this.tarps=[]}xt.AXIS_STRING_MAPPINGS_={y:0,Y:0,y1:0,Y1:0,y2:1,Y2:1},xt.axisToIndex_=function(t){if("string"==typeof t){if(xt.AXIS_STRING_MAPPINGS_.hasOwnProperty(t))return xt.AXIS_STRING_MAPPINGS_[t];throw"Unknown axis : "+t}if("number"==typeof t){if(0===t||1===t)return t;throw"Dygraphs only supports two y-axes, indexed from 0-1."}if(t)throw"Unknown axis : "+t;return 0},xt.prototype.reparseSeries=function(){var t=this.get("labels");if(t){this.labels_=t.slice(1),this.yAxes_=[{series:[],options:{}}],this.xAxis_={options:{}},this.series_={};for(var e=this.user_.series||{},i=0;i<this.labels_.length;i++){var a=this.labels_[i],n=e[a]||{},s=xt.axisToIndex_(n.axis);this.series_[a]={idx:i,yAxis:s,options:n},this.yAxes_[s]?this.yAxes_[s].series.push(a):this.yAxes_[s]={series:[a],options:{}}}var r=this.user_.axes||{};W(this.yAxes_[0].options,r.y||{}),this.yAxes_.length>1&&W(this.yAxes_[1].options,r.y2||{}),W(this.xAxis_.options,r.x||{})}},xt.prototype.get=function(t){var e=this.getGlobalUser_(t);return null!==e?e:this.getGlobalDefault_(t)},xt.prototype.getGlobalUser_=function(t){return this.user_.hasOwnProperty(t)?this.user_[t]:null},xt.prototype.getGlobalDefault_=function(t){return this.global_.hasOwnProperty(t)?this.global_[t]:yt.hasOwnProperty(t)?yt[t]:null},xt.prototype.getForAxis=function(t,e){var i,a;if("number"==typeof e)a=0===(i=e)?"y":"y2";else{if("y1"==e&&(e="y"),"y"==e)i=0;else if("y2"==e)i=1;else{if("x"!=e)throw"Unknown axis "+e;i=-1}a=e}var n=-1==i?this.xAxis_:this.yAxes_[i];if(n){var s=n.options;if(s.hasOwnProperty(t))return s[t]}if("x"!==e||"logscale"!==t){var r=this.getGlobalUser_(t);if(null!==r)return r}var o=yt.axes[a];return o.hasOwnProperty(t)?o[t]:this.getGlobalDefault_(t)},xt.prototype.getForSeries=function(t,e){if(e===this.dygraph_.getHighlightSeries()&&this.highlightSeries_.hasOwnProperty(t))return this.highlightSeries_[t];if(!this.series_.hasOwnProperty(e))throw"Unknown series: "+e;var i=this.series_[e],a=i.options;return a.hasOwnProperty(t)?a[t]:this.getForAxis(t,i.yAxis)},xt.prototype.numAxes=function(){return this.yAxes_.length},xt.prototype.axisForSeries=function(t){return this.series_[t].yAxis},xt.prototype.axisOptions=function(t){return this.yAxes_[t].options},xt.prototype.seriesForAxis=function(t){return this.yAxes_[t].series},xt.prototype.seriesNames=function(){return this.labels_},mt.prototype.cover=function(){for(var t=document.getElementsByTagName("iframe"),e=0;e<t.length;e++){var i=t[e],a=O(i),n=a.x,s=a.y,r=i.offsetWidth,o=i.offsetHeight,l=document.createElement("div");l.style.position="absolute",l.style.left=n+"px",l.style.top=s+"px",l.style.width=r+"px",l.style.height=o+"px",l.style.zIndex=999,document.body.appendChild(l),this.tarps.push(l)}},mt.prototype.uncover=function(){for(var t=0;t<this.tarps.length;t++)this.tarps[t].parentNode.removeChild(this.tarps[t]);this.tarps=[]};var bt=function(){},wt=bt;wt.X=0,wt.Y=1,wt.EXTRAS=2,wt.prototype.extractSeries=function(t,e,i){},wt.prototype.seriesToPoints=function(t,e,i){for(var a=[],n=0;n<t.length;++n){var s=t[n],r=s[1],o=null===r?null:wt.parseFloat(r),l={x:NaN,y:NaN,xval:wt.parseFloat(s[0]),yval:o,name:e,idx:n+i};a.push(l)}return this.onPointsCreated_(t,a),a},wt.prototype.onPointsCreated_=function(t,e){},wt.prototype.rollingAverage=function(t,e,i){},wt.prototype.getExtremeYValues=function(t,e,i){},wt.prototype.onLineEvaluated=function(t,e,i){},wt.parseFloat=function(t){return null===t?NaN:t};var At=function(){};(At.prototype=new bt).extractSeries=function(t,e,i){for(var a=[],n=i.get("logscale"),s=0;s<t.length;s++){var r=t[s][0],o=t[s][e];n&&o<=0&&(o=null),a.push([r,o])}return a},At.prototype.rollingAverage=function(t,e,i){var a,n,s,r,o,l=[];if(1==(e=Math.min(e,t.length)))return t;for(a=0;a<t.length;a++){for(r=0,o=0,n=Math.max(0,a-e+1);n<a+1;n++)null===(s=t[n][1])||isNaN(s)||(o++,r+=t[n][1]);l[a]=o?[t[a][0],r/o]:[t[a][0],null]}return l},At.prototype.getExtremeYValues=function(t,e,i){for(var a,n=null,s=null,r=t.length-1,o=0;o<=r;o++)null===(a=t[o][1])||isNaN(a)||((null===s||a>s)&&(s=a),(null===n||a<n)&&(n=a));return[n,s]};var St=function(){bt.call(this)};(St.prototype=new bt).extractSeries=function(t,e,i){},St.prototype.rollingAverage=function(t,e,i){},St.prototype.onPointsCreated_=function(t,e){for(var i=0;i<t.length;++i){var a=t[i],n=e[i];n.y_top=NaN,n.y_bottom=NaN,n.yval_minus=bt.parseFloat(a[2][0]),n.yval_plus=bt.parseFloat(a[2][1])}},St.prototype.getExtremeYValues=function(t,e,i){for(var a,n=null,s=null,r=t.length-1,o=0;o<=r;o++)if(null!==(a=t[o][1])&&!isNaN(a)){var l=t[o][2][0],h=t[o][2][1];l>a&&(l=a),h<a&&(h=a),(null===s||h>s)&&(s=h),(null===n||l<n)&&(n=l)}return[n,s]},St.prototype.onLineEvaluated=function(t,e,i){for(var a,n=0;n<t.length;n++)(a=t[n]).y_top=gt.calcYNormal_(e,a.yval_minus,i),a.y_bottom=gt.calcYNormal_(e,a.yval_plus,i)};var Ot=function(){};(Ot.prototype=new St).extractSeries=function(t,e,i){for(var a,n,s,r,o=[],l=i.get("sigma"),h=i.get("logscale"),d=0;d<t.length;d++)a=t[d][0],r=t[d][e],h&&null!==r&&(r[0]<=0||r[0]-l*r[1]<=0)&&(r=null),null!==r?null===(n=r[0])||isNaN(n)?o.push([a,n,[n,n,n]]):(s=l*r[1],o.push([a,n,[n-s,n+s,r[1]]])):o.push([a,null,[null,null,null]]);return o},Ot.prototype.rollingAverage=function(t,e,i){e=Math.min(e,t.length);var a,n,s,r,o,l,h,d,c,u=[],p=i.get("sigma");for(a=0;a<t.length;a++){for(o=0,d=0,l=0,n=Math.max(0,a-e+1);n<a+1;n++)null===(s=t[n][1])||isNaN(s)||(l++,o+=s,d+=Math.pow(t[n][2][2],2));l?(h=Math.sqrt(d)/l,c=o/l,u[a]=[t[a][0],c,[c-p*h,c+p*h]]):(r=1==e?t[a][1]:null,u[a]=[t[a][0],r,[r,r]])}return u};var Ct=function(){};(Ct.prototype=new St).extractSeries=function(t,e,i){for(var a,n,s,r=[],o=i.get("logscale"),l=0;l<t.length;l++)a=t[l][0],s=t[l][e],o&&null!==s&&(s[0]<=0||s[1]<=0||s[2]<=0)&&(s=null),null!==s?null===(n=s[1])||isNaN(n)?r.push([a,n,[n,n]]):r.push([a,n,[s[0],s[2]]]):r.push([a,null,[null,null]]);return r},Ct.prototype.rollingAverage=function(t,e,i){e=Math.min(e,t.length);var a,n,s,r,o,l,h,d=[];for(n=0,r=0,s=0,o=0,l=0;l<t.length;l++){if(a=t[l][1],h=t[l][2],d[l]=t[l],null===a||isNaN(a)||(n+=h[0],r+=a,s+=h[1],o+=1),l-e>=0){var c=t[l-e];null===c[1]||isNaN(c[1])||(n-=c[2][0],r-=c[1],s-=c[2][1],o-=1)}d[l]=o?[t[l][0],1*r/o,[1*n/o,1*s/o]]:[t[l][0],null,[null,null]]}return d};var Lt=function(){};(Lt.prototype=new At).extractSeries=function(t,e,i){for(var a,n,s,r,o,l=[],h=i.get("logscale"),d=0;d<t.length;d++)a=t[d][0],s=t[d][e],h&&null!==s&&(s[0]<=0||s[1]<=0)&&(s=null),null!==s?(r=s[0],o=s[1],null===r||isNaN(r)?l.push([a,r,[r,o]]):(n=100*(o?r/o:0),l.push([a,n,[r,o]]))):l.push([a,null,[null,null]]);return l},Lt.prototype.rollingAverage=function(t,e,i){e=Math.min(e,t.length);var a,n=[],s=0,r=0;for(a=0;a<t.length;a++){s+=t[a][2][0],r+=t[a][2][1],a-e>=0&&(s-=t[a-e][2][0],r-=t[a-e][2][1]);var o=t[a][0],l=r?s/r:0;n[a]=[o,100*l]}return n};var Tt=function(){};(Tt.prototype=new St).extractSeries=function(t,e,i){for(var a,n,s,r,o,l,h,d=[],c=i.get("sigma"),u=i.get("logscale"),p=0;p<t.length;p++)a=t[p][0],s=t[p][e],u&&null!==s&&(s[0]<=0||s[1]<=0)&&(s=null),null!==s?(r=s[0],o=s[1],null===r||isNaN(r)?d.push([a,r,[r,r,r,o]]):(l=o?r/o:0,h=100*(o?c*Math.sqrt(l*(1-l)/o):1),n=100*l,d.push([a,n,[n-h,n+h,r,o]]))):d.push([a,null,[null,null,null,null]]);return d},Tt.prototype.rollingAverage=function(t,e,i){e=Math.min(e,t.length);var a,n,s,r,o=[],l=i.get("sigma"),h=i.get("wilsonInterval"),d=0,c=0;for(s=0;s<t.length;s++){d+=t[s][2][2],c+=t[s][2][3],s-e>=0&&(d-=t[s-e][2][2],c-=t[s-e][2][3]);var u=t[s][0],p=c?d/c:0;if(h)if(c){var g=p<0?0:p,v=c,_=l*Math.sqrt(g*(1-g)/v+l*l/(4*v*v)),f=1+l*l/c;a=(g+l*l/(2*c)-_)/f,n=(g+l*l/(2*c)+_)/f,o[s]=[u,100*g,[100*a,100*n]]}else o[s]=[u,0,[0,0]];else r=c?l*Math.sqrt(p*(1-p)/c):1,o[s]=[u,100*p,[100*(p-r),100*(p+r)]]}return o};var Dt=function(){this.annotations_=[]};Dt.prototype.toString=function(){return"Annotations Plugin"},Dt.prototype.activate=function(t){return{clearChart:this.clearChart,didDrawChart:this.didDrawChart}},Dt.prototype.detachLabels=function(){for(var t=0;t<this.annotations_.length;t++){var e=this.annotations_[t];e.parentNode&&e.parentNode.removeChild(e),this.annotations_[t]=null}this.annotations_=[]},Dt.prototype.clearChart=function(t){this.detachLabels()},Dt.prototype.didDrawChart=function(t){var e=t.dygraph,i=e.layout_.annotated_points;if(i&&0!==i.length)for(var a=t.canvas.parentNode,n=function(t,i,a){return function(n){var s=a.annotation;s.hasOwnProperty(t)?s[t](s,a,e,n):e.getOption(i)&&e.getOption(i)(s,a,e,n)}},s=t.dygraph.getArea(),r={},o=0;o<i.length;o++){var l=i[o];if(!(l.canvasx<s.x||l.canvasx>s.x+s.w||l.canvasy<s.y||l.canvasy>s.y+s.h)){var h=l.annotation,d=6;h.hasOwnProperty("tickHeight")&&(d=h.tickHeight);var c=document.createElement("div");c.style.fontSize=e.getOption("axisLabelFontSize")+"px";var u="dygraph-annotation";h.hasOwnProperty("icon")||(u+=" dygraphDefaultAnnotation dygraph-default-annotation"),h.hasOwnProperty("cssClass")&&(u+=" "+h.cssClass),c.className=u;var p=h.hasOwnProperty("width")?h.width:16,g=h.hasOwnProperty("height")?h.height:16;if(h.hasOwnProperty("icon")){var v=document.createElement("img");v.src=h.icon,v.width=p,v.height=g,c.appendChild(v)}else l.annotation.hasOwnProperty("shortText")&&c.appendChild(document.createTextNode(l.annotation.shortText));var _=l.canvasx-p/2;c.style.left=_+"px";var f=0;if(h.attachAtBottom){var y=s.y+s.h-g-d;r[_]?y-=r[_]:r[_]=0,r[_]+=d+g,f=y}else f=l.canvasy-g-d;c.style.top=f+"px",c.style.width=p+"px",c.style.height=g+"px",c.title=l.annotation.text,c.style.color=e.colorsMap_[l.name],c.style.borderColor=e.colorsMap_[l.name],h.div=c,e.addAndTrackEvent(c,"click",n("clickHandler","annotationClickHandler",l)),e.addAndTrackEvent(c,"mouseover",n("mouseOverHandler","annotationMouseOverHandler",l)),e.addAndTrackEvent(c,"mouseout",n("mouseOutHandler","annotationMouseOutHandler",l)),e.addAndTrackEvent(c,"dblclick",n("dblClickHandler","annotationDblClickHandler",l)),a.appendChild(c),this.annotations_.push(c);var x=t.drawingContext;x.save(),x.strokeStyle=h.hasOwnProperty("tickColor")?h.tickColor:e.colorsMap_[l.name],x.lineWidth=h.hasOwnProperty("tickWidth")?h.tickWidth:e.getOption("strokeWidth"),x.beginPath(),h.attachAtBottom?(y=f+g,x.moveTo(l.canvasx,y),x.lineTo(l.canvasx,y+d)):(x.moveTo(l.canvasx,l.canvasy),x.lineTo(l.canvasx,l.canvasy-2-d)),x.closePath(),x.stroke(),x.restore()}}},Dt.prototype.destroy=function(){this.detachLabels()};var Pt=function(){this.xlabels_=[],this.ylabels_=[]};Pt.prototype.toString=function(){return"Axes Plugin"},Pt.prototype.activate=function(t){return{layout:this.layout,clearChart:this.clearChart,willDrawChart:this.willDrawChart}},Pt.prototype.layout=function(t){var e,i=t.dygraph;if(i.getOptionForAxis("drawAxis","y")){var a=i.getOptionForAxis("axisLabelWidth","y")+2*i.getOptionForAxis("axisTickSize","y");t.reserveSpaceLeft(a)}i.getOptionForAxis("drawAxis","x")&&(e=i.getOption("xAxisHeight")?i.getOption("xAxisHeight"):i.getOptionForAxis("axisLabelFontSize","x")+2*i.getOptionForAxis("axisTickSize","x"),t.reserveSpaceBottom(e)),2==i.numAxes()?i.getOptionForAxis("drawAxis","y2")&&(a=i.getOptionForAxis("axisLabelWidth","y2")+2*i.getOptionForAxis("axisTickSize","y2"),t.reserveSpaceRight(a)):i.numAxes()>2&&i.error("Only two y-axes are supported at this time. (Trying to use "+i.numAxes()+")")},Pt.prototype.detachLabels=function(){function t(t){for(var e=0;e<t.length;e++){var i=t[e];i.parentNode&&i.parentNode.removeChild(i)}}t(this.xlabels_),t(this.ylabels_),this.xlabels_=[],this.ylabels_=[]},Pt.prototype.clearChart=function(t){this.detachLabels()},Pt.prototype.willDrawChart=function(t){var e=t.dygraph;if(e.getOptionForAxis("drawAxis","x")||e.getOptionForAxis("drawAxis","y")||e.getOptionForAxis("drawAxis","y2")){var i,a,n,s=t.drawingContext,r=t.canvas.parentNode,o=e.width_,l=e.height_,h=function(t){return{position:"absolute",fontSize:e.getOptionForAxis("axisLabelFontSize",t)+"px",width:e.getOptionForAxis("axisLabelWidth",t)+"px"}},d={x:h("x"),y:h("y"),y2:h("y2")},c=function(t,e,i){var a=document.createElement("div"),n=d["y2"==i?"y2":e];W(a.style,n);var s=document.createElement("div");return s.className="dygraph-axis-label dygraph-axis-label-"+e+(i?" dygraph-axis-label-"+i:""),s.innerHTML=t,a.appendChild(s),a};s.save();var u=e.layout_,p=t.dygraph.plotter_.area,g=function(t){return function(i){return e.getOptionForAxis(i,t)}};if(e.getOptionForAxis("drawAxis","y")){if(u.yticks&&u.yticks.length>0){var v=e.numAxes(),_=[g("y"),g("y2")];u.yticks.forEach(t=>{if(void 0!==t.label){a=p.x;var e="y1",s=_[0];1==t.axis&&(a=p.x+p.w,e="y2",s=_[1]);var o=s("axisLabelFontSize");n=p.y+t.pos*p.h,i=c(t.label,"y",2==v?e:null);var h=n-o/2;h<0&&(h=0),h+o+3>l?i.style.bottom="0":i.style.top=h+"px",0===t.axis?(i.style.left=p.x-s("axisLabelWidth")-s("axisTickSize")+"px",i.style.textAlign="right"):1==t.axis&&(i.style.left=p.x+p.w+s("axisTickSize")+"px",i.style.textAlign="left"),i.style.width=s("axisLabelWidth")+"px",r.appendChild(i),this.ylabels_.push(i)}});var f=this.ylabels_[0],y=e.getOptionForAxis("axisLabelFontSize","y");parseInt(f.style.top,10)+y>l-y&&(f.style.top=parseInt(f.style.top,10)-y/2+"px")}var x;e.getOption("drawAxesAtZero")?(((w=e.toPercentXCoord(0))>1||w<0||isNaN(w))&&(w=0),x=A(p.x+w*p.w)):x=A(p.x),s.strokeStyle=e.getOptionForAxis("axisLineColor","y"),s.lineWidth=e.getOptionForAxis("axisLineWidth","y"),s.beginPath(),s.moveTo(x,S(p.y)),s.lineTo(x,S(p.y+p.h)),s.closePath(),s.stroke(),2==e.numAxes()&&(s.strokeStyle=e.getOptionForAxis("axisLineColor","y2"),s.lineWidth=e.getOptionForAxis("axisLineWidth","y2"),s.beginPath(),s.moveTo(S(p.x+p.w),S(p.y)),s.lineTo(S(p.x+p.w),S(p.y+p.h)),s.closePath(),s.stroke())}if(e.getOptionForAxis("drawAxis","x")){if(u.xticks){var m=g("x");u.xticks.forEach(t=>{if(void 0!==t.label){a=p.x+t.pos*p.w,n=p.y+p.h,(i=c(t.label,"x")).style.textAlign="center",i.style.top=n+m("axisTickSize")+"px";var e=a-m("axisLabelWidth")/2;e+m("axisLabelWidth")>o&&(e=o-m("axisLabelWidth"),i.style.textAlign="right"),e<0&&(e=0,i.style.textAlign="left"),i.style.left=e+"px",i.style.width=m("axisLabelWidth")+"px",r.appendChild(i),this.xlabels_.push(i)}})}var b,w;s.strokeStyle=e.getOptionForAxis("axisLineColor","x"),s.lineWidth=e.getOptionForAxis("axisLineWidth","x"),s.beginPath(),e.getOption("drawAxesAtZero")?(((w=e.toPercentYCoord(0,0))>1||w<0)&&(w=1),b=S(p.y+w*p.h)):b=S(p.y+p.h),s.moveTo(A(p.x),b),s.lineTo(A(p.x+p.w),b),s.closePath(),s.stroke()}s.restore()}function A(t){return Math.round(t)+.5}function S(t){return Math.round(t)-.5}};var Mt=function(){this.title_div_=null,this.xlabel_div_=null,this.ylabel_div_=null,this.y2label_div_=null};Mt.prototype.toString=function(){return"ChartLabels Plugin"},Mt.prototype.activate=function(t){return{layout:this.layout,didDrawChart:this.didDrawChart}};var Nt=function(t){var e=document.createElement("div");return e.style.position="absolute",e.style.left=t.x+"px",e.style.top=t.y+"px",e.style.width=t.w+"px",e.style.height=t.h+"px",e};Mt.prototype.detachLabels_=function(){for(var t=[this.title_div_,this.xlabel_div_,this.ylabel_div_,this.y2label_div_],e=0;e<t.length;e++){var i=t[e];i&&i.parentNode&&i.parentNode.removeChild(i)}this.title_div_=null,this.xlabel_div_=null,this.ylabel_div_=null,this.y2label_div_=null};var Et=function(t,e,i,a,n){var s=document.createElement("div");s.style.position="absolute",s.style.left=1==i?"0px":e.x+"px",s.style.top=e.y+"px",s.style.width=e.w+"px",s.style.height=e.h+"px",s.style.fontSize=t.getOption("yLabelWidth")-2+"px";var r=document.createElement("div");r.style.position="absolute",r.style.width=e.h+"px",r.style.height=e.w+"px",r.style.top=e.h/2-e.w/2+"px",r.style.left=e.w/2-e.h/2+"px",r.className="dygraph-label-rotate-"+(1==i?"right":"left");var o=document.createElement("div");return o.className=a,o.innerHTML=n,r.appendChild(o),s.appendChild(r),s};Mt.prototype.layout=function(t){this.detachLabels_();var e=t.dygraph,i=t.chart_div;if(e.getOption("title")){var a=t.reserveSpaceTop(e.getOption("titleHeight"));this.title_div_=Nt(a),this.title_div_.style.fontSize=e.getOption("titleHeight")-8+"px",(n=document.createElement("div")).className="dygraph-label dygraph-title",n.innerHTML=e.getOption("title"),this.title_div_.appendChild(n),i.appendChild(this.title_div_)}if(e.getOption("xlabel")){var n,s=t.reserveSpaceBottom(e.getOption("xLabelHeight"));this.xlabel_div_=Nt(s),this.xlabel_div_.style.fontSize=e.getOption("xLabelHeight")-2+"px",(n=document.createElement("div")).className="dygraph-label dygraph-xlabel",n.innerHTML=e.getOption("xlabel"),this.xlabel_div_.appendChild(n),i.appendChild(this.xlabel_div_)}if(e.getOption("ylabel")){var r=t.reserveSpaceLeft(0);this.ylabel_div_=Et(e,r,1,"dygraph-label dygraph-ylabel",e.getOption("ylabel")),i.appendChild(this.ylabel_div_)}if(e.getOption("y2label")&&2==e.numAxes()){var o=t.reserveSpaceRight(0);this.y2label_div_=Et(e,o,2,"dygraph-label dygraph-y2label",e.getOption("y2label")),i.appendChild(this.y2label_div_)}},Mt.prototype.didDrawChart=function(t){var e=t.dygraph;this.title_div_&&(this.title_div_.children[0].innerHTML=e.getOption("title")),this.xlabel_div_&&(this.xlabel_div_.children[0].innerHTML=e.getOption("xlabel")),this.ylabel_div_&&(this.ylabel_div_.children[0].children[0].innerHTML=e.getOption("ylabel")),this.y2label_div_&&(this.y2label_div_.children[0].children[0].innerHTML=e.getOption("y2label"))},Mt.prototype.clearChart=function(){},Mt.prototype.destroy=function(){this.detachLabels_()};var kt=function(){};kt.prototype.toString=function(){return"Gridline Plugin"},kt.prototype.activate=function(t){return{willDrawChart:this.willDrawChart}},kt.prototype.willDrawChart=function(t){var e,i,a,n=t.dygraph,s=t.drawingContext,r=n.layout_,o=t.dygraph.plotter_.area;function l(t){return Math.round(t)+.5}function h(t){return Math.round(t)-.5}if(n.getOptionForAxis("drawGrid","y")){for(var d=["y","y2"],c=[],u=[],p=[],g=[],v=[],_=0;_<d.length;_++)p[_]=n.getOptionForAxis("drawGrid",d[_]),p[_]&&(c[_]=n.getOptionForAxis("gridLineColor",d[_]),u[_]=n.getOptionForAxis("gridLineWidth",d[_]),v[_]=n.getOptionForAxis("gridLinePattern",d[_]),g[_]=v[_]&&v[_].length>=2);a=r.yticks,s.save(),a.forEach(t=>{if(t.has_tick){var a=t.axis;p[a]&&(s.save(),g[a]&&s.setLineDash&&s.setLineDash(v[a]),s.strokeStyle=c[a],s.lineWidth=u[a],e=l(o.x),i=h(o.y+t.pos*o.h),s.beginPath(),s.moveTo(e,i),s.lineTo(e+o.w,i),s.stroke(),s.restore())}}),s.restore()}n.getOptionForAxis("drawGrid","x")&&(a=r.xticks,s.save(),v=n.getOptionForAxis("gridLinePattern","x"),(g=v&&v.length>=2)&&s.setLineDash&&s.setLineDash(v),s.strokeStyle=n.getOptionForAxis("gridLineColor","x"),s.lineWidth=n.getOptionForAxis("gridLineWidth","x"),a.forEach(t=>{t.has_tick&&(e=l(o.x+t.pos*o.w),i=h(o.y+o.h),s.beginPath(),s.moveTo(e,i),s.lineTo(e,o.y),s.closePath(),s.stroke())}),g&&s.setLineDash&&s.setLineDash([]),s.restore())},kt.prototype.destroy=function(){};var Rt=function(){this.legend_div_=null,this.is_generated_div_=!1};function Ft(t,e,i){if(!t||t.length<=1)return`<div class="dygraph-legend-line" style="border-bottom-color: ${e};"></div>`;var a,n,s,r,o=0,l=0,h=[];for(a=0;a<=t.length;a++)o+=t[a%t.length];if((r=Math.floor(i/(o-t[0])))>1){for(a=0;a<t.length;a++)h[a]=t[a]/i;l=h.length}else{for(r=1,a=0;a<t.length;a++)h[a]=t[a]/o;l=h.length+1}var d="";for(n=0;n<r;n++)for(a=0;a<l;a+=2)s=h[a%h.length],d+=`<div class="dygraph-legend-dash" style="margin-right: ${a<t.length?h[(a+1)%h.length]:0}em; padding-left: ${s}em;"></div>`;return d}Rt.prototype.toString=function(){return"Legend Plugin"},Rt.prototype.activate=function(t){var e,i=t.getOption("labelsDiv");return i&&null!==i?e="string"==typeof i||i instanceof String?document.getElementById(i):i:((e=document.createElement("div")).className="dygraph-legend",t.graphDiv.appendChild(e),this.is_generated_div_=!0),this.legend_div_=e,this.one_em_width_=10,{select:this.select,deselect:this.deselect,predraw:this.predraw,didDrawChart:this.didDrawChart}},Rt.prototype.select=function(t){var e=t.selectedX,i=t.selectedPoints,a=t.selectedRow,n=t.dygraph.getOption("legend");if("never"!==n){if("follow"===n){var s=t.dygraph.plotter_.area,r=this.legend_div_.offsetWidth,o=t.dygraph.getOptionForAxis("axisLabelWidth","y"),l=i[0].x*s.w+50,h=i[0].y*s.h-50;l+r+1>s.w&&(l=l-100-r-(o-s.x)),t.dygraph.graphDiv.appendChild(this.legend_div_),this.legend_div_.style.left=o+l+"px",this.legend_div_.style.top=h+"px"}var d=Rt.generateLegendHTML(t.dygraph,e,i,this.one_em_width_,a);this.legend_div_.innerHTML=d,this.legend_div_.style.display=""}else this.legend_div_.style.display="none"},Rt.prototype.deselect=function(t){"always"!==t.dygraph.getOption("legend")&&(this.legend_div_.style.display="none");var e=function(t){var e=document.createElement("span");e.setAttribute("style","margin: 0; padding: 0 0 0 1em; border: 0;"),t.appendChild(e);var i=e.offsetWidth;return t.removeChild(e),i}(this.legend_div_);this.one_em_width_=e;var i=Rt.generateLegendHTML(t.dygraph,void 0,void 0,e,null);this.legend_div_.innerHTML=i},Rt.prototype.didDrawChart=function(t){this.deselect(t)},Rt.prototype.predraw=function(t){if(this.is_generated_div_){t.dygraph.graphDiv.appendChild(this.legend_div_);var e=t.dygraph.getArea(),i=this.legend_div_.offsetWidth;this.legend_div_.style.left=e.x+e.w-i-1+"px",this.legend_div_.style.top=e.y+"px"}},Rt.prototype.destroy=function(){this.legend_div_=null},Rt.generateLegendHTML=function(t,e,i,a,n){var s,r={dygraph:t,x:e,series:[]},o={},l=t.getLabels();if(l)for(var h=1;h<l.length;h++){var d=t.getPropertiesForSeries(l[h]),c={dashHTML:Ft(t.getOption("strokePattern",l[h]),d.color,a),label:l[h],labelHTML:(s=l[h],s.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")),isVisible:d.visible,color:d.color};r.series.push(c),o[l[h]]=c}if(void 0!==e){var u=t.optionsViewForAxis_("x"),p=u("valueFormatter");r.xHTML=p.call(t,e,u,l[0],t,n,0);var g=[],v=t.numAxes();for(h=0;h<v;h++)g[h]=t.optionsViewForAxis_("y"+(h?1+h:""));var _=t.getOption("labelsShowZeroValues"),f=t.getHighlightSeries();for(h=0;h<i.length;h++){var y=i[h];if((c=o[y.name]).y=y.yval,0===y.yval&&!_||isNaN(y.canvasy))c.isVisible=!1;else{var x=g[(d=t.getPropertiesForSeries(y.name)).axis-1];W(c,{yHTML:x("valueFormatter").call(t,y.yval,x,y.name,t,n,l.indexOf(y.name))}),y.name==f&&(c.isHighlighted=!0)}}}return(t.getOption("legendFormatter")||Rt.defaultFormatter).call(t,r)},Rt.defaultFormatter=function(t){var e=t.dygraph;if(!0!==e.getOption("showLabelsOnHighlight"))return"";var i,a=e.getOption("labelsSeparateLines");if(void 0===t.x){if("always"!=e.getOption("legend"))return"";i="";for(var n=0;n<t.series.length;n++)(s=t.series[n]).isVisible&&(""!==i&&(i+=a?"<br/>":" "),i+=`<span style='font-weight: bold; color: ${s.color};'>${s.dashHTML} ${s.labelHTML}</span>`);return i}for(i=t.xHTML+":",n=0;n<t.series.length;n++){var s;(s=t.series[n]).isVisible&&(a&&(i+="<br>"),i+=`<span${s.isHighlighted?' class="highlight"':""}> <b><span style='color: ${s.color};'>${s.labelHTML}</span></b>:&#160;${s.yHTML}</span>`)}return i};var Ht=function(){this.hasTouchInterface_="undefined"!=typeof TouchEvent,this.isMobileDevice_=/mobile|android/gi.test(navigator.appVersion),this.interfaceCreated_=!1};Ht.prototype.toString=function(){return"RangeSelector Plugin"},Ht.prototype.activate=function(t){return this.dygraph_=t,this.getOption_("showRangeSelector")&&this.createInterface_(),{layout:this.reserveSpace_,predraw:this.renderStaticLayer_,didDrawChart:this.renderInteractiveLayer_}},Ht.prototype.destroy=function(){this.bgcanvas_=null,this.fgcanvas_=null,this.leftZoomHandle_=null,this.rightZoomHandle_=null},Ht.prototype.getOption_=function(t,e){return this.dygraph_.getOption(t,e)},Ht.prototype.setDefaultOption_=function(t,e){this.dygraph_.attrs_[t]=e},Ht.prototype.createInterface_=function(){this.createCanvases_(),this.createZoomHandles_(),this.initInteraction_(),this.getOption_("animatedZooms")&&(console.warn("Animated zooms and range selector are not compatible; disabling animatedZooms."),this.dygraph_.updateOptions({animatedZooms:!1},!0)),this.interfaceCreated_=!0,this.addToGraph_()},Ht.prototype.addToGraph_=function(){var t=this.graphDiv_=this.dygraph_.graphDiv;t.appendChild(this.bgcanvas_),t.appendChild(this.fgcanvas_),t.appendChild(this.leftZoomHandle_),t.appendChild(this.rightZoomHandle_)},Ht.prototype.removeFromGraph_=function(){var t=this.graphDiv_;t.removeChild(this.bgcanvas_),t.removeChild(this.fgcanvas_),t.removeChild(this.leftZoomHandle_),t.removeChild(this.rightZoomHandle_),this.graphDiv_=null},Ht.prototype.reserveSpace_=function(t){this.getOption_("showRangeSelector")&&t.reserveSpaceBottom(this.getOption_("rangeSelectorHeight")+4)},Ht.prototype.renderStaticLayer_=function(){this.updateVisibility_()&&(this.resize_(),this.drawStaticLayer_())},Ht.prototype.renderInteractiveLayer_=function(){this.updateVisibility_()&&!this.isChangingRange_&&(this.placeZoomHandles_(),this.drawInteractiveLayer_())},Ht.prototype.updateVisibility_=function(){var t=this.getOption_("showRangeSelector");if(t)this.interfaceCreated_?this.graphDiv_&&this.graphDiv_.parentNode||this.addToGraph_():this.createInterface_();else if(this.graphDiv_){this.removeFromGraph_();var e=this.dygraph_;setTimeout(function(){e.width_=0,e.resize()},1)}return t},Ht.prototype.resize_=function(){function t(t,e,i,a){var n=a||z(e);t.style.top=i.y+"px",t.style.left=i.x+"px",t.width=i.w*n,t.height=i.h*n,t.style.width=i.w+"px",t.style.height=i.h+"px",1!=n&&e.scale(n,n)}var e=this.dygraph_.layout_.getPlotArea(),i=0;this.dygraph_.getOptionForAxis("drawAxis","x")&&(i=this.getOption_("xAxisHeight")||this.getOption_("axisLabelFontSize")+2*this.getOption_("axisTickSize")),this.canvasRect_={x:e.x,y:e.y+e.h+i+4,w:e.w,h:this.getOption_("rangeSelectorHeight")};var a=this.dygraph_.getNumericOption("pixelRatio");t(this.bgcanvas_,this.bgcanvas_ctx_,this.canvasRect_,a),t(this.fgcanvas_,this.fgcanvas_ctx_,this.canvasRect_,a)},Ht.prototype.createCanvases_=function(){this.bgcanvas_=B(),this.bgcanvas_.className="dygraph-rangesel-bgcanvas",this.bgcanvas_.style.position="absolute",this.bgcanvas_.style.zIndex=9,this.bgcanvas_ctx_=m(this.bgcanvas_),this.fgcanvas_=B(),this.fgcanvas_.className="dygraph-rangesel-fgcanvas",this.fgcanvas_.style.position="absolute",this.fgcanvas_.style.zIndex=9,this.fgcanvas_.style.cursor="default",this.fgcanvas_ctx_=m(this.fgcanvas_)},Ht.prototype.createZoomHandles_=function(){var t=new Image;t.className="dygraph-rangesel-zoomhandle",t.style.position="absolute",t.style.zIndex=10,t.style.visibility="hidden",t.style.cursor="col-resize",t.width=9,t.height=16,t.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAQCAYAAADESFVDAAAAAXNSR0IArs4c6QAAAAZiS0dEANAAzwDP4Z7KegAAAAlwSFlzAAAOxAAADsQBlSsOGwAAAAd0SU1FB9sHGw0cMqdt1UwAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAAaElEQVQoz+3SsRFAQBCF4Z9WJM8KCDVwownl6YXsTmCUsyKGkZzcl7zkz3YLkypgAnreFmDEpHkIwVOMfpdi9CEEN2nGpFdwD03yEqDtOgCaun7sqSTDH32I1pQA2Pb9sZecAxc5r3IAb21d6878xsAAAAAASUVORK5CYII=",this.isMobileDevice_&&(t.width*=2,t.height*=2),this.leftZoomHandle_=t,this.rightZoomHandle_=t.cloneNode(!1)},Ht.prototype.initInteraction_=function(){var t,e,i,a,n,s,r,o,l,h,d,c,u,p,g=this,v=document,_=0,f=null,y=!1,x=!1,m=!this.isMobileDevice_,S=new mt;t=function(t){var e=g.dygraph_.xAxisExtremes(),i=(e[1]-e[0])/g.canvasRect_.w;return[e[0]+(t.leftHandlePos-g.canvasRect_.x)*i,e[0]+(t.rightHandlePos-g.canvasRect_.x)*i]},e=function(t){return A(t),y=!0,_=t.clientX,f=t.target?t.target:t.srcElement,"mousedown"!==t.type&&"dragstart"!==t.type||(b(v,"mousemove",i),b(v,"mouseup",a)),g.fgcanvas_.style.cursor="col-resize",S.cover(),!0},i=function(t){if(!y)return!1;A(t);var e=t.clientX-_;if(Math.abs(e)<4)return!0;_=t.clientX;var i,a=g.getZoomHandleStatus_();f==g.leftZoomHandle_?(i=a.leftHandlePos+e,i=Math.min(i,a.rightHandlePos-f.width-3),i=Math.max(i,g.canvasRect_.x)):(i=a.rightHandlePos+e,i=Math.min(i,g.canvasRect_.x+g.canvasRect_.w),i=Math.max(i,a.leftHandlePos+f.width+3));var s=f.width/2;return f.style.left=i-s+"px",g.drawInteractiveLayer_(),m&&n(),!0},a=function(t){return!!y&&(y=!1,S.uncover(),w(v,"mousemove",i),w(v,"mouseup",a),g.fgcanvas_.style.cursor="default",m||n(),!0)},n=function(){try{var e=g.getZoomHandleStatus_();if(g.isChangingRange_=!0,e.isZoomed){var i=t(e);g.dygraph_.doZoomXDates_(i[0],i[1])}else g.dygraph_.resetZoom()}finally{g.isChangingRange_=!1}},s=function(t){var e=g.leftZoomHandle_.getBoundingClientRect(),i=e.left+e.width/2,a=(e=g.rightZoomHandle_.getBoundingClientRect()).left+e.width/2;return t.clientX>i&&t.clientX<a},r=function(t){return!(x||!s(t)||!g.getZoomHandleStatus_().isZoomed||(A(t),x=!0,_=t.clientX,"mousedown"===t.type&&(b(v,"mousemove",o),b(v,"mouseup",l)),0))},o=function(t){if(!x)return!1;A(t);var e=t.clientX-_;if(Math.abs(e)<4)return!0;_=t.clientX;var i=g.getZoomHandleStatus_(),a=i.leftHandlePos,n=i.rightHandlePos,s=n-a;a+e<=g.canvasRect_.x?n=(a=g.canvasRect_.x)+s:n+e>=g.canvasRect_.x+g.canvasRect_.w?a=(n=g.canvasRect_.x+g.canvasRect_.w)-s:(a+=e,n+=e);var r=g.leftZoomHandle_.width/2;return g.leftZoomHandle_.style.left=a-r+"px",g.rightZoomHandle_.style.left=n-r+"px",g.drawInteractiveLayer_(),m&&h(),!0},l=function(t){return!!x&&(x=!1,w(v,"mousemove",o),w(v,"mouseup",l),m||h(),!0)},h=function(){try{g.isChangingRange_=!0,g.dygraph_.dateWindow_=t(g.getZoomHandleStatus_()),g.dygraph_.drawGraph_(!1)}finally{g.isChangingRange_=!1}},d=function(t){if(!y&&!x){var e=s(t)?"move":"default";e!=g.fgcanvas_.style.cursor&&(g.fgcanvas_.style.cursor=e)}},c=function(t){"touchstart"==t.type&&1==t.targetTouches.length?e(t.targetTouches[0])&&A(t):"touchmove"==t.type&&1==t.targetTouches.length?i(t.targetTouches[0])&&A(t):a(t)},u=function(t){"touchstart"==t.type&&1==t.targetTouches.length?r(t.targetTouches[0])&&A(t):"touchmove"==t.type&&1==t.targetTouches.length?o(t.targetTouches[0])&&A(t):l(t)},p=function(t,e){for(var i=["touchstart","touchend","touchmove","touchcancel"],a=0;a<i.length;a++)g.dygraph_.addAndTrackEvent(t,i[a],e)},this.setDefaultOption_("interactionModel",_t.dragIsPanInteractionModel),this.setDefaultOption_("panEdgeFraction",1e-4);var O=window.opera?"mousedown":"dragstart";this.dygraph_.addAndTrackEvent(this.leftZoomHandle_,O,e),this.dygraph_.addAndTrackEvent(this.rightZoomHandle_,O,e),this.dygraph_.addAndTrackEvent(this.fgcanvas_,"mousedown",r),this.dygraph_.addAndTrackEvent(this.fgcanvas_,"mousemove",d),this.hasTouchInterface_&&(p(this.leftZoomHandle_,c),p(this.rightZoomHandle_,c),p(this.fgcanvas_,u))},Ht.prototype.drawStaticLayer_=function(){var t=this.bgcanvas_ctx_;t.clearRect(0,0,this.canvasRect_.w,this.canvasRect_.h);try{this.drawMiniPlot_()}catch(t){console.warn(t)}this.bgcanvas_ctx_.lineWidth=this.getOption_("rangeSelectorBackgroundLineWidth"),t.strokeStyle=this.getOption_("rangeSelectorBackgroundStrokeColor"),t.beginPath(),t.moveTo(.5,.5),t.lineTo(.5,this.canvasRect_.h-.5),t.lineTo(this.canvasRect_.w-.5,this.canvasRect_.h-.5),t.lineTo(this.canvasRect_.w-.5,.5),t.stroke()},Ht.prototype.drawMiniPlot_=function(){var t=this.getOption_("rangeSelectorPlotFillColor"),e=this.getOption_("rangeSelectorPlotFillGradientColor"),i=this.getOption_("rangeSelectorPlotStrokeColor");if(t||i){var a=this.getOption_("stepPlot"),n=this.computeCombinedSeriesAndLimits_(),s=n.yMax-n.yMin,r=this.bgcanvas_ctx_,o=this.dygraph_.xAxisExtremes(),l=Math.max(o[1]-o[0],1e-30),h=(this.canvasRect_.w-.5)/l,d=(this.canvasRect_.h-.5)/s,c=this.canvasRect_.w-.5,u=this.canvasRect_.h-.5,p=null,g=null;r.beginPath(),r.moveTo(.5,u);for(var v=0;v<n.data.length;v++){var _=n.data[v],f=null!==_[0]?(_[0]-o[0])*h:NaN,y=null!==_[1]?u-(_[1]-n.yMin)*d:NaN;(a||null===p||Math.round(f)!=Math.round(p))&&(isFinite(f)&&isFinite(y)?(null===p?r.lineTo(f,u):a&&r.lineTo(f,g),r.lineTo(f,y),p=f,g=y):(null!==p&&(a?(r.lineTo(f,g),r.lineTo(f,u)):r.lineTo(p,u)),p=g=null))}if(r.lineTo(c,u),r.closePath(),t){var x=this.bgcanvas_ctx_.createLinearGradient(0,0,0,u);e&&x.addColorStop(0,e),x.addColorStop(1,t),this.bgcanvas_ctx_.fillStyle=x,r.fill()}i&&(this.bgcanvas_ctx_.strokeStyle=i,this.bgcanvas_ctx_.lineWidth=this.getOption_("rangeSelectorPlotLineWidth"),r.stroke())}},Ht.prototype.computeCombinedSeriesAndLimits_=function(){var t,e=this.dygraph_,i=this.getOption_("logscale"),a=e.numColumns(),n=e.getLabels(),s=new Array(a),r=!1,o=e.visibility(),l=[];for(t=1;t<a;t++){var h=this.getOption_("showInRangeSelector",n[t]);l.push(h),null!==h&&(r=!0)}if(r)for(t=1;t<a;t++)s[t]=l[t-1];else for(t=1;t<a;t++)s[t]=o[t-1];var d=[],c=e.dataHandler_,u=e.attributes_;for(t=1;t<e.numColumns();t++)if(s[t]){var p=c.extractSeries(e.rawData_,t,u);e.rollPeriod()>1&&(p=c.rollingAverage(p,e.rollPeriod(),u)),d.push(p)}var g=[];for(t=0;t<d[0].length;t++){for(var v=0,_=0,f=0;f<d.length;f++){var x=d[f][t][1];null===x||isNaN(x)||(_++,v+=x)}g.push([d[0][t][0],v/_])}var m=Number.MAX_VALUE,b=-Number.MAX_VALUE;for(t=0;t<g.length;t++){var w=g[t][1];null!==w&&isFinite(w)&&(!i||w>0)&&(m=Math.min(m,w),b=Math.max(b,w))}if(i)for(b=y(b),b+=.25*b,m=y(m),t=0;t<g.length;t++)g[t][1]=y(g[t][1]);else{var A,S=b-m;b+=A=S<=Number.MIN_VALUE?.25*b:.25*S,m-=A}return{data:g,yMin:m,yMax:b}},Ht.prototype.placeZoomHandles_=function(){var t=this.dygraph_.xAxisExtremes(),e=this.dygraph_.xAxisRange(),i=t[1]-t[0],a=Math.max(0,(e[0]-t[0])/i),n=Math.max(0,(t[1]-e[1])/i),s=this.canvasRect_.x+this.canvasRect_.w*a,r=this.canvasRect_.x+this.canvasRect_.w*(1-n),o=Math.max(this.canvasRect_.y,this.canvasRect_.y+(this.canvasRect_.h-this.leftZoomHandle_.height)/2),l=this.leftZoomHandle_.width/2;this.leftZoomHandle_.style.left=s-l+"px",this.leftZoomHandle_.style.top=o+"px",this.rightZoomHandle_.style.left=r-l+"px",this.rightZoomHandle_.style.top=this.leftZoomHandle_.style.top,this.leftZoomHandle_.style.visibility="visible",this.rightZoomHandle_.style.visibility="visible"},Ht.prototype.drawInteractiveLayer_=function(){var t=this.fgcanvas_ctx_;t.clearRect(0,0,this.canvasRect_.w,this.canvasRect_.h);var e=this.canvasRect_.w-1,i=this.canvasRect_.h-1,a=this.getZoomHandleStatus_();if(t.strokeStyle=this.getOption_("rangeSelectorForegroundStrokeColor"),t.lineWidth=this.getOption_("rangeSelectorForegroundLineWidth"),a.isZoomed){var n=Math.max(1,a.leftHandlePos-this.canvasRect_.x),s=Math.min(e,a.rightHandlePos-this.canvasRect_.x);t.fillStyle="rgba(240, 240, 240, "+this.getOption_("rangeSelectorAlpha").toString()+")",t.fillRect(0,0,n,this.canvasRect_.h),t.fillRect(s,0,this.canvasRect_.w-s,this.canvasRect_.h),t.beginPath(),t.moveTo(1,1),t.lineTo(n,1),t.lineTo(n,i),t.lineTo(s,i),t.lineTo(s,1),t.lineTo(e,1),t.stroke()}else t.beginPath(),t.moveTo(1,1),t.lineTo(1,i),t.lineTo(e,i),t.lineTo(e,1),t.stroke()},Ht.prototype.getZoomHandleStatus_=function(){var t=this.leftZoomHandle_.width/2,e=parseFloat(this.leftZoomHandle_.style.left)+t,i=parseFloat(this.rightZoomHandle_.style.left)+t;return{leftHandlePos:e,rightHandlePos:i,isZoomed:e-1>this.canvasRect_.x||i+1<this.canvasRect_.x+this.canvasRect_.w}};var It=function(t){this.container=t};It.prototype.draw=function(t,e){this.container.innerHTML="",void 0!==this.date_graph&&this.date_graph.destroy(),this.date_graph=new Yt(this.container,t,e)},It.prototype.setSelection=function(t){var e=!1;t.length&&(e=t[0].row),this.date_graph.setSelection(e)},It.prototype.getSelection=function(){var t=[],e=this.date_graph.getSelection();if(e<0)return t;for(var i=this.date_graph.layout_.points,a=0;a<i.length;++a)t.push({row:e,column:a+1});return t};var Yt=function(t,e,i){this.__init__(t,e,i)};Yt.NAME="Dygraph",Yt.VERSION="2.0.0",Yt.DEFAULT_ROLL_PERIOD=1,Yt.DEFAULT_WIDTH=480,Yt.DEFAULT_HEIGHT=320,Yt.ANIMATION_STEPS=12,Yt.ANIMATION_DURATION=200,Yt.Plotters=vt._Plotters,Yt.addedAnnotationCSS=!1,Yt.prototype.__init__=function(t,e,i){if(this.is_initial_draw_=!0,this.readyFns_=[],null!==i&&void 0!==i||(i={}),i=Yt.copyUserAttrs_(i),"string"==typeof t&&(t=document.getElementById(t)),!t)throw new Error("Constructing dygraph with a non-existent div!");this.maindiv_=t,this.file_=e,this.rollPeriod_=i.rollPeriod||Yt.DEFAULT_ROLL_PERIOD,this.previousVerticalX_=-1,this.fractions_=i.fractions||!1,this.dateWindow_=i.dateWindow||null,this.annotations_=[],t.innerHTML="",""===t.style.width&&i.width&&(t.style.width=i.width+"px"),""===t.style.height&&i.height&&(t.style.height=i.height+"px"),""===t.style.height&&0===t.clientHeight&&(t.style.height=Yt.DEFAULT_HEIGHT+"px",""===t.style.width&&(t.style.width=Yt.DEFAULT_WIDTH+"px")),this.width_=t.clientWidth||i.width||0,this.height_=t.clientHeight||i.height||0,i.stackedGraph&&(i.fillGraph=!0),this.user_attrs_={},W(this.user_attrs_,i),this.attrs_={},V(this.attrs_,yt),this.boundaryIds_=[],this.setIndexByName_={},this.datasetIndex_=[],this.registeredEvents_=[],this.eventListeners_={},this.attributes_=new xt(this),this.createInterface_(),this.plugins_=[];for(var a=Yt.PLUGINS.concat(this.getOption("plugins")),n=0;n<a.length;n++){var s,r=a[n],o={plugin:s=void 0!==r.activate?r:new r,events:{},options:{},pluginOptions:{}},l=s.activate(this);for(var h in l)l.hasOwnProperty(h)&&(o.events[h]=l[h]);this.plugins_.push(o)}for(n=0;n<this.plugins_.length;n++){var d=this.plugins_[n];for(var h in d.events)if(d.events.hasOwnProperty(h)){var c=d.events[h],u=[d.plugin,c];h in this.eventListeners_?this.eventListeners_[h].push(u):this.eventListeners_[h]=[u]}}this.createDragInterface_(),this.start_()},Yt.prototype.cascadeEvents_=function(t,e){if(!(t in this.eventListeners_))return!1;var i={dygraph:this,cancelable:!1,defaultPrevented:!1,preventDefault:function(){if(!i.cancelable)throw"Cannot call preventDefault on non-cancelable event.";i.defaultPrevented=!0},propagationStopped:!1,stopPropagation:function(){i.propagationStopped=!0}};W(i,e);var a=this.eventListeners_[t];if(a)for(var n=a.length-1;n>=0;n--){var s=a[n][0];if(a[n][1].call(s,i),i.propagationStopped)break}return i.defaultPrevented},Yt.prototype.getPluginInstance_=function(t){for(var e=0;e<this.plugins_.length;e++){var i=this.plugins_[e];if(i.plugin instanceof t)return i.plugin}return null},Yt.prototype.isZoomed=function(t){const e=!!this.dateWindow_;if("x"===t)return e;const i=this.axes_.map(t=>!!t.valueRange).indexOf(!0)>=0;if(null===t||void 0===t)return e||i;if("y"===t)return i;throw new Error(`axis parameter is [${t}] must be null, 'x' or 'y'.`)},Yt.prototype.toString=function(){var t=this.maindiv_;return"[Dygraph "+(t&&t.id?t.id:t)+"]"},Yt.prototype.attr_=function(t,e){return e?this.attributes_.getForSeries(t,e):this.attributes_.get(t)},Yt.prototype.getOption=function(t,e){return this.attr_(t,e)},Yt.prototype.getNumericOption=function(t,e){return this.getOption(t,e)},Yt.prototype.getStringOption=function(t,e){return this.getOption(t,e)},Yt.prototype.getBooleanOption=function(t,e){return this.getOption(t,e)},Yt.prototype.getFunctionOption=function(t,e){return this.getOption(t,e)},Yt.prototype.getOptionForAxis=function(t,e){return this.attributes_.getForAxis(t,e)},Yt.prototype.optionsViewForAxis_=function(t){var e=this;return function(i){var a=e.user_attrs_.axes;return a&&a[t]&&a[t].hasOwnProperty(i)?a[t][i]:("x"!==t||"logscale"!==i)&&(void 0!==e.user_attrs_[i]?e.user_attrs_[i]:(a=e.attrs_.axes)&&a[t]&&a[t].hasOwnProperty(i)?a[t][i]:"y"==t&&e.axes_[0].hasOwnProperty(i)?e.axes_[0][i]:"y2"==t&&e.axes_[1].hasOwnProperty(i)?e.axes_[1][i]:e.attr_(i))}},Yt.prototype.rollPeriod=function(){return this.rollPeriod_},Yt.prototype.xAxisRange=function(){return this.dateWindow_?this.dateWindow_:this.xAxisExtremes()},Yt.prototype.xAxisExtremes=function(){var t=this.getNumericOption("xRangePad")/this.plotter_.area.w;if(0===this.numRows())return[0-t,1+t];var e=this.rawData_[0][0],i=this.rawData_[this.rawData_.length-1][0];if(t){var a=i-e;e-=a*t,i+=a*t}return[e,i]},Yt.prototype.yAxisExtremes=function(){const t=this.gatherDatasets_(this.rolledSeries_,null),{extremes:e}=t,i=this.axes_;this.computeYAxisRanges_(e);const a=this.axes_;return this.axes_=i,a.map(t=>t.extremeRange)},Yt.prototype.yAxisRange=function(t){if(void 0===t&&(t=0),t<0||t>=this.axes_.length)return null;var e=this.axes_[t];return[e.computedValueRange[0],e.computedValueRange[1]]},Yt.prototype.yAxisRanges=function(){for(var t=[],e=0;e<this.axes_.length;e++)t.push(this.yAxisRange(e));return t},Yt.prototype.toDomCoords=function(t,e,i){return[this.toDomXCoord(t),this.toDomYCoord(e,i)]},Yt.prototype.toDomXCoord=function(t){if(null===t)return null;var e=this.plotter_.area,i=this.xAxisRange();return e.x+(t-i[0])/(i[1]-i[0])*e.w},Yt.prototype.toDomYCoord=function(t,e){var i=this.toPercentYCoord(t,e);if(null===i)return null;var a=this.plotter_.area;return a.y+i*a.h},Yt.prototype.toDataCoords=function(t,e,i){return[this.toDataXCoord(t),this.toDataYCoord(e,i)]},Yt.prototype.toDataXCoord=function(t){if(null===t)return null;var e=this.plotter_.area,i=this.xAxisRange();if(this.attributes_.getForAxis("logscale","x")){var a=(t-e.x)/e.w;return x(i[0],i[1],a)}return i[0]+(t-e.x)/e.w*(i[1]-i[0])},Yt.prototype.toDataYCoord=function(t,e){if(null===t)return null;var i=this.plotter_.area,a=this.yAxisRange(e);if(void 0===e&&(e=0),this.attributes_.getForAxis("logscale",e)){var n=(t-i.y)/i.h;return x(a[1],a[0],n)}return a[0]+(i.y+i.h-t)/i.h*(a[1]-a[0])},Yt.prototype.toPercentYCoord=function(t,e){if(null===t)return null;void 0===e&&(e=0);var i,a=this.yAxisRange(e);if(this.attributes_.getForAxis("logscale",e)){var n=y(a[0]),s=y(a[1]);i=(s-y(t))/(s-n)}else i=(a[1]-t)/(a[1]-a[0]);return i},Yt.prototype.toPercentXCoord=function(t){if(null===t)return null;var e,i=this.xAxisRange();if(!0===this.attributes_.getForAxis("logscale","x")){var a=y(i[0]),n=y(i[1]);e=(y(t)-a)/(n-a)}else e=(t-i[0])/(i[1]-i[0]);return e},Yt.prototype.numColumns=function(){return this.rawData_?this.rawData_[0]?this.rawData_[0].length:this.attr_("labels").length:0},Yt.prototype.numRows=function(){return this.rawData_?this.rawData_.length:0},Yt.prototype.getValue=function(t,e){return t<0||t>this.rawData_.length?null:e<0||e>this.rawData_[t].length?null:this.rawData_[t][e]},Yt.prototype.createInterface_=function(){var t=this.maindiv_;this.graphDiv=document.createElement("div"),this.graphDiv.style.textAlign="left",this.graphDiv.style.position="relative",t.appendChild(this.graphDiv),this.canvas_=B(),this.canvas_.style.position="absolute",this.hidden_=this.createPlotKitCanvas_(this.canvas_),this.canvas_ctx_=m(this.canvas_),this.hidden_ctx_=m(this.hidden_),this.resizeElements_(),this.graphDiv.appendChild(this.hidden_),this.graphDiv.appendChild(this.canvas_),this.mouseEventElement_=this.createMouseEventElement_(),this.layout_=new gt(this);var e=this;this.mouseMoveHandler_=function(t){e.mouseMove_(t)},this.mouseOutHandler_=function(t){var i=t.target||t.fromElement,a=t.relatedTarget||t.toElement;tt(i,e.graphDiv)&&!tt(a,e.graphDiv)&&e.mouseOut_(t)},this.addAndTrackEvent(window,"mouseout",this.mouseOutHandler_),this.addAndTrackEvent(this.mouseEventElement_,"mousemove",this.mouseMoveHandler_),this.resizeHandler_||(this.resizeHandler_=function(t){e.resize()},this.addAndTrackEvent(window,"resize",this.resizeHandler_))},Yt.prototype.resizeElements_=function(){this.graphDiv.style.width=this.width_+"px",this.graphDiv.style.height=this.height_+"px";var t=this.getNumericOption("pixelRatio"),e=t||z(this.canvas_ctx_);this.canvas_.width=this.width_*e,this.canvas_.height=this.height_*e,this.canvas_.style.width=this.width_+"px",this.canvas_.style.height=this.height_+"px",1!==e&&this.canvas_ctx_.scale(e,e);var i=t||z(this.hidden_ctx_);this.hidden_.width=this.width_*i,this.hidden_.height=this.height_*i,this.hidden_.style.width=this.width_+"px",this.hidden_.style.height=this.height_+"px",1!==i&&this.hidden_ctx_.scale(i,i)},Yt.prototype.destroy=function(){this.canvas_ctx_.restore(),this.hidden_ctx_.restore();for(var t=this.plugins_.length-1;t>=0;t--){var e=this.plugins_.pop();e.plugin.destroy&&e.plugin.destroy()}var i=function(t){for(;t.hasChildNodes();)i(t.firstChild),t.removeChild(t.firstChild)};this.removeTrackedEvents_(),w(window,"mouseout",this.mouseOutHandler_),w(this.mouseEventElement_,"mousemove",this.mouseMoveHandler_),w(window,"resize",this.resizeHandler_),this.resizeHandler_=null,i(this.maindiv_);var a=function(t){for(var e in t)"object"==typeof t[e]&&(t[e]=null)};a(this.layout_),a(this.plotter_),a(this)},Yt.prototype.createPlotKitCanvas_=function(t){var e=B();return e.style.position="absolute",e.style.top=t.style.top,e.style.left=t.style.left,e.width=this.width_,e.height=this.height_,e.style.width=this.width_+"px",e.style.height=this.height_+"px",e},Yt.prototype.createMouseEventElement_=function(){return this.canvas_},Yt.prototype.setColors_=function(){var t=this.getLabels(),e=t.length-1;this.colors_=[],this.colorsMap_={};for(var i=this.getNumericOption("colorSaturation")||1,a=this.getNumericOption("colorValue")||.5,n=Math.ceil(e/2),s=this.getOption("colors"),r=this.visibility(),o=0;o<e;o++)if(r[o]){var l=t[o+1],h=this.attributes_.getForSeries("color",l);h||(h=s?s[o%s.length]:S(1*(o%2?n+(o+1)/2:Math.ceil((o+1)/2))/(1+e),i,a)),this.colors_.push(h),this.colorsMap_[l]=h}},Yt.prototype.getColors=function(){return this.colors_},Yt.prototype.getPropertiesForSeries=function(t){for(var e=-1,i=this.getLabels(),a=1;a<i.length;a++)if(i[a]==t){e=a;break}return-1==e?null:{name:t,column:e,visible:this.visibility()[e-1],color:this.colorsMap_[t],axis:1+this.attributes_.axisForSeries(t)}},Yt.prototype.createRollInterface_=function(){var t=this.roller_;t||(this.roller_=t=document.createElement("input"),t.type="text",t.style.display="none",t.className="dygraph-roller",this.graphDiv.appendChild(t));var e=this.getBooleanOption("showRoller")?"block":"none",i=this.getArea(),a={top:i.y+i.h-25+"px",left:i.x+1+"px",display:e};t.size="2",t.value=this.rollPeriod_,W(t.style,a),t.onchange=(()=>this.adjustRoll(t.value))},Yt.prototype.createDragInterface_=function(){var t={isZooming:!1,isPanning:!1,is2DPan:!1,dragStartX:null,dragStartY:null,dragEndX:null,dragEndY:null,dragDirection:null,prevEndX:null,prevEndY:null,prevDragDirection:null,cancelNextDblclick:!1,initialLeftmostDate:null,xUnitsPerPixel:null,dateRange:null,px:0,py:0,boundedDates:null,boundedValues:null,tarp:new mt,initializeMouseDown:function(t,e,i){t.preventDefault?t.preventDefault():(t.returnValue=!1,t.cancelBubble=!0);var a=O(e.canvas_);i.px=a.x,i.py=a.y,i.dragStartX=T(t,i),i.dragStartY=D(t,i),i.cancelNextDblclick=!1,i.tarp.cover()},destroy:function(){if((this.isZooming||this.isPanning)&&(this.isZooming=!1,this.dragStartX=null,this.dragStartY=null),this.isPanning){this.isPanning=!1,this.draggingDate=null,this.dateRange=null;for(var t=0;t<i.axes_.length;t++)delete i.axes_[t].draggingValue,delete i.axes_[t].dragValueRange}this.tarp.uncover()}},e=this.getOption("interactionModel"),i=this,a=function(e){return function(a){e(a,i,t)}};for(var n in e)e.hasOwnProperty(n)&&this.addAndTrackEvent(this.mouseEventElement_,n,a(e[n]));e.willDestroyContextMyself||this.addAndTrackEvent(document,"mouseup",function(e){t.destroy()})},Yt.prototype.drawZoomRect_=function(t,e,i,a,n,s,r,o){var l=this.canvas_ctx_;1==s?l.clearRect(Math.min(e,r),this.layout_.getPlotArea().y,Math.abs(e-r),this.layout_.getPlotArea().h):2==s&&l.clearRect(this.layout_.getPlotArea().x,Math.min(a,o),this.layout_.getPlotArea().w,Math.abs(a-o)),1==t?i&&e&&(l.fillStyle="rgba(128,128,128,0.33)",l.fillRect(Math.min(e,i),this.layout_.getPlotArea().y,Math.abs(i-e),this.layout_.getPlotArea().h)):2==t&&n&&a&&(l.fillStyle="rgba(128,128,128,0.33)",l.fillRect(this.layout_.getPlotArea().x,Math.min(a,n),this.layout_.getPlotArea().w,Math.abs(n-a)))},Yt.prototype.clearZoomRect_=function(){this.currentZoomRectArgs_=null,this.canvas_ctx_.clearRect(0,0,this.width_,this.height_)},Yt.prototype.doZoomX_=function(t,e){this.currentZoomRectArgs_=null;var i=this.toDataXCoord(t),a=this.toDataXCoord(e);this.doZoomXDates_(i,a)},Yt.prototype.doZoomXDates_=function(t,e){var i=this.xAxisRange(),a=[t,e];const n=this.getFunctionOption("zoomCallback");this.doAnimatedZoom(i,a,null,null,()=>{n&&n.call(this,t,e,this.yAxisRanges())})},Yt.prototype.doZoomY_=function(t,e){this.currentZoomRectArgs_=null;for(var i=this.yAxisRanges(),a=[],n=0;n<this.axes_.length;n++){var s=this.toDataYCoord(t,n),r=this.toDataYCoord(e,n);a.push([r,s])}const o=this.getFunctionOption("zoomCallback");this.doAnimatedZoom(null,null,i,a,()=>{if(o){const[t,e]=this.xAxisRange();o.call(this,t,e,this.yAxisRanges())}})},Yt.zoomAnimationFunction=function(t,e){return(1-Math.pow(1.5,-t))/(1-Math.pow(1.5,-e))},Yt.prototype.resetZoom=function(){const t=this.isZoomed("x"),e=this.isZoomed("y"),i=t||e;if(this.clearSelection(),!i)return;const[a,n]=this.xAxisExtremes(),s=this.getBooleanOption("animatedZooms"),r=this.getFunctionOption("zoomCallback");if(!s)return this.dateWindow_=null,this.axes_.forEach(t=>{t.valueRange&&delete t.valueRange}),this.drawGraph_(),void(r&&r.call(this,a,n,this.yAxisRanges()));var o=null,l=null,h=null,d=null;t&&(o=this.xAxisRange(),l=[a,n]),e&&(h=this.yAxisRanges(),d=this.yAxisExtremes()),this.doAnimatedZoom(o,l,h,d,()=>{this.dateWindow_=null,this.axes_.forEach(t=>{t.valueRange&&delete t.valueRange}),r&&r.call(this,a,n,this.yAxisRanges())})},Yt.prototype.doAnimatedZoom=function(t,e,i,a,n){var s,r,o=this.getBooleanOption("animatedZooms")?Yt.ANIMATION_STEPS:1,l=[],h=[];if(null!==t&&null!==e)for(s=1;s<=o;s++)r=Yt.zoomAnimationFunction(s,o),l[s-1]=[t[0]*(1-r)+r*e[0],t[1]*(1-r)+r*e[1]];if(null!==i&&null!==a)for(s=1;s<=o;s++){r=Yt.zoomAnimationFunction(s,o);for(var d=[],c=0;c<this.axes_.length;c++)d.push([i[c][0]*(1-r)+r*a[c][0],i[c][1]*(1-r)+r*a[c][1]]);h[s-1]=d}j(t=>{if(h.length)for(var e=0;e<this.axes_.length;e++){var i=h[t][e];this.axes_[e].valueRange=[i[0],i[1]]}l.length&&(this.dateWindow_=l[t]),this.drawGraph_()},o,Yt.ANIMATION_DURATION/o,n)},Yt.prototype.getArea=function(){return this.plotter_.area},Yt.prototype.eventToDomCoords=function(t){if(t.offsetX&&t.offsetY)return[t.offsetX,t.offsetY];var e=O(this.mouseEventElement_);return[C(t)-e.x,L(t)-e.y]},Yt.prototype.findClosestRow=function(t){for(var e=1/0,i=-1,a=this.layout_.points,n=0;n<a.length;n++)for(var s=a[n],r=s.length,o=0;o<r;o++){var l=s[o];if(P(l,!0)){var h=Math.abs(l.canvasx-t);h<e&&(e=h,i=l.idx)}}return i},Yt.prototype.findClosestPoint=function(t,e){for(var i,a,n,s,r,o,l,h=1/0,d=this.layout_.points.length-1;d>=0;--d)for(var c=this.layout_.points[d],u=0;u<c.length;++u)P(s=c[u])&&(i=(a=s.canvasx-t)*a+(n=s.canvasy-e)*n)<h&&(h=i,r=s,o=d,l=s.idx);return{row:l,seriesName:this.layout_.setNames[o],point:r}},Yt.prototype.findStackedPoint=function(t,e){for(var i,a,n=this.findClosestRow(t),s=0;s<this.layout_.points.length;++s){var r=n-this.getLeftBoundary_(s),o=this.layout_.points[s];if(!(r>=o.length)){var l=o[r];if(P(l)){var h=l.canvasy;if(t>l.canvasx&&r+1<o.length){var d=o[r+1];P(d)&&(c=d.canvasx-l.canvasx)>0&&(h+=(t-l.canvasx)/c*(d.canvasy-l.canvasy))}else if(t<l.canvasx&&r>0){var c,u=o[r-1];P(u)&&(c=l.canvasx-u.canvasx)>0&&(h+=(l.canvasx-t)/c*(u.canvasy-l.canvasy))}(0===s||h<e)&&(i=l,a=s)}}}return{row:n,seriesName:this.layout_.setNames[a],point:i}},Yt.prototype.mouseMove_=function(t){var e=this.layout_.points;if(void 0!==e&&null!==e){var i=this.eventToDomCoords(t),a=i[0],n=i[1],s=!1;if(this.getOption("highlightSeriesOpts")&&!this.isSeriesLocked()){var r;r=this.getBooleanOption("stackedGraph")?this.findStackedPoint(a,n):this.findClosestPoint(a,n),s=this.setSelection(r.row,r.seriesName)}else{var o=this.findClosestRow(a);s=this.setSelection(o)}var l=this.getFunctionOption("highlightCallback");l&&s&&l.call(this,t,this.lastx_,this.selPoints_,this.lastRow_,this.highlightSet_)}},Yt.prototype.getLeftBoundary_=function(t){if(this.boundaryIds_[t])return this.boundaryIds_[t][0];for(var e=0;e<this.boundaryIds_.length;e++)if(void 0!==this.boundaryIds_[e])return this.boundaryIds_[e][0];return 0},Yt.prototype.animateSelection_=function(t){void 0===this.fadeLevel&&(this.fadeLevel=0),void 0===this.animateId&&(this.animateId=0);var e=this.fadeLevel,i=t<0?e:10-e;if(i<=0)this.fadeLevel&&this.updateSelection_(1);else{var a=++this.animateId,n=this;j(function(e){n.animateId==a&&(n.fadeLevel+=t,0===n.fadeLevel?n.clearSelection():n.updateSelection_(n.fadeLevel/10))},i,30,function(){0!==n.fadeLevel&&t<0&&(n.fadeLevel=0,n.clearSelection())})}},Yt.prototype.updateSelection_=function(t){var e;this.cascadeEvents_("select",{selectedRow:-1===this.lastRow_?void 0:this.lastRow_,selectedX:-1===this.lastx_?void 0:this.lastx_,selectedPoints:this.selPoints_});var i=this.canvas_ctx_;if(this.getOption("highlightSeriesOpts")){i.clearRect(0,0,this.width_,this.height_);var a=1-this.getNumericOption("highlightSeriesBackgroundAlpha"),n=nt(this.getOption("highlightSeriesBackgroundColor"));if(a){if(void 0===t)return void this.animateSelection_(1);a*=t,i.fillStyle="rgba("+n.r+","+n.g+","+n.b+","+a+")",i.fillRect(0,0,this.width_,this.height_)}this.plotter_._renderLineChart(this.highlightSet_,i)}else if(this.previousVerticalX_>=0){var s=0,r=this.attr_("labels");for(e=1;e<r.length;e++){var o=this.getNumericOption("highlightCircleSize",r[e]);o>s&&(s=o)}var l=this.previousVerticalX_;i.clearRect(l-s-1,0,2*s+2,this.height_)}if(this.selPoints_.length>0){var h=this.selPoints_[0].canvasx;for(i.save(),e=0;e<this.selPoints_.length;e++){var d=this.selPoints_[e];if(!isNaN(d.canvasy)){var c=this.getNumericOption("highlightCircleSize",d.name),u=this.getFunctionOption("drawHighlightPointCallback",d.name),p=this.plotter_.colors[d.name];u||(u=Q.DEFAULT),i.lineWidth=this.getNumericOption("strokeWidth",d.name),i.strokeStyle=p,i.fillStyle=p,u.call(this,this,d.name,i,h,d.canvasy,p,c,d.idx)}}i.restore(),this.previousVerticalX_=h}},Yt.prototype.setSelection=function(t,e,i){this.selPoints_=[];var a=!1;if(!1!==t&&t>=0){t!=this.lastRow_&&(a=!0),this.lastRow_=t;for(var n=0;n<this.layout_.points.length;++n){var s=this.layout_.points[n],r=t-this.getLeftBoundary_(n);if(r>=0&&r<s.length&&s[r].idx==t)null!==(l=s[r]).yval&&this.selPoints_.push(l);else for(var o=0;o<s.length;++o){var l;if((l=s[o]).idx==t){null!==l.yval&&this.selPoints_.push(l);break}}}}else this.lastRow_>=0&&(a=!0),this.lastRow_=-1;return this.selPoints_.length?this.lastx_=this.selPoints_[0].xval:this.lastx_=-1,void 0!==e&&(this.highlightSet_!==e&&(a=!0),this.highlightSet_=e),void 0!==i&&(this.lockedSet_=i),a&&this.updateSelection_(void 0),a},Yt.prototype.mouseOut_=function(t){this.getFunctionOption("unhighlightCallback")&&this.getFunctionOption("unhighlightCallback").call(this,t),this.getBooleanOption("hideOverlayOnMouseOut")&&!this.lockedSet_&&this.clearSelection()},Yt.prototype.clearSelection=function(){this.cascadeEvents_("deselect",{}),this.lockedSet_=!1,this.fadeLevel?this.animateSelection_(-1):(this.canvas_ctx_.clearRect(0,0,this.width_,this.height_),this.fadeLevel=0,this.selPoints_=[],this.lastx_=-1,this.lastRow_=-1,this.highlightSet_=null)},Yt.prototype.getSelection=function(){if(!this.selPoints_||this.selPoints_.length<1)return-1;for(var t=0;t<this.layout_.points.length;t++)for(var e=this.layout_.points[t],i=0;i<e.length;i++)if(e[i].x==this.selPoints_[0].x)return e[i].idx;return-1},Yt.prototype.getHighlightSeries=function(){return this.highlightSet_},Yt.prototype.isSeriesLocked=function(){return this.lockedSet_},Yt.prototype.loadedEvent_=function(t){this.rawData_=this.parseCSV_(t),this.cascadeDataDidUpdateEvent_(),this.predraw_()},Yt.prototype.addXTicks_=function(){var t;t=this.dateWindow_?[this.dateWindow_[0],this.dateWindow_[1]]:this.xAxisExtremes();var e=this.optionsViewForAxis_("x"),i=e("ticker")(t[0],t[1],this.plotter_.area.w,e,this);this.layout_.setXTicks(i)},Yt.prototype.getHandlerClass_=function(){return this.attr_("dataHandler")?this.attr_("dataHandler"):this.fractions_?this.getBooleanOption("errorBars")?Tt:Lt:this.getBooleanOption("customBars")?Ct:this.getBooleanOption("errorBars")?Ot:At},Yt.prototype.predraw_=function(){var t=new Date;this.dataHandler_=new(this.getHandlerClass_()),this.layout_.computePlotArea(),this.computeYAxes_(),this.is_initial_draw_||(this.canvas_ctx_.restore(),this.hidden_ctx_.restore()),this.canvas_ctx_.save(),this.hidden_ctx_.save(),this.plotter_=new vt(this,this.hidden_,this.hidden_ctx_,this.layout_),this.createRollInterface_(),this.cascadeEvents_("predraw"),this.rolledSeries_=[null];for(var e=1;e<this.numColumns();e++){var i=this.dataHandler_.extractSeries(this.rawData_,e,this.attributes_);this.rollPeriod_>1&&(i=this.dataHandler_.rollingAverage(i,this.rollPeriod_,this.attributes_)),this.rolledSeries_.push(i)}this.drawGraph_();var a=new Date;this.drawingTimeMs_=a-t},Yt.PointType=void 0,Yt.stackPoints_=function(t,e,i,a){for(var n=null,s=null,r=null,o=-1,l=function(e){if(!(o>=e))for(var i=e;i<t.length;++i)if(r=null,!isNaN(t[i].yval)&&null!==t[i].yval){o=i,r=t[i];break}},h=0;h<t.length;++h){var d=t[h],c=d.xval;void 0===e[c]&&(e[c]=0);var u=d.yval;isNaN(u)||null===u?"none"==a?u=0:(l(h),u=s&&r&&"none"!=a?s.yval+(r.yval-s.yval)*((c-s.xval)/(r.xval-s.xval)):s&&"all"==a?s.yval:r&&"all"==a?r.yval:0):s=d;var p=e[c];n!=c&&(p+=u,e[c]=p),n=c,d.yval_stacked=p,p>i[1]&&(i[1]=p),p<i[0]&&(i[0]=p)}},Yt.prototype.gatherDatasets_=function(t,e){var i,a,n,s,r,o,l=[],h=[],d=[],c={};for(i=t.length-1;i>=1;i--)if(this.visibility()[i-1]){if(e){o=t[i];var u=e[0],p=e[1];for(n=null,s=null,a=0;a<o.length;a++)o[a][0]>=u&&null===n&&(n=a),o[a][0]<=p&&(s=a);null===n&&(n=0);for(var g=n,v=!0;v&&g>0;)v=null===o[--g][1];null===s&&(s=o.length-1);var _=s;for(v=!0;v&&_<o.length-1;)v=null===o[++_][1];g!==n&&(n=g),_!==s&&(s=_),l[i-1]=[n,s],o=o.slice(n,s+1)}else o=t[i],l[i-1]=[0,o.length-1];var f=this.attr_("labels")[i],y=this.dataHandler_.getExtremeYValues(o,e,this.getBooleanOption("stepPlot",f)),x=this.dataHandler_.seriesToPoints(o,f,l[i-1][0]);this.getBooleanOption("stackedGraph")&&(void 0===d[r=this.attributes_.axisForSeries(f)]&&(d[r]=[]),Yt.stackPoints_(x,d[r],y,this.getBooleanOption("stackedGraphNaNFill"))),c[f]=y,h[i]=x}return{points:h,extremes:c,boundaryIds:l}},Yt.prototype.drawGraph_=function(){var t=new Date,e=this.is_initial_draw_;this.is_initial_draw_=!1,this.layout_.removeAllDatasets(),this.setColors_(),this.attrs_.pointSize=.5*this.getNumericOption("highlightCircleSize");var i=this.gatherDatasets_(this.rolledSeries_,this.dateWindow_),a=i.points,n=i.extremes;this.boundaryIds_=i.boundaryIds,this.setIndexByName_={};for(var s=this.attr_("labels"),r=0,o=1;o<a.length;o++)this.visibility()[o-1]&&(this.layout_.addDataset(s[o],a[o]),this.datasetIndex_[o]=r++);for(o=0;o<s.length;o++)this.setIndexByName_[s[o]]=o;if(this.computeYAxisRanges_(n),this.layout_.setYAxes(this.axes_),this.addXTicks_(),this.layout_.evaluate(),this.renderGraph_(e),this.getStringOption("timingName")){var l=new Date;console.log(this.getStringOption("timingName")+" - drawGraph: "+(l-t)+"ms")}},Yt.prototype.renderGraph_=function(t){this.cascadeEvents_("clearChart"),this.plotter_.clear();const e=this.getFunctionOption("underlayCallback");e&&e.call(this,this.hidden_ctx_,this.layout_.getPlotArea(),this,this);var i={canvas:this.hidden_,drawingContext:this.hidden_ctx_};this.cascadeEvents_("willDrawChart",i),this.plotter_.render(),this.cascadeEvents_("didDrawChart",i),this.lastRow_=-1,this.canvas_.getContext("2d").clearRect(0,0,this.width_,this.height_);const a=this.getFunctionOption("drawCallback");if(null!==a&&a.call(this,this,t),t)for(this.readyFired_=!0;this.readyFns_.length>0;)this.readyFns_.pop()(this)},Yt.prototype.computeYAxes_=function(){var t,e,i;for(this.axes_=[],t=0;t<this.attributes_.numAxes();t++)W(e={g:this},this.attributes_.axisOptions(t)),this.axes_[t]=e;for(t=0;t<this.axes_.length;t++)if(0===t)(i=(e=this.optionsViewForAxis_("y"+(t?"2":"")))("valueRange"))&&(this.axes_[t].valueRange=i);else{var a=this.user_attrs_.axes;a&&a.y2&&(i=a.y2.valueRange)&&(this.axes_[t].valueRange=i)}},Yt.prototype.numAxes=function(){return this.attributes_.numAxes()},Yt.prototype.axisPropertiesForSeries=function(t){return this.axes_[this.attributes_.axisForSeries(t)]},Yt.prototype.computeYAxisRanges_=function(t){for(var e,i,a,n,s,r=function(t){return isNaN(parseFloat(t))},o=this.attributes_.numAxes(),l=0;l<o;l++){var h=this.axes_[l],d=this.attributes_.getForAxis("logscale",l),c=this.attributes_.getForAxis("includeZero",l),u=this.attributes_.getForAxis("independentTicks",l);a=this.attributes_.seriesForAxis(l),e=!0,n=.1;const o=this.getNumericOption("yRangePad");if(null!==o&&(e=!1,n=o/this.plotter_.area.h),0===a.length)h.extremeRange=[0,1];else{for(var p,g,v=1/0,_=-1/0,f=0;f<a.length;f++)t.hasOwnProperty(a[f])&&(null!==(p=t[a[f]][0])&&(v=Math.min(p,v)),null!==(g=t[a[f]][1])&&(_=Math.max(g,_)));c&&!d&&(v>0&&(v=0),_<0&&(_=0)),v==1/0&&(v=0),_==-1/0&&(_=1),0==(i=_-v)&&(0!==_?i=Math.abs(_):(_=1,i=1));var y=_,m=v;e&&(d?(y=_+n*i,m=v):(y=_+n*i,(m=v-n*i)<0&&v>=0&&(m=0),y>0&&_<=0&&(y=0))),h.extremeRange=[m,y]}if(h.valueRange){var b=r(h.valueRange[0])?h.extremeRange[0]:h.valueRange[0],w=r(h.valueRange[1])?h.extremeRange[1]:h.valueRange[1];h.computedValueRange=[b,w]}else h.computedValueRange=h.extremeRange;if(!e)if(d){b=h.computedValueRange[0],w=h.computedValueRange[1];var A=n/(2*n-1),S=(n-1)/(2*n-1);h.computedValueRange[0]=x(b,w,A),h.computedValueRange[1]=x(b,w,S)}else b=h.computedValueRange[0],i=(w=h.computedValueRange[1])-b,h.computedValueRange[0]=b-i*n,h.computedValueRange[1]=w+i*n;if(u){h.independentTicks=u;var O=(C=this.optionsViewForAxis_("y"+(l?"2":"")))("ticker");h.ticks=O(h.computedValueRange[0],h.computedValueRange[1],this.plotter_.area.h,C,this),s||(s=h)}}if(void 0===s)throw'Configuration Error: At least one axis has to have the "independentTicks" option activated.';for(l=0;l<o;l++)if(!(h=this.axes_[l]).independentTicks){O=(C=this.optionsViewForAxis_("y"+(l?"2":"")))("ticker");for(var C,L=s.ticks,T=s.computedValueRange[1]-s.computedValueRange[0],D=h.computedValueRange[1]-h.computedValueRange[0],P=[],M=0;M<L.length;M++){var N=(L[M].v-s.computedValueRange[0])/T,E=h.computedValueRange[0]+N*D;P.push(E)}h.ticks=O(h.computedValueRange[0],h.computedValueRange[1],this.plotter_.area.h,C,this,P)}},Yt.prototype.detectTypeFromString_=function(t){var e=!1,i=t.indexOf("-");i>0&&"e"!=t[i-1]&&"E"!=t[i-1]||t.indexOf("/")>=0||isNaN(parseFloat(t))?e=!0:8==t.length&&t>"19700101"&&t<"20371231"&&(e=!0),this.setXAxisOptions_(e)},Yt.prototype.setXAxisOptions_=function(t){t?(this.attrs_.xValueParser=Y,this.attrs_.axes.x.valueFormatter=pt,this.attrs_.axes.x.ticker=d,this.attrs_.axes.x.axisLabelFormatter=ut):(this.attrs_.xValueParser=function(t){return parseFloat(t)},this.attrs_.axes.x.valueFormatter=function(t){return t},this.attrs_.axes.x.ticker=h,this.attrs_.axes.x.axisLabelFormatter=this.attrs_.axes.x.valueFormatter)},Yt.prototype.parseCSV_=function(t){var e,i,a=[],n=J(t),s=t.split(n||"\n"),r=this.getStringOption("delimiter");-1==s[0].indexOf(r)&&s[0].indexOf("\t")>=0&&(r="\t");var o,l=0;"labels"in this.user_attrs_||(l=1,this.attrs_.labels=s[0].split(r),this.attributes_.reparseSeries());for(var h=!1,d=this.attr_("labels").length,c=!1,u=l;u<s.length;u++){var p=s[u];if(0!==p.length&&"#"!=p[0]){var g=p.split(r);if(!(g.length<2)){var v=[];if(h||(this.detectTypeFromString_(g[0]),o=this.getFunctionOption("xValueParser"),h=!0),v[0]=o(g[0],this),this.fractions_)for(i=1;i<g.length;i++)2!=(e=g[i].split("/")).length?(console.error('Expected fractional "num/den" values in CSV data but found a value \''+g[i]+"' on line "+(1+u)+" ('"+p+"') which is not of this form."),v[i]=[0,0]):v[i]=[st(e[0],u,p),st(e[1],u,p)];else if(this.getBooleanOption("errorBars"))for(g.length%2!=1&&console.error("Expected alternating (value, stdev.) pairs in CSV data but line "+(1+u)+" has an odd number of values ("+(g.length-1)+"): '"+p+"'"),i=1;i<g.length;i+=2)v[(i+1)/2]=[st(g[i],u,p),st(g[i+1],u,p)];else if(this.getBooleanOption("customBars"))for(i=1;i<g.length;i++){var _=g[i];/^ *$/.test(_)?v[i]=[null,null,null]:3==(e=_.split(";")).length?v[i]=[st(e[0],u,p),st(e[1],u,p),st(e[2],u,p)]:console.warn('When using customBars, values must be either blank or "low;center;high" tuples (got "'+_+'" on line '+(1+u))}else for(i=1;i<g.length;i++)v[i]=st(g[i],u,p);if(a.length>0&&v[0]<a[a.length-1][0]&&(c=!0),v.length!=d&&console.error("Number of columns in line "+u+" ("+v.length+") does not agree with number of labels ("+d+") "+p),0===u&&this.attr_("labels")){var f=!0;for(i=0;f&&i<v.length;i++)v[i]&&(f=!1);if(f){console.warn("The dygraphs 'labels' option is set, but the first row of CSV data ('"+p+"') appears to also contain labels. Will drop the CSV labels and use the option labels.");continue}}a.push(v)}}}return c&&(console.warn("CSV is out of order; order it correctly to speed loading."),a.sort(function(t,e){return t[0]-e[0]})),a},Yt.prototype.parseArray_=function(t){if(0===t.length)return console.error("Can't plot empty data set"),null;if(0===t[0].length)return console.error("Data set cannot contain an empty row"),null;var e;if(function(t){const e=t[0],i=e[0];if("number"!=typeof i&&!G(i))throw new Error(`Expected number or date but got ${typeof i}: ${i}.`);for(let t=1;t<e.length;t++){const i=e[t];if(null!==i&&void 0!==i&&"number"!=typeof i&&!Z(i))throw new Error(`Expected number or array but got ${typeof i}: ${i}.`)}}(t),null===this.attr_("labels")){for(console.warn("Using default labels. Set labels explicitly via 'labels' in the options parameter"),this.attrs_.labels=["X"],e=1;e<t[0].length;e++)this.attrs_.labels.push("Y"+e);this.attributes_.reparseSeries()}else{var i=this.attr_("labels");if(i.length!=t[0].length)return console.error("Mismatch between number of labels ("+i+") and number of columns in array ("+t[0].length+")"),null}if(G(t[0][0])){this.attrs_.axes.x.valueFormatter=pt,this.attrs_.axes.x.ticker=d,this.attrs_.axes.x.axisLabelFormatter=ut;var a=function t(e){for(var i=[],a=0;a<e.length;a++)Z(e[a])?i.push(t(e[a])):i.push(e[a]);return i}(t);for(e=0;e<t.length;e++){if(0===a[e].length)return console.error("Row "+(1+e)+" of data is empty"),null;if(null===a[e][0]||"function"!=typeof a[e][0].getTime||isNaN(a[e][0].getTime()))return console.error("x value in row "+(1+e)+" is not a Date"),null;a[e][0]=a[e][0].getTime()}return a}return this.attrs_.axes.x.valueFormatter=function(t){return t},this.attrs_.axes.x.ticker=h,this.attrs_.axes.x.axisLabelFormatter=dt,t},Yt.prototype.parseDataTable_=function(t){var e=function(t){var e=String.fromCharCode(65+t%26);for(t=Math.floor(t/26);t>0;)e=String.fromCharCode(65+(t-1)%26)+e.toLowerCase(),t=Math.floor((t-1)/26);return e},i=t.getNumberOfColumns(),a=t.getNumberOfRows(),n=t.getColumnType(0);if("date"==n||"datetime"==n)this.attrs_.xValueParser=Y,this.attrs_.axes.x.valueFormatter=pt,this.attrs_.axes.x.ticker=d,this.attrs_.axes.x.axisLabelFormatter=ut;else{if("number"!=n)throw new Error("only 'date', 'datetime' and 'number' types are supported for column 1 of DataTable input (Got '"+n+"')");this.attrs_.xValueParser=function(t){return parseFloat(t)},this.attrs_.axes.x.valueFormatter=function(t){return t},this.attrs_.axes.x.ticker=h,this.attrs_.axes.x.axisLabelFormatter=this.attrs_.axes.x.valueFormatter}var s,r,o=[],l={},c=!1;for(s=1;s<i;s++){var u=t.getColumnType(s);if("number"==u)o.push(s);else{if("string"!=u||!this.getBooleanOption("displayAnnotations"))throw new Error("Only 'number' is supported as a dependent type with Gviz. 'string' is only supported if displayAnnotations is true");var p=o[o.length-1];l.hasOwnProperty(p)?l[p].push(s):l[p]=[s],c=!0}}var g=[t.getColumnLabel(0)];for(s=0;s<o.length;s++)g.push(t.getColumnLabel(o[s])),this.getBooleanOption("errorBars")&&(s+=1);this.attrs_.labels=g,i=g.length;var v=[],_=!1,f=[];for(s=0;s<a;s++){var y=[];if(void 0!==t.getValue(s,0)&&null!==t.getValue(s,0)){if("date"==n||"datetime"==n?y.push(t.getValue(s,0).getTime()):y.push(t.getValue(s,0)),this.getBooleanOption("errorBars"))for(r=0;r<i-1;r++)y.push([t.getValue(s,1+2*r),t.getValue(s,2+2*r)]);else{for(r=0;r<o.length;r++){var x=o[r];if(y.push(t.getValue(s,x)),c&&l.hasOwnProperty(x)&&null!==t.getValue(s,l[x][0])){var m={};m.series=t.getColumnLabel(x),m.xval=y[0],m.shortText=e(f.length),m.text="";for(var b=0;b<l[x].length;b++)b&&(m.text+="\n"),m.text+=t.getValue(s,l[x][b]);f.push(m)}}for(r=0;r<y.length;r++)isFinite(y[r])||(y[r]=null)}v.length>0&&y[0]<v[v.length-1][0]&&(_=!0),v.push(y)}else console.warn("Ignoring row "+s+" of DataTable because of undefined or null first column.")}_&&(console.warn("DataTable is out of order; order it correctly to speed loading."),v.sort(function(t,e){return t[0]-e[0]})),this.rawData_=v,f.length>0&&this.setAnnotations(f,!0),this.attributes_.reparseSeries()},Yt.prototype.cascadeDataDidUpdateEvent_=function(){this.cascadeEvents_("dataDidUpdate",{})},Yt.prototype.start_=function(){var t=this.file_;if("function"==typeof t&&(t=t()),Z(t))this.rawData_=this.parseArray_(t),this.cascadeDataDidUpdateEvent_(),this.predraw_();else if("object"==typeof t&&"function"==typeof t.getColumnRange)this.parseDataTable_(t),this.cascadeDataDidUpdateEvent_(),this.predraw_();else if("string"==typeof t)if(J(t))this.loadedEvent_(t);else{var e,i=this;(e=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")).onreadystatechange=function(){4==e.readyState&&(200!==e.status&&0!==e.status||i.loadedEvent_(e.responseText))},e.open("GET",t,!0),e.send(null)}else console.error("Unknown data format: "+typeof t)},Yt.prototype.updateOptions=function(t,e){void 0===e&&(e=!1);var i=t.file,a=Yt.copyUserAttrs_(t);"rollPeriod"in a&&(this.rollPeriod_=a.rollPeriod),"dateWindow"in a&&(this.dateWindow_=a.dateWindow);var n=function(t,e){var i={};if(t)for(var a=1;a<t.length;a++)i[t[a]]=!0;var n=function(t){for(var e in t)if(t.hasOwnProperty(e)&&!q[e])return!0;return!1};for(var s in e)if(e.hasOwnProperty(s))if("highlightSeriesOpts"==s||i[s]&&!e.series){if(n(e[s]))return!0}else if("series"==s||"axes"==s){var r=e[s];for(var o in r)if(r.hasOwnProperty(o)&&n(r[o]))return!0}else if(!q[s])return!0;return!1}(this.attr_("labels"),a);V(this.user_attrs_,a),this.attributes_.reparseSeries(),i?(this.cascadeEvents_("dataWillUpdate",{}),this.file_=i,e||this.start_()):e||(n?this.predraw_():this.renderGraph_(!1))},Yt.copyUserAttrs_=function(t){var e={};for(var i in t)t.hasOwnProperty(i)&&"file"!=i&&t.hasOwnProperty(i)&&(e[i]=t[i]);return e},Yt.prototype.resize=function(t,e){if(!this.resize_lock){this.resize_lock=!0,null===t!=(null===e)&&(console.warn("Dygraph.resize() should be called with zero parameters or two non-NULL parameters. Pretending it was zero."),t=e=null);var i=this.width_,a=this.height_;t?(this.maindiv_.style.width=t+"px",this.maindiv_.style.height=e+"px",this.width_=t,this.height_=e):(this.width_=this.maindiv_.clientWidth,this.height_=this.maindiv_.clientHeight),i==this.width_&&a==this.height_||(this.resizeElements_(),this.predraw_()),this.resize_lock=!1}},Yt.prototype.adjustRoll=function(t){this.rollPeriod_=t,this.predraw_()},Yt.prototype.visibility=function(){for(this.getOption("visibility")||(this.attrs_.visibility=[]);this.getOption("visibility").length<this.numColumns()-1;)this.attrs_.visibility.push(!0);return this.getOption("visibility")},Yt.prototype.setVisibility=function(t,e){var i=this.visibility(),a=!1;if(Array.isArray(t)||(null!==t&&"object"==typeof t?a=!0:t=[t]),a)for(var n in t)t.hasOwnProperty(n)&&(n<0||n>=i.length?console.warn("Invalid series number in setVisibility: "+n):i[n]=t[n]);else for(n=0;n<t.length;n++)"boolean"==typeof t[n]?n>=i.length?console.warn("Invalid series number in setVisibility: "+n):i[n]=t[n]:t[n]<0||t[n]>=i.length?console.warn("Invalid series number in setVisibility: "+t[n]):i[t[n]]=e;this.predraw_()},Yt.prototype.size=function(){return{width:this.width_,height:this.height_}},Yt.prototype.setAnnotations=function(t,e){this.annotations_=t,this.layout_?(this.layout_.setAnnotations(this.annotations_),e||this.predraw_()):console.warn("Tried to setAnnotations before dygraph was ready. Try setting them in a ready() block. See dygraphs.com/tests/annotation.html")},Yt.prototype.annotations=function(){return this.annotations_},Yt.prototype.getLabels=function(){var t=this.attr_("labels");return t?t.slice():null},Yt.prototype.indexFromSetName=function(t){return this.setIndexByName_[t]},Yt.prototype.getRowForX=function(t){for(var e=0,i=this.numRows()-1;e<=i;){var a=i+e>>1,n=this.getValue(a,0);if(n<t)e=a+1;else if(n>t)i=a-1;else{if(e==a)return a;i=a}}return null},Yt.prototype.ready=function(t){this.is_initial_draw_?this.readyFns_.push(t):t.call(this,this)},Yt.prototype.addAndTrackEvent=function(t,e,i){b(t,e,i),this.registeredEvents_.push({elem:t,type:e,fn:i})},Yt.prototype.removeTrackedEvents_=function(){if(this.registeredEvents_)for(var t=0;t<this.registeredEvents_.length;t++){var e=this.registeredEvents_[t];w(e.elem,e.type,e.fn)}this.registeredEvents_=[]},Yt.PLUGINS=[Rt,Pt,Ht,Mt,Dt,kt],Yt.GVizChart=It,Yt.DASHED_LINE=[7,3],Yt.DOT_DASH_LINE=[7,2,2,2],Yt.dateAxisLabelFormatter=ut,Yt.toRGB_=nt,Yt.findPos=O,Yt.pageX=C,Yt.pageY=L,Yt.dateString_=F,Yt.defaultInteractionModel=_t.defaultModel,Yt.nonInteractiveModel=Yt.nonInteractiveModel_=_t.nonInteractiveModel_,Yt.Circles=Q,Yt.Plugins={Legend:Rt,Axes:Pt,Annotations:Dt,ChartLabels:Mt,Grid:kt,RangeSelector:Ht},Yt.DataHandlers={DefaultHandler:At,BarsHandler:St,CustomBarsHandler:Ct,DefaultFractionHandler:Lt,ErrorBarsHandler:Ot,FractionsBarsHandler:Tt},Yt.startPan=_t.startPan,Yt.startZoom=_t.startZoom,Yt.movePan=_t.movePan,Yt.moveZoom=_t.moveZoom,Yt.endPan=_t.endPan,Yt.endZoom=_t.endZoom,Yt.numericLinearTicks=function(t,e,i,a,n,s){return h(t,e,i,function(t){return"logscale"!==t&&a(t)},n,s)},Yt.numericTicks=h,Yt.dateTicker=d,Yt.Granularity=c,Yt.getDateAxis=_,Yt.floatFormat=M;class Xt{constructor(){this.options=new n,this.hiddenData=[],this.unit="",this.type="line",this.responsive=!1,this.standalone=!0,this.LOG=new i(Xt),this._options={timeMode:"date",showRangeSelector:!0,gridLineColor:"#8e8e8e"},this.uuid="chart-"+a.guid().split("-").join(""),this.ticks=[],this.visibility=[],this.parentWidth=-1}onResize(){this.el.parentElement.clientWidth!==this.parentWidth&&(this.parentWidth=this.el.parentElement.clientWidth,this._chart&&(this.initialHeight||(this.initialHeight=this.el.parentElement.clientHeight),clearTimeout(this.resizeTimer),this.resizeTimer=setTimeout(()=>{this.LOG.debug(["onResize"],this.el.parentElement.clientWidth);const t=(this.responsive?this.initialHeight:Xt.DEFAULT_HEIGHT)-30,e=(this.responsive?this.el.parentElement.clientWidth:Xt.DEFAULT_WIDTH)-5;this._chart.resize(e,this.displayGraph()?t:30),this.warpViewChartResize.emit({w:e,h:this.displayGraph()?t:30})},250)))}onHideData(t,e){e.length!==t.length&&(this.parentWidth=0,this.LOG.debug(["hiddenData"],t),this.drawChart())}onData(t,e){e!==t&&(this.LOG.debug(["data"],t),this.drawChart())}onOptions(t,e){e!==t&&(this.LOG.debug(["options"],t),this.drawChart())}handleMouseOut(t){this.LOG.debug(["handleMouseOut"],t);const e=this.el.querySelector(".dygraph-legend");window.setTimeout(()=>{e.style.display="none"},1e3)}gtsToData(t){this.LOG.debug(["gtsToData"],t),this.ticks=[],this.visibility=[];const i=[],a={};let n=[],o=[];if(t)return t=e.flattenGtsIdArray(t,0).res,t=e.flatDeep(t),this.LOG.debug(["gtsToData","gtsList"],t),(n=new Array(t.length)).push("Date"),o=[],(t=t.filter(t=>t.v&&e.isGtsToPlot(t))).forEach((i,r)=>{let l=e.serializeGtsMetadata(i);e.gtsSort(i),i.v.forEach(e=>{const i=e[0];a[i]||(a[i]=new Array(t.length),a[i].fill(null)),a[i][r]=e[e.length-1]});let h=s.getColor(i.id);n.push(l),o.push(h),this.visibility.push(0===this.hiddenData.filter(t=>t===i.id).length)}),this.LOG.debug(["gtsToData","this.visibility"],this.visibility),n=n.filter(t=>!!t),Object.keys(a).forEach(t=>{if(this._options.timeMode&&"timestamp"===this._options.timeMode)i.push([parseInt(t)].concat(a[t].slice(0,n.length-1))),this.ticks.push(parseInt(t));else{const e=Math.floor(parseInt(t)/1e3);i.push([r.utc(e).toDate()].concat(a[t].slice(0,n.length-1))),this.ticks.push(e)}}),i.sort((t,e)=>t[0]>e[0]?1:-1),this.LOG.debug(["gtsToData","datasets"],[i,n,o]),{datasets:i,labels:n,colors:o.slice(0,n.length)}}isStepped(){return"step"===this.type}isStacked(){return"area"===this.type}static toFixed(t){let e,i="";return Math.abs(t)<1?(e=parseInt(t.toString().split("e-")[1]))&&(t*=Math.pow(10,e-1),i="0."+new Array(e).join("0")+t.toString().substring(2)):(i=t.toString(),(e=parseInt(t.toString().split("+")[1]))>20&&(e-=20,i=(t/=Math.pow(10,e)).toString(),i+=new Array(e+1).join("0"))),i}static formatLabel(t){const e=t.split("{");let i=`<span class='gts-classname'>${e[0]}</span>`;if(e.length>1){i+="<span class='gts-separator'>{</span>";const t=e[1].substr(0,e[1].length-1).split(",");t.length>0&&t.forEach((e,a)=>{const n=e.split("=");e.length>1&&(i+=`<span><span class='gts-labelname'>${n[0]}</span><span class='gts-separator'>=</span><span class='gts-labelvalue'>${n[1]}</span>`,a!==t.length-1&&(i+="<span>, </span>"))}),i+="<span class='gts-separator'>}</span>"}if(e.length>2){i+="<span class='gts-separator'>{</span>";const t=e[2].substr(0,e[2].length-1).split(",");t.length>0&&t.forEach((e,a)=>{const n=e.split("=");e.length>1&&(i+=`<span><span class='gts-attrname'>${n[0]}</span><span class='gts-separator'>=</span><span class='gts-attrvalue'>${n[1]}</span>`,a!==t.length-1&&(i+="<span>, </span>"))}),i+="<span class='gts-separator'>}</span>"}return i}legendFormatter(t){if(null===t.x)return"<br>"+t.series.map(function(t){if(!t.isVisible)return;let e=Xt.formatLabel(t.labelHTML)+": "+Xt.toFixed(parseFloat(t.yHTML));return t.isHighlighted&&(e=`<b>${e}</b>`),Xt.formatLabel(t.labelHTML)+" "+e}).join("<br>");let e=`<b>${t.xHTML}</b>`;return t.series.forEach(function(t){if(t.isVisible&&t.yHTML){let i=Xt.formatLabel(t.labelHTML)+": "+Xt.toFixed(parseFloat(t.yHTML));t.isHighlighted&&(i=`<b>${i}</b>`),e+=`<br>${t.dashHTML} ${i}`}}),e}highlightCallback(t){this.el.querySelector(".dygraph-legend").style.display="block",this.pointHover.emit({x:t.offsetX,y:t.offsetY})}scroll(t,e){if(!t.altKey)return;this.LOG.debug(["scroll"],e);const i=(t.detail?-1*t.detail:t.wheelDelta/40)/50;t.offsetX&&t.offsetY||(t.offsetX=t.layerX-t.target.offsetLeft,t.offsetY=t.layerY-t.target.offsetTop);const a=Xt.offsetToPercentage(e,t.offsetX,t.offsetY),n=a[0],s=a[1];Xt.zoom(e,i,n,s),t.preventDefault()}static offsetToPercentage(t,e,i){const a=t.toDomCoords(t.xAxisRange()[0],null)[0],n=t.yAxisRange(0),s=t.toDomCoords(null,n[1])[1],r=e-a,o=i-s,l=t.toDomCoords(t.xAxisRange()[1],null)[0]-a,h=t.toDomCoords(null,n[0])[1]-s;return[0===l?0:r/l,1-(0===h?0:o/h)]}static adjustAxis(t,e,i){const a=(t[1]-t[0])*e,n=[a*i,a*(1-i)];return[t[0]+n[0],t[1]-n[1]]}static zoom(t,e,i,a){i=i||.5,a=a||.5;const n=t.yAxisRanges(),s=[];for(let t=0;t<n.length;t++)s[t]=Xt.adjustAxis(n[t],e,a);t.updateOptions({dateWindow:Xt.adjustAxis(t.xAxisRange(),e,i),valueRange:s[0]})}drawCallback(t,e){this.LOG.debug(["drawCallback"],[t.dateWindow_,e]),t.dateWindow_?this.boundsDidChange.emit({bounds:{min:t.dateWindow_[0],max:t.dateWindow_[1]}}):this.boundsDidChange.emit({bounds:{min:Math.min.apply(null,this.ticks),max:Math.max.apply(null,this.ticks)}})}drawChart(){this.LOG.debug(["drawChart","this.data"],[this.data]),this._options=a.mergeDeep(this._options,this.options);let t=e.getData(this.data),i=t.data;this._options=a.mergeDeep(this._options,t.globalParams);const n=this.gtsToData(i);this.LOG.debug(["drawChart","dataToplot"],n);const s=this.el.querySelector("#"+this.uuid);if(n){const t=this._options.gridLineColor;let e=Yt.defaultInteractionModel;e.mousewheel=this.scroll.bind(this),e.mouseout=this.handleMouseOut.bind(this);let i={height:this.displayGraph()?(this.responsive?this.el.parentElement.clientHeight:Xt.DEFAULT_HEIGHT)-30:30,width:(this.responsive?this.el.parentElement.clientWidth:Xt.DEFAULT_WIDTH)-5,labels:n.labels,showRoller:!1,showRangeSelector:this._options.showRangeSelector||!0,showInRangeSelector:!0,connectSeparatedPoints:!0,colors:n.colors,legend:"follow",stackedGraph:this.isStacked(),strokeBorderWidth:this.isStacked()?null:0,strokeWidth:2,stepPlot:this.isStepped(),ylabel:this.unit,labelsSeparateLines:!0,highlightSeriesBackgroundAlpha:1,highlightSeriesOpts:{strokeWidth:3,strokeBorderWidth:0,highlightCircleSize:3,showInRangeSelector:!0},visibility:this.visibility,labelsUTC:!0,gridLineColor:t,axisLineColor:t,axes:{x:{drawAxis:this.displayGraph()},y:{axisLabelFormatter:t=>Xt.toFixed(t)}},legendFormatter:this.legendFormatter,highlightCallback:this.highlightCallback.bind(this),drawCallback:this.drawCallback.bind(this),axisLabelWidth:this.standalone?50:94,rightGap:this.standalone?0:20,interactionModel:e};this.displayGraph()||(i.xAxisHeight=30,i.rangeSelectorHeight=30,s.style.height="30px"),"timestamp"===this._options.timeMode&&(i.axes.x.axisLabelFormatter=(t=>Xt.toFixed(t))),this._chart=new Yt(s,n.datasets||[],i),this.LOG.debug(["options.height"],i.height),this.onResize()}}displayGraph(){let t=!1;return this.visibility.forEach(e=>{t=e||t}),t}componentDidLoad(){this.drawChart()}render(){return t("div",null,t("div",{id:this.uuid,class:"chart"}))}static get is(){return"warp-view-chart"}static get properties(){return{data:{type:String,attr:"data",watchCallbacks:["onData"]},el:{elementRef:!0},hiddenData:{type:"Any",attr:"hidden-data",watchCallbacks:["onHideData"]},options:{type:"Any",attr:"options",watchCallbacks:["onOptions"]},responsive:{type:Boolean,attr:"responsive"},standalone:{type:Boolean,attr:"standalone"},type:{type:String,attr:"type"},unit:{type:String,attr:"unit"}}}static get events(){return[{name:"boundsDidChange",method:"boundsDidChange",bubbles:!0,cancelable:!0,composed:!0},{name:"pointHover",method:"pointHover",bubbles:!0,cancelable:!0,composed:!0},{name:"warpViewChartResize",method:"warpViewChartResize",bubbles:!0,cancelable:!0,composed:!0}]}static get listeners(){return[{name:"window:resize",method:"onResize",passive:!0}]}static get style(){return".dygraph-annotation,.dygraph-legend{overflow:hidden}.dygraph-legend{position:absolute;font-size:14px;z-index:10;width:250px;background:#fff;line-height:normal;text-align:left}.dygraph-legend-dash,.dygraph-legend-line{display:inline-block;position:relative;bottom:.5ex;height:1px;border-bottom-width:2px;border-bottom-style:solid}.dygraph-legend-line{padding-left:1em}.dygraph-annotation,.dygraph-roller{position:absolute;z-index:10}.dygraph-default-annotation{border:1px solid #000;background-color:#fff;text-align:center}.dygraph-axis-label{z-index:10;line-height:normal;overflow:hidden;color:#000}.dygraph-title{font-weight:700;z-index:10;text-align:center}.dygraph-xlabel{text-align:center}.dygraph-label-rotate-left{text-align:center;transform:rotate(90deg);-webkit-transform:rotate(90deg);-moz-transform:rotate(90deg);-o-transform:rotate(90deg);-ms-transform:rotate(90deg)}.dygraph-label-rotate-right{text-align:center;transform:rotate(-90deg);-webkit-transform:rotate(-90deg);-moz-transform:rotate(-90deg);-o-transform:rotate(-90deg);-ms-transform:rotate(-90deg)}/*!\n *  Copyright 2018  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */warp-view-chart .dygraph-legend,warp-view-chart .tooltip{background-color:var(--warp-view-chart-legend-bg,#000)!important;color:var(--warp-view-chart-legend-color,#fff)!important;padding:10px;border:1px solid grey;border-radius:5px;-webkit-box-shadow:none;box-shadow:none;pointer-events:none;font-size:10px}warp-view-chart .dygraph-legend .gts-classname,warp-view-chart .tooltip .gts-classname{color:var(--gts-classname-font-color,#0074d9)}warp-view-chart .dygraph-legend .gts-labelname,warp-view-chart .tooltip .gts-labelname{color:var(--gts-labelname-font-color,#19a979)}warp-view-chart .dygraph-legend .gts-attrname,warp-view-chart .tooltip .gts-attrname{color:var(--gts-labelname-font-color,#ed4a7b)}warp-view-chart .dygraph-legend .gts-separator,warp-view-chart .tooltip .gts-separator{color:var(--gts-separator-font-color,#bbb)}warp-view-chart .dygraph-legend .gts-labelvalue,warp-view-chart .tooltip .gts-labelvalue{color:var(--gts-labelvalue-font-color,#aaa);font-style:italic}warp-view-chart .dygraph-legend .gts-attrvalue,warp-view-chart .tooltip .gts-attrvalue{color:var(--gts-labelvalue-font-color,#aaa);font-style:italic}warp-view-chart div.chart{width:var(--warp-view-chart-width,100%);height:var(--warp-view-chart-height,100%)}warp-view-chart div.chart .dygraph-axis-label,warp-view-chart div.chart .dygraph-label{color:var(--warp-view-chart-label-color,#8e8e8e)!important}"}}Xt.DEFAULT_WIDTH=800,Xt.DEFAULT_HEIGHT=600;export{Xt as WarpViewChart};