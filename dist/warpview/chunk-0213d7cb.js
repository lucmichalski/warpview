/*! Built with http://stenciljs.com */
const{h:t}=window.warpview;class e{}class s{static cleanArray(t){return t.filter(t=>!!t)}static unique(t){let e={},s=[];for(let r=0,a=t.length;r<a;++r)e.hasOwnProperty(t[r])||(s.push(t[r]),e[t[r]]=1);return s}static isArray(t){return t&&"object"==typeof t&&t instanceof Array&&"number"==typeof t.length&&"function"==typeof t.splice&&!t.propertyIsEnumerable("length")}static isValidResponse(t){let e;try{e=JSON.parse(t)}catch(e){return console.error("Response non JSON compliant",t),!1}return!!s.isArray(e)||(console.error("Response isn't an Array",e),!1)}static isEmbeddedImage(t){return!("string"!=typeof t||!/^data:image/.test(t))}static isEmbeddedImageObject(t){return!(null===t||null===t.image||null===t.caption||!s.isEmbeddedImage(t.image))}static isPositionArray(t){if(!t||!t.positions)return!1;if(s.isPositionsArrayWithValues(t)||s.isPositionsArrayWithTwoValues(t))return!0;for(let e in t.positions){if(t.positions[e].length<2||t.positions[e].length>3)return!1;for(let s in t.positions[e])if("number"!=typeof t.positions[e][s])return!1}return!0}static isPositionsArrayWithValues(t){if(null===t||null===t.positions)return!1;for(let e in t.positions){if(3!==t.positions[e].length)return!1;for(let s in t.positions[e])if("number"!=typeof t.positions[e][s])return!1}return!0}static isPositionsArrayWithTwoValues(t){if(null===t||null===t.positions)return!1;for(let e in t.positions){if(4!==t.positions[e].length)return!1;for(let s in t.positions[e])if("number"!=typeof t.positions[e][s])return!1}return!0}static metricFromJSON(t){let e={ts:t[0],value:void 0,alt:void 0,lon:void 0,lat:void 0};switch(t.length){case 2:e.value=t[1];break;case 3:e.alt=t[1],e.value=t[2];break;case 4:e.lat=t[1],e.lon=t[2],e.value=t[3];break;case 5:e.lat=t[1],e.lon=t[2],e.alt=t[3],e.value=t[4]}return e}static gtsFromJSON(t,e){return{gts:{c:t.c,l:t.l,a:t.a,v:t.v,id:e}}}static gtsFromJSONList(t,e){let r,a=[];return(t||[]).forEach((t,n)=>{let o=t;t.gts&&(o=t.gts),r=void 0!==e&&""!==e?e+"-"+n:n,s.isArray(o)&&a.push(s.gtsFromJSONList(o,r)),s.isGts(o)&&a.push(s.gtsFromJSON(o,r)),s.isEmbeddedImage(o)&&a.push({image:o,caption:"Image",id:r}),s.isEmbeddedImageObject(o)&&a.push({image:o.image,caption:o.caption,id:r})}),{content:a||[]}}static flatDeep(t){return t.reduce((t,e)=>Array.isArray(e)?t.concat(s.flatDeep(e)):t.concat(e),[])}static flattenGtsIdArray(t,e){const r=[];return console.log("flattenGtsIdArray",t,e),s.isGts(t)&&(t=[t]),t.forEach(t=>{if(console.log("flattenGtsIdArray a.forEach",t,e),s.isArray(t)){console.log("flattenGtsIdArray d isArray");const a=s.flattenGtsIdArray(t,e);r.push(a.res),e=a.r}else t.v&&(t.id=e,r.push(t),e++);console.log("flattenGtsIdArray res r",r,e)}),console.log("flattenGtsIdArray res",r),{res:r,r:e}}static serializeGtsMetadata(t){let e=[];Object.keys(t.l).forEach(s=>{e.push(s+"="+t.l[s])});let s=[];return Object.keys(t.a).forEach(e=>{s.push(e+"="+t.a[e])}),t.c+"{"+e.join(",")+(s.length>0?",":"")+s.join(",")+"}"}static gtsToPath(t){let e=[];t.v=t.v.sort(function(t,e){return t[0]-e[0]});for(let s=0;s<t.v.length;s++){let r=t.v[s];r.length,r.length,4===r.length&&e.push({ts:Math.floor(r[0]/1e3),lat:r[1],lon:r[2],val:r[3]}),5===r.length&&e.push({ts:Math.floor(r[0]/1e3),lat:r[1],lon:r[2],elev:r[3],val:r[4]})}return e}static equalMetadata(t,e){if(!(void 0!==t.c&&void 0!==e.c&&void 0!==t.l&&void 0!==e.l&&t.l instanceof Object&&e.l instanceof Object))return console.error("[warp10-gts-tools] equalMetadata - Error in GTS, metadata is not well formed"),!1;if(t.c!==e.c)return!1;for(let s in t.l)if(!e.l.hasOwnProperty(s)||t.l[s]!==e.l[s])return!1;for(let s in e.l)if(!t.l.hasOwnProperty(s))return!1;return!0}static isGts(t){return!(!t||null===t.c||null===t.l||null===t.a||null===t.v||!s.isArray(t.v))}static isGtsToPlot(t){if(!s.isGts(t)||0===t.v.length)return!1;for(let e=0;e<t.v.length;e++)if(null!==t.v[e][t.v[e].length-1]){if("number"==typeof t.v[e][t.v[e].length-1]||void 0!==t.v[e][t.v[e].length-1].constructor.prototype.toFixed)return!0;break}return!1}static isBooleanGts(t){if(!s.isGts(t)||0===t.v.length)return!1;for(let e=0;e<t.v.length;e++)if(null!==t.v[e][t.v[e].length-1]){if("boolean"!=typeof t.v[e][t.v[e].length-1])return!0;break}return!1}static isGtsToAnnotate(t){if(!s.isGts(t)||0===t.v.length)return!1;for(let e=0;e<t.v.length;e++)if(null!==t.v[e][t.v[e].length-1]){if("number"!=typeof t.v[e][t.v[e].length-1]&&t.v[e][t.v[e].length-1].constructor&&"Big"!==t.v[e][t.v[e].length-1].constructor.name&&void 0===t.v[e][t.v[e].length-1].constructor.prototype.toFixed)return!0;break}return!1}static gtsSort(t){t.isSorted||(t.v=t.v.sort(function(t,e){return t[0]-e[0]}),t.isSorted=!0)}static gtsTimeRange(t){return s.gtsSort(t),0===t.v.length?null:[t.v[0][0],t.v[t.v.length-1][0]]}static getData(t){return"string"==typeof t?s.getData(JSON.parse(t)):t&&t.hasOwnProperty("data")?t:s.isArray(t)&&t.length>0&&t[0].data?t[0]:s.isArray(t)?{data:t}:new e}static getDivider(t){let e=1e3;return"ms"===t&&(e=1),"ns"===t&&(e=1e6),e}}s.formatLabel=(t=>{const e=t.split("{");let s=`<span class="gtsInfo"><span class='gts-classname'>${e[0]}</span>`;if(e.length>1){s+="<span class='gts-separator'>{</span>";const t=e[1].substr(0,e[1].length-1).split(",");t.length>0&&t.forEach((e,r)=>{const a=e.split("=");e.length>1&&(s+=`<span><span class='gts-labelname'>${a[0]}</span><span class='gts-separator'>=</span><span class='gts-labelvalue'>${a[1]}</span>`,r!==t.length-1&&(s+="<span>, </span>"))}),s+="<span class='gts-separator'>}</span>"}if(e.length>2){s+="<span class='gts-separator'>{</span>";const t=e[2].substr(0,e[2].length-1).split(",");t.length>0&&t.forEach((e,r)=>{const a=e.split("=");e.length>1&&(s+=`<span><span class='gts-attrname'>${a[0]}</span><span class='gts-separator'>=</span><span class='gts-attrvalue'>${a[1]}</span>`,r!==t.length-1&&(s+="<span>, </span>"))}),s+="<span class='gts-separator'>}</span>"}return s+="</span>"});class r{constructor(t){this.className=t.name}static isArray(t){return t&&"object"==typeof t&&t instanceof Array&&"number"==typeof t.length&&"function"==typeof t.splice&&!t.propertyIsEnumerable("length")}log(t,e,s){let r=[];switch(r.push(`[${this.className}] ${e.join(" - ")}`),r=r.concat(s),t){case a.DEBUG:break;case a.ERROR:console.error(...r);break;case a.INFO:console.log(...r);break;case a.WARN:console.warn(...r);break;default:console.log(...r)}}debug(t,...e){this.log(a.DEBUG,t,e)}error(t,...e){this.log(a.ERROR,t,e)}warn(t,...e){this.log(a.WARN,t,e)}info(t,...e){this.log(a.INFO,t,e)}}var a;!function(t){t[t.DEBUG=0]="DEBUG",t[t.ERROR=1]="ERROR",t[t.WARN=2]="WARN",t[t.INFO=3]="INFO"}(a||(a={}));class n{constructor(){this.showDots=!0,this.timeUnit="us"}}class o{static guid(){let t,e,s="";for(t=0;t<32;t++)e=16*Math.random()|0,8!=t&&12!=t&&16!=t&&20!=t||(s+="-"),s+=(12==t?4:16==t?3&e|8:e).toString(16);return s}static mergeDeep(...t){let e={},s=0;for(;s<arguments.length;s++){const t=arguments[s];o.merge(t,e,!0)}return e}static merge(t,e,s){for(const r in t)t.hasOwnProperty(r)&&(s&&"[object Object]"===Object.prototype.toString.call(t[r])?e[r]=o.mergeDeep(e[r],t[r]):e[r]=t[r])}static isObject(t){return t&&"object"==typeof t&&!Array.isArray(t)}static getTooltipCallbacks(){return{title:t=>t[0].xLabel,label:(t,e)=>{let s=e.datasets[t.datasetIndex].label||"";return s&&(s+=": "),s+t.yLabel}}}static buildImage(t,e,s){const r=new Image(t,e),a=`<svg width="${t}px" height="${e}px" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 ${t} ${e}" preserveAspectRatio="xMidYMid">\n<rect width="${t}" height="${e}" style="fill:${s};" ></rect>\n</svg>`;return r.src="data:image/svg+xml;base64,"+btoa(a),r}}export{s as a,r as b,n as c,o as d,e};