!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common"),require("moment-timezone"),require("deep-equal"),require("rxjs"),require("rxjs/operators"),require("rxjs/internal/observable/of"),require("@angular/common/http"),require("fitty"),require("moment"),require("d3"),require("d3-selection"),require("leaflet"),require("leaflet.heat"),require("leaflet.markercluster"),require("leaflet-ant-path"),require("nouislider"),require("@angular/forms"),require("angular-resize-event"),require("plotly.js-dist"),require("event-drops")):"function"==typeof define&&define.amd?define("warpview",["exports","@angular/core","@angular/common","moment-timezone","deep-equal","rxjs","rxjs/operators","rxjs/internal/observable/of","@angular/common/http","fitty","moment","d3","d3-selection","leaflet","leaflet.heat","leaflet.markercluster","leaflet-ant-path","nouislider","@angular/forms","angular-resize-event","plotly.js-dist","event-drops"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).warpview={},e.ng.core,e.ng.common,e.moment,e.deepEqual,e.rxjs,e.rxjs.operators,e.rxjs["internal/observable/of"],e.ng.common.http,e.fitty,e.moment$1,e.d3,e.d3Selection,e.Leaflet,null,null,e.leafletAntPath,e.noUiSlider,e.ng.forms,e.angularResizeEvent,e.Plotlyjs,e.eventDrops)}(this,(function(e,t,i,a,n,o,r,s,p,l,h,d,c,g,u,w,f,v,m,b,y,A){"use strict";function S(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}function x(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(i){if("default"!==i){var a=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(t,i,a.get?a:{enumerable:!0,get:function(){return e[i]}})}})),t.default=e,Object.freeze(t)}var L=S(a),O=S(n),C=S(l),I=S(h),E=x(d),D=S(g),N=S(A),k=function(e,t){return(k=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)};function T(e,t){function i(){this.constructor=e}k(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}function V(e,t,i,a){return new(i||(i=Promise))((function(n,o){function r(e){try{p(a.next(e))}catch(e){o(e)}}function s(e){try{p(a.throw(e))}catch(e){o(e)}}function p(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,s)}p((a=a.apply(e,t||[])).next())}))}function G(e,t){var i,a,n,o,r={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(i)throw new TypeError("Generator is already executing.");for(;r;)try{if(i=1,a&&(n=2&o[0]?a.return:o[0]?a.throw||((n=a.return)&&n.call(a),0):a.next)&&!(n=n.call(a,o[1])).done)return n;switch(a=0,n&&(o=[2&o[0],n.value]),o[0]){case 0:case 1:n=o;break;case 4:return r.label++,{value:o[1],done:!1};case 5:r.label++,a=o[1],o=[0];continue;case 7:o=r.ops.pop(),r.trys.pop();continue;default:if(!(n=r.trys,(n=n.length>0&&n[n.length-1])||6!==o[0]&&2!==o[0])){r=0;continue}if(3===o[0]&&(!n||o[1]>n[0]&&o[1]<n[3])){r.label=o[1];break}if(6===o[0]&&r.label<n[1]){r.label=n[1],n=o;break}if(n&&r.label<n[2]){r.label=n[2],r.ops.push(o);break}n[2]&&r.ops.pop(),r.trys.pop();continue}o=t.call(e,r)}catch(e){o=[6,e],a=0}finally{i=n=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}Object.create;function _(e,t){var i="function"==typeof Symbol&&e[Symbol.iterator];if(!i)return e;var a,n,o=i.call(e),r=[];try{for(;(void 0===t||t-- >0)&&!(a=o.next()).done;)r.push(a.value)}catch(e){n={error:e}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}return r}function U(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(_(arguments[t]));return e}Object.create;var B,R=function(){},Y=function(){function e(e,t){void 0===t&&(t=!1),this.isDebug=!1,this.className=e.name,this.isDebug=t}return e.prototype.setDebug=function(e){this.isDebug=e},e.prototype.log=function(e,t,i){var a=[];switch(a.push("["+(new Date).toISOString()+" - ["+this.className+"] "+t.join(" - ")),a=a.concat(i),e){case B.DEBUG:this.isDebug&&console.debug.apply(console,U(a));break;case B.ERROR:console.error.apply(console,U(a));break;case B.INFO:console.log.apply(console,U(a));break;case B.WARN:console.warn.apply(console,U(a));break;default:this.isDebug&&console.log.apply(console,U(a))}},e.prototype.debug=function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];this.log(B.DEBUG,e,t)},e.prototype.error=function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];this.log(B.ERROR,e,t)},e.prototype.warn=function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];this.log(B.WARN,e,t)},e.prototype.info=function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];this.log(B.INFO,e,t)},e}();!function(e){e[e.DEBUG=0]="DEBUG",e[e.ERROR=1]="ERROR",e[e.WARN=2]="WARN",e[e.INFO=3]="INFO"}(B||(B={}));var z=function(){function e(){}return e.cleanArray=function(e){return e.filter((function(e){return!!e}))},e.unique=function(e){for(var t={},i=[],a=0,n=e.length;a<n;++a)t.hasOwnProperty(e[a])||(i.push(e[a]),t[e[a]]=1);return i},e.isArray=function(e){return e&&"object"==typeof e&&e instanceof Array&&"number"==typeof e.length&&"function"==typeof e.splice&&!e.propertyIsEnumerable("length")},e.formatElapsedTime=function(e){return e<1e3?e.toFixed(3)+" ns":e<1e6?(e/1e3).toFixed(3)+" Î¼s":e<1e9?(e/1e6).toFixed(3)+" ms":e<1e12?(e/1e9).toFixed(3)+" s ":(e/6e10).toFixed(3)+" m "},e.isValidResponse=function(t){var i;try{i=JSON.parse(t)}catch(e){return this.LOG.error(["isValidResponse"],"Response non JSON compliant",t),!1}return!!e.isArray(i)||(this.LOG.error(["isValidResponse"],"Response isn't an Array",i),!1)},e.isEmbeddedImage=function(e){return!("string"!=typeof e||!/^data:image/.test(e))},e.isEmbeddedImageObject=function(t){return!(null===t||null===t.image||null===t.caption||!e.isEmbeddedImage(t.image))},e.isPositionArray=function(t){return!(!t||!t.positions)&&(e.isPositionsArrayWithValues(t)||e.isPositionsArrayWithTwoValues(t)||(t.positions||[]).forEach((function(e){if(e.length<2||e.length>3)return!1;for(var t in e)if("number"!=typeof e[t])return!1})),!0)},e.isPositionsArrayWithValues=function(e){return null!==e&&null!==e.positions&&((e.positions||[]).forEach((function(e){if(3!==e.length)return!1;for(var t in e)if("number"!=typeof e[t])return!1})),!0)},e.isPositionsArrayWithTwoValues=function(e){return null!==e&&null!==e.positions&&((e.positions||[]).forEach((function(e){if(4!==e.length)return!1;for(var t in e)if("number"!=typeof e[t])return!1})),!0)},e.gtsFromJSON=function(e,t){return{gts:{c:e.c,l:e.l,a:e.a,v:e.v,id:t}}},e.gtsFromJSONList=function(t,i){var a,n=[];return(t||[]).forEach((function(t,o){var r=t;t.gts&&(r=t.gts),a=void 0!==i&&""!==i?i+"-"+o:o,e.isArray(r)&&n.push(e.gtsFromJSONList(r,a)),e.isGts(r)&&n.push(e.gtsFromJSON(r,a)),e.isEmbeddedImage(r)&&n.push({image:r,caption:"Image",id:a}),e.isEmbeddedImageObject(r)&&n.push({image:r.image,caption:r.caption,id:a})})),{content:n||[]}},e.flatDeep=function(t){return e.isArray(t)||(t=[t]),t.reduce((function(t,i){return Array.isArray(i)?t.concat(e.flatDeep(i)):t.concat(i)}),[])},e.flattenGtsIdArray=function(t,i){var a=[];return e.isGts(t)&&(t=[t]),(t||[]).forEach((function(t){if(e.isArray(t)){var n=e.flattenGtsIdArray(t,i);a.push(n.res),i=n.r}else t&&t.v&&(t.id=i,a.push(t),i++)})),{res:a,r:i}},e.sanitizeNames=function(e){return(e||"").replace(/{/g,"&#123;").replace(/}/g,"&#125;").replace(/,/g,"&#44;").replace(/>/g,"&#62;").replace(/</g,"&#60;").replace(/"/g,"&#34;").replace(/'/g,"&#39;")},e.serializeGtsMetadata=function(e){var t=this,i=[],a=[];return e.l&&Object.keys(e.l).forEach((function(a){i.push(t.sanitizeNames(a+"="+e.l[a]))})),e.a&&Object.keys(e.a).forEach((function(i){a.push(t.sanitizeNames(i+"="+e.a[i]))})),this.sanitizeNames(e.c)+"{"+i.join(",")+(a.length>0?",":"")+a.join(",")+"}"},e.isGts=function(t){return!!t&&(""===t.c||!!t.c)&&!!t.v&&e.isArray(t.v)},e.isGtsToPlot=function(t){return!(!e.isGts(t)||0===t.v.length)&&(t.v||[]).some((function(e){return"number"==typeof e[e.length-1]||!!e[e.length-1].constructor.prototype.toFixed}))},e.isGtsToPlotOnMap=function(t){return!(!e.isGts(t)||0===t.v.length)&&(t.v||[]).some((function(e){return e.length>=3}))},e.isSingletonGTS=function(t){return!(!e.isGts(t)||0===t.v.length)&&1===(t.v||[]).length},e.isGtsToAnnotate=function(t){return!(!e.isGts(t)||0===t.v.length)&&(t.v||[]).some((function(e){if(null!==e[e.length-1])return"number"!=typeof e[e.length-1]&&!!e[e.length-1].constructor&&"Big"!==e[e.length-1].constructor.name&&void 0===e[e.length-1].constructor.prototype.toFixed}))},e.gtsSort=function(e){e.isSorted||(e.v=e.v.sort((function(e,t){return e[0]-t[0]})),e.isSorted=!0)},e.getData=function(t){return"string"==typeof t?e.getData(JSON.parse(t)):t&&t.hasOwnProperty("data")?(e.isArray(t.data)||(t.data=[t.data]),t):e.isArray(t)&&t.length>0&&t[0].data?t[0]:e.isArray(t)?{data:t}:new R},e.getDivider=function(e){var t=1e3;return"ms"===e&&(t=1),"ns"===e&&(t=1e6),t},e.toISOString=function(e,t,i){return"UTC"!==i?L.default.tz(e/t,i).format():L.default(e/t).toISOString()},e}();z.LOG=new Y(z),z.formatLabel=function(e){var t=e.split("{"),i="<span class=\"gtsInfo\"><span class='gts-classname'>"+t[0]+"</span>";if(t.length>1){i+="<span class='gts-separator'>{</span>";var a=t[1].substr(0,t[1].length-1).split(",");a.length>0&&a.forEach((function(e,t){var n=e.split("=");e.length>1&&(i+="<span><span class='gts-labelname'>"+n[0]+"</span>\n<span class='gts-separator'>=</span><span class='gts-labelvalue'>"+n[1]+"</span>",t!==a.length-1&&(i+="<span>, </span>"))})),i+="<span class='gts-separator'>}</span>"}if(t.length>2){i+="<span class='gts-separator'>{</span>";var n=t[2].substr(0,t[2].length-1).split(",");n.length>0&&n.forEach((function(e,t){var a=e.split("=");e.length>1&&(i+="<span><span class='gts-attrname'>"+a[0]+"</span>\n<span class='gts-separator'>=</span><span class='gts-attrvalue'>"+a[1]+"</span>",t!==n.length-1&&(i+="<span>, </span>"))})),i+="<span class='gts-separator'>}</span>"}return i+="</span>"};var H=function(){this.tsmin=0,this.tsmax=0,this.msmin="",this.msmax="",this.marginLeft=0},M=function(){function e(){}return e.getColor=function(t,i){return e.color[i][t%e.color[i].length]},e.getColorGradient=function(t,i){return[[0,e.transparentize(e.getColor(t,i),0)],[1,e.transparentize(e.getColor(t,i),.7)]]},e.getBlendedColorGradient=function(t,i,a){return void 0===a&&(a="#000000"),[[0,e.blend_colors(a,e.getColor(t,i),0)],[1,e.blend_colors(a,e.getColor(t,i),1)]]},e.getColorScale=function(t){return e.color[t].map((function(e,t){return[t,e]}))},e.hexToRgb=function(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]:null},e.transparentize=function(t,i){return void 0===i&&(i=.5),"rgba("+e.hexToRgb(t).concat(i).join(",")+")"},e.generateColors=function(t,i){for(var a=[],n=0;n<t;n++)a.push(e.getColor(n,i));return a},e.generateTransparentColors=function(t,i){for(var a=[],n=0;n<t;n++)a.push(e.transparentize(e.getColor(n,i)));return a},e.hsvGradientFromRgbColors=function(t,i,a){var n=e.rgb2hsv(t.r,t.g,t.b),o=e.rgb2hsv(i.r,i.g,i.b);t.h=n[0],t.s=n[1],t.v=n[2],i.h=o[0],i.s=o[1],i.v=o[2];var r=e.hsvGradient(t,i,a);for(var s in r)r[s]&&(r[s].rgb=e.hsv2rgb(r[s].h,r[s].s,r[s].v),r[s].r=Math.floor(r[s].rgb[0]),r[s].g=Math.floor(r[s].rgb[1]),r[s].b=Math.floor(r[s].rgb[2]));return r},e.rgb2hsv=function(e,t,i){var a,n,o,r=e/255,s=t/255,p=i/255,l=Math.max(r,s,p),h=l-Math.min(r,s,p);if(o=l,0===h)a=0,n=0;else switch(n=h/o,l){case r:a=(s-p+h*(s<p?6:0))/6*h;break;case s:a=(p-r+2*h)/6*h;break;case p:a=(r-s+4*h)/6*h}return[a,n,o]},e.hsvGradient=function(e,t,i){for(var a=new Array(i),n=e.h>=t.h?e.h-t.h:1+e.h-t.h,o=e.h>=t.h?1+t.h-e.h:t.h-e.h,r=0;r<i;r++){var s=o<=n?e.h+o*r/(i-1):e.h-n*r/(i-1);s<0&&(s=1+s),s>1&&(s-=1);var p=(1-r/(i-1))*e.s+r/(i-1)*t.s,l=(1-r/(i-1))*e.v+r/(i-1)*t.v;a[r]={h:s,s:p,v:l}}return a},e.hsv2rgb=function(e,t,i){var a,n,o,r=Math.floor(6*e),s=6*e-r,p=i*(1-t),l=i*(1-s*t),h=i*(1-(1-s)*t);switch(r%6){case 0:a=i,n=h,o=p;break;case 1:a=l,n=i,o=p;break;case 2:a=p,n=i,o=h;break;case 3:a=p,n=l,o=i;break;case 4:a=h,n=p,o=i;break;case 5:a=i,n=p,o=l}return[255*a,255*n,255*o]},e.rgb2hex=function(e,t,i){function a(e){var t=e.toString(16);return 1===t.length?"0"+t:t}return"#"+a(e)+a(t)+a(i)},e.blend_colors=function(t,i,a){if(i=i||"#ffffff",a=a||.5,4!==(t=t||"#000000").length&&7!==t.length)throw new Error("colors must be provided as hexes");if(4!==i.length&&7!==i.length)throw new Error("colors must be provided as hexes");if(a>1||a<0)throw new Error("percentage must be between 0 and 1");t=4===t.length?t[1]+t[1]+t[2]+t[2]+t[3]+t[3]:t.substring(1),i=4===i.length?i[1]+i[1]+i[2]+i[2]+i[3]+i[3]:i.substring(1),console.log("valid: c1 => "+t+", c2 => "+i),t=[parseInt(t[0]+t[1],16),parseInt(t[2]+t[3],16),parseInt(t[4]+t[5],16)],i=[parseInt(i[0]+i[1],16),parseInt(i[2]+i[3],16),parseInt(i[4]+i[5],16)],console.log("hex -> rgba: c1 => ["+t.join(", ")+"], c2 => ["+i.join(", ")+"]");var n=[(1-a)*t[0]+a*i[0],(1-a)*t[1]+a*i[1],(1-a)*t[2]+a*i[2]],o="#"+e.int_to_hex(n[0])+e.int_to_hex(n[1])+e.int_to_hex(n[2]);return console.log(o),o},e.int_to_hex=function(e){var t=Math.round(e).toString(16);return 1===t.length&&(t="0"+t),t},e}();M.color={COHESIVE:["#F2D354","#E4612F","#D32C2E","#6D2627","#6C7F55","#934FC6","#F07A5D","#ED8371","#94E751","#C457F7","#973AF7","#B6FF7A","#C7FFD5","#90E4D0","#E09234","#D2FF91","#17B201"],COHESIVE_2:["#6F694E","#65D0B2","#D8F546","#FF724B","#D6523E","#F9F470","#F4BC78","#B1D637","#FFCFC8","#56CDAB","#CFDD22","#B3F5D2","#97DB29","#9DC5EE","#CFC0F5","#EDEA29","#5EC027","#386C94"],BELIZE:["#5899DA","#E8743B","#19A979","#ED4A7B","#945ECF","#13A4B4","#525DF4","#BF399E","#6C8893","#EE6868","#2F6497"],VIRIDIS:["#440154","#481f70","#443983","#3b528b","#31688e","#287c8e","#21918c","#20a486","#35b779","#5ec962","#90d743","#c8e020"],MAGMA:["#000004","#100b2d","#2c115f","#51127c","#721f81","#932b80","#b73779","#d8456c","#f1605d","#fc8961","#feb078","#fed799"],INFERNO:["#000004","#110a30","#320a5e","#57106e","#781c6d","#9a2865","#bc3754","#d84c3e","#ed6925","#f98e09","#fbb61a","#f4df53"],PLASMA:["#0d0887","#3a049a","#5c01a6","#7e03a8","#9c179e","#b52f8c","#cc4778","#de5f65","#ed7953","#f89540","#fdb42f","#fbd524"],YL_OR_RD:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],YL_GN_BU:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],BU_GN:["#f7fcfd","#ebf7fa","#dcf2f2","#c8eae4","#aadfd2","#88d1bc","#68c2a3","#4eb485","#37a266","#228c49","#0d7635","#025f27"],WARP10:["#ff9900","#004eff","#E53935","#7CB342","#F4511E","#039BE5","#D81B60","#C0CA33","#6D4C41","#8E24AA","#00ACC1","#FDD835","#5E35B1","#00897B","#FFB300","#3949AB","#43A047","#1E88E5"],NINETEEN_EIGHTY_FOUR:["#31C0F6","#A500A5","#FF7E27"],ATLANTIS:["#74D495","#3F3FBA","#FF4D9E"],DO_ANDROIDS_DREAM:["#8F8AF4","#A51414","#F4CF31"],DELOREAN:["#FD7A5D","#5F1CF2","#4CE09A"],CTHULHU:["#FDC44F","#007C76","#8983FF"],ECTOPLASM:["#DA6FF1","#00717A","#ACFF76"],T_MAX_400_FILM:["#F6F6F8","#A4A8B6","#545667"]};var Q=function(){function e(){}return e.mergeDeep=function(t,i){var a=Object.assign({},t);for(var n in i||{})"[object Object]"===Object.prototype.toString.call(i[n])?a[n]=e.mergeDeep(a[n],i[n]):a[n]=i[n];return a},e}();Q.DEFAULT_WIDTH=640,Q.DEFAULT_HEIGHT=480;var P=function(){this.scheme="WARP10",this.horizontal=!1,this.stacked=!1,this.showControls=!0,this.showErrors=!0,this.showStatus=!0,this.showDots=!1,this.timeUnit="us",this.timeZone="UTC",this.map={tiles:[],showTimeSlider:!1,showTimeRange:!1,timeSliderMode:"timestamp"},this.bounds={}},F=function(e,t){this.width=e,this.height=t},W=function(){function e(){this.sizeChanged$=new t.EventEmitter}return e.prototype.change=function(e){this.sizeChanged$.emit(e)},e}();W.decorators=[{type:t.Injectable}],W.ctorParameters=function(){return[]};var K=function(){function e(e,i,a,n){var o=this;this.el=e,this.renderer=i,this.sizeService=a,this.ngZone=n,this.width=Q.DEFAULT_WIDTH,this.height=Q.DEFAULT_HEIGHT,this.chartDraw=new t.EventEmitter,this._options=new P,this.defOptions=Q.mergeDeep(new P,{dotsLimit:1e3,heatControls:!1,timeMode:"date",showRangeSelector:!0,gridLineColor:"#8e8e8e",showDots:!1,timeZone:"UTC",timeUnit:"us",showControls:!0}),this._debug=!1,this._showLegend=!1,this._responsive=!0,this._unit="",this._autoResize=!0,this._hiddenData=[],this.tooltipPosition={top:"-10000px",left:"-1000px"},this.loading=!0,this.noData=!1,this.layout={margin:{t:10,b:25,r:10,l:10}},this.plotlyConfig={responsive:!0,showAxisDragHandles:!0,scrollZoom:!0,doubleClick:"reset+autosize",showTips:!0,plotGlPixelRatio:1,staticPlot:!1,displaylogo:!1,modeBarButtonsToRemove:["lasso2d","select2d","toggleSpikelines","toggleHover","hoverClosest3d","autoScale2d","hoverClosestGeo","hoverClosestGl2d","hoverClosestPie","toggleHover","hoverClosestCartesian","hoverCompareCartesian"]},this.sizeService.sizeChanged$.subscribe((function(t){if(e.nativeElement.parentElement){var i=e.nativeElement.parentElement.getBoundingClientRect();if(o._responsive&&(o.height=i.height,o.width=i.width),o.graph&&o._responsive&&i.height>0){var a={width:i.width,height:o._autoResize?i.height:o.layout.height};o.layout.width===a.width&&o.layout.height===a.height||(setTimeout((function(){return o.layout=Object.assign(Object.assign({},o.layout),a)})),o.LOG.debug(["sizeChanged$"],o.layout.width,o.layout.height),o.graph.resize(a))}}}))}return Object.defineProperty(e.prototype,"hiddenData",{get:function(){return this._hiddenData},set:function(e){this._hiddenData=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"unit",{get:function(){return this._unit},set:function(e){this._unit=e,this.update(void 0,!1)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"debug",{get:function(){return this._debug},set:function(e){"string"==typeof e&&(e="true"===e),this._debug=e,this.LOG.setDebug(e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"showLegend",{get:function(){return this._showLegend},set:function(e){"string"==typeof e&&(e="true"===e),this._showLegend=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"responsive",{get:function(){return this._responsive},set:function(e){"string"==typeof e&&(e="true"===e),this._responsive=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"options",{set:function(e){this.LOG.debug(["onOptions"],e),"string"==typeof e&&(e=JSON.parse(e)),O.default(e,this._options)||(this.LOG.debug(["onOptions","changed"],e),this._options=e,this.update(this._options,!1))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"data",{set:function(e){this.LOG.debug(["onData"],e),e&&(this._data=z.getData(e),this.update(this._options,this._options.isRefresh),this.LOG.debug(["onData"],this._data))},enumerable:!1,configurable:!0}),e.prototype.legendFormatter=function(e,t,i){var a=this;void 0===i&&(i=-1);var n=[];if(null===e)return"<br>\n      "+t.map((function(e){var t=z.formatLabel(e.data.text||"")+": "+((a._options.horizontal?e.x:e.y)||e.r||""),n=e.data.line.color;return e.data.marker&&(n=z.isArray(e.data.marker.color)?e.data.marker.color[0]:e.data.marker.color),e.curveNumber===i&&(t='<i class="chip"\n    style="background-color: '+n+";border: 2px solid "+n+';"></i> '+t),t})).join("<br>");var o="";return t[0]&&(e=t[0].x||t[0].theta),o+="<b>"+e+"</b><br />",(t=t.sort((function(e,t){return e.curveNumber===i?-1:1}))).slice(0,50).forEach((function(e,a){if(n.indexOf(e.curveNumber)<=-1){n.push(e.curveNumber);var r="h"===t[0].data.orientation?e.x:e.y;r||0===r||(r=e.r);var s=z.formatLabel(e.data.text||"")+": "+r;e.curveNumber===i&&(s="<b>"+s+"</b>");var p=e.data.line?e.data.line.color:"";e.data.marker&&(p=z.isArray(e.data.marker.color)?e.data.marker.color[0]:e.data.marker.color),o+='<i class="chip" style="background-color: '+p+";border: 2px solid "+p+';"></i>&nbsp;'+s,a<t.length&&(o+="<br>")}})),o},e.prototype.initChart=function(e,t){var i=this;void 0===t&&(t=!0),this.noData=!1;var a=e.nativeElement.parentElement.parentElement.getBoundingClientRect();if(this._responsive&&t){if(this._autoResize&&(0===a.height||this.height!==a.height)||0===a.width||this.width!==a.width)return this._autoResize&&(this.height=a.height),this.width=a.width,void setTimeout((function(){return i.initChart(e)}),100);this._autoResize&&(this.height=a.height),this.width=a.width}if(this.LOG.debug(["initiChart","this._data"],this._data,this._options),!this._data||!this._data.data||0===this._data.data.length||!this._options)return this.loading=!1,this.LOG.debug(["initiChart","nodata"]),this.noData=!0,this.chartDraw.emit(),!1;this._options=Q.mergeDeep(this.defOptions,this._options||{});var n=this._data;return this._options=Q.mergeDeep(this._options||{},this._data.globalParams),this._options.timeMode=this._options.timeMode||"date",this.loading=!this._options.isRefresh,this.divider=z.getDivider(this._options.timeUnit),this.plotlyData=this.convert(n),this.plotlyConfig.responsive=this._responsive,this.layout.paper_bgcolor="rgba(0,0,0,0)",this.layout.plot_bgcolor="rgba(0,0,0,0)",this._responsive?(this.layout.width=this.width||a.width,this.layout.height=this.height||a.height):(this.layout.width=this.width||Q.DEFAULT_WIDTH,this.layout.height=this.height||Q.DEFAULT_HEIGHT),this.layout.showLegend=!!this._options.showLegend,this.LOG.debug(["initiChart","plotlyData"],this.plotlyData),this.loading=!1,this.chartDraw.emit(),!(!this.plotlyData||0===this.plotlyData.length)},e.prototype.afterPlot=function(e){this.LOG.debug(["afterPlot","plotlyInstance"],e),this.loading=!1,this.rect=this.graph.getBoundingClientRect(),this.chartDraw.emit()},e.prototype.hideTooltip=function(){var e=this;this.hideTooltipTimer&&clearTimeout(this.hideTooltipTimer),this.hideTooltipTimer=setTimeout((function(){e.toolTip.nativeElement.style.display="none"}),1e3)},e.prototype.unhover=function(e,t){this.LOG.debug(["unhover"],e),this.hideTooltipTimer&&clearTimeout(this.hideTooltipTimer)},e.prototype.hover=function(e,t){this.renderer.setStyle(this.toolTip.nativeElement,"display","block"),this.hideTooltipTimer&&clearTimeout(this.hideTooltipTimer);var i=Number.MAX_VALUE,a=[];if(!t)if(e.points[0]&&"h"!==e.points[0].data.orientation){var n=(e.yvals||[""])[0];e.points.forEach((function(e){a.push(e.curveNumber);var o=Math.abs((e.y||e.r)-n);o<i&&(i=o,t=e)}))}else{var o=(e.xvals||[""])[0];e.points.forEach((function(e){a.push(e.curveNumber);var n=Math.abs((e.x||e.r)-o);n<i&&(i=n,t=e)}))}if(t&&e.event){var r=this.legendFormatter(this._options.horizontal?(e.yvals||[""])[0]:(e.xvals||[""])[0],e.points,t.curveNumber),s=e.event.offsetX+20+"px";e.event.offsetX>this.chartContainer.nativeElement.clientWidth/2&&(s=Math.max(0,e.event.offsetX-this.toolTip.nativeElement.clientWidth-20)+"px");var p=Math.min(this.el.nativeElement.getBoundingClientRect().height-this.toolTip.nativeElement.getBoundingClientRect().height-20,e.event.y-20-this.el.nativeElement.getBoundingClientRect().top)+"px";this.moveTooltip(p,s,r)}},e.prototype.getTooltipPosition=function(){return{top:this.tooltipPosition.top,left:this.tooltipPosition.left}},e.prototype.moveTooltip=function(e,t,i){this.tooltipPosition={top:e,left:t},this.renderer.setProperty(this.toolTip.nativeElement,"innerHTML",i),this.LOG.debug(["hover - moveTooltip"],(new Date).toISOString())},e.prototype.relayout=function(e){},e.prototype.getLabelColor=function(e){return this.getCSSColor(e,"--warp-view-chart-label-color","#8e8e8e").trim()},e.prototype.getGridColor=function(e){return this.getCSSColor(e,"--warp-view-chart-grid-color","#8e8e8e").trim()},e.prototype.getCSSColor=function(e,t,i){var a=getComputedStyle(e).getPropertyValue(t).trim();return""===a?i:a},e}();K.decorators=[{type:t.Directive}],K.ctorParameters=function(){return[{type:t.ElementRef},{type:t.Renderer2},{type:W},{type:t.NgZone}]},K.propDecorators={toolTip:[{type:t.ViewChild,args:["toolTip",{static:!0}]}],graph:[{type:t.ViewChild,args:["graph"]}],chartContainer:[{type:t.ViewChild,args:["chartContainer",{static:!0}]}],width:[{type:t.Input,args:["width"]}],height:[{type:t.Input,args:["height"]}],hiddenData:[{type:t.Input,args:["hiddenData"]}],unit:[{type:t.Input,args:["unit"]}],debug:[{type:t.Input,args:["debug"]}],showLegend:[{type:t.Input,args:["showLegend"]}],responsive:[{type:t.Input,args:["responsive"]}],options:[{type:t.Input,args:["options"]}],data:[{type:t.Input,args:["data"]}],chartDraw:[{type:t.Output,args:["chartDraw"]}]};var j=function(){function e(t,i){this.array=null,this.compare=null,this.minGallop=e.DEFAULT_MIN_GALLOPING,this.length=0,this.tmpStorageLength=e.DEFAULT_TMP_STORAGE_LENGTH,this.stackLength=0,this.runStart=null,this.runLength=null,this.stackSize=0,this.array=t,this.compare=i,this.length=t.length,this.length<2*e.DEFAULT_TMP_STORAGE_LENGTH&&(this.tmpStorageLength=this.length>>>1),this.tmp=new Array(this.tmpStorageLength),this.stackLength=this.length<120?5:this.length<1542?10:this.length<119151?19:40,this.runStart=new Array(this.stackLength),this.runLength=new Array(this.stackLength)}return e.log10=function(e){return e<1e5?e<100?e<10?0:1:e<1e4?e<1e3?2:3:4:e<1e7?e<1e6?5:6:e<1e9?e<1e8?7:8:9},e.minRunLength=function(t){for(var i=0;t>=e.DEFAULT_MIN_MERGE;)i|=1&t,t>>=1;return t+i},e.makeAscendingRun=function(t,i,a,n){var o=i+1;if(o===a)return 1;if(n(t[o++],t[i])<0){for(;o<a&&n(t[o],t[o-1])<0;)o++;e.reverseRun(t,i,o)}else for(;o<a&&n(t[o],t[o-1])>=0;)o++;return o-i},e.reverseRun=function(e,t,i){for(i--;t<i;){var a=e[t];e[t++]=e[i],e[i--]=a}},e.binaryInsertionSort=function(e,t,i,a,n){for(a===t&&a++;a<i;a++){for(var o=e[a],r=t,s=a;r<s;){var p=r+s>>>1;n(o,e[p])<0?s=p:r=p+1}var l=a-r;switch(l){case 3:e[r+3]=e[r+2];case 2:e[r+2]=e[r+1];case 1:e[r+1]=e[r];break;default:for(;l>0;)e[r+l]=e[r+l-1],l--}e[r]=o}},e.gallopLeft=function(e,t,i,a,n,o){var r,s=0,p=1;if(o(e,t[i+n])>0){for(r=a-n;p<r&&o(e,t[i+n+p])>0;)s=p,(p=1+(p<<1))<=0&&(p=r);p>r&&(p=r),s+=n,p+=n}else{for(r=n+1;p<r&&o(e,t[i+n-p])<=0;)s=p,(p=1+(p<<1))<=0&&(p=r);p>r&&(p=r);var l=s;s=n-p,p=n-l}for(s++;s<p;){var h=s+(p-s>>>1);o(e,t[i+h])>0?s=h+1:p=h}return p},e.gallopRight=function(e,t,i,a,n,o){var r,s=0,p=1;if(o(e,t[i+n])<0){for(r=n+1;p<r&&o(e,t[i+n-p])<0;)s=p,(p=1+(p<<1))<=0&&(p=r);p>r&&(p=r);var l=s;s=n-p,p=n-l}else{for(r=a-n;p<r&&o(e,t[i+n+p])>=0;)s=p,(p=1+(p<<1))<=0&&(p=r);p>r&&(p=r),s+=n,p+=n}for(s++;s<p;){var h=s+(p-s>>>1);o(e,t[i+h])<0?p=h:s=h+1}return p},e.alphabeticalCompare=function(t,i){if(t===i)return 0;if(~~t===t&&~~i===i){if(0===t||0===i)return t<i?-1:1;if(t<0||i<0){if(i>=0)return-1;if(t>=0)return 1;t=-t,i=-i}var a=e.log10(t),n=e.log10(i),o=0;return a<n?(t*=e.POWERS_OF_TEN[n-a-1],i/=10,o=-1):a>n&&(i*=e.POWERS_OF_TEN[a-n-1],t/=10,o=1),t===i?o:t<i?-1:1}var r=String(t),s=String(i);return r===s?0:r<s?-1:1},e.sort=function(t,i,a,n){if(!Array.isArray(t))throw new TypeError("Can only sort arrays");i?"function"!=typeof i&&(n=a,a=i,i=e.alphabeticalCompare):i=e.alphabeticalCompare,a||(a=0),n||(n=t.length);var o=n-a;if(!(o<2)){var r=0;if(o<e.DEFAULT_MIN_MERGE)return r=e.makeAscendingRun(t,a,n,i),void e.binaryInsertionSort(t,a,n,a+r,i);var s=new e(t,i),p=e.minRunLength(o);do{if((r=e.makeAscendingRun(t,a,n,i))<p){var l=o;l>p&&(l=p),e.binaryInsertionSort(t,a,a+l,a+r,i),r=l}s.pushRun(a,r),s.mergeRuns(),o-=r,a+=r}while(0!==o);s.forceMergeRuns()}},e.prototype.pushRun=function(e,t){this.runStart[this.stackSize]=e,this.runLength[this.stackSize]=t,this.stackSize+=1},e.prototype.mergeRuns=function(){for(;this.stackSize>1;){var e=this.stackSize-2;if(e>=1&&this.runLength[e-1]<=this.runLength[e]+this.runLength[e+1]||e>=2&&this.runLength[e-2]<=this.runLength[e]+this.runLength[e-1])this.runLength[e-1]<this.runLength[e+1]&&e--;else if(this.runLength[e]>this.runLength[e+1])break;this.mergeAt(e)}},e.prototype.forceMergeRuns=function(){for(;this.stackSize>1;){var e=this.stackSize-2;e>0&&this.runLength[e-1]<this.runLength[e+1]&&e--,this.mergeAt(e)}},e.prototype.mergeAt=function(t){var i=this.compare,a=this.array,n=this.runStart[t],o=this.runLength[t],r=this.runStart[t+1],s=this.runLength[t+1];this.runLength[t]=o+s,t===this.stackSize-3&&(this.runStart[t+1]=this.runStart[t+2],this.runLength[t+1]=this.runLength[t+2]),this.stackSize--;var p=e.gallopRight(a[r],a,n,o,0,i);n+=p,0!==(o-=p)&&0!==(s=e.gallopLeft(a[n+o-1],a,r,s,s-1,i))&&(o<=s?this.mergeLow(n,o,r,s):this.mergeHigh(n,o,r,s))},e.prototype.mergeLow=function(t,i,a,n){var o,r=this.compare,s=this.array,p=this.tmp;for(o=0;o<i;o++)p[o]=s[t+o];var l=0,h=a,d=t;if(s[d++]=s[h++],0!=--n)if(1!==i){for(var c=this.minGallop;;){var g=0,u=0,w=!1;do{if(r(s[h],p[l])<0){if(s[d++]=s[h++],u++,g=0,0==--n){w=!0;break}}else if(s[d++]=p[l++],g++,u=0,1==--i){w=!0;break}}while((g|u)<c);if(w)break;do{if(0!==(g=e.gallopRight(s[h],p,l,i,0,r))){for(o=0;o<g;o++)s[d+o]=p[l+o];if(d+=g,l+=g,(i-=g)<=1){w=!0;break}}if(s[d++]=s[h++],0==--n){w=!0;break}if(0!==(u=e.gallopLeft(p[l],s,h,n,0,r))){for(o=0;o<u;o++)s[d+o]=s[h+o];if(d+=u,h+=u,0===(n-=u)){w=!0;break}}if(s[d++]=p[l++],1==--i){w=!0;break}c--}while(g>=e.DEFAULT_MIN_GALLOPING||u>=e.DEFAULT_MIN_GALLOPING);if(w)break;c<0&&(c=0),c+=2}if(this.minGallop=c,c<1&&(this.minGallop=1),1===i){for(o=0;o<n;o++)s[d+o]=s[h+o];s[d+n]=p[l]}else{if(0===i)throw new Error("mergeLow preconditions were not respected");for(o=0;o<i;o++)s[d+o]=p[l+o]}}else{for(o=0;o<n;o++)s[d+o]=s[h+o];s[d+n]=p[l]}else for(o=0;o<i;o++)s[d+o]=p[l+o]},e.prototype.mergeHigh=function(t,i,a,n){var o,r=this.compare,s=this.array,p=this.tmp;for(o=0;o<n;o++)p[o]=s[a+o];var l=t+i-1,h=n-1,d=a+n-1,c=0,g=0;if(s[d--]=s[l--],0!=--i)if(1!==n){for(var u=this.minGallop;;){var w=0,f=0,v=!1;do{if(r(p[h],s[l])<0){if(s[d--]=s[l--],w++,f=0,0==--i){v=!0;break}}else if(s[d--]=p[h--],f++,w=0,1==--n){v=!0;break}}while((w|f)<u);if(v)break;do{if(0!==(w=i-e.gallopRight(p[h],s,t,i,i-1,r))){for(i-=w,g=(d-=w)+1,c=(l-=w)+1,o=w-1;o>=0;o--)s[g+o]=s[c+o];if(0===i){v=!0;break}}if(s[d--]=p[h--],1==--n){v=!0;break}if(0!==(f=n-e.gallopLeft(s[l],p,0,n,n-1,r))){for(n-=f,g=(d-=f)+1,c=(h-=f)+1,o=0;o<f;o++)s[g+o]=p[c+o];if(n<=1){v=!0;break}}if(s[d--]=s[l--],0==--i){v=!0;break}u--}while(w>=e.DEFAULT_MIN_GALLOPING||f>=e.DEFAULT_MIN_GALLOPING);if(v)break;u<0&&(u=0),u+=2}if(this.minGallop=u,u<1&&(this.minGallop=1),1===n){for(g=(d-=i)+1,c=(l-=i)+1,o=i-1;o>=0;o--)s[g+o]=s[c+o];s[d]=p[h]}else{if(0===n)throw new Error("mergeHigh preconditions were not respected");for(c=d-(n-1),o=0;o<n;o++)s[c+o]=p[o]}}else{for(g=(d-=i)+1,c=(l-=i)+1,o=i-1;o>=0;o--)s[g+o]=s[c+o];s[d]=p[h]}else for(c=d-(n-1),o=0;o<n;o++)s[c+o]=p[o]},e}();j.DEFAULT_MIN_MERGE=32,j.DEFAULT_MIN_GALLOPING=7,j.DEFAULT_TMP_STORAGE_LENGTH=256,j.POWERS_OF_TEN=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9];var q=function(e){function i(a,n,r,s){var p=e.call(this,a,n,r,s)||this;return p.el=a,p.renderer=n,p.sizeService=r,p.ngZone=s,p.standalone=!0,p.boundsDidChange=new t.EventEmitter,p.pointHover=new t.EventEmitter,p.warpViewChartResize=new t.EventEmitter,p._type="line",p.visibility=[],p.maxTick=0,p.minTick=0,p.visibleGtsId=[],p.gtsId=[],p.dataHashset={},p.chartBounds=new H,p.visibilityStatus="unknown",p.afterBoundsUpdate=!1,p.maxPlottable=1e4,p.parsing=!1,p.unhighliteCurve=new o.Subject,p.highliteCurve=new o.Subject,p.layout={showlegend:!1,autosize:!0,hovermode:"x",hoverdistance:20,xaxis:{font:{}},yaxis:{exponentformat:"none",fixedrange:!0,automargin:!0,showline:!0,font:{}},margin:{t:0,b:30,r:10,l:50}},p.LOG=new Y(i,p._debug),p}return T(i,e),Object.defineProperty(i.prototype,"hiddenData",{set:function(e){var t=this,i=JSON.stringify(this.visibility);this.LOG.debug(["hiddenData","previousVisibility"],i),this._hiddenData=e,this.visibility=[],this.visibleGtsId.forEach((function(i){return t.visibility.push(e.indexOf(i)<0&&-1!==i)})),this.LOG.debug(["hiddenData","hiddendygraphfullv"],this.visibility);var a=JSON.stringify(this.visibility);if(this.LOG.debug(["hiddenData","json"],i,a,this._hiddenData),i!==a){var n=[],o=[];(this.gtsId||[]).forEach((function(e,i){t._hiddenData.indexOf(e)>-1?o.push(i):n.push(i)})),n.length>0&&this.graph.restyleChart({visible:!0},n),o.length>0&&this.graph.restyleChart({visible:!1},o),this.LOG.debug(["hiddendygraphtrig","destroy"],"redraw by visibility change",n,o)}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"type",{set:function(e){this._type=e,this.drawChart()},enumerable:!1,configurable:!0}),i.prototype.update=function(e,t){this.drawChart(t)},i.prototype.ngOnInit=function(){this._options=this._options||this.defOptions},i.prototype.getTimeClip=function(){return V(this,void 0,void 0,(function(){var e=this;return G(this,(function(t){return[2,new Promise((function(t){e.LOG.debug(["getTimeClip"],e.chartBounds),t(e.chartBounds)}))]}))}))},i.prototype.resize=function(e){this.LOG.debug(["resize"],e),this.height=e,this.layout.height=this.height,this._options.showRangeSelector&&(this.layout.xaxis.rangeslider={bgcolor:"transparent",thickness:40/this.height})},i.prototype.drawChart=function(e){var t=this;void 0===e&&(e=!1),this.LOG.debug(["drawChart","this.layout","this.options"],this.layout,this._options,(this._options.bounds||{}).minDate),this.initChart(this.el)?(this.plotlyConfig.scrollZoom=!0,this.layout.yaxis.gridcolor=this.getGridColor(this.el.nativeElement),this.layout.xaxis.gridcolor=this.getGridColor(this.el.nativeElement),this.layout.yaxis.zerolinecolor=this.getGridColor(this.el.nativeElement),this.layout.xaxis.zerolinecolor=this.getGridColor(this.el.nativeElement),this.layout.margin.t=this.standalone?20:10,this.layout.showlegend=this._showLegend,this._responsive||(this.layout.width=this.width,this.layout.height=this.height),this.LOG.debug(["drawChart","this.options"],this.layout,this._options),this.LOG.debug(["drawChart","this.layout"],this.layout),this.LOG.debug(["drawChart","this.plotlyConfig"],this.plotlyConfig),this._options.showRangeSelector?this.resize(this.height):this.layout.margin.b=30,this.layout=Object.assign({},this.layout),this.highliteCurve.pipe(r.throttleTime(200)).subscribe((function(e){t.graph.restyleChart({opacity:.4},e.off),t.graph.restyleChart({opacity:1},e.on)})),this.unhighliteCurve.pipe(r.throttleTime(200)).subscribe((function(e){t.graph.restyleChart({opacity:1},e)})),this.loading=!1):this.LOG.debug(["drawChart","initChart","empty"],this._options)},i.prototype.emitNewBounds=function(e,t,i){if(this._options.timeMode&&"timestamp"===this._options.timeMode)this.boundsDidChange.emit({bounds:{min:e,max:t,marginLeft:i},source:"chart"}),this._options.bounds=this._options.bounds||{},this._options.bounds.minDate=e,this._options.bounds.maxDate=t;else{var a=L.default.tz(e,this._options.timeZone).valueOf(),n=L.default.tz(t,this._options.timeZone).valueOf();this._options.bounds=this._options.bounds||{},this._options.bounds.minDate=a,this._options.bounds.maxDate=n,this.boundsDidChange.emit({bounds:{min:a,max:n,marginLeft:i},source:"chart"})}},i.prototype.initChart=function(t){var i=e.prototype.initChart.call(this,t),a={tick0:void 0,range:[]};this.LOG.debug(["initChart","updateBounds"],this.chartBounds,this._options.bounds);var n=(this._options.bounds||{}).minDate||this.chartBounds.tsmin||this.minTick,o=(this._options.bounds||{}).maxDate||this.chartBounds.tsmax||this.maxTick;return this.LOG.debug(["initChart","updateBounds"],[n,o]),this._options.timeMode&&"timestamp"===this._options.timeMode?(a.tick0=n,a.range=[n,o]):(a.tick0=z.toISOString(n,this.divider,this._options.timeZone),a.range=[z.toISOString(n,this.divider,this._options.timeZone),z.toISOString(o,this.divider,this._options.timeZone)]),this.layout.xaxis=a,i&&this.resize(this.height),i},i.prototype.convert=function(e){var t=this;this.parsing=!this._options.isRefresh,this.chartBounds.tsmin=void 0,this.chartBounds.tsmax=void 0;var i=[];if(this.LOG.debug(["convert"],this._options.timeMode),this.LOG.debug(["convert","this._hiddenData"],this._hiddenData),this.LOG.debug(["convert","this._options.timezone"],this._options.timeZone),z.isArray(e.data)){var a=z.flatDeep(z.flattenGtsIdArray(e.data,0).res);this.maxTick=Number.NEGATIVE_INFINITY,this.minTick=Number.POSITIVE_INFINITY,this.visibleGtsId=[],this.gtsId=[];var n=a.filter((function(e){return e.v&&!z.isGtsToPlot(e)}));a=a.filter((function(e){return e.v&&z.isGtsToPlot(e)})),"unknown"===this.visibilityStatus&&(this.visibilityStatus=a.length>0?"plottableShown":"nothingPlottable");var o=!0,r=100*z.getDivider(this._options.timeUnit);a.forEach((function(e){var t=e.v.map((function(e){return e[0]})),i=e.v.length;o=(o=o&&t[0]>-r&&t[0]<r)&&t[i-1]>-r&&t[i-1]<r})),o||"timestamp"===this._options.timeMode?this.layout.xaxis.type="linear":this.layout.xaxis.type="date",a.forEach((function(a,n){if(a.v&&z.isGtsToPlot(a)){j.sort(a.v,(function(e,t){return e[0]-t[0]}));var r=a.v.length,s=z.serializeGtsMetadata(a),p=M.getColor(a.id,t._options.scheme),l=((e.params||[])[n]||{datasetColor:p}).datasetColor||p,h=((e.params||[])[n]||{type:t._type}).type||t._type,d={type:"spline"===h?"scatter":"scattergl",mode:"scatter"===h?"markers":r>t.maxPlottable?"lines":"lines+markers",text:s,x:[],y:[],line:{color:l},hoverinfo:"none",connectgaps:!1,visible:!(t._hiddenData.filter((function(e){return e===a.id})).length>0)};switch(("scatter"===h||r<t.maxPlottable)&&(d.marker={size:3,color:new Array(r).fill(l),line:{color:l,width:3},opacity:new Array(r).fill("scatter"===t._type||t._options.showDots?1:0)}),h){case"spline":d.line.shape="spline";break;case"area":d.fill="tozeroy",d.fillcolor=M.transparentize(l,.3);break;case"step":d.line.shape="hvh";break;case"step-before":d.line.shape="vh";break;case"step-after":d.line.shape="hv"}t.visibleGtsId.push(a.id),t.gtsId.push(a.id);var c=a.v.map((function(e){return e[0]})),g=a.v.map((function(e){return e[e.length-1]}));if(r>0){t.minTick=t.minTick||c[0],t.maxTick=t.maxTick||c[0];for(var u=1;u<r;u++){var w=c[u];t.minTick=w<=t.minTick?w:t.minTick,t.maxTick=w>=t.maxTick?w:t.maxTick}}o||"timestamp"===t._options.timeMode?d.x=c:d.x=c.map((function(e){return z.toISOString(e,t.divider,t._options.timeZone)})),d.y=g,i.push(d)}})),n.length>0&&0===a.length&&(n.forEach((function(e){e.v.forEach((function(e){var i=e[0];i<t.minTick&&(t.minTick=i),i>t.maxTick&&(t.maxTick=i)}))})),0===a.length&&(this.dataHashset[this.minTick]||(this.dataHashset[this.minTick]=[0]),this.dataHashset[this.maxTick]||(this.dataHashset[this.maxTick]=[0]),this.visibility.push(!1),this.visibleGtsId.push(-1)))}return this.LOG.debug(["convert"],"end",i),this.noData=0===i.length,this.parsing=!1,i},i.prototype.afterPlot=function(t){e.prototype.afterPlot.call(this,t),this.marginLeft=parseInt(this.graph.plotEl.nativeElement.querySelector("g.bglayer > rect").getAttribute("x"),10),this.LOG.debug(["afterPlot","marginLeft"],this.marginLeft),this.chartBounds.tsmin!==this.minTick||this.chartBounds.tsmax!==this.maxTick?(this.chartBounds.tsmin=this.minTick,this.chartBounds.tsmax=this.maxTick,this.chartBounds.marginLeft=this.marginLeft,this.chartDraw.emit(this.chartBounds),(this.afterBoundsUpdate||this.standalone)&&(this.LOG.debug(["afterPlot","updateBounds"],this.minTick,this.maxTick),this.emitNewBounds(this.minTick,this.maxTick,this.marginLeft),this.loading=!1,this.afterBoundsUpdate=!1)):this.loading=!1},i.prototype.relayout=function(e){var t=!1;e["xaxis.range"]&&2===e["xaxis.range"].length?this.chartBounds.msmin===e["xaxis.range"][0]&&this.chartBounds.msmax===e["xaxis.range"][1]||(this.LOG.debug(["relayout","updateBounds","xaxis.range"],e["xaxis.range"]),t=!0,this.chartBounds.msmin=e["xaxis.range"][0],this.chartBounds.msmax=e["xaxis.range"][1],this.chartBounds.tsmin=L.default.tz(L.default(this.chartBounds.msmin),this._options.timeZone).valueOf()*this.divider,this.chartBounds.tsmax=L.default.tz(L.default(this.chartBounds.msmax),this._options.timeZone).valueOf()*this.divider):e["xaxis.range[0]"]&&e["xaxis.range[1]"]?this.chartBounds.msmin===e["xaxis.range[0]"]&&this.chartBounds.msmax===e["xaxis.range[1]"]||(this.LOG.debug(["relayout","updateBounds","xaxis.range[x]"],e["xaxis.range[0]"]),t=!0,this.chartBounds.msmin=e["xaxis.range[0]"],this.chartBounds.msmax=e["xaxis.range[1]"],this.chartBounds.tsmin=L.default.tz(L.default(this.chartBounds.msmin),this._options.timeZone).valueOf()*this.divider,this.chartBounds.tsmax=L.default.tz(L.default(this.chartBounds.msmax),this._options.timeZone).valueOf()*this.divider):e["xaxis.autorange"]&&(this.chartBounds.tsmin===this.minTick&&this.chartBounds.tsmax===this.maxTick||(this.LOG.debug(["relayout","updateBounds","autorange"],e,this.minTick,this.maxTick),t=!0,this.chartBounds.tsmin=this.minTick,this.chartBounds.tsmax=this.maxTick)),t&&(this.LOG.debug(["relayout","updateBounds"],this.chartBounds),this.emitNewBounds(this.chartBounds.tsmin,this.chartBounds.tsmax,this.marginLeft)),this.loading=!1,this.afterBoundsUpdate=!1},i.prototype.sliderChange=function(e){this.LOG.debug(["sliderChange"],e)},i.prototype.updateBounds=function(e,t){this.LOG.debug(["updateBounds"],e,t,this._options),e=e||this.minTick/this.divider,t=t||this.maxTick/this.divider,this.layout.xaxis.autorange=!1,this._options.timeMode&&"timestamp"===this._options.timeMode?(this.layout.xaxis.range=[e,t],this.layout.xaxis.tick0=e):(this.layout.xaxis.range=[z.toISOString(e,this.divider,this._options.timeZone),z.toISOString(t,this.divider,this._options.timeZone)],this.layout.xaxis.tick0=z.toISOString(e,this.divider,this._options.timeZone)),this.layout=Object.assign({},this.layout),this.LOG.debug(["updateBounds"],this.layout),this.afterBoundsUpdate=!0},i.prototype.setRealBounds=function(e){this.afterBoundsUpdate=!0,this.minTick=e.tsmin,this.maxTick=e.tsmax,this._options.bounds=this._options.bounds||{},this._options.bounds.minDate=this.minTick,this._options.bounds.maxDate=this.maxTick;var t={tick0:void 0,range:[]};this._options.showRangeSelector&&(t.rangeslider={bgcolor:"transparent",thickness:40/this.height}),this._options.timeMode&&"timestamp"===this._options.timeMode?(t.tick0=this.minTick/this.divider,t.range=[this.minTick,this.maxTick]):(t.tick0=z.toISOString(this.minTick,this.divider,this._options.timeZone),t.range=[z.toISOString(this.minTick,this.divider,this._options.timeZone),z.toISOString(this.maxTick,this.divider,this._options.timeZone)]),this.layout.xaxis=t,this.layout=Object.assign({},this.layout)},i.prototype.hover=function(t){this.LOG.debug(["hover"],t);var i,a=Number.MAX_VALUE,n=[];if(this.toolTip.nativeElement.style.display="block",t.points[0]&&"h"!==t.points[0].data.orientation){var o=(t.yvals||[""])[0];t.points.forEach((function(e){n.push(e.curveNumber);var t=Math.abs(e.y-o);t<a&&(a=t,i=e)}))}else{var r=(t.xvals||[""])[0];t.points.forEach((function(e){n.push(e.curveNumber);var t=Math.abs(e.x-r);t<a&&(a=t,i=e)}))}e.prototype.hover.call(this,t,i),i&&this.highlighted!==i.curveNumber&&(this.highliteCurve.next({on:[i.curveNumber],off:n}),this.highlighted=i.curveNumber),this.pointHover.emit(t.event)},i.prototype.unhover=function(t){var i,a=Number.MAX_VALUE;if(t.points[0]&&"h"!==t.points[0].data.orientation){var n=(t.yvals||[""])[0];t.points.forEach((function(e){var t=Math.abs(e.y-n);t<a&&(a=t,i=e)}))}else{var o=(t.xvals||[""])[0];t.points.forEach((function(e){var t=Math.abs(e.x-o);t<a&&(a=t,i=e)}))}i&&this.highlighted!==i.curveNumber&&(this.unhighliteCurve.next([this.highlighted]),this.highlighted=void 0),e.prototype.unhover.call(this,t,i)},i}(K);q.decorators=[{type:t.Component,args:[{selector:"warpview-chart",template:'\x3c!--\n  ~  Copyright 2020  SenX S.A.S.\n  ~\n  ~  Licensed under the Apache License, Version 2.0 (the "License");\n  ~  you may not use this file except in compliance with the License.\n  ~  You may obtain a copy of the License at\n  ~\n  ~    http://www.apache.org/licenses/LICENSE-2.0\n  ~\n  ~  Unless required by applicable law or agreed to in writing, software\n  ~  distributed under the License is distributed on an "AS IS" BASIS,\n  ~  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  ~  See the License for the specific language governing permissions and\n  ~  limitations under the License.\n  ~\n  --\x3e\n\n<div id="chartContainer" #chartContainer (mouseleave)="hideTooltip()">\n  <warpview-spinner *ngIf="loading" message="Parsing data"></warpview-spinner>\n  <p class="noData" *ngIf="noData">No data to display</p>\n  <p class="noData" *ngIf="parsing">Parsing data</p>\n  <div *ngIf="!loading && !noData" >\n    <warpview-plotly #graph\n                     [data]="plotlyData" [layout]="layout" [config]="plotlyConfig"\n                     (afterPlot)="afterPlot($event)"\n                     (relayout)="relayout($event)" (hover)="hover($event)"\n                     [updateOnLayoutChange]="true" [updateOnDataChange]="true" [debug]="debug"\n                     (sliderChange)="sliderChange($event)" (unhover)="unhover($event)"\n                     [style]="{position: \'relative\', width: \'100%\', height: \'100%\'}"></warpview-plotly>\n  </div>\n  <div #toolTip class="wv-tooltip" [ngStyle]="getTooltipPosition()"></div>\n</div>\n',encapsulation:t.ViewEncapsulation.ShadowDom,styles:['/*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */\n/*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */:root{--gts-attrname-font-color:#ed4a7b;--gts-attrvalue-font-color:#000;--gts-classname-font-color:#004eff;--gts-labelname-font-color:#19a979;--gts-labelvalue-font-color:#000;--gts-separator-font-color:#a0a0a0;--gts-stack-font-color:#000;--gts-tree-collapsed-icon:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA0UlEQVQ4T6WTUW7CQAxEPQdozxYb9Qb94Aj9gQSoVCp6lMr21doDZFCQiFCU3YDY//d2PeOFPHnwJC+zAlVdA/jp+/6YmZ+1S0qCPxF5HUAAO3fvSpKS4ENEvm6gfUS0c5JiBma2Ibm/QiQPmbmdSqohquoA7GqSxRaapmkBjBkAeHP336t0UWBmHcnb+VcR4XcJpjDJLjPHkS4tleqZubmNiDHU6gumDQDYuvvh7hpV9V9EXgaA5Ka2jbMjmNk7yZOIfEfE8eFVfuSDLda4JDsD3FNdEckTC0YAAAAASUVORK5CYII=);--gts-tree-expanded-icon:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA7klEQVQ4T82TMW7CQBBF/0g+QOpINEkVCmpaLoBm5COk5QYoaeAY3MDSei2LGu4QKakiBA1tCpTK8kS2sLVe2xSh8XSrnf9m/s4s4c6gO/UYGEBEXlT1bK396bFGIjIJguA7iqJLkVNbYOZXItoQ0QHAzBhz9CCFeAVgCeAjy7Jpmqa/NUBEEgDzktqGuOKKO47j+KsGhGH4lOf5HsDIg5ycyqVYVd+steuGheLAzM9EtPMgW1VdVGWJ6N0YU1gpozVGH+K+gy/uBHR1crXUqNzbQXXhduJ69sd7cxOZ+UFVH5Mk+exb+YGt8n9+5h8up1sReYC0WAAAAABJRU5ErkJggg==);--warp-slider-connect-color:#f90;--warp-slider-handle-bg-color:#fff;--warp-slider-handle-color:#004eff;--warp-slider-handle-shadow:inset 0 0 1px #fff,inset 0 1px 7px silver,0 3px 6px -3px #a0a0a0;--warp-view-annotationtooltip-font-color:#404040;--warp-view-annotationtooltip-value-font-color:#004eff;--warp-view-bar-color:#dc3545;--warp-view-chart-height:100%;--warp-view-chart-legend-bg:#fff;--warp-view-chart-legend-color:#404040;--warp-view-chart-width:100%;--warp-view-datagrid-cell-padding:5px;--warp-view-datagrid-even-bg-color:silver;--warp-view-datagrid-even-color:#000;--warp-view-datagrid-odd-bg-color:#fff;--warp-view-datagrid-odd-color:#404040;--warp-view-font-color:#000;--warp-view-map-margin:0;--warp-view-pagination-active-bg-color:#4caf50;--warp-view-pagination-active-border-color:#4caf50;--warp-view-pagination-active-color:#fff;--warp-view-pagination-bg-color:#fff;--warp-view-pagination-border-color:silver;--warp-view-pagination-disabled-color:silver;--warp-view-pagination-hover-bg-color:silver;--warp-view-pagination-hover-border-color:silver;--warp-view-pagination-hover-color:#000;--warp-view-plot-chart-height:100%;--warp-view-popup-bg-color:#fff;--warp-view-popup-body-bg-color:#fff;--warp-view-popup-body-color:#000;--warp-view-popup-border-color:rgba(0,0,0,0.2);--warp-view-popup-close-color:#404040;--warp-view-popup-header-bg-color:silver;--warp-view-popup-title-color:#404040;--warp-view-resize-handle-color:silver;--warp-view-resize-handle-height:10px;--warp-view-slider-pointer-size:65px;--warp-view-spinner-color:#f90;--warp-view-switch-handle-checked-color:radial-gradient(#fff 15%,#00cd00 100%);--warp-view-switch-handle-color:radial-gradient(#fff 15%,silver 100%);--warp-view-switch-height:30px;--warp-view-switch-inset-checked-color:#00cd00;--warp-view-switch-inset-color:silver;--warp-view-switch-radius:18px;--warp-view-switch-width:100px;--warp-view-tile-height:100%;--warp-view-tile-width:100%}.noData{color:var(--warp-view-chart-legend-color);position:relative;text-align:center;width:100%}\n\n/*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */\n/*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */.gts-classname{color:var(--gts-classname-font-color)}.gts-labelname{color:var(--gts-labelname-font-color)}.gts-attrname{color:var(--gts-attrname-font-color)}.gts-separator{color:var(--gts-separator-font-color)}.gts-labelvalue{color:var(--gts-labelvalue-font-color);font-style:italic}.gts-attrvalue{color:var(--gts-attrvalue-font-color);font-style:italic}.wv-tooltip{background-color:var(--warp-view-chart-legend-bg)!important;border:1px solid grey;border-radius:5px;box-shadow:none;color:var(--warp-view-chart-legend-color)!important;display:none;font-size:10px;height:auto!important;left:-1000px;max-width:50%;min-width:100px;padding:10px;pointer-events:none;position:absolute;text-align:left;width:auto;z-index:999}.wv-tooltip .chip{background-color:#bbb;border:2px solid #454545;border-radius:50%;cursor:pointer;display:inline-block;height:5px;margin-bottom:auto;margin-top:auto;vertical-align:middle;width:5px}:host{display:block}:host,:host #chartContainer,:host #chartContainer div{height:100%}:host div.chart{height:var(--warp-view-chart-height);width:var(--warp-view-chart-width)}:host .executionErrorText{background:#faebd7;border:2px solid red;border-radius:3px;color:red;padding:10px;position:absolute;top:-30px}']}]}],q.ctorParameters=function(){return[{type:t.ElementRef},{type:t.Renderer2},{type:W},{type:t.NgZone}]},q.propDecorators={hiddenData:[{type:t.Input,args:["hiddenData"]}],type:[{type:t.Input,args:["type"]}],standalone:[{type:t.Input,args:["standalone"]}],boundsDidChange:[{type:t.Output,args:["boundsDidChange"]}],pointHover:[{type:t.Output,args:["pointHover"]}],warpViewChartResize:[{type:t.Output,args:["warpViewChartResize"]}]};var J=function(){function e(){var t=this;this.createHandleError=function(e){return void 0===e&&(e=""),function(i){return void 0===i&&(i="operation"),t.handleError(e,i)}},this.LOG=new Y(e,!0)}return e.prototype.handleError=function(e,t){var i=this;return void 0===e&&(e=""),void 0===t&&(t="operation"),function(a){i.LOG.error([e],a),i.LOG.error([e],t+" failed: "+a.statusText);var n=(a.error||{}).message?a.error.message:a.status?a.statusText:"Server error";return i.LOG.error([e],n),s.of(n)}},e}();J.decorators=[{type:t.Injectable}],J.ctorParameters=function(){return[]};var X=function(){function e(t,i){this.http=t,this.httpErrorHandler=i,this.LOG=new Y(e,!0),this.handleError=i.createHandleError("Warp10Service")}return e.prototype.exec=function(e,t){var i=this;return this.LOG.debug(["exec","warpScript"],t,e),this.http.post(t,e,{observe:"response",responseType:"text"}).pipe(r.tap((function(e){return i.LOG.debug(["exec","result"],e)})),r.catchError(this.handleError("exec")))},e}();X.Éµprov=t.ÉµÉµdefineInjectable({factory:function(){return new X(t.ÉµÉµinject(p.HttpClient),t.ÉµÉµinject(J))},token:X,providedIn:"root"}),X.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],X.ctorParameters=function(){return[{type:p.HttpClient},{type:J}]};var Z=function(e){function i(a,n,o,r,s){var p=e.call(this,a,o,n,r)||this;return p.el=a,p.sizeService=n,p.renderer=o,p.ngZone=r,p.warp10Service=s,p.warpscriptResult=new t.EventEmitter,p.execStatus=new t.EventEmitter,p.execError=new t.EventEmitter,p.type="line",p.url="",p.isAlone=!1,p.loaderMessage="",p.loading=!1,p._gtsFilter="",p._warpScript="",p.execUrl="",p.timeUnit="us",p.LOG=new Y(i,p._debug),p}return T(i,e),Object.defineProperty(i.prototype,"gtsFilter",{set:function(e){this._gtsFilter=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"warpscript",{get:function(){return this._warpScript},set:function(e){e&&this._warpScript!==e&&(this._warpScript=e,this.execute(!0))},enumerable:!1,configurable:!0}),i.prototype.ngOnInit=function(){this._options=this._options||this.defOptions},i.prototype.ngAfterViewInit=function(){this._warpScript=this._warpScript||this.warpRef.nativeElement.textContent.trim(),this.LOG.debug(["ngAfterViewInit","warpScript"],this._warpScript),this.el.nativeElement.style.opacity="1",""!==this.warpRef.nativeElement.textContent.trim()&&this.execute(!1)},i.prototype.update=function(e){this.LOG.debug(["update","options"],e)},i.prototype.handleKeyDown=function(e){"r"===e.key&&this.execute(!1)},i.prototype.detectWarpScriptSpecialComments=function(){for(var e=/\s*\/\/\s*@(\w*)\s*(.*)$/g,t=this._warpScript.split("\n"),i=1;i<t.length;i++){var a=t[i];if(!(""===a||a.search("//")>=0))break;for(var n=void 0,o=RegExp(e);n=o.exec(a);){var r=n[1],s=n[2];switch(r){case"endpoint":this.execUrl=s;break;case"timeUnit":this.timeUnit=s.toLowerCase()}}}},i.prototype.execute=function(e){var t=this;this._warpScript&&""!==this._warpScript.trim()&&(this.LOG.debug(["execute"],e),this.error=void 0,this.loading=!e,this.execResult=void 0,this.loaderMessage="Requesting data",this.execUrl=this.url,this.detectWarpScriptSpecialComments(),this.LOG.debug(["execute","warpScript"],this._warpScript),this.warp10Service.exec(this._warpScript,this.execUrl).subscribe((function(i){if(t.loading=!1,t.LOG.debug(["execute"],i),i.body)try{var a=i.body;t.warpscriptResult.emit(a);var n=i.headers;t.status="Your script execution took\n "+z.formatElapsedTime(parseInt(n.get("x-warp10-elapsed"),10))+"\n serverside, fetched\n "+n.get("x-warp10-fetched")+" datapoints and performed\n "+n.get("x-warp10-ops")+"  WarpScript operations.",t.execStatus.emit({message:t.status,ops:parseInt(n.get("x-warp10-ops"),10),elapsed:parseInt(n.get("x-warp10-elapsed"),10),fetched:parseInt(n.get("x-warp10-fetched"),10)}),t._autoRefresh!==t._options.autoRefresh&&(t._autoRefresh=t._options.autoRefresh,t.timer&&window.clearInterval(t.timer),t._autoRefresh&&t._autoRefresh>0&&(t.timer=window.setInterval((function(){t.execute(!0)}),1e3*t._autoRefresh))),setTimeout((function(){t.execResult=a,t.resultTile.setResult(t.execResult,e),t._options.bounds={},t._options=Object.assign({},t._options),t.loading=!1}))}catch(e){t.LOG.error(["execute"],e),t.loading=!1}else t.LOG.error(["execute"],i),t.error=i,t.loading=!1,t.execError.emit(i)}),(function(e){t.loading=!1,t.execError.emit(e),t.LOG.error(["execute"],e)})))},i.prototype.convert=function(e){return[]},i.prototype.chartDrawn=function(e){this.chartDraw.emit(e)},i.prototype.onWarpViewNewOptions=function(e){this._options=e},i}(K);Z.decorators=[{type:t.Component,args:[{selector:"warpview-tile",template:'\x3c!--\n  ~  Copyright 2020  SenX S.A.S.\n  ~\n  ~  Licensed under the Apache License, Version 2.0 (the "License");\n  ~  you may not use this file except in compliance with the License.\n  ~  You may obtain a copy of the License at\n  ~\n  ~    http://www.apache.org/licenses/LICENSE-2.0\n  ~\n  ~  Unless required by applicable law or agreed to in writing, software\n  ~  distributed under the License is distributed on an "AS IS" BASIS,\n  ~  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  ~  See the License for the specific language governing permissions and\n  ~  limitations under the License.\n  ~\n  --\x3e\n<div class="wrapper" [ngClass]="{\'full\':  responsive}">\n  <div class="tilewrapper">\n    <h1 *ngIf="chartTitle">{{chartTitle}}</h1>\n    <div [ngClass]="{\'tile\': true,\'notitle\':  !chartTitle || chartTitle === \'\'}">\n      <warpview-spinner *ngIf="loading" message="Requesting data"></warpview-spinner>\n      <div *ngIf="_options.showErrors && error" style="height: calc(100% - 30px); width: 100%">\n        <warpview-display [responsive]="true" [debug]="debug" [options]="_options"\n                          [data]="{ data: error,  globalParams: {\n  timeMode:  \'custom\', bgColor: \'#D32C2E\', fontColor: \'#ffffff\'}}"></warpview-display>\n      </div>\n      <div *ngIf="!error" style="height: 100%; width: 100%; padding-bottom: 20px" [hidden]="loading">\n        <warpview-result-tile #resultTile\n                              (warpViewNewOptions)="onWarpViewNewOptions($event)"\n                              [debug]="debug" [type]="type"\n                              [unit]="unit" [options]="_options"\n                              (chartDraw)="chartDrawn($event)"\n                              [showLegend]="showLegend"></warpview-result-tile>\n      </div>\n    </div>\n  </div>\n  <small *ngIf="_options.showStatus" class="status">{{status}}</small>\n</div>\n\n<div #warpRef style="display: none">\n  <ng-content></ng-content>\n</div>\n',providers:[J],styles:['/*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */\n/*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */:root{--gts-attrname-font-color:#ed4a7b;--gts-attrvalue-font-color:#000;--gts-classname-font-color:#004eff;--gts-labelname-font-color:#19a979;--gts-labelvalue-font-color:#000;--gts-separator-font-color:#a0a0a0;--gts-stack-font-color:#000;--gts-tree-collapsed-icon:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA0UlEQVQ4T6WTUW7CQAxEPQdozxYb9Qb94Aj9gQSoVCp6lMr21doDZFCQiFCU3YDY//d2PeOFPHnwJC+zAlVdA/jp+/6YmZ+1S0qCPxF5HUAAO3fvSpKS4ENEvm6gfUS0c5JiBma2Ibm/QiQPmbmdSqohquoA7GqSxRaapmkBjBkAeHP336t0UWBmHcnb+VcR4XcJpjDJLjPHkS4tleqZubmNiDHU6gumDQDYuvvh7hpV9V9EXgaA5Ka2jbMjmNk7yZOIfEfE8eFVfuSDLda4JDsD3FNdEckTC0YAAAAASUVORK5CYII=);--gts-tree-expanded-icon:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA7klEQVQ4T82TMW7CQBBF/0g+QOpINEkVCmpaLoBm5COk5QYoaeAY3MDSei2LGu4QKakiBA1tCpTK8kS2sLVe2xSh8XSrnf9m/s4s4c6gO/UYGEBEXlT1bK396bFGIjIJguA7iqJLkVNbYOZXItoQ0QHAzBhz9CCFeAVgCeAjy7Jpmqa/NUBEEgDzktqGuOKKO47j+KsGhGH4lOf5HsDIg5ycyqVYVd+steuGheLAzM9EtPMgW1VdVGWJ6N0YU1gpozVGH+K+gy/uBHR1crXUqNzbQXXhduJ69sd7cxOZ+UFVH5Mk+exb+YGt8n9+5h8up1sReYC0WAAAAABJRU5ErkJggg==);--warp-slider-connect-color:#f90;--warp-slider-handle-bg-color:#fff;--warp-slider-handle-color:#004eff;--warp-slider-handle-shadow:inset 0 0 1px #fff,inset 0 1px 7px silver,0 3px 6px -3px #a0a0a0;--warp-view-annotationtooltip-font-color:#404040;--warp-view-annotationtooltip-value-font-color:#004eff;--warp-view-bar-color:#dc3545;--warp-view-chart-height:100%;--warp-view-chart-legend-bg:#fff;--warp-view-chart-legend-color:#404040;--warp-view-chart-width:100%;--warp-view-datagrid-cell-padding:5px;--warp-view-datagrid-even-bg-color:silver;--warp-view-datagrid-even-color:#000;--warp-view-datagrid-odd-bg-color:#fff;--warp-view-datagrid-odd-color:#404040;--warp-view-font-color:#000;--warp-view-map-margin:0;--warp-view-pagination-active-bg-color:#4caf50;--warp-view-pagination-active-border-color:#4caf50;--warp-view-pagination-active-color:#fff;--warp-view-pagination-bg-color:#fff;--warp-view-pagination-border-color:silver;--warp-view-pagination-disabled-color:silver;--warp-view-pagination-hover-bg-color:silver;--warp-view-pagination-hover-border-color:silver;--warp-view-pagination-hover-color:#000;--warp-view-plot-chart-height:100%;--warp-view-popup-bg-color:#fff;--warp-view-popup-body-bg-color:#fff;--warp-view-popup-body-color:#000;--warp-view-popup-border-color:rgba(0,0,0,0.2);--warp-view-popup-close-color:#404040;--warp-view-popup-header-bg-color:silver;--warp-view-popup-title-color:#404040;--warp-view-resize-handle-color:silver;--warp-view-resize-handle-height:10px;--warp-view-slider-pointer-size:65px;--warp-view-spinner-color:#f90;--warp-view-switch-handle-checked-color:radial-gradient(#fff 15%,#00cd00 100%);--warp-view-switch-handle-color:radial-gradient(#fff 15%,silver 100%);--warp-view-switch-height:30px;--warp-view-switch-inset-checked-color:#00cd00;--warp-view-switch-inset-color:silver;--warp-view-switch-radius:18px;--warp-view-switch-width:100px;--warp-view-tile-height:100%;--warp-view-tile-width:100%}.noData{color:var(--warp-view-chart-legend-color);position:relative;text-align:center;width:100%}:host,warp-view-tile,warpview-tile{max-height:var(--warp-view-tile-height,100%);min-height:var(--warp-view-tile-height,100%);min-width:var(--warp-view-tile-width,100%);overflow:auto;width:var(--warp-view-tile-width,100%)}:host .error,warp-view-tile .error,warpview-tile .error{color:#dc3545;font-weight:700;text-align:center;width:100%}:host .wrapper,warp-view-tile .wrapper,warpview-tile .wrapper{height:var(--warp-view-tile-height,100%);min-height:50px;opacity:1;position:relative;width:var(--warp-view-tile-width,100%)}:host .wrapper .status,warp-view-tile .wrapper .status,warpview-tile .wrapper .status{background-color:hsla(0,0%,100%,.7);bottom:0;color:#000;font-size:11px;padding:1px 5px;position:absolute;z-index:999}:host .wrapper.full,warp-view-tile .wrapper.full,warpview-tile .wrapper.full{display:flex;flex-direction:column;height:100%;justify-content:space-around;width:100%}:host .wrapper .tilewrapper,warp-view-tile .wrapper .tilewrapper,warpview-tile .wrapper .tilewrapper{height:100%;width:100%}:host .wrapper .tilewrapper .tile,warp-view-tile .wrapper .tilewrapper .tile,warpview-tile .wrapper .tilewrapper .tile{height:calc(var(--warp-view-tile-height, 100%) - 40px);overflow-x:hidden;overflow-y:auto;position:relative;width:100%}:host .wrapper .tilewrapper .notitle,warp-view-tile .wrapper .tilewrapper .notitle,warpview-tile .wrapper .tilewrapper .notitle{height:100%}:host .wrapper .tilewrapper h1,warp-view-tile .wrapper .tilewrapper h1,warpview-tile .wrapper .tilewrapper h1{color:var(--warp-view-font-color);font-size:20px;margin:0;padding:5px}:host .wrapper .tilewrapper h1 small,warp-view-tile .wrapper .tilewrapper h1 small,warpview-tile .wrapper .tilewrapper h1 small{font-size:10px;margin-left:10px}']}]}],Z.ctorParameters=function(){return[{type:t.ElementRef},{type:W},{type:t.Renderer2},{type:t.NgZone},{type:X}]},Z.propDecorators={warpRef:[{type:t.ViewChild,args:["warpRef",{static:!0}]}],resultTile:[{type:t.ViewChild,args:["resultTile"]}],warpscriptResult:[{type:t.Output,args:["warpscriptResult"]}],execStatus:[{type:t.Output,args:["execStatus"]}],execError:[{type:t.Output,args:["execError"]}],type:[{type:t.Input,args:["type"]}],chartTitle:[{type:t.Input,args:["chartTitle"]}],url:[{type:t.Input,args:["url"]}],isAlone:[{type:t.Input,args:["isAlone"]}],gtsFilter:[{type:t.Input,args:["gtsFilter"]}],warpscript:[{type:t.Input}],handleKeyDown:[{type:t.HostListener,args:["document:keyup",["$event"]]}]};var $=function(){this.message="Loading and parsing data..."};$.decorators=[{type:t.Component,args:[{selector:"warpview-spinner",template:'\x3c!--\n  ~  Copyright 2020  SenX S.A.S.\n  ~\n  ~  Licensed under the Apache License, Version 2.0 (the "License");\n  ~  you may not use this file except in compliance with the License.\n  ~  You may obtain a copy of the License at\n  ~\n  ~    http://www.apache.org/licenses/LICENSE-2.0\n  ~\n  ~  Unless required by applicable law or agreed to in writing, software\n  ~  distributed under the License is distributed on an "AS IS" BASIS,\n  ~  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  ~  See the License for the specific language governing permissions and\n  ~  limitations under the License.\n  ~\n  --\x3e\n\n<div class="wrapper">\n  <div class="lds-ring">\n    <div></div>\n    <div></div>\n    <div></div>\n    <div></div>\n  </div>\n  <h2>{{message}}</h2>\n</div>\n',encapsulation:t.ViewEncapsulation.ShadowDom,styles:['/*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */\n/*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */:root{--gts-attrname-font-color:#ed4a7b;--gts-attrvalue-font-color:#000;--gts-classname-font-color:#004eff;--gts-labelname-font-color:#19a979;--gts-labelvalue-font-color:#000;--gts-separator-font-color:#a0a0a0;--gts-stack-font-color:#000;--gts-tree-collapsed-icon:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA0UlEQVQ4T6WTUW7CQAxEPQdozxYb9Qb94Aj9gQSoVCp6lMr21doDZFCQiFCU3YDY//d2PeOFPHnwJC+zAlVdA/jp+/6YmZ+1S0qCPxF5HUAAO3fvSpKS4ENEvm6gfUS0c5JiBma2Ibm/QiQPmbmdSqohquoA7GqSxRaapmkBjBkAeHP336t0UWBmHcnb+VcR4XcJpjDJLjPHkS4tleqZubmNiDHU6gumDQDYuvvh7hpV9V9EXgaA5Ka2jbMjmNk7yZOIfEfE8eFVfuSDLda4JDsD3FNdEckTC0YAAAAASUVORK5CYII=);--gts-tree-expanded-icon:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA7klEQVQ4T82TMW7CQBBF/0g+QOpINEkVCmpaLoBm5COk5QYoaeAY3MDSei2LGu4QKakiBA1tCpTK8kS2sLVe2xSh8XSrnf9m/s4s4c6gO/UYGEBEXlT1bK396bFGIjIJguA7iqJLkVNbYOZXItoQ0QHAzBhz9CCFeAVgCeAjy7Jpmqa/NUBEEgDzktqGuOKKO47j+KsGhGH4lOf5HsDIg5ycyqVYVd+steuGheLAzM9EtPMgW1VdVGWJ6N0YU1gpozVGH+K+gy/uBHR1crXUqNzbQXXhduJ69sd7cxOZ+UFVH5Mk+exb+YGt8n9+5h8up1sReYC0WAAAAABJRU5ErkJggg==);--warp-slider-connect-color:#f90;--warp-slider-handle-bg-color:#fff;--warp-slider-handle-color:#004eff;--warp-slider-handle-shadow:inset 0 0 1px #fff,inset 0 1px 7px silver,0 3px 6px -3px #a0a0a0;--warp-view-annotationtooltip-font-color:#404040;--warp-view-annotationtooltip-value-font-color:#004eff;--warp-view-bar-color:#dc3545;--warp-view-chart-height:100%;--warp-view-chart-legend-bg:#fff;--warp-view-chart-legend-color:#404040;--warp-view-chart-width:100%;--warp-view-datagrid-cell-padding:5px;--warp-view-datagrid-even-bg-color:silver;--warp-view-datagrid-even-color:#000;--warp-view-datagrid-odd-bg-color:#fff;--warp-view-datagrid-odd-color:#404040;--warp-view-font-color:#000;--warp-view-map-margin:0;--warp-view-pagination-active-bg-color:#4caf50;--warp-view-pagination-active-border-color:#4caf50;--warp-view-pagination-active-color:#fff;--warp-view-pagination-bg-color:#fff;--warp-view-pagination-border-color:silver;--warp-view-pagination-disabled-color:silver;--warp-view-pagination-hover-bg-color:silver;--warp-view-pagination-hover-border-color:silver;--warp-view-pagination-hover-color:#000;--warp-view-plot-chart-height:100%;--warp-view-popup-bg-color:#fff;--warp-view-popup-body-bg-color:#fff;--warp-view-popup-body-color:#000;--warp-view-popup-border-color:rgba(0,0,0,0.2);--warp-view-popup-close-color:#404040;--warp-view-popup-header-bg-color:silver;--warp-view-popup-title-color:#404040;--warp-view-resize-handle-color:silver;--warp-view-resize-handle-height:10px;--warp-view-slider-pointer-size:65px;--warp-view-spinner-color:#f90;--warp-view-switch-handle-checked-color:radial-gradient(#fff 15%,#00cd00 100%);--warp-view-switch-handle-color:radial-gradient(#fff 15%,silver 100%);--warp-view-switch-height:30px;--warp-view-switch-inset-checked-color:#00cd00;--warp-view-switch-inset-color:silver;--warp-view-switch-radius:18px;--warp-view-switch-width:100px;--warp-view-tile-height:100%;--warp-view-tile-width:100%}.noData{color:var(--warp-view-chart-legend-color);text-align:center}.noData,:host .wrapper{position:relative;width:100%}:host .wrapper{height:100%;min-height:230px}:host .wrapper h2{bottom:0;margin:auto;text-align:center;width:50%}:host .wrapper .lds-ring,:host .wrapper h2{display:inline-block;height:64px;left:50%;position:absolute;transform:translate(-50%,-50%)}:host .wrapper .lds-ring{top:50%;width:64px}:host .wrapper .lds-ring div{-webkit-animation:lds-ring 1.2s cubic-bezier(.5,0,.5,1) infinite;animation:lds-ring 1.2s cubic-bezier(.5,0,.5,1) infinite;border:6px solid transparent;border-radius:50%;border-top:6px solid var(--warp-view-spinner-color);box-sizing:border-box;display:block;height:51px;margin:6px;position:absolute;width:51px}:host .wrapper .lds-ring div:first-child{-webkit-animation-delay:-.45s;animation-delay:-.45s}:host .wrapper .lds-ring div:nth-child(2){-webkit-animation-delay:-.3s;animation-delay:-.3s}:host .wrapper .lds-ring div:nth-child(3){-webkit-animation-delay:-.15s;animation-delay:-.15s}@-webkit-keyframes lds-ring{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}@keyframes lds-ring{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}']}]}],$.propDecorators={message:[{type:t.Input,args:["message"]}]};var ee=function(){function e(e){this.el=e,this.text1="",this.text2="",this.stateChange=new t.EventEmitter,this.state=!1}return Object.defineProperty(e.prototype,"checked",{get:function(){return this.state},set:function(e){this.state=e},enumerable:!1,configurable:!0}),e.prototype.ngOnInit=function(){this.state=this.checked},e.prototype.switched=function(){this.state=!this.state,this.stateChange.emit({state:this.state,id:this.el.nativeElement.id})},e}();ee.decorators=[{type:t.Component,args:[{selector:"warpview-toggle",template:'\x3c!--\n  ~  Copyright 2020  SenX S.A.S.\n  ~\n  ~  Licensed under the Apache License, Version 2.0 (the "License");\n  ~  you may not use this file except in compliance with the License.\n  ~  You may obtain a copy of the License at\n  ~\n  ~    http://www.apache.org/licenses/LICENSE-2.0\n  ~\n  ~  Unless required by applicable law or agreed to in writing, software\n  ~  distributed under the License is distributed on an "AS IS" BASIS,\n  ~  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  ~  See the License for the specific language governing permissions and\n  ~  limitations under the License.\n  ~\n  --\x3e\n\n<div class="container">\n  <div class="text">{{text1}}</div>\n  <label class="switch">\n    <input type="checkbox" class="switch-input" [checked]="state" (click)="switched()"/>\n    <span class="switch-label"></span>\n    <span class="switch-handle"></span>\n  </label>\n  <div class="text">{{text2}}</div>\n</div>\n',styles:['/*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */\n/*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */:root{--gts-attrname-font-color:#ed4a7b;--gts-attrvalue-font-color:#000;--gts-classname-font-color:#004eff;--gts-labelname-font-color:#19a979;--gts-labelvalue-font-color:#000;--gts-separator-font-color:#a0a0a0;--gts-stack-font-color:#000;--gts-tree-collapsed-icon:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA0UlEQVQ4T6WTUW7CQAxEPQdozxYb9Qb94Aj9gQSoVCp6lMr21doDZFCQiFCU3YDY//d2PeOFPHnwJC+zAlVdA/jp+/6YmZ+1S0qCPxF5HUAAO3fvSpKS4ENEvm6gfUS0c5JiBma2Ibm/QiQPmbmdSqohquoA7GqSxRaapmkBjBkAeHP336t0UWBmHcnb+VcR4XcJpjDJLjPHkS4tleqZubmNiDHU6gumDQDYuvvh7hpV9V9EXgaA5Ka2jbMjmNk7yZOIfEfE8eFVfuSDLda4JDsD3FNdEckTC0YAAAAASUVORK5CYII=);--gts-tree-expanded-icon:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA7klEQVQ4T82TMW7CQBBF/0g+QOpINEkVCmpaLoBm5COk5QYoaeAY3MDSei2LGu4QKakiBA1tCpTK8kS2sLVe2xSh8XSrnf9m/s4s4c6gO/UYGEBEXlT1bK396bFGIjIJguA7iqJLkVNbYOZXItoQ0QHAzBhz9CCFeAVgCeAjy7Jpmqa/NUBEEgDzktqGuOKKO47j+KsGhGH4lOf5HsDIg5ycyqVYVd+steuGheLAzM9EtPMgW1VdVGWJ6N0YU1gpozVGH+K+gy/uBHR1crXUqNzbQXXhduJ69sd7cxOZ+UFVH5Mk+exb+YGt8n9+5h8up1sReYC0WAAAAABJRU5ErkJggg==);--warp-slider-connect-color:#f90;--warp-slider-handle-bg-color:#fff;--warp-slider-handle-color:#004eff;--warp-slider-handle-shadow:inset 0 0 1px #fff,inset 0 1px 7px silver,0 3px 6px -3px #a0a0a0;--warp-view-annotationtooltip-font-color:#404040;--warp-view-annotationtooltip-value-font-color:#004eff;--warp-view-bar-color:#dc3545;--warp-view-chart-height:100%;--warp-view-chart-legend-bg:#fff;--warp-view-chart-legend-color:#404040;--warp-view-chart-width:100%;--warp-view-datagrid-cell-padding:5px;--warp-view-datagrid-even-bg-color:silver;--warp-view-datagrid-even-color:#000;--warp-view-datagrid-odd-bg-color:#fff;--warp-view-datagrid-odd-color:#404040;--warp-view-font-color:#000;--warp-view-map-margin:0;--warp-view-pagination-active-bg-color:#4caf50;--warp-view-pagination-active-border-color:#4caf50;--warp-view-pagination-active-color:#fff;--warp-view-pagination-bg-color:#fff;--warp-view-pagination-border-color:silver;--warp-view-pagination-disabled-color:silver;--warp-view-pagination-hover-bg-color:silver;--warp-view-pagination-hover-border-color:silver;--warp-view-pagination-hover-color:#000;--warp-view-plot-chart-height:100%;--warp-view-popup-bg-color:#fff;--warp-view-popup-body-bg-color:#fff;--warp-view-popup-body-color:#000;--warp-view-popup-border-color:rgba(0,0,0,0.2);--warp-view-popup-close-color:#404040;--warp-view-popup-header-bg-color:silver;--warp-view-popup-title-color:#404040;--warp-view-resize-handle-color:silver;--warp-view-resize-handle-height:10px;--warp-view-slider-pointer-size:65px;--warp-view-spinner-color:#f90;--warp-view-switch-handle-checked-color:radial-gradient(#fff 15%,#00cd00 100%);--warp-view-switch-handle-color:radial-gradient(#fff 15%,silver 100%);--warp-view-switch-height:30px;--warp-view-switch-inset-checked-color:#00cd00;--warp-view-switch-inset-color:silver;--warp-view-switch-radius:18px;--warp-view-switch-width:100px;--warp-view-tile-height:100%;--warp-view-tile-width:100%}.noData{color:var(--warp-view-chart-legend-color);position:relative;text-align:center;width:100%}:host .switch{border-radius:var(--warp-view-switch-radius);cursor:pointer;display:block;height:var(--warp-view-switch-height);margin-bottom:auto;margin-top:auto;padding:3px;position:relative;width:var(--warp-view-switch-width)}:host .switch-input{display:none}:host .switch-label{background:var(--warp-view-switch-inset-color);border-radius:inherit;box-shadow:inset 0 1px 2px rgba(0,0,0,.12),inset 0 0 2px rgba(0,0,0,.15);display:block;height:inherit;position:relative;text-transform:uppercase}:host .switch-input:checked~.switch-label{background:var(--warp-view-switch-inset-checked-color);box-shadow:inset 0 1px 2px rgba(0,0,0,.15),inset 0 0 3px rgba(0,0,0,.2)}:host .switch-handle{background:var(--warp-view-switch-handle-color);border-radius:100%;box-shadow:1px 1px 5px rgba(0,0,0,.2);height:calc(var(--warp-view-switch-height) - 2px);left:4px;position:absolute;top:4px;width:calc(var(--warp-view-switch-height) - 2px)}:host .switch-input:checked~.switch-handle{background:var(--warp-view-switch-handle-checked-color);box-shadow:-1px 1px 5px rgba(0,0,0,.2);left:calc(var(--warp-view-switch-width) - var(--warp-view-switch-height) - 2px)}:host .switch-handle,:host .switch-label{-moz-transition:All .3s ease;-o-transition:All .3s ease;-webkit-transition:All .3s ease;transition:All .3s ease}:host .container{display:flex}:host .text{color:var(--warp-view-font-color);padding:7px}']}]}],ee.ctorParameters=function(){return[{type:t.ElementRef}]},ee.propDecorators={checked:[{type:t.Input,args:["checked"]}],text1:[{type:t.Input,args:["text1"]}],text2:[{type:t.Input,args:["text2"]}],stateChange:[{type:t.Output,args:["stateChange"]}]};var te=function(e){function t(i,a,n,o){var r=e.call(this,i,a,n,o)||this;return r.el=i,r.renderer=a,r.sizeService=n,r.ngZone=o,r.layout={showlegend:!1,xaxis:{},yaxis:{exponentformat:"none",fixedrange:!0,showline:!0},margin:{t:10,b:40,r:10,l:50}},r.LOG=new Y(t,r._debug),r}return T(t,e),t.prototype.ngOnInit=function(){this.drawChart()},t.prototype.update=function(e){this.drawChart()},t.prototype.drawChart=function(){this.initChart(this.el)&&(this.plotlyConfig.scrollZoom=!0,this.buildGraph())},t.prototype.convert=function(e){var t=this,i=[];z.isArray(e.data)?(e.data=z.flatDeep(e.data),this.LOG.debug(["convert","isArray"]),e.data.length>0&&z.isGts(e.data[0])?(this.LOG.debug(["convert","isArray 2"]),i=z.flattenGtsIdArray(e.data,0).res):(this.LOG.debug(["convert","isArray 3"]),i=e.data)):(this.LOG.debug(["convert","not array"]),i=[e.data]),this.LOG.debug(["convert","gtsList"],i);var a=[];return i.forEach((function(i,n){if(t.LOG.debug(["convert","gts item"],i),i.v){j.sort(i.v,(function(e,t){return e[0]-t[0]}));var o=z.serializeGtsMetadata(i),r=M.getColor(i.id||n,t._options.scheme),s=((e.params||[])[n]||{datasetColor:r}).datasetColor||r,p={type:"bar",mode:"lines+markers",name:o,text:o,orientation:t._options.horizontal?"h":"v",x:[],y:[],hoverinfo:"none",marker:{color:M.transparentize(s),line:{color:s,width:1}}};i.v.forEach((function(e){var i=e[0];t._options.horizontal?(p.x.push(e[e.length-1]),t._options.timeMode&&"timestamp"===t._options.timeMode?p.y.push(i):p.y.push(z.toISOString(i,t.divider,t._options.timeZone))):(p.y.push(e[e.length-1]),t._options.timeMode&&"timestamp"===t._options.timeMode?p.x.push(i):p.x.push(z.toISOString(i,t.divider,t._options.timeZone)))})),a.push(p)}else t._options.timeMode="custom",t.LOG.debug(["convert","gts"],i),(i.columns||[]).forEach((function(n,o){var r=M.getColor(i.id||o,t._options.scheme),s=((e.params||[])[o]||{datasetColor:r}).datasetColor||r,p={type:"bar",mode:"lines+markers",name:n,text:n,orientation:t._options.horizontal?"h":"v",x:[],y:[],hoverinfo:"none",marker:{color:M.transparentize(s),line:{color:s,width:1}}};t._options.horizontal?(i.rows||[]).forEach((function(e){p.y.unshift(e[0]),p.x.push(e[o+1])})):(i.rows||[]).forEach((function(e){p.x.push(e[0]),p.y.push(e[o+1])})),a.push(p)}))})),this.LOG.debug(["convert","dataset"],a,this._options.horizontal),a},t.prototype.buildGraph=function(){this.LOG.debug(["buildGraph","this.layout"],this.responsive),this.LOG.debug(["buildGraph","this.layout"],this.layout),this.LOG.debug(["buildGraph","this.plotlyConfig"],this.plotlyConfig),this.layout.showlegend=this._showLegend,this.layout.barmode=this._options.stacked?"stack":"group",this.layout.yaxis.color=this.getGridColor(this.el.nativeElement),this.layout.xaxis.color=this.getGridColor(this.el.nativeElement),this.loading=!1},t}(K);te.decorators=[{type:t.Component,args:[{selector:"warpview-bar",template:'\x3c!--\n  ~  Copyright 2020  SenX S.A.S.\n  ~\n  ~  Licensed under the Apache License, Version 2.0 (the "License");\n  ~  you may not use this file except in compliance with the License.\n  ~  You may obtain a copy of the License at\n  ~\n  ~    http://www.apache.org/licenses/LICENSE-2.0\n  ~\n  ~  Unless required by applicable law or agreed to in writing, software\n  ~  distributed under the License is distributed on an "AS IS" BASIS,\n  ~  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  ~  See the License for the specific language governing permissions and\n  ~  limitations under the License.\n  ~\n  --\x3e\n\n<div id="chartContainer" #chartContainer (mouseleave)="hideTooltip()">\n  <warpview-spinner *ngIf="loading" message="Parsing data"></warpview-spinner>\n  <p class="noData" *ngIf="noData">No data to display or wrong data format.</p>\n  <div *ngIf="!loading && !noData">\n    <warpview-plotly #graph *ngIf="plotlyData?.length > 0"\n                 [data]="plotlyData" [layout]="layout" [config]="plotlyConfig" (afterPlot)="afterPlot()"\n                 className="chart" (hover)="hover($event)" (unhover)="unhover($event)"\n                 [updateOnLayoutChange]="true" [updateOnDataChange]="true" [debug]="debug"\n                 [style]="{position: \'relative\', width: \'100%\', height: \'100%\'}"></warpview-plotly>\n  </div>\n  <div #toolTip class="wv-tooltip" [ngStyle]="getTooltipPosition()"></div>\n</div>\n',encapsulation:t.ViewEncapsulation.ShadowDom,styles:['/*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */\n/*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */:root{--gts-attrname-font-color:#ed4a7b;--gts-attrvalue-font-color:#000;--gts-classname-font-color:#004eff;--gts-labelname-font-color:#19a979;--gts-labelvalue-font-color:#000;--gts-separator-font-color:#a0a0a0;--gts-stack-font-color:#000;--gts-tree-collapsed-icon:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA0UlEQVQ4T6WTUW7CQAxEPQdozxYb9Qb94Aj9gQSoVCp6lMr21doDZFCQiFCU3YDY//d2PeOFPHnwJC+zAlVdA/jp+/6YmZ+1S0qCPxF5HUAAO3fvSpKS4ENEvm6gfUS0c5JiBma2Ibm/QiQPmbmdSqohquoA7GqSxRaapmkBjBkAeHP336t0UWBmHcnb+VcR4XcJpjDJLjPHkS4tleqZubmNiDHU6gumDQDYuvvh7hpV9V9EXgaA5Ka2jbMjmNk7yZOIfEfE8eFVfuSDLda4JDsD3FNdEckTC0YAAAAASUVORK5CYII=);--gts-tree-expanded-icon:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA7klEQVQ4T82TMW7CQBBF/0g+QOpINEkVCmpaLoBm5COk5QYoaeAY3MDSei2LGu4QKakiBA1tCpTK8kS2sLVe2xSh8XSrnf9m/s4s4c6gO/UYGEBEXlT1bK396bFGIjIJguA7iqJLkVNbYOZXItoQ0QHAzBhz9CCFeAVgCeAjy7Jpmqa/NUBEEgDzktqGuOKKO47j+KsGhGH4lOf5HsDIg5ycyqVYVd+steuGheLAzM9EtPMgW1VdVGWJ6N0YU1gpozVGH+K+gy/uBHR1crXUqNzbQXXhduJ69sd7cxOZ+UFVH5Mk+exb+YGt8n9+5h8up1sReYC0WAAAAABJRU5ErkJggg==);--warp-slider-connect-color:#f90;--warp-slider-handle-bg-color:#fff;--warp-slider-handle-color:#004eff;--warp-slider-handle-shadow:inset 0 0 1px #fff,inset 0 1px 7px silver,0 3px 6px -3px #a0a0a0;--warp-view-annotationtooltip-font-color:#404040;--warp-view-annotationtooltip-value-font-color:#004eff;--warp-view-bar-color:#dc3545;--warp-view-chart-height:100%;--warp-view-chart-legend-bg:#fff;--warp-view-chart-legend-color:#404040;--warp-view-chart-width:100%;--warp-view-datagrid-cell-padding:5px;--warp-view-datagrid-even-bg-color:silver;--warp-view-datagrid-even-color:#000;--warp-view-datagrid-odd-bg-color:#fff;--warp-view-datagrid-odd-color:#404040;--warp-view-font-color:#000;--warp-view-map-margin:0;--warp-view-pagination-active-bg-color:#4caf50;--warp-view-pagination-active-border-color:#4caf50;--warp-view-pagination-active-color:#fff;--warp-view-pagination-bg-color:#fff;--warp-view-pagination-border-color:silver;--warp-view-pagination-disabled-color:silver;--warp-view-pagination-hover-bg-color:silver;--warp-view-pagination-hover-border-color:silver;--warp-view-pagination-hover-color:#000;--warp-view-plot-chart-height:100%;--warp-view-popup-bg-color:#fff;--warp-view-popup-body-bg-color:#fff;--warp-view-popup-body-color:#000;--warp-view-popup-border-color:rgba(0,0,0,0.2);--warp-view-popup-close-color:#404040;--warp-view-popup-header-bg-color:silver;--warp-view-popup-title-color:#404040;--warp-view-resize-handle-color:silver;--warp-view-resize-handle-height:10px;--warp-view-slider-pointer-size:65px;--warp-view-spinner-color:#f90;--warp-view-switch-handle-checked-color:radial-gradient(#fff 15%,#00cd00 100%);--warp-view-switch-handle-color:radial-gradient(#fff 15%,silver 100%);--warp-view-switch-height:30px;--warp-view-switch-inset-checked-color:#00cd00;--warp-view-switch-inset-color:silver;--warp-view-switch-radius:18px;--warp-view-switch-width:100px;--warp-view-tile-height:100%;--warp-view-tile-width:100%}.noData{color:var(--warp-view-chart-legend-color);position:relative;text-align:center;width:100%}\n\n/*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */\n/*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */.gts-classname{color:var(--gts-classname-font-color)}.gts-labelname{color:var(--gts-labelname-font-color)}.gts-attrname{color:var(--gts-attrname-font-color)}.gts-separator{color:var(--gts-separator-font-color)}.gts-labelvalue{color:var(--gts-labelvalue-font-color);font-style:italic}.gts-attrvalue{color:var(--gts-attrvalue-font-color);font-style:italic}.wv-tooltip{background-color:var(--warp-view-chart-legend-bg)!important;border:1px solid grey;border-radius:5px;box-shadow:none;color:var(--warp-view-chart-legend-color)!important;display:none;font-size:10px;height:auto!important;left:-1000px;max-width:50%;min-width:100px;padding:10px;pointer-events:none;position:absolute;text-align:left;width:auto;z-index:999}.wv-tooltip .chip{background-color:#bbb;border:2px solid #454545;border-radius:50%;cursor:pointer;display:inline-block;height:5px;margin-bottom:auto;margin-top:auto;vertical-align:middle;width:5px}:host{display:block;height:100%}:host .modebar-group path{fill:var(--warp-view-font-color)}:host #chartContainer,:host #chartContainer div{height:100%}:host div.chart{height:var(--warp-view-chart-height);width:var(--warp-view-chart-width)}']}]}],te.ctorParameters=function(){return[{type:t.ElementRef},{type:t.Renderer2},{type:W},{type:t.NgZone}]};var ie=function(e){function t(i,a,n,o){var r=e.call(this,i,a,n,o)||this;return r.el=i,r.renderer=a,r.sizeService=n,r.ngZone=o,r.layout={showlegend:!1,xaxis:{},hovermode:"closest",hoverdistance:20,yaxis:{},margin:{t:10,b:25,r:10,l:50}},r.LOG=new Y(t,r._debug),r}return T(t,e),t.prototype.ngOnInit=function(){this.drawChart()},t.prototype.update=function(e){this.drawChart()},t.prototype.drawChart=function(){this.initChart(this.el)&&(this.plotlyConfig.scrollZoom=!0,this.buildGraph())},t.prototype.convert=function(e){var t=this,i=[];return z.flatDeep(e.data).forEach((function(a,n){var o=Object.keys(a)[0],r=M.getColor(a.id||n,t._options.scheme),s=((e.params||[])[n]||{datasetColor:r}).datasetColor||r,p={type:"scattergl",mode:"markers",name:o,text:o,x:[],y:[],hoverinfo:"none",marker:{color:M.transparentize(s),line:{color:s},size:[]}};if(z.isGts(a)){var l=a.v.map((function(e){return e[0]})),h=a.v.map((function(e){return e[e.length-1]})),d=new Array(a.v.length).fill(10);"timestamp"===t._options.timeMode?p.x=l:p.x=l.map((function(e){return z.toISOString(e,t.divider,t._options.timeZone)})),p.y=h,p.marker.size=d}else a[o].forEach((function(e){p.y.push(e[0]),p.x.push(e[1]),p.marker.size.push(e[2])}));i.push(p)})),this.noData=0===i.length,this.LOG.debug(["convert","dataset"],i),i},t.prototype.buildGraph=function(){this.LOG.debug(["drawChart","this.responsive"],this._responsive),this.LOG.debug(["drawChart","this.layout"],this.layout),this.LOG.debug(["drawChart","this.plotlyConfig"],this.plotlyConfig),this.layout.showlegend=this.showLegend,this.layout.yaxis.color=this.getGridColor(this.el.nativeElement),this.layout.xaxis.color=this.getGridColor(this.el.nativeElement),this.loading=!1},t}(K);ie.decorators=[{type:t.Component,args:[{selector:"warpview-bubble",template:'\x3c!--\n  ~  Copyright 2020  SenX S.A.S.\n  ~\n  ~  Licensed under the Apache License, Version 2.0 (the "License");\n  ~  you may not use this file except in compliance with the License.\n  ~  You may obtain a copy of the License at\n  ~\n  ~    http://www.apache.org/licenses/LICENSE-2.0\n  ~\n  ~  Unless required by applicable law or agreed to in writing, software\n  ~  distributed under the License is distributed on an "AS IS" BASIS,\n  ~  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  ~  See the License for the specific language governing permissions and\n  ~  limitations under the License.\n  ~\n  --\x3e\n\n<div id="chartContainer" #chartContainer (mouseleave)="hideTooltip()">\n  <warpview-spinner *ngIf="loading" message="Parsing data"></warpview-spinner>\n  <p class="noData" *ngIf="noData">No data to display or wrong data format.</p>\n  <div *ngIf="!loading && !noData">\n    <warpview-plotly #graph *ngIf="plotlyData?.length > 0"\n                 [data]="plotlyData" [layout]="layout" [config]="plotlyConfig" (afterPlot)="afterPlot()"\n                 className="chart" (hover)="hover($event)" (unhover)="unhover($event)"\n                 [updateOnLayoutChange]="true" [updateOnDataChange]="true" [debug]="debug"\n                 [style]="{position: \'relative\', width: \'100%\', height: \'100%\'}"></warpview-plotly>\n  </div>\n  <div #toolTip class="wv-tooltip" [ngStyle]="getTooltipPosition()"></div>\n</div>\n',encapsulation:t.ViewEncapsulation.ShadowDom,styles:['/*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */\n/*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */:root{--gts-attrname-font-color:#ed4a7b;--gts-attrvalue-font-color:#000;--gts-classname-font-color:#004eff;--gts-labelname-font-color:#19a979;--gts-labelvalue-font-color:#000;--gts-separator-font-color:#a0a0a0;--gts-stack-font-color:#000;--gts-tree-collapsed-icon:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA0UlEQVQ4T6WTUW7CQAxEPQdozxYb9Qb94Aj9gQSoVCp6lMr21doDZFCQiFCU3YDY//d2PeOFPHnwJC+zAlVdA/jp+/6YmZ+1S0qCPxF5HUAAO3fvSpKS4ENEvm6gfUS0c5JiBma2Ibm/QiQPmbmdSqohquoA7GqSxRaapmkBjBkAeHP336t0UWBmHcnb+VcR4XcJpjDJLjPHkS4tleqZubmNiDHU6gumDQDYuvvh7hpV9V9EXgaA5Ka2jbMjmNk7yZOIfEfE8eFVfuSDLda4JDsD3FNdEckTC0YAAAAASUVORK5CYII=);--gts-tree-expanded-icon:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA7klEQVQ4T82TMW7CQBBF/0g+QOpINEkVCmpaLoBm5COk5QYoaeAY3MDSei2LGu4QKakiBA1tCpTK8kS2sLVe2xSh8XSrnf9m/s4s4c6gO/UYGEBEXlT1bK396bFGIjIJguA7iqJLkVNbYOZXItoQ0QHAzBhz9CCFeAVgCeAjy7Jpmqa/NUBEEgDzktqGuOKKO47j+KsGhGH4lOf5HsDIg5ycyqVYVd+steuGheLAzM9EtPMgW1VdVGWJ6N0YU1gpozVGH+K+gy/uBHR1crXUqNzbQXXhduJ69sd7cxOZ+UFVH5Mk+exb+YGt8n9+5h8up1sReYC0WAAAAABJRU5ErkJggg==);--warp-slider-connect-color:#f90;--warp-slider-handle-bg-color:#fff;--warp-slider-handle-color:#004eff;--warp-slider-handle-shadow:inset 0 0 1px #fff,inset 0 1px 7px silver,0 3px 6px -3px #a0a0a0;--warp-view-annotationtooltip-font-color:#404040;--warp-view-annotationtooltip-value-font-color:#004eff;--warp-view-bar-color:#dc3545;--warp-view-chart-height:100%;--warp-view-chart-legend-bg:#fff;--warp-view-chart-legend-color:#404040;--warp-view-chart-width:100%;--warp-view-datagrid-cell-padding:5px;--warp-view-datagrid-even-bg-color:silver;--warp-view-datagrid-even-color:#000;--warp-view-datagrid-odd-bg-color:#fff;--warp-view-datagrid-odd-color:#404040;--warp-view-font-color:#000;--warp-view-map-margin:0;--warp-view-pagination-active-bg-color:#4caf50;--warp-view-pagination-active-border-color:#4caf50;--warp-view-pagination-active-color:#fff;--warp-view-pagination-bg-color:#fff;--warp-view-pagination-border-color:silver;--warp-view-pagination-disabled-color:silver;--warp-view-pagination-hover-bg-color:silver;--warp-view-pagination-hover-border-color:silver;--warp-view-pagination-hover-color:#000;--warp-view-plot-chart-height:100%;--warp-view-popup-bg-color:#fff;--warp-view-popup-body-bg-color:#fff;--warp-view-popup-body-color:#000;--warp-view-popup-border-color:rgba(0,0,0,0.2);--warp-view-popup-close-color:#404040;--warp-view-popup-header-bg-color:silver;--warp-view-popup-title-color:#404040;--warp-view-resize-handle-color:silver;--warp-view-resize-handle-height:10px;--warp-view-slider-pointer-size:65px;--warp-view-spinner-color:#f90;--warp-view-switch-handle-checked-color:radial-gradient(#fff 15%,#00cd00 100%);--warp-view-switch-handle-color:radial-gradient(#fff 15%,silver 100%);--warp-view-switch-height:30px;--warp-view-switch-inset-checked-color:#00cd00;--warp-view-switch-inset-color:silver;--warp-view-switch-radius:18px;--warp-view-switch-width:100px;--warp-view-tile-height:100%;--warp-view-tile-width:100%}.noData{color:var(--warp-view-chart-legend-color);position:relative;text-align:center;width:100%}\n\n/*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */\n/*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */.gts-classname{color:var(--gts-classname-font-color)}.gts-labelname{color:var(--gts-labelname-font-color)}.gts-attrname{color:var(--gts-attrname-font-color)}.gts-separator{color:var(--gts-separator-font-color)}.gts-labelvalue{color:var(--gts-labelvalue-font-color);font-style:italic}.gts-attrvalue{color:var(--gts-attrvalue-font-color);font-style:italic}.wv-tooltip{background-color:var(--warp-view-chart-legend-bg)!important;border:1px solid grey;border-radius:5px;box-shadow:none;color:var(--warp-view-chart-legend-color)!important;display:none;font-size:10px;height:auto!important;left:-1000px;max-width:50%;min-width:100px;padding:10px;pointer-events:none;position:absolute;text-align:left;width:auto;z-index:999}.wv-tooltip .chip{background-color:#bbb;border:2px solid #454545;border-radius:50%;cursor:pointer;display:inline-block;height:5px;margin-bottom:auto;margin-top:auto;vertical-align:middle;width:5px}:host{display:block}:host,:host #chartContainer,:host #chartContainer div{height:100%}:host div.chart{height:var(--warp-view-chart-height);width:var(--warp-view-chart-width)}']}]}],ie.ctorParameters=function(){return[{type:t.ElementRef},{type:t.Renderer2},{type:W},{type:t.NgZone}]};var ae=function(e){function t(i,a,n,o){var r=e.call(this,i,a,n,o)||this;return r.el=i,r.renderer=a,r.sizeService=n,r.ngZone=o,r.elemsCount=15,r._tabularData=[],r.LOG=new Y(t,r._debug),r}return T(t,e),t.prototype.ngOnInit=function(){this.drawChart()},t.prototype.update=function(e){this.drawChart()},t.prototype.drawChart=function(){this.loading=!1,this.chartDraw.emit(),this.initChart(this.el)},t.prototype.getHeaderParam=function(e,t,i,a){return this._data.params&&this._data.params[e]&&this._data.params[e][i]&&this._data.params[e][i][t]?this._data.params[e][i][t]:this._data.globalParams&&this._data.globalParams[i]&&this._data.globalParams[i][t]?this._data.globalParams[i][t]:a},t.prototype.convert=function(e){if(z.isArray(e.data)){var t=z.flatDeep(this._data.data);this.LOG.debug(["convert","isArray"],t),e.data.length>0&&z.isGts(t[0])?this._tabularData=this.parseData(t):this._tabularData=this.parseCustomData(t)}else this._tabularData=this.parseCustomData([e.data]);return[]},t.prototype.parseCustomData=function(e){var t=[];return e.forEach((function(e){var i={name:e.title||"",values:e.rows,headers:e.columns};t.push(i)})),this.LOG.debug(["parseCustomData","flatData"],t),t},t.prototype.parseData=function(e){var t=this,i=[];return this.LOG.debug(["parseData"],e),e.forEach((function(e,a){var n={name:"",values:[],headers:[]};z.isGts(e)?(t.LOG.debug(["parseData","isGts"],e),n.name=z.serializeGtsMetadata(e),n.values=e.v.map((function(e){return[t.formatDate(e[0])].concat(e.slice(1,e.length))}))):(t.LOG.debug(["parseData","is not a Gts"],e),n.values=z.isArray(e)?e:[e]),n.headers=[t.getHeaderParam(a,0,"headers","Date")],e.v&&e.v.length>0&&e.v[0].length>2&&n.headers.push(t.getHeaderParam(a,1,"headers","Latitude")),e.v&&e.v.length>0&&e.v[0].length>3&&n.headers.push(t.getHeaderParam(a,2,"headers","Longitude")),e.v&&e.v.length>0&&e.v[0].length>4&&n.headers.push(t.getHeaderParam(a,3,"headers","Elevation")),e.v&&e.v.length>0&&n.headers.push(t.getHeaderParam(a,e.v[0].length-1,"headers","Value")),n.values.length>0&&i.push(n)})),this.LOG.debug(["parseData","flatData"],i,this._options.timeMode),i},t.prototype.formatDate=function(e){return"date"===this._options.timeMode?z.toISOString(e,this.divider,this._options.timeZone):e.toString()},t}(K);ae.decorators=[{type:t.Component,args:[{selector:"warpview-datagrid",template:'\x3c!--\n  ~  Copyright 2020  SenX S.A.S.\n  ~\n  ~  Licensed under the Apache License, Version 2.0 (the "License");\n  ~  you may not use this file except in compliance with the License.\n  ~  You may obtain a copy of the License at\n  ~\n  ~    http://www.apache.org/licenses/LICENSE-2.0\n  ~\n  ~  Unless required by applicable law or agreed to in writing, software\n  ~  distributed under the License is distributed on an "AS IS" BASIS,\n  ~  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  ~  See the License for the specific language governing permissions and\n  ~  limitations under the License.\n  ~\n  --\x3e\n\n<div class="wrapper" style="overflow: auto; height: 100%">\n  <warpview-spinner *ngIf="loading" message="Parsing data"></warpview-spinner>\n  <p class="noData" *ngIf="noData">No data to display</p>\n  <div *ngIf="!loading && !noData">\n    <warpview-paginable\n      *ngFor="let data of _tabularData"\n      [data]="data" [options]="_options"\n      [debug]="debug"></warpview-paginable>\n  </div>\n</div>\n',encapsulation:t.ViewEncapsulation.ShadowDom,styles:['/*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */\n/*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */:root{--gts-attrname-font-color:#ed4a7b;--gts-attrvalue-font-color:#000;--gts-classname-font-color:#004eff;--gts-labelname-font-color:#19a979;--gts-labelvalue-font-color:#000;--gts-separator-font-color:#a0a0a0;--gts-stack-font-color:#000;--gts-tree-collapsed-icon:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA0UlEQVQ4T6WTUW7CQAxEPQdozxYb9Qb94Aj9gQSoVCp6lMr21doDZFCQiFCU3YDY//d2PeOFPHnwJC+zAlVdA/jp+/6YmZ+1S0qCPxF5HUAAO3fvSpKS4ENEvm6gfUS0c5JiBma2Ibm/QiQPmbmdSqohquoA7GqSxRaapmkBjBkAeHP336t0UWBmHcnb+VcR4XcJpjDJLjPHkS4tleqZubmNiDHU6gumDQDYuvvh7hpV9V9EXgaA5Ka2jbMjmNk7yZOIfEfE8eFVfuSDLda4JDsD3FNdEckTC0YAAAAASUVORK5CYII=);--gts-tree-expanded-icon:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA7klEQVQ4T82TMW7CQBBF/0g+QOpINEkVCmpaLoBm5COk5QYoaeAY3MDSei2LGu4QKakiBA1tCpTK8kS2sLVe2xSh8XSrnf9m/s4s4c6gO/UYGEBEXlT1bK396bFGIjIJguA7iqJLkVNbYOZXItoQ0QHAzBhz9CCFeAVgCeAjy7Jpmqa/NUBEEgDzktqGuOKKO47j+KsGhGH4lOf5HsDIg5ycyqVYVd+steuGheLAzM9EtPMgW1VdVGWJ6N0YU1gpozVGH+K+gy/uBHR1crXUqNzbQXXhduJ69sd7cxOZ+UFVH5Mk+exb+YGt8n9+5h8up1sReYC0WAAAAABJRU5ErkJggg==);--warp-slider-connect-color:#f90;--warp-slider-handle-bg-color:#fff;--warp-slider-handle-color:#004eff;--warp-slider-handle-shadow:inset 0 0 1px #fff,inset 0 1px 7px silver,0 3px 6px -3px #a0a0a0;--warp-view-annotationtooltip-font-color:#404040;--warp-view-annotationtooltip-value-font-color:#004eff;--warp-view-bar-color:#dc3545;--warp-view-chart-height:100%;--warp-view-chart-legend-bg:#fff;--warp-view-chart-legend-color:#404040;--warp-view-chart-width:100%;--warp-view-datagrid-cell-padding:5px;--warp-view-datagrid-even-bg-color:silver;--warp-view-datagrid-even-color:#000;--warp-view-datagrid-odd-bg-color:#fff;--warp-view-datagrid-odd-color:#404040;--warp-view-font-color:#000;--warp-view-map-margin:0;--warp-view-pagination-active-bg-color:#4caf50;--warp-view-pagination-active-border-color:#4caf50;--warp-view-pagination-active-color:#fff;--warp-view-pagination-bg-color:#fff;--warp-view-pagination-border-color:silver;--warp-view-pagination-disabled-color:silver;--warp-view-pagination-hover-bg-color:silver;--warp-view-pagination-hover-border-color:silver;--warp-view-pagination-hover-color:#000;--warp-view-plot-chart-height:100%;--warp-view-popup-bg-color:#fff;--warp-view-popup-body-bg-color:#fff;--warp-view-popup-body-color:#000;--warp-view-popup-border-color:rgba(0,0,0,0.2);--warp-view-popup-close-color:#404040;--warp-view-popup-header-bg-color:silver;--warp-view-popup-title-color:#404040;--warp-view-resize-handle-color:silver;--warp-view-resize-handle-height:10px;--warp-view-slider-pointer-size:65px;--warp-view-spinner-color:#f90;--warp-view-switch-handle-checked-color:radial-gradient(#fff 15%,#00cd00 100%);--warp-view-switch-handle-color:radial-gradient(#fff 15%,silver 100%);--warp-view-switch-height:30px;--warp-view-switch-inset-checked-color:#00cd00;--warp-view-switch-inset-color:silver;--warp-view-switch-radius:18px;--warp-view-switch-width:100px;--warp-view-tile-height:100%;--warp-view-tile-width:100%}.noData{color:var(--warp-view-chart-legend-color);position:relative;text-align:center;width:100%}']}]}],ae.ctorParameters=function(){return[{type:t.ElementRef},{type:t.Renderer2},{type:W},{type:t.NgZone}]},ae.propDecorators={elemsCount:[{type:t.Input,args:["elemsCount"]}]};var ne=function(){function e(){this.elemsCount=15,this.windowed=5,this.page=0,this.pages=[],this.displayedValues=[],this._debug=!1,this._options=Object.assign(Object.assign({},new P),{timeMode:"date",timeZone:"UTC",timeUnit:"us",bounds:{}}),this.LOG=new Y(e,this.debug)}return Object.defineProperty(e.prototype,"debug",{get:function(){return this._debug},set:function(e){this._debug=e,this.LOG.setDebug(e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"options",{set:function(e){O.default(e,this._options)||this.drawGridData()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"data",{set:function(e){e&&(this._data=e,this.drawGridData())},enumerable:!1,configurable:!0}),e.prototype.goto=function(e){this.page=e,this.drawGridData()},e.prototype.next=function(){this.page=Math.min(this.page+1,this._data.values.length-1),this.drawGridData()},e.prototype.prev=function(){this.page=Math.max(this.page-1,0),this.drawGridData()},e.prototype.drawGridData=function(){if(this._options=Q.mergeDeep(this._options,this.options),this.LOG.debug(["drawGridData","_options"],this._options),this._data){this.pages=[];for(var e=0;e<(this._data.values||[]).length/this.elemsCount;e++)this.pages.push(e);this.displayedValues=(this._data.values||[]).slice(Math.max(0,this.elemsCount*this.page),Math.min(this.elemsCount*(this.page+1),(this._data.values||[]).length)),this.LOG.debug(["drawGridData","_data"],this._data)}},e.prototype.decodeURIComponent=function(e){return decodeURIComponent(e)},e.prototype.ngOnInit=function(){this.drawGridData()},e.prototype.formatLabel=function(e){return z.formatLabel(e)},e}();ne.decorators=[{type:t.Component,args:[{selector:"warpview-paginable",template:'\x3c!--\n  ~  Copyright 2020  SenX S.A.S.\n  ~\n  ~  Licensed under the Apache License, Version 2.0 (the "License");\n  ~  you may not use this file except in compliance with the License.\n  ~  You may obtain a copy of the License at\n  ~\n  ~    http://www.apache.org/licenses/LICENSE-2.0\n  ~\n  ~  Unless required by applicable law or agreed to in writing, software\n  ~  distributed under the License is distributed on an "AS IS" BASIS,\n  ~  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  ~  See the License for the specific language governing permissions and\n  ~  limitations under the License.\n  ~\n  --\x3e\n\n<div>\n  <div class="heading" [innerHTML]="formatLabel(_data.name)"></div>\n  <table>\n    <thead>\n    <th *ngFor="let h of _data.headers">{{h}}</th>\n    </thead>\n    <tbody>\n    <tr *ngFor="let value of displayedValues; even as isEven; odd as isOdd" [ngClass]="{ odd: isOdd, even: isEven}">\n      <td *ngFor="let v of value">\n        <span [innerHTML]="v"></span>\n      </td>\n    </tr>\n    </tbody>\n  </table>\n  <div class="center">\n    <div class="pagination">\n      <div class="prev hoverable" (click)="prev()" *ngIf="page !== 0">&lt;</div>\n      <div class="index disabled" *ngIf="page - windowed > 0">...</div>\n      <span *ngFor="let c of pages">\n        <span *ngIf=" c >= page - windowed && c <= page + windowed"\n             [ngClass]="{ index: true, hoverable: page !== c, active: page === c}" (click)="goto(c)">{{c}}</span>\n      </span>\n      <div class="index disabled" *ngIf="page + windowed < pages.length">...</div>\n      <div class="next hoverable" (click)="next()" *ngIf="page + windowed < (_data.values ||Â []).length - 1">&gt;</div>\n    </div>\n  </div>\n</div>\n',encapsulation:t.ViewEncapsulation.ShadowDom,styles:['/*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */\n/*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */:root{--gts-attrname-font-color:#ed4a7b;--gts-attrvalue-font-color:#000;--gts-classname-font-color:#004eff;--gts-labelname-font-color:#19a979;--gts-labelvalue-font-color:#000;--gts-separator-font-color:#a0a0a0;--gts-stack-font-color:#000;--gts-tree-collapsed-icon:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA0UlEQVQ4T6WTUW7CQAxEPQdozxYb9Qb94Aj9gQSoVCp6lMr21doDZFCQiFCU3YDY//d2PeOFPHnwJC+zAlVdA/jp+/6YmZ+1S0qCPxF5HUAAO3fvSpKS4ENEvm6gfUS0c5JiBma2Ibm/QiQPmbmdSqohquoA7GqSxRaapmkBjBkAeHP336t0UWBmHcnb+VcR4XcJpjDJLjPHkS4tleqZubmNiDHU6gumDQDYuvvh7hpV9V9EXgaA5Ka2jbMjmNk7yZOIfEfE8eFVfuSDLda4JDsD3FNdEckTC0YAAAAASUVORK5CYII=);--gts-tree-expanded-icon:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA7klEQVQ4T82TMW7CQBBF/0g+QOpINEkVCmpaLoBm5COk5QYoaeAY3MDSei2LGu4QKakiBA1tCpTK8kS2sLVe2xSh8XSrnf9m/s4s4c6gO/UYGEBEXlT1bK396bFGIjIJguA7iqJLkVNbYOZXItoQ0QHAzBhz9CCFeAVgCeAjy7Jpmqa/NUBEEgDzktqGuOKKO47j+KsGhGH4lOf5HsDIg5ycyqVYVd+steuGheLAzM9EtPMgW1VdVGWJ6N0YU1gpozVGH+K+gy/uBHR1crXUqNzbQXXhduJ69sd7cxOZ+UFVH5Mk+exb+YGt8n9+5h8up1sReYC0WAAAAABJRU5ErkJggg==);--warp-slider-connect-color:#f90;--warp-slider-handle-bg-color:#fff;--warp-slider-handle-color:#004eff;--warp-slider-handle-shadow:inset 0 0 1px #fff,inset 0 1px 7px silver,0 3px 6px -3px #a0a0a0;--warp-view-annotationtooltip-font-color:#404040;--warp-view-annotationtooltip-value-font-color:#004eff;--warp-view-bar-color:#dc3545;--warp-view-chart-height:100%;--warp-view-chart-legend-bg:#fff;--warp-view-chart-legend-color:#404040;--warp-view-chart-width:100%;--warp-view-datagrid-cell-padding:5px;--warp-view-datagrid-even-bg-color:silver;--warp-view-datagrid-even-color:#000;--warp-view-datagrid-odd-bg-color:#fff;--warp-view-datagrid-odd-color:#404040;--warp-view-font-color:#000;--warp-view-map-margin:0;--warp-view-pagination-active-bg-color:#4caf50;--warp-view-pagination-active-border-color:#4caf50;--warp-view-pagination-active-color:#fff;--warp-view-pagination-bg-color:#fff;--warp-view-pagination-border-color:silver;--warp-view-pagination-disabled-color:silver;--warp-view-pagination-hover-bg-color:silver;--warp-view-pagination-hover-border-color:silver;--warp-view-pagination-hover-color:#000;--warp-view-plot-chart-height:100%;--warp-view-popup-bg-color:#fff;--warp-view-popup-body-bg-color:#fff;--warp-view-popup-body-color:#000;--warp-view-popup-border-color:rgba(0,0,0,0.2);--warp-view-popup-close-color:#404040;--warp-view-popup-header-bg-color:silver;--warp-view-popup-title-color:#404040;--warp-view-resize-handle-color:silver;--warp-view-resize-handle-height:10px;--warp-view-slider-pointer-size:65px;--warp-view-spinner-color:#f90;--warp-view-switch-handle-checked-color:radial-gradient(#fff 15%,#00cd00 100%);--warp-view-switch-handle-color:radial-gradient(#fff 15%,silver 100%);--warp-view-switch-height:30px;--warp-view-switch-inset-checked-color:#00cd00;--warp-view-switch-inset-color:silver;--warp-view-switch-radius:18px;--warp-view-switch-width:100px;--warp-view-tile-height:100%;--warp-view-tile-width:100%}.noData{color:var(--warp-view-chart-legend-color);position:relative;text-align:center;width:100%}\n\n/*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */.gts-classname{color:var(--gts-classname-font-color)}.gts-labelname{color:var(--gts-labelname-font-color)}.gts-attrname{color:var(--gts-attrname-font-color)}.gts-separator{color:var(--gts-separator-font-color)}.gts-labelvalue{color:var(--gts-labelvalue-font-color);font-style:italic}.gts-attrvalue{color:var(--gts-attrvalue-font-color);font-style:italic}:host table{color:var(--warp-view-font-color);width:100%}:host table td,:host table th{padding:var(--warp-view-datagrid-cell-padding)}:host table .odd{background-color:var(--warp-view-datagrid-odd-bg-color);color:var(--warp-view-datagrid-odd-color)}:host table .even{background-color:var(--warp-view-datagrid-even-bg-color);color:var(--warp-view-datagrid-even-color)}:host .center{text-align:center}:host .center .pagination{display:inline-block}:host .center .pagination .index,:host .center .pagination .next,:host .center .pagination .prev{background-color:var(--warp-view-pagination-bg-color);border:1px solid var(--warp-view-pagination-border-color);color:var(--warp-view-font-color);cursor:pointer;float:left;margin:0;padding:8px 16px;text-decoration:none;transition:background-color .3s}:host .center .pagination .index.active,:host .center .pagination .next.active,:host .center .pagination .prev.active{background-color:var(--warp-view-pagination-active-bg-color);border:1px solid var(--warp-view-pagination-active-border-color);color:var(--warp-view-pagination-active-color)}:host .center .pagination .index.hoverable:hover,:host .center .pagination .next.hoverable:hover,:host .center .pagination .prev.hoverable:hover{background-color:var(--warp-view-pagination-hover-bg-color);border:1px solid var(--warp-view-pagination-hover-border-color);color:var(--warp-view-pagination-hover-color)}:host .center .pagination .index.disabled,:host .center .pagination .next.disabled,:host .center .pagination .prev.disabled{color:var(--warp-view-pagination-disabled-color);cursor:auto}:host .round{background-color:#bbb;border:2px solid #454545;border-radius:50%;display:inline-block;height:12px;width:12px}:host ul{list-style:none}']}]}],ne.ctorParameters=function(){return[]},ne.propDecorators={debug:[{type:t.Input,args:["debug"]}],options:[{type:t.Input,args:["options"]}],data:[{type:t.Input,args:["data"]}],elemsCount:[{type:t.Input,args:["elemsCount"]}],windowed:[{type:t.Input,args:["windowed"]}]};var oe=function(e){function t(i,a,n,o){var r=e.call(this,i,a,n,o)||this;return r.el=i,r.renderer=a,r.sizeService=n,r.ngZone=o,r.toDisplay="",r.defOptions={timeMode:"custom"},r.LOG=new Y(t,r._debug),r}return T(t,e),t.prototype.ngOnInit=function(){this.drawChart()},t.prototype.ngOnDestroy=function(){this.timer&&clearInterval(this.timer)},t.prototype.update=function(e,t){this.drawChart(),this.flexFont()},t.prototype.drawChart=function(){this.LOG.debug(["drawChart"],this._options,this.defOptions),this.initChart(this.el),this._options=Q.mergeDeep(this.defOptions,this._options),this.LOG.debug(["drawChart","afterInit"],this._options,this.defOptions,this.height),this.LOG.debug(["drawChart"],this._data,this.toDisplay),this.flexFont(),this.chartDraw.emit()},t.prototype.convert=function(e){var t;switch(this._options=Q.mergeDeep(this.defOptions,this._options),this.LOG.debug(["convert"],this._options.timeMode),t=this._data.data?z.isArray(this._data.data)?this._data.data[0]:this._data.data:z.isArray(this._data)?this._data[0]:this._data,this._options.timeMode){case"date":this.toDisplay=z.toISOString(parseInt(t,10),this.divider,this._options.timeZone);break;case"duration":var i=z.toISOString(parseInt(t,10),this.divider,this._options.timeZone);this.displayDuration(L.default(i));break;case"custom":case"timestamp":this.toDisplay=t}return[]},t.prototype.getStyle=function(){if(this._options){var e={"background-color":this._options.bgColor||"transparent"};return this._options.fontColor&&(e.color=this._options.fontColor),e}return{}},t.prototype.flexFont=function(){this.wrapper&&(this.LOG.debug(["flexFont"],this.height),this.fitties&&this.fitties.unsubscribe(),this.fitties=C.default(this.wrapper.nativeElement,{maxSize:.8*this.el.nativeElement.parentElement.clientHeight,minSize:14}),this.LOG.debug(["flexFont"],"ok",this.el.nativeElement.parentElement.clientHeight),this.fitties.fit(),this.loading=!1)},t.prototype.displayDuration=function(e){var t=this;this.timer=setInterval((function(){var i=L.default();t.toDisplay=L.default.duration(e.diff(i)).humanize(!0)}),1e3)},t}(K);oe.decorators=[{type:t.Component,args:[{selector:"warpview-display",template:'\x3c!--\n  ~  Copyright 2020  SenX S.A.S.\n  ~\n  ~  Licensed under the Apache License, Version 2.0 (the "License");\n  ~  you may not use this file except in compliance with the License.\n  ~  You may obtain a copy of the License at\n  ~\n  ~    http://www.apache.org/licenses/LICENSE-2.0\n  ~\n  ~  Unless required by applicable law or agreed to in writing, software\n  ~  distributed under the License is distributed on an "AS IS" BASIS,\n  ~  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  ~  See the License for the specific language governing permissions and\n  ~  limitations under the License.\n  ~\n  --\x3e\n\n<div class="chart-container" (resized)="flexFont()" [ngStyle]="getStyle()">\n  <warpview-spinner *ngIf="loading" message="Parsing data"></warpview-spinner>\n  <div class="value" #wrapper [hidden]="loading">\n    <span [innerHTML]="toDisplay"></span><small>{{unit}}</small>\n  </div>\n</div>\n',encapsulation:t.ViewEncapsulation.ShadowDom,styles:['/*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */\n/*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */:root{--gts-attrname-font-color:#ed4a7b;--gts-attrvalue-font-color:#000;--gts-classname-font-color:#004eff;--gts-labelname-font-color:#19a979;--gts-labelvalue-font-color:#000;--gts-separator-font-color:#a0a0a0;--gts-stack-font-color:#000;--gts-tree-collapsed-icon:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA0UlEQVQ4T6WTUW7CQAxEPQdozxYb9Qb94Aj9gQSoVCp6lMr21doDZFCQiFCU3YDY//d2PeOFPHnwJC+zAlVdA/jp+/6YmZ+1S0qCPxF5HUAAO3fvSpKS4ENEvm6gfUS0c5JiBma2Ibm/QiQPmbmdSqohquoA7GqSxRaapmkBjBkAeHP336t0UWBmHcnb+VcR4XcJpjDJLjPHkS4tleqZubmNiDHU6gumDQDYuvvh7hpV9V9EXgaA5Ka2jbMjmNk7yZOIfEfE8eFVfuSDLda4JDsD3FNdEckTC0YAAAAASUVORK5CYII=);--gts-tree-expanded-icon:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA7klEQVQ4T82TMW7CQBBF/0g+QOpINEkVCmpaLoBm5COk5QYoaeAY3MDSei2LGu4QKakiBA1tCpTK8kS2sLVe2xSh8XSrnf9m/s4s4c6gO/UYGEBEXlT1bK396bFGIjIJguA7iqJLkVNbYOZXItoQ0QHAzBhz9CCFeAVgCeAjy7Jpmqa/NUBEEgDzktqGuOKKO47j+KsGhGH4lOf5HsDIg5ycyqVYVd+steuGheLAzM9EtPMgW1VdVGWJ6N0YU1gpozVGH+K+gy/uBHR1crXUqNzbQXXhduJ69sd7cxOZ+UFVH5Mk+exb+YGt8n9+5h8up1sReYC0WAAAAABJRU5ErkJggg==);--warp-slider-connect-color:#f90;--warp-slider-handle-bg-color:#fff;--warp-slider-handle-color:#004eff;--warp-slider-handle-shadow:inset 0 0 1px #fff,inset 0 1px 7px silver,0 3px 6px -3px #a0a0a0;--warp-view-annotationtooltip-font-color:#404040;--warp-view-annotationtooltip-value-font-color:#004eff;--warp-view-bar-color:#dc3545;--warp-view-chart-height:100%;--warp-view-chart-legend-bg:#fff;--warp-view-chart-legend-color:#404040;--warp-view-chart-width:100%;--warp-view-datagrid-cell-padding:5px;--warp-view-datagrid-even-bg-color:silver;--warp-view-datagrid-even-color:#000;--warp-view-datagrid-odd-bg-color:#fff;--warp-view-datagrid-odd-color:#404040;--warp-view-font-color:#000;--warp-view-map-margin:0;--warp-view-pagination-active-bg-color:#4caf50;--warp-view-pagination-active-border-color:#4caf50;--warp-view-pagination-active-color:#fff;--warp-view-pagination-bg-color:#fff;--warp-view-pagination-border-color:silver;--warp-view-pagination-disabled-color:silver;--warp-view-pagination-hover-bg-color:silver;--warp-view-pagination-hover-border-color:silver;--warp-view-pagination-hover-color:#000;--warp-view-plot-chart-height:100%;--warp-view-popup-bg-color:#fff;--warp-view-popup-body-bg-color:#fff;--warp-view-popup-body-color:#000;--warp-view-popup-border-color:rgba(0,0,0,0.2);--warp-view-popup-close-color:#404040;--warp-view-popup-header-bg-color:silver;--warp-view-popup-title-color:#404040;--warp-view-resize-handle-color:silver;--warp-view-resize-handle-height:10px;--warp-view-slider-pointer-size:65px;--warp-view-spinner-color:#f90;--warp-view-switch-handle-checked-color:radial-gradient(#fff 15%,#00cd00 100%);--warp-view-switch-handle-color:radial-gradient(#fff 15%,silver 100%);--warp-view-switch-height:30px;--warp-view-switch-inset-checked-color:#00cd00;--warp-view-switch-inset-color:silver;--warp-view-switch-radius:18px;--warp-view-switch-width:100px;--warp-view-tile-height:100%;--warp-view-tile-width:100%}.noData{color:var(--warp-view-chart-legend-color);text-align:center;width:100%}.noData,:host{position:relative}:host{color:var(--warp-view-font-color);height:var(--warp-view-chart-height,100%);overflow:hidden;width:var(--warp-view-chart-width,100%)}:host .chart-container{display:flex;height:calc(100% - 20px);justify-content:center;justify-items:stretch;min-height:100%;overflow:hidden;text-align:center;width:100%}:host .chart-container .value{-ms-grid-row-align:center;align-self:center;display:inline-block;overflow:hidden;padding:10px;text-align:center;vertical-align:middle;white-space:nowrap}:host .chart-container .value span{min-height:100%}:host .chart-container .value small{font-size:.5em}']}]}],oe.ctorParameters=function(){return[{type:t.ElementRef},{type:t.Renderer2},{type:W},{type:t.NgZone}]},oe.propDecorators={wrapper:[{type:t.ViewChild,args:["wrapper",{static:!0}]}]};var re=function(e){function t(i,a,n,o){var r=e.call(this,i,a,n,o)||this;return r.el=i,r.renderer=a,r.sizeService=n,r.ngZone=o,r.parentWidth=-1,r.LOG=new Y(t,r._debug),r}return T(t,e),t.prototype.ngAfterViewInit=function(){this.drawChart()},t.prototype.update=function(e,t){this.drawChart()},t.prototype.onResize=function(){var e=this;(this.el.nativeElement.parentElement.clientWidth!==this.parentWidth||this.parentWidth<=0)&&(this.parentWidth=this.el.nativeElement.parentElement.clientWidth,clearTimeout(this.resizeTimer),this.resizeTimer=setTimeout((function(){e.el.nativeElement.parentElement.clientWidth>0?(e.LOG.debug(["onResize"],e.el.nativeElement.parentElement.clientWidth),e.drawChart()):e.onResize()}),150))},t.prototype.drawChart=function(){this.loading=!1,this.chartDraw.emit(),this.initChart(this.el)},t.prototype.convert=function(e){var t=this._data.data;return this.heatMapData=this.parseData(z.flatDeep(t)),[]},t.prototype.parseData=function(e){var t=this,i=[],a=[],n=[],o={},r=function(e,t){return e+parseInt(t,10)};return this.LOG.debug(["parseData"],e),e.forEach((function(e,i){var r=z.serializeGtsMetadata(e);e.v.forEach((function(e){var s=I.default.utc(e[0]/1e3).startOf("day").toISOString();o[s]||(o[s]=[]),a[s]||(a[s]=[]),n.push(e[0]/1e3),a[s].push(e[e.length-1]),o[s].push({name:r,date:e[0]/1e3,value:e[e.length-1],color:M.getColor(i,t._options.scheme),id:i})}))})),Object.keys(o).forEach((function(e){i.push({date:I.default.utc(e),total:a[e].reduce(r),details:o[e],summary:[]})})),i},t}(K);re.decorators=[{type:t.Component,args:[{selector:"warpview-drill-down",template:'\x3c!--\n  ~  Copyright 2020  SenX S.A.S.\n  ~\n  ~  Licensed under the Apache License, Version 2.0 (the "License");\n  ~  you may not use this file except in compliance with the License.\n  ~  You may obtain a copy of the License at\n  ~\n  ~    http://www.apache.org/licenses/LICENSE-2.0\n  ~\n  ~  Unless required by applicable law or agreed to in writing, software\n  ~  distributed under the License is distributed on an "AS IS" BASIS,\n  ~  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  ~  See the License for the specific language governing permissions and\n  ~  limitations under the License.\n  ~\n  --\x3e\n\n<div class="wrapper">\n  <warpview-spinner *ngIf="loading" message="Parsing data"></warpview-spinner>\n  <p class="noData" *ngIf="noData">No data to display</p>\n  <div *ngIf="!loading && !noData">\n    <calendar-heatmap [data]="heatMapData" overview="global"\n                      [debug]="debug"\n                      [minColor]="_options.minColor"\n                      [maxColor]="_options.maxColor"></calendar-heatmap>\n  </div>\n</div>\n',encapsulation:t.ViewEncapsulation.ShadowDom,styles:['/*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */\n/*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */:root{--gts-attrname-font-color:#ed4a7b;--gts-attrvalue-font-color:#000;--gts-classname-font-color:#004eff;--gts-labelname-font-color:#19a979;--gts-labelvalue-font-color:#000;--gts-separator-font-color:#a0a0a0;--gts-stack-font-color:#000;--gts-tree-collapsed-icon:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA0UlEQVQ4T6WTUW7CQAxEPQdozxYb9Qb94Aj9gQSoVCp6lMr21doDZFCQiFCU3YDY//d2PeOFPHnwJC+zAlVdA/jp+/6YmZ+1S0qCPxF5HUAAO3fvSpKS4ENEvm6gfUS0c5JiBma2Ibm/QiQPmbmdSqohquoA7GqSxRaapmkBjBkAeHP336t0UWBmHcnb+VcR4XcJpjDJLjPHkS4tleqZubmNiDHU6gumDQDYuvvh7hpV9V9EXgaA5Ka2jbMjmNk7yZOIfEfE8eFVfuSDLda4JDsD3FNdEckTC0YAAAAASUVORK5CYII=);--gts-tree-expanded-icon:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA7klEQVQ4T82TMW7CQBBF/0g+QOpINEkVCmpaLoBm5COk5QYoaeAY3MDSei2LGu4QKakiBA1tCpTK8kS2sLVe2xSh8XSrnf9m/s4s4c6gO/UYGEBEXlT1bK396bFGIjIJguA7iqJLkVNbYOZXItoQ0QHAzBhz9CCFeAVgCeAjy7Jpmqa/NUBEEgDzktqGuOKKO47j+KsGhGH4lOf5HsDIg5ycyqVYVd+steuGheLAzM9EtPMgW1VdVGWJ6N0YU1gpozVGH+K+gy/uBHR1crXUqNzbQXXhduJ69sd7cxOZ+UFVH5Mk+exb+YGt8n9+5h8up1sReYC0WAAAAABJRU5ErkJggg==);--warp-slider-connect-color:#f90;--warp-slider-handle-bg-color:#fff;--warp-slider-handle-color:#004eff;--warp-slider-handle-shadow:inset 0 0 1px #fff,inset 0 1px 7px silver,0 3px 6px -3px #a0a0a0;--warp-view-annotationtooltip-font-color:#404040;--warp-view-annotationtooltip-value-font-color:#004eff;--warp-view-bar-color:#dc3545;--warp-view-chart-height:100%;--warp-view-chart-legend-bg:#fff;--warp-view-chart-legend-color:#404040;--warp-view-chart-width:100%;--warp-view-datagrid-cell-padding:5px;--warp-view-datagrid-even-bg-color:silver;--warp-view-datagrid-even-color:#000;--warp-view-datagrid-odd-bg-color:#fff;--warp-view-datagrid-odd-color:#404040;--warp-view-font-color:#000;--warp-view-map-margin:0;--warp-view-pagination-active-bg-color:#4caf50;--warp-view-pagination-active-border-color:#4caf50;--warp-view-pagination-active-color:#fff;--warp-view-pagination-bg-color:#fff;--warp-view-pagination-border-color:silver;--warp-view-pagination-disabled-color:silver;--warp-view-pagination-hover-bg-color:silver;--warp-view-pagination-hover-border-color:silver;--warp-view-pagination-hover-color:#000;--warp-view-plot-chart-height:100%;--warp-view-popup-bg-color:#fff;--warp-view-popup-body-bg-color:#fff;--warp-view-popup-body-color:#000;--warp-view-popup-border-color:rgba(0,0,0,0.2);--warp-view-popup-close-color:#404040;--warp-view-popup-header-bg-color:silver;--warp-view-popup-title-color:#404040;--warp-view-resize-handle-color:silver;--warp-view-resize-handle-height:10px;--warp-view-slider-pointer-size:65px;--warp-view-spinner-color:#f90;--warp-view-switch-handle-checked-color:radial-gradient(#fff 15%,#00cd00 100%);--warp-view-switch-handle-color:radial-gradient(#fff 15%,silver 100%);--warp-view-switch-height:30px;--warp-view-switch-inset-checked-color:#00cd00;--warp-view-switch-inset-color:silver;--warp-view-switch-radius:18px;--warp-view-switch-width:100px;--warp-view-tile-height:100%;--warp-view-tile-width:100%}.noData{color:var(--warp-view-chart-legend-color);text-align:center}.noData,:host .wrapper{position:relative;width:100%}:host .wrapper{height:100%}']}]}],re.ctorParameters=function(){return[{type:t.ElementRef},{type:t.Renderer2},{type:W},{type:t.NgZone}]},re.propDecorators={onResize:[{type:t.HostListener,args:["window:resize"]}]};var se=function(){},pe=function(){function e(i){this.el=i,this.width=Q.DEFAULT_WIDTH,this.height=Q.DEFAULT_HEIGHT,this.overview="global",this.handler=new t.EventEmitter,this.change=new t.EventEmitter,this._debug=!1,this._minColor=e.DEF_MIN_COLOR,this._maxColor=e.DEF_MAX_COLOR,this.gutter=5,this.gWidth=1e3,this.gHeight=200,this.itemSize=10,this.labelPadding=40,this.transitionDuration=250,this.inTransition=!1,this.tooltipWidth=450,this.tooltipPadding=15,this.history=["global"],this.selected=new se,this.parentWidth=-1,this.getTooltip=function(e){var t='<div class="header"><strong>'+e.date.format("dddd, MMM Do YYYY HH:mm")+"</strong></div><ul>";return(e.summary||[]).forEach((function(e){t+='<li>\n  <div class="round" style="background-color:'+M.transparentize(e.color)+"; border-color:"+e.color+'"></div>\n'+z.formatLabel(e.name)+": "+e.total+"</li>"})),void 0!==e.total&&e.name&&(t+='<li><div class="round"\nstyle="background-color: '+M.transparentize(e.color)+"; border-color: "+e.color+'"\n></div> '+z.formatLabel(e.name)+": "+e.total+"</li>"),t+="</ul>"},this.LOG=new Y(e,this.debug)}return Object.defineProperty(e.prototype,"debug",{get:function(){return this._debug},set:function(e){this._debug=e,this.LOG.setDebug(e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"data",{get:function(){return this._data},set:function(e){this.LOG.debug(["data"],e),e&&(this._data=e,this.calculateDimensions())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"minColor",{get:function(){return this._minColor},set:function(e){this._minColor=e,this.calculateDimensions()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxColor",{get:function(){return this._maxColor},set:function(e){this._maxColor=e,this.calculateDimensions()},enumerable:!1,configurable:!0}),e.getNumberOfWeeks=function(){var e=Math.round((+I.default.utc()-+I.default.utc().subtract(1,"year").startOf("week"))/864e5);return Math.trunc(e/7)+1},e.prototype.onResize=function(){this.el.nativeElement.parentElement.clientWidth!==this.parentWidth&&this.calculateDimensions()},e.prototype.ngAfterViewInit=function(){this.chart=this.div.nativeElement,this.svg=c.select(this.chart).append("svg").attr("class","svg"),this.items=this.svg.append("g"),this.labels=this.svg.append("g"),this.buttons=this.svg.append("g"),this.tooltip=c.select(this.chart).append("div").attr("class","heatmap-tooltip").style("opacity",0),this.calculateDimensions()},e.prototype.calculateDimensions=function(){var t=this;clearTimeout(this.resizeTimer),this.resizeTimer=setTimeout((function(){0!==t.el.nativeElement.parentElement.clientWidth?(t.gWidth=t.chart.clientWidth<1e3?1e3:t.chart.clientWidth,t.itemSize=(t.gWidth-t.labelPadding)/e.getNumberOfWeeks()-t.gutter,t.gHeight=t.labelPadding+7*(t.itemSize+t.gutter),t.svg.attr("width",t.gWidth).attr("height",t.gHeight),t.LOG.debug(["calculateDimensions"],t._data),t._data&&t._data[0]&&t._data[0].summary&&t.drawChart()):t.calculateDimensions()}),250)},e.prototype.groupBy=function(e,t){return e.reduce((function(e,i){return(e[i[t]]=e[i[t]]||[]).push(i),e}),{})},e.prototype.updateDataSummary=function(){this._data[0].summary||this._data.map((function(e){var t=e.details.reduce((function(e,t){return e[t.name]?e[t.name].value+=t.value:e[t.name]={value:t.value},e}),{}),i=Object.keys(t).map((function(e){return{name:e,total:t[e].value}}));return e.summary=i.sort((function(e,t){return t.total-e.total})),e}))},e.prototype.drawChart=function(){if(this.svg&&this._data)switch(this.LOG.debug(["drawChart"],[this.overview,this.selected]),this.overview){case"global":this.drawGlobalOverview(),this.change.emit({overview:this.overview,start:I.default(this._data[0].date),end:I.default(this._data[this._data.length-1].date)});break;case"year":this.drawYearOverview(),this.change.emit({overview:this.overview,start:I.default(this.selected.date).startOf("year"),end:I.default(this.selected.date).endOf("year")});break;case"month":this.drawMonthOverview(),this.change.emit({overview:this.overview,start:I.default(this.selected.date).startOf("month"),end:I.default(this.selected.date).endOf("month")});break;case"week":this.drawWeekOverview(),this.change.emit({overview:this.overview,start:I.default(this.selected.date).startOf("week"),end:I.default(this.selected.date).endOf("week")});break;case"day":this.drawDayOverview(),this.change.emit({overview:this.overview,start:I.default(this.selected.date).startOf("day"),end:I.default(this.selected.date).endOf("day")})}},e.prototype.drawGlobalOverview=function(){var t=this;this.history[this.history.length-1]!==this.overview&&this.history.push(this.overview);var i=I.default.utc(this._data[0].date.startOf("y")),a=I.default.utc(this._data[this._data.length-1].date.endOf("y")),n=this._data.filter((function(e){return e.date.isBetween(i,a,null,"[]")}));n.forEach((function(e){var i=[],a=t.groupBy(e.details,"name");Object.keys(a).forEach((function(e){i.push({name:e,total:a[e].reduce((function(e,t){return e+t.value}),0),color:a[e][0].color,id:a[e][0].id})})),e.summary=i}));for(var o=Math.ceil(I.default.duration(a.diff(i)).asYears()),r=[],s=0;s<o;s++){var p=I.default.utc().year(i.year()+s).month(0).date(1).startOf("y");r.push(p)}var l=n.map((function(e){var t,i=e.date;return{date:i,total:n.reduce((function(e,t){return t.date.year()===i.year()&&(e+=t.total),e}),0),summary:(t=n.reduce((function(e,t){return t.date.year()===i.year()&&t.summary.forEach((function(t){e[t.name]?e[t.name].total+=t.total:e[t.name]={total:t.total,color:t.color}})),e}),{}),Object.keys(t).map((function(e){return{name:e,total:t[e].total,color:t[e].color}})).sort((function(e,t){return t.total-e.total})))}}));l=z.cleanArray(l);var h=d.max(l,(function(e){return e.total})),c=r.map((function(e){return e})),g=d.scaleBand().rangeRound([0,this.gWidth]).padding(.05).domain(c.map((function(e){return e.year().toString()}))),u=d.scaleLinear().range([this.minColor||e.DEF_MIN_COLOR,this.maxColor||e.DEF_MAX_COLOR]).domain([-.15*h,h]);this.items.selectAll(".item-block-year").remove(),this.items.selectAll(".item-block-year").data(l).enter().append("rect").attr("class","item item-block-year").attr("width",(function(){return(t.gWidth-t.labelPadding)/c.length-5*t.gutter})).attr("height",(function(){return t.gHeight-t.labelPadding})).attr("transform",(function(e){return"translate("+g(e.date.year().toString())+","+2*t.tooltipPadding+")"})).attr("fill",(function(t){return u(t.total)||e.DEF_MAX_COLOR})).on("click",(function(e){t.inTransition||(t.inTransition=!0,t.selected=e,t.hideTooltip(),t.removeGlobalOverview(),t.overview="year",t.drawChart())})).style("opacity",0).on("mouseover",(function(e){if(!t.inTransition){for(var i=g(e.date.year().toString())+2*t.tooltipPadding;t.gWidth-i<t.tooltipWidth+5*t.tooltipPadding;)i-=10;var a=4*t.tooltipPadding;t.tooltip.html(t.getTooltip(e)).style("left",i+"px").style("top",a+"px").transition().duration(t.transitionDuration/2).ease(d.easeLinear).style("opacity",1)}})).on("mouseout",(function(){t.inTransition||t.hideTooltip()})).transition().delay((function(e,i){return t.transitionDuration*(i+1)/10})).duration((function(){return t.transitionDuration})).ease(d.easeLinear).style("opacity",1).call((function(e,t){e.empty()&&t();var i=0;e.each((function(){return++i})).on("end",(function(){--i||t.apply(this,arguments)}))}),(function(){return t.inTransition=!1})),this.labels.selectAll(".label-year").remove(),this.labels.selectAll(".label-year").data(c).enter().append("text").attr("class","label label-year").attr("font-size",(function(){return Math.floor(t.labelPadding/3)+"px"})).text((function(e){return e.year()})).attr("x",(function(e){return g(e.year().toString())})).attr("y",this.labelPadding/2).on("mouseenter",(function(e){t.inTransition||t.items.selectAll(".item-block-year").transition().duration(t.transitionDuration).ease(d.easeLinear).style("opacity",(function(t){return t.date.year()===e.year()?1:.1}))})).on("mouseout",(function(){t.inTransition||t.items.selectAll(".item-block-year").transition().duration(t.transitionDuration).ease(d.easeLinear).style("opacity",1)})).on("click",(function(){t.inTransition||(t.inTransition=!0,t.selected=l[0],t.hideTooltip(),t.removeGlobalOverview(),t.overview="year",t.drawChart())}))},e.prototype.drawYearOverview=function(){var t=this;this.history[this.history.length-1]!==this.overview&&this.history.push(this.overview);var i=I.default(this.selected.date).startOf("year"),a=I.default(this.selected.date).endOf("year"),n=this._data.filter((function(e){return e.date.isBetween(i,a,null,"[]")}));n.forEach((function(e){var i=[],a=t.groupBy(e.details,"name");Object.keys(a).forEach((function(e){i.push({name:e,total:a[e].reduce((function(e,t){return e+t.value}),0),color:a[e][0].color,id:a[e][0].id})})),e.summary=i})),n=z.cleanArray(n);var o=d.max(n,(function(e){return e.total})),r=d.scaleLinear().range([this.minColor||e.DEF_MIN_COLOR,this.maxColor||e.DEF_MAX_COLOR]).domain([-.15*o,o]);this.items.selectAll(".item-circle").remove(),this.items.selectAll(".item-circle").data(n).enter().append("rect").attr("class","item item-circle").style("opacity",0).attr("x",(function(e){return t.calcItemX(e,i)+(t.itemSize-t.calcItemSize(e,o))/2})).attr("y",(function(e){return t.calcItemY(e)+(t.itemSize-t.calcItemSize(e,o))/2})).attr("rx",(function(e){return t.calcItemSize(e,o)})).attr("ry",(function(e){return t.calcItemSize(e,o)})).attr("width",(function(e){return t.calcItemSize(e,o)})).attr("height",(function(e){return t.calcItemSize(e,o)})).attr("fill",(function(e){return e.total>0?r(e.total):"transparent"})).on("click",(function(e){t.inTransition||0!==e.total&&(t.inTransition=!0,t.selected=e,t.hideTooltip(),t.removeYearOverview(),t.overview="day",t.drawChart())})).on("mouseover",(function(e){if(!t.inTransition){var a=c.select(c.event.currentTarget),n=function(){a.transition().duration(t.transitionDuration).ease(d.easeLinear).attr("x",(function(e){return t.calcItemX(e,i)-(1.1*t.itemSize-t.itemSize)/2})).attr("y",(function(e){return t.calcItemY(e)-(1.1*t.itemSize-t.itemSize)/2})).attr("width",1.1*t.itemSize).attr("height",1.1*t.itemSize).transition().duration(t.transitionDuration).ease(d.easeLinear).attr("x",(function(e){return t.calcItemX(e,i)+(t.itemSize-t.calcItemSize(e,o))/2})).attr("y",(function(e){return t.calcItemY(e)+(t.itemSize-t.calcItemSize(e,o))/2})).attr("width",(function(e){return t.calcItemSize(e,o)})).attr("height",(function(e){return t.calcItemSize(e,o)})).on("end",n)};n();var r=t.calcItemX(e,i)+t.itemSize/2;t.gWidth-r<t.tooltipWidth+3*t.tooltipPadding&&(r-=t.tooltipWidth+2*t.tooltipPadding);var s=t.calcItemY(e)+t.itemSize/2;t.tooltip.html(t.getTooltip(e)).style("left",r+"px").style("top",s+"px").transition().duration(t.transitionDuration/2).ease(d.easeLinear).style("opacity",1)}})).on("mouseout",(function(){t.inTransition||(c.select(c.event.currentTarget).transition().duration(t.transitionDuration/2).ease(d.easeLinear).attr("x",(function(e){return t.calcItemX(e,i)+(t.itemSize-t.calcItemSize(e,o))/2})).attr("y",(function(e){return t.calcItemY(e)+(t.itemSize-t.calcItemSize(e,o))/2})).attr("width",(function(e){return t.calcItemSize(e,o)})).attr("height",(function(e){return t.calcItemSize(e,o)})),t.hideTooltip())})).transition().delay((function(){return(Math.cos(Math.PI*Math.random())+1)*t.transitionDuration})).duration((function(){return t.transitionDuration})).ease(d.easeLinear).style("opacity",1).call((function(e,t){e.empty()&&t();var i=0;e.each((function(){return++i})).on("end",(function(){--i||t.apply(this,arguments)}))}),(function(){return t.inTransition=!1}));for(var s=Math.ceil(I.default.duration(a.diff(i)).asMonths()),p=[],l=1;l<s;l++)p.push(I.default(this.selected.date).month((i.month()+l)%12).startOf("month"));var h=d.scaleLinear().range([0,this.gWidth]).domain([0,p.length]);this.labels.selectAll(".label-month").remove(),this.labels.selectAll(".label-month").data(p).enter().append("text").attr("class","label label-month").attr("font-size",(function(){return Math.floor(t.labelPadding/3)+"px"})).text((function(e){return e.format("MMM")})).attr("x",(function(e,t){return h(t)+(h(t)-h(t-1))/2})).attr("y",this.labelPadding/2).on("mouseenter",(function(e){if(!t.inTransition){var i=I.default(e);t.items.selectAll(".item-circle").transition().duration(t.transitionDuration).ease(d.easeLinear).style("opacity",(function(e){return I.default(e.date).isSame(i,"month")?1:.1}))}})).on("mouseout",(function(){t.inTransition||t.items.selectAll(".item-circle").transition().duration(t.transitionDuration).ease(d.easeLinear).style("opacity",1)})).on("click",(function(e){t.inTransition||t._data.filter((function(t){return t.date.isBetween(I.default(e).startOf("month"),I.default(e).endOf("month"),null,"[]")})).length&&(t.selected={date:e},t.inTransition=!0,t.hideTooltip(),t.removeYearOverview(),t.overview="month",t.drawChart())}));var g=d.timeDays(I.default.utc().startOf("week").toDate(),I.default.utc().endOf("week").toDate()),u=d.scaleBand().rangeRound([this.labelPadding,this.gHeight]).domain(g.map((function(e){return I.default.utc(e).weekday().toString()})));this.labels.selectAll(".label-day").remove(),this.labels.selectAll(".label-day").data(g).enter().append("text").attr("class","label label-day").attr("x",this.labelPadding/3).attr("y",(function(e,t){return u(t.toString())+u.bandwidth()/1.75})).style("text-anchor","left").attr("font-size",(function(){return Math.floor(t.labelPadding/3)+"px"})).text((function(e){return I.default.utc(e).format("dddd")[0]})).on("mouseenter",(function(e){if(!t.inTransition){var i=I.default.utc(e);t.items.selectAll(".item-circle").transition().duration(t.transitionDuration).ease(d.easeLinear).style("opacity",(function(e){return I.default(e.date).day()===i.day()?1:.1}))}})).on("mouseout",(function(){t.inTransition||t.items.selectAll(".item-circle").transition().duration(t.transitionDuration).ease(d.easeLinear).style("opacity",1)})),this.drawButton()},e.prototype.drawMonthOverview=function(){var t=this;this.history[this.history.length-1]!==this.overview&&this.history.push(this.overview);var i=I.default(this.selected.date).startOf("month"),a=I.default(this.selected.date).endOf("month"),n=[];this._data.filter((function(e){return e.date.isBetween(i,a,null,"[]")})).map((function(e){var i=[];e.details.forEach((function(e){var t=I.default.utc(e.date),a=Math.floor(t.hours()/3);i[a]||(i[a]={date:t.startOf("hour"),total:0,details:[],summary:[]}),i[a].total+=e.value,i[a].details.push(e)})),i.forEach((function(e){var i=t.groupBy(e.details,"name");Object.keys(i).forEach((function(t){e.summary.push({name:t,total:d.sum(i[t],(function(e){return e.total})),color:i[t][0].color})}))})),n=n.concat(i)})),n=z.cleanArray(n),this.LOG.debug(["drawMonthOverview"],[this.overview,this.selected,n]);for(var o=d.max(n,(function(e){return e.total})),r=d.timeDays(I.default(this.selected.date).startOf("week").toDate(),I.default(this.selected.date).endOf("week").toDate()),s=d.scaleBand().rangeRound([this.labelPadding,this.gHeight]).domain(r.map((function(e){return I.default.utc(e).weekday().toString()}))),p=[i],l=I.default(i);l.week()!==a.week();)p.push(I.default(l.add(1,"week")));n.forEach((function(e){var i=[],a=t.groupBy(e.details,"name");Object.keys(a).forEach((function(e){i.push({name:e,total:a[e].reduce((function(e,t){return e+t.value}),0),color:a[e][0].color,id:a[e][0].id})})),e.summary=i}));var h=d.scaleBand().rangeRound([this.labelPadding,this.gWidth]).padding(.05).domain(p.map((function(e){return e.week()+""}))),c=d.scaleLinear().range([this.minColor||e.DEF_MIN_COLOR,this.maxColor||e.DEF_MAX_COLOR]).domain([-.15*o,o]);this.items.selectAll(".item-block-month").remove(),this.items.selectAll(".item-block-month").data(n).enter().append("rect").style("opacity",0).attr("class","item item-block-month").attr("y",(function(e){return t.calcItemY(e)+(t.itemSize-t.calcItemSize(e,o))/2})).attr("x",(function(e){return t.calcItemXMonth(e,i,h(e.date.week().toString()))+(t.itemSize-t.calcItemSize(e,o))/2})).attr("rx",(function(e){return t.calcItemSize(e,o)})).attr("ry",(function(e){return t.calcItemSize(e,o)})).attr("width",(function(e){return t.calcItemSize(e,o)})).attr("height",(function(e){return t.calcItemSize(e,o)})).attr("fill",(function(e){return e.total>0?c(e.total):"transparent"})).on("click",(function(e){t.inTransition||0!==e.total&&(t.inTransition=!0,t.selected=e,t.hideTooltip(),t.removeMonthOverview(),t.overview="day",t.drawChart())})).on("mouseover",(function(e){if(!t.inTransition){for(var i=h(e.date.week().toString())+t.tooltipPadding;t.gWidth-i<t.tooltipWidth+3*t.tooltipPadding;)i-=10;var a=s(e.date.weekday().toString())+t.tooltipPadding;t.tooltip.html(t.getTooltip(e)).style("left",i+"px").style("top",a+"px").transition().duration(t.transitionDuration/2).ease(d.easeLinear).style("opacity",1)}})).on("mouseout",(function(){t.inTransition||t.hideTooltip()})).transition().delay((function(){return(Math.cos(Math.PI*Math.random())+1)*t.transitionDuration})).duration((function(){return t.transitionDuration})).ease(d.easeLinear).style("opacity",1).call((function(e,t){e.empty()&&t();var i=0;e.each((function(){return++i})).on("end",(function(){--i||t.apply(this,arguments)}))}),(function(){return t.inTransition=!1})),this.labels.selectAll(".label-week").remove(),this.labels.selectAll(".label-week").data(p).enter().append("text").attr("class","label label-week").attr("font-size",(function(){return Math.floor(t.labelPadding/3)+"px"})).text((function(e){return"Week "+e.week()})).attr("x",(function(e){return h(e.week().toString())})).attr("y",this.labelPadding/2).on("mouseenter",(function(e){t.inTransition||t.items.selectAll(".item-block-month").transition().duration(t.transitionDuration).ease(d.easeLinear).style("opacity",(function(t){return I.default(t.date).week()===e.week()?1:.1}))})).on("mouseout",(function(){t.inTransition||t.items.selectAll(".item-block-month").transition().duration(t.transitionDuration).ease(d.easeLinear).style("opacity",1)})).on("click",(function(e){t.inTransition||(t.inTransition=!0,t.selected={date:e},t.hideTooltip(),t.removeMonthOverview(),t.overview="week",t.drawChart())})),this.labels.selectAll(".label-day").remove(),this.labels.selectAll(".label-day").data(r).enter().append("text").attr("class","label label-day").attr("x",this.labelPadding/3).attr("y",(function(e,t){return s(t)+s.bandwidth()/1.75})).style("text-anchor","left").attr("font-size",(function(){return Math.floor(t.labelPadding/3)+"px"})).text((function(e){return I.default.utc(e).format("dddd")[0]})).on("mouseenter",(function(e){if(!t.inTransition){var i=I.default.utc(e);t.items.selectAll(".item-block-month").transition().duration(t.transitionDuration).ease(d.easeLinear).style("opacity",(function(e){return I.default(e.date).day()===i.day()?1:.1}))}})).on("mouseout",(function(){t.inTransition||t.items.selectAll(".item-block-month").transition().duration(t.transitionDuration).ease(d.easeLinear).style("opacity",1)})),this.drawButton()},e.prototype.drawWeekOverview=function(){var t=this;this.history[this.history.length-1]!==this.overview&&this.history.push(this.overview);var i=I.default(this.selected.date).startOf("week"),a=I.default(this.selected.date).endOf("week"),n=[];this._data.filter((function(e){return e.date.isBetween(i,a,null,"[]")})).map((function(e){var i=[];e.details.forEach((function(e){var t=I.default(e.date),a=t.hours();i[a]||(i[a]={date:t.startOf("hour"),total:0,details:[],summary:[]}),i[a].total+=e.value,i[a].details.push(e)})),i.forEach((function(e){var i=t.groupBy(e.details,"name");Object.keys(i).forEach((function(t){return e.summary.push({name:t,total:d.sum(i[t],(function(e){return e.value})),color:i[t][0].color})}))})),n=n.concat(i)})),n=z.cleanArray(n);var o=d.max(n,(function(e){return e.total})),r=d.timeDays(I.default.utc().startOf("week").toDate(),I.default.utc().endOf("week").toDate()),s=d.scaleBand().rangeRound([this.labelPadding,this.gHeight]).domain(r.map((function(e){return I.default.utc(e).weekday().toString()}))),p=[];d.range(0,24).forEach((function(e){return p.push(I.default.utc().hours(e).startOf("hour").format("HH:mm"))}));var l=d.scaleBand().rangeRound([this.labelPadding,this.gWidth]).padding(.01).domain(p),h=d.scaleLinear().range([this.minColor||e.DEF_MIN_COLOR,this.maxColor||e.DEF_MAX_COLOR]).domain([-.15*o,o]);this.items.selectAll(".item-block-week").remove(),this.items.selectAll(".item-block-week").data(n).enter().append("rect").style("opacity",0).attr("class","item item-block-week").attr("y",(function(e){return t.calcItemY(e)+(t.itemSize-t.calcItemSize(e,o))/2})).attr("x",(function(e){return t.gutter+l(I.default(e.date).startOf("hour").format("HH:mm"))+(t.itemSize-t.calcItemSize(e,o))/2})).attr("rx",(function(e){return t.calcItemSize(e,o)})).attr("ry",(function(e){return t.calcItemSize(e,o)})).attr("width",(function(e){return t.calcItemSize(e,o)})).attr("height",(function(e){return t.calcItemSize(e,o)})).attr("fill",(function(e){return e.total>0?h(e.total):"transparent"})).on("click",(function(e){t.inTransition||0!==e.total&&(t.inTransition=!0,t.selected=e,t.hideTooltip(),t.removeWeekOverview(),t.overview="day",t.drawChart())})).on("mouseover",(function(e){if(!t.inTransition){for(var i=l(I.default(e.date).startOf("hour").format("HH:mm"))+t.tooltipPadding;t.gWidth-i<t.tooltipWidth+3*t.tooltipPadding;)i-=10;var a=s(e.date.weekday().toString())+t.tooltipPadding;t.tooltip.html(t.getTooltip(e)).style("left",i+"px").style("top",a+"px").transition().duration(t.transitionDuration/2).ease(d.easeLinear).style("opacity",1)}})).on("mouseout",(function(){t.inTransition||t.hideTooltip()})).transition().delay((function(){return(Math.cos(Math.PI*Math.random())+1)*t.transitionDuration})).duration((function(){return t.transitionDuration})).ease(d.easeLinear).style("opacity",1).call((function(e,t){e.empty()&&t();var i=0;e.each((function(){return++i})).on("end",(function(){--i||t.apply(this,arguments)}))}),(function(){return t.inTransition=!1})),this.labels.selectAll(".label-week").remove(),this.labels.selectAll(".label-week").data(p).enter().append("text").attr("class","label label-week").attr("font-size",(function(){return Math.floor(t.labelPadding/3)+"px"})).text((function(e){return e})).attr("x",(function(e){return l(e)})).attr("y",this.labelPadding/2).on("mouseenter",(function(e){t.inTransition||t.items.selectAll(".item-block-week").transition().duration(t.transitionDuration).ease(d.easeLinear).style("opacity",(function(t){return I.default(t.date).startOf("hour").format("HH:mm")===e?1:.1}))})).on("mouseout",(function(){t.inTransition||t.items.selectAll(".item-block-week").transition().duration(t.transitionDuration).ease(d.easeLinear).style("opacity",1)})),this.labels.selectAll(".label-day").remove(),this.labels.selectAll(".label-day").data(r).enter().append("text").attr("class","label label-day").attr("x",this.labelPadding/3).attr("y",(function(e,t){return s(t.toString())+s.bandwidth()/1.75})).style("text-anchor","left").attr("font-size",(function(){return Math.floor(t.labelPadding/3)+"px"})).text((function(e){return I.default.utc(e).format("dddd")[0]})).on("mouseenter",(function(e){if(!t.inTransition){var i=I.default.utc(e);t.items.selectAll(".item-block-week").transition().duration(t.transitionDuration).ease(d.easeLinear).style("opacity",(function(e){return I.default(e.date).day()===i.day()?1:.1}))}})).on("mouseout",(function(){t.inTransition||t.items.selectAll(".item-block-week").transition().duration(t.transitionDuration).ease(d.easeLinear).style("opacity",1)})),this.drawButton()},e.prototype.drawDayOverview=function(){var t=this;this.history[this.history.length-1]!==this.overview&&this.history.push(this.overview),Object.keys(this.selected).length||(this.selected=this._data[this._data.length-1]);var i=I.default(this.selected.date).startOf("day"),a=I.default(this.selected.date).endOf("day"),n=[];this._data.filter((function(e){return e.date.isBetween(i,a,null,"[]")})).map((function(e){var i=[];e.details.forEach((function(e){var t=I.default(e.date),a=t.hours();i[a]||(i[a]={date:t.startOf("hour"),total:0,details:[],summary:[]}),i[a].total+=e.value,i[a].details.push(e)})),i.forEach((function(e){var i=t.groupBy(e.details,"name");Object.keys(i).forEach((function(t){e.summary.push({name:t,total:d.sum(i[t],(function(e){return e.value})),color:i[t][0].color})}))})),n=n.concat(i)}));var o=[];n.forEach((function(e){var t=e.date;e.summary.forEach((function(e){e.date=t,o.push(e)}))})),n=z.cleanArray(n);var r=d.max(o,(function(e){return e.total})),s=this.selected.summary.map((function(e){return e.name})),p=d.scaleBand().rangeRound([this.labelPadding,this.gHeight]).domain(s),l=[];d.range(0,24).forEach((function(e){return l.push(I.default.utc().hours(e).startOf("hour").format("HH:mm"))}));var h=d.scaleBand().rangeRound([this.labelPadding,this.gWidth]).padding(.01).domain(l);this.items.selectAll(".item-block").remove(),this.items.selectAll(".item-block").data(o).enter().append("rect").attr("class","item item-block").attr("x",(function(e){return t.gutter+h(I.default(e.date).startOf("hour").format("HH:mm"))+(t.itemSize-t.calcItemSize(e,r))/2})).attr("y",(function(e){return(p(e.name)||1)-(t.itemSize-t.calcItemSize(e,r))/2})).attr("rx",(function(e){return t.calcItemSize(e,r)})).attr("ry",(function(e){return t.calcItemSize(e,r)})).attr("width",(function(e){return t.calcItemSize(e,r)})).attr("height",(function(e){return t.calcItemSize(e,r)})).attr("fill",(function(t){return d.scaleLinear().range(["#ffffff",t.color||e.DEF_MIN_COLOR]).domain([-.5*r,r])(t.total)})).style("opacity",0).on("mouseover",(function(e){if(!t.inTransition){for(var i=h(I.default(e.date).startOf("hour").format("HH:mm"))+t.tooltipPadding;t.gWidth-i<t.tooltipWidth+3*t.tooltipPadding;)i-=10;var a=p(e.name)+t.tooltipPadding;t.tooltip.html(t.getTooltip(e)).style("left",i+"px").style("top",a+"px").transition().duration(t.transitionDuration/2).ease(d.easeLinear).style("opacity",1)}})).on("mouseout",(function(){t.inTransition||t.hideTooltip()})).on("click",(function(e){t.handler&&t.handler.emit(e)})).transition().delay((function(){return(Math.cos(Math.PI*Math.random())+1)*t.transitionDuration})).duration((function(){return t.transitionDuration})).ease(d.easeLinear).style("opacity",1).call((function(e,t){e.empty()&&t();var i=0;e.each((function(){return++i})).on("end",(function(){--i||t.apply(this,arguments)}))}),(function(){return t.inTransition=!1})),this.labels.selectAll(".label-time").remove(),this.labels.selectAll(".label-time").data(l).enter().append("text").attr("class","label label-time").attr("font-size",(function(){return Math.floor(t.labelPadding/3)+"px"})).text((function(e){return e})).attr("x",(function(e){return h(e)})).attr("y",this.labelPadding/2).on("mouseenter",(function(e){if(!t.inTransition){var i=e;t.items.selectAll(".item-block").transition().duration(t.transitionDuration).ease(d.easeLinear).style("opacity",(function(e){return e.date.format("HH:mm")===i?1:.1}))}})).on("mouseout",(function(){t.inTransition||t.items.selectAll(".item-block").transition().duration(t.transitionDuration).ease(d.easeLinear).style("opacity",1)}));var g=this.labelPadding;this.labels.selectAll(".label-project").remove(),this.labels.selectAll(".label-project").data(s).enter().append("text").attr("class","label label-project").attr("x",this.gutter).attr("y",(function(e){return p(e)+t.itemSize/2})).attr("min-height",(function(){return p.bandwidth()})).style("text-anchor","left").attr("font-size",(function(){return Math.floor(t.labelPadding/3)+"px"})).text((function(e){return e})).each((function(){for(var e=c.select(this),t=e.node().getComputedTextLength(),i=e.text();t>1.5*g&&i.length>0;)i=i.slice(0,-1),e.text(i+"..."),t=e.node().getComputedTextLength()})).on("mouseenter",(function(e){t.inTransition||t.items.selectAll(".item-block").transition().duration(t.transitionDuration).ease(d.easeLinear).style("opacity",(function(t){return t.name===e?1:.1}))})).on("mouseout",(function(){t.inTransition||t.items.selectAll(".item-block").transition().duration(t.transitionDuration).ease(d.easeLinear).style("opacity",1)})),this.drawButton()},e.prototype.calcItemX=function(e,t){var i=Math.round((+I.default(e.date)-+t.startOf("week"))/864e5);return Math.trunc(i/7)*(this.itemSize+this.gutter)+this.labelPadding},e.prototype.calcItemXMonth=function(e,t,i){var a=I.default(e.date).hours();return Math.trunc(a/3)*(this.itemSize+this.gutter)+i},e.prototype.calcItemY=function(e){return this.labelPadding+e.date.weekday()*(this.itemSize+this.gutter)},e.prototype.calcItemSize=function(e,t){return t<=0?this.itemSize:.75*this.itemSize+this.itemSize*e.total/t*.25},e.prototype.drawButton=function(){var e=this;this.buttons.selectAll(".button").remove();var t=this.buttons.append("g").attr("class","button button-back").style("opacity",0).on("click",(function(){e.inTransition||(e.inTransition=!0,"year"===e.overview?e.removeYearOverview():"month"===e.overview?e.removeMonthOverview():"week"===e.overview?e.removeWeekOverview():"day"===e.overview&&e.removeDayOverview(),e.history.pop(),e.overview=e.history.pop(),e.drawChart())}));t.append("circle").attr("cx",this.labelPadding/2.25).attr("cy",this.labelPadding/2.5).attr("r",this.itemSize/2),t.append("text").attr("x",this.labelPadding/2.25).attr("y",this.labelPadding/2.5).attr("dy",(function(){return Math.floor(e.gWidth/100)/3})).attr("font-size",(function(){return Math.floor(e.labelPadding/3)+"px"})).html("&#x2190;"),t.transition().duration(this.transitionDuration).ease(d.easeLinear).style("opacity",1)},e.prototype.removeGlobalOverview=function(){this.items.selectAll(".item-block-year").transition().duration(this.transitionDuration).ease(d.easeLinear).style("opacity",0).remove(),this.labels.selectAll(".label-year").remove()},e.prototype.removeYearOverview=function(){this.items.selectAll(".item-circle").transition().duration(this.transitionDuration).ease(d.easeLinear).style("opacity",0).remove(),this.labels.selectAll(".label-day").remove(),this.labels.selectAll(".label-month").remove(),this.hideBackButton()},e.prototype.removeMonthOverview=function(){this.items.selectAll(".item-block-month").transition().duration(this.transitionDuration).ease(d.easeLinear).style("opacity",0).remove(),this.labels.selectAll(".label-day").remove(),this.labels.selectAll(".label-week").remove(),this.hideBackButton()},e.prototype.removeWeekOverview=function(){var e=this;this.items.selectAll(".item-block-week").transition().duration(this.transitionDuration).ease(d.easeLinear).style("opacity",0).attr("x",(function(t,i){return i%2==0?-e.gWidth/3:e.gWidth/3})).remove(),this.labels.selectAll(".label-day").remove(),this.labels.selectAll(".label-week").remove(),this.hideBackButton()},e.prototype.removeDayOverview=function(){var e=this;this.items.selectAll(".item-block").transition().duration(this.transitionDuration).ease(d.easeLinear).style("opacity",0).attr("x",(function(t,i){return i%2==0?-e.gWidth/3:e.gWidth/3})).remove(),this.labels.selectAll(".label-time").remove(),this.labels.selectAll(".label-project").remove(),this.hideBackButton()},e.prototype.hideTooltip=function(){this.tooltip.transition().duration(this.transitionDuration/2).ease(d.easeLinear).style("opacity",0)},e.prototype.hideBackButton=function(){this.buttons.selectAll(".button").transition().duration(this.transitionDuration).ease(d.easeLinear).style("opacity",0).remove()},e}();pe.DEF_MIN_COLOR="#ffffff",pe.DEF_MAX_COLOR="#333333",pe.decorators=[{type:t.Component,args:[{selector:"calendar-heatmap",template:'\x3c!--\n  ~  Copyright 2020  SenX S.A.S.\n  ~\n  ~  Licensed under the Apache License, Version 2.0 (the "License");\n  ~  you may not use this file except in compliance with the License.\n  ~  You may obtain a copy of the License at\n  ~\n  ~    http://www.apache.org/licenses/LICENSE-2.0\n  ~\n  ~  Unless required by applicable law or agreed to in writing, software\n  ~  distributed under the License is distributed on an "AS IS" BASIS,\n  ~  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  ~  See the License for the specific language governing permissions and\n  ~  limitations under the License.\n  ~\n  --\x3e\n\n<div #chart></div>\n',encapsulation:t.ViewEncapsulation.ShadowDom,styles:['/*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */\n/*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */:root{--gts-attrname-font-color:#ed4a7b;--gts-attrvalue-font-color:#000;--gts-classname-font-color:#004eff;--gts-labelname-font-color:#19a979;--gts-labelvalue-font-color:#000;--gts-separator-font-color:#a0a0a0;--gts-stack-font-color:#000;--gts-tree-collapsed-icon:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA0UlEQVQ4T6WTUW7CQAxEPQdozxYb9Qb94Aj9gQSoVCp6lMr21doDZFCQiFCU3YDY//d2PeOFPHnwJC+zAlVdA/jp+/6YmZ+1S0qCPxF5HUAAO3fvSpKS4ENEvm6gfUS0c5JiBma2Ibm/QiQPmbmdSqohquoA7GqSxRaapmkBjBkAeHP336t0UWBmHcnb+VcR4XcJpjDJLjPHkS4tleqZubmNiDHU6gumDQDYuvvh7hpV9V9EXgaA5Ka2jbMjmNk7yZOIfEfE8eFVfuSDLda4JDsD3FNdEckTC0YAAAAASUVORK5CYII=);--gts-tree-expanded-icon:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA7klEQVQ4T82TMW7CQBBF/0g+QOpINEkVCmpaLoBm5COk5QYoaeAY3MDSei2LGu4QKakiBA1tCpTK8kS2sLVe2xSh8XSrnf9m/s4s4c6gO/UYGEBEXlT1bK396bFGIjIJguA7iqJLkVNbYOZXItoQ0QHAzBhz9CCFeAVgCeAjy7Jpmqa/NUBEEgDzktqGuOKKO47j+KsGhGH4lOf5HsDIg5ycyqVYVd+steuGheLAzM9EtPMgW1VdVGWJ6N0YU1gpozVGH+K+gy/uBHR1crXUqNzbQXXhduJ69sd7cxOZ+UFVH5Mk+exb+YGt8n9+5h8up1sReYC0WAAAAABJRU5ErkJggg==);--warp-slider-connect-color:#f90;--warp-slider-handle-bg-color:#fff;--warp-slider-handle-color:#004eff;--warp-slider-handle-shadow:inset 0 0 1px #fff,inset 0 1px 7px silver,0 3px 6px -3px #a0a0a0;--warp-view-annotationtooltip-font-color:#404040;--warp-view-annotationtooltip-value-font-color:#004eff;--warp-view-bar-color:#dc3545;--warp-view-chart-height:100%;--warp-view-chart-legend-bg:#fff;--warp-view-chart-legend-color:#404040;--warp-view-chart-width:100%;--warp-view-datagrid-cell-padding:5px;--warp-view-datagrid-even-bg-color:silver;--warp-view-datagrid-even-color:#000;--warp-view-datagrid-odd-bg-color:#fff;--warp-view-datagrid-odd-color:#404040;--warp-view-font-color:#000;--warp-view-map-margin:0;--warp-view-pagination-active-bg-color:#4caf50;--warp-view-pagination-active-border-color:#4caf50;--warp-view-pagination-active-color:#fff;--warp-view-pagination-bg-color:#fff;--warp-view-pagination-border-color:silver;--warp-view-pagination-disabled-color:silver;--warp-view-pagination-hover-bg-color:silver;--warp-view-pagination-hover-border-color:silver;--warp-view-pagination-hover-color:#000;--warp-view-plot-chart-height:100%;--warp-view-popup-bg-color:#fff;--warp-view-popup-body-bg-color:#fff;--warp-view-popup-body-color:#000;--warp-view-popup-border-color:rgba(0,0,0,0.2);--warp-view-popup-close-color:#404040;--warp-view-popup-header-bg-color:silver;--warp-view-popup-title-color:#404040;--warp-view-resize-handle-color:silver;--warp-view-resize-handle-height:10px;--warp-view-slider-pointer-size:65px;--warp-view-spinner-color:#f90;--warp-view-switch-handle-checked-color:radial-gradient(#fff 15%,#00cd00 100%);--warp-view-switch-handle-color:radial-gradient(#fff 15%,silver 100%);--warp-view-switch-height:30px;--warp-view-switch-inset-checked-color:#00cd00;--warp-view-switch-inset-color:silver;--warp-view-switch-radius:18px;--warp-view-switch-width:100px;--warp-view-tile-height:100%;--warp-view-tile-width:100%}.noData{color:var(--warp-view-chart-legend-color);position:relative;text-align:center;width:100%}\n\n/*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */.gts-classname{color:var(--gts-classname-font-color)}.gts-labelname{color:var(--gts-labelname-font-color)}.gts-attrname{color:var(--gts-attrname-font-color)}.gts-separator{color:var(--gts-separator-font-color)}.gts-labelvalue{color:var(--gts-labelvalue-font-color);font-style:italic}.gts-attrvalue{color:var(--gts-attrvalue-font-color);font-style:italic}:host{-moz-user-select:none;-ms-user-select:none;-webkit-user-select:none;position:relative;user-select:none}:host .item,:host .label{cursor:pointer}:host .label{fill:#aaa;font-family:Helvetica,arial,Open Sans,sans-serif}:host .button{cursor:pointer;fill:transparent;stroke:#aaa;stroke-width:2}:host .button text{fill:#aaa;stroke-width:1;text-anchor:middle}:host .heatmap-tooltip{background:rgba(0,0,0,.75);color:#fff;font-family:Helvetica,arial,Open Sans,sans-serif;font-size:12px;line-height:14px;max-width:650px;overflow:hidden;padding:15px;pointer-events:none;position:absolute;width:450px;z-index:9999}:host .heatmap-tooltip ul{list-style:none;padding:0}:host .heatmap-tooltip ul li{padding:0}:host .heatmap-tooltip ul li .gtsInfo{max-width:650px;padding-left:20px;width:auto}:host .heatmap-tooltip .header strong{display:inline-block;width:100%}:host .heatmap-tooltip .round{background-color:#bbb;border:2px solid #454545;border-radius:50%;display:inline-block;height:12px;width:12px}:host .heatmap-tooltip .header strong{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}']}]}],pe.ctorParameters=function(){return[{type:t.ElementRef}]},pe.propDecorators={debug:[{type:t.Input,args:["debug"]}],data:[{type:t.Input,args:["data"]}],minColor:[{type:t.Input,args:["minColor"]}],maxColor:[{type:t.Input,args:["maxColor"]}],div:[{type:t.ViewChild,args:["chart",{static:!0}]}],width:[{type:t.Input,args:["width"]}],height:[{type:t.Input,args:["height"]}],overview:[{type:t.Input,args:["overview"]}],handler:[{type:t.Output,args:["handler"]}],change:[{type:t.Output,args:["change"]}],onResize:[{type:t.HostListener,args:["window:resize"]}]};var le=function(){function e(){this.maxToShow=5,this.warpViewSelectedGTS=new t.EventEmitter,this.warpViewModalOpen=new t.EventEmitter,this.warpViewModalClose=new t.EventEmitter,this.current=0,this._gts=[],this._options=new P,this._kbdLastKeyPressed=[],this._hiddenData=[],this._debug=!1,this.displayed=[],this.modalOpenned=!1,this.LOG=new Y(e,this.debug)}return Object.defineProperty(e.prototype,"options",{set:function(e){this.LOG.debug(["onOptions"],e),"string"==typeof e&&(e=JSON.parse(e)),O.default(e,this._options)||(this.LOG.debug(["options","changed"],e),this._options=Q.mergeDeep(this._options,e),this.prepareData())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"gtsList",{set:function(e){this._gtsList=e,this.LOG.debug(["_gtsList"],this._gtsList),this.prepareData()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"gtslist",{get:function(){return this._gtsList},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"debug",{get:function(){return this._debug},set:function(e){this._debug=e,this.LOG.setDebug(e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"data",{get:function(){return this._data},set:function(e){this.LOG.debug(["data"],e),e&&(this._data=e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hiddenData",{get:function(){return this._hiddenData},set:function(e){this._hiddenData=e,this.prepareData()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"kbdLastKeyPressed",{get:function(){return this._kbdLastKeyPressed},set:function(e){if(this._kbdLastKeyPressed=e,"s"!==e[0]||this.modalOpenned){if(this.modalOpenned)switch(e[0]){case"ArrowUp":case"j":this.current=Math.max(0,this.current-1),this.prepareData();break;case"ArrowDown":case"k":this.current=Math.min(this._gts.length-1,this.current+1),this.prepareData();break;case" ":this.warpViewSelectedGTS.emit({gts:this._gts[this.current],selected:this.hiddenData.indexOf(this._gts[this.current].id)>-1});break;default:return}}else this.showPopup()},enumerable:!1,configurable:!0}),e.prototype.ngAfterViewInit=function(){this.prepareData()},e.prototype.onWarpViewModalOpen=function(){this.modalOpenned=!0,this.warpViewModalOpen.emit({})},e.prototype.onWarpViewModalClose=function(){this.modalOpenned=!1,this.warpViewModalClose.emit({})},e.prototype.isOpened=function(){return this.modal.isOpened()},e.prototype.showPopup=function(){this.current=0,this.prepareData(),this.modal.open()},e.prototype.close=function(){this.modal.close()},e.prototype.prepareData=function(){this._gtsList&&this._gtsList.data&&(this._gts=z.flatDeep([this._gtsList.data]),this.displayed=this._gts.slice(Math.max(0,Math.min(this.current-this.maxToShow,this._gts.length-2*this.maxToShow)),Math.min(this._gts.length,this.current+this.maxToShow+Math.abs(Math.min(this.current-this.maxToShow,0)))),this.LOG.debug(["prepareData"],this.displayed))},e.prototype.isHidden=function(e){return!this.displayed.find((function(t){return!!e&&e.id===t.id}))},e.prototype.identify=function(e,t){return e},e}();le.decorators=[{type:t.Component,args:[{selector:"warpview-gts-popup",template:'\x3c!--\n  ~  Copyright 2020  SenX S.A.S.\n  ~\n  ~  Licensed under the Apache License, Version 2.0 (the "License");\n  ~  you may not use this file except in compliance with the License.\n  ~  You may obtain a copy of the License at\n  ~\n  ~    http://www.apache.org/licenses/LICENSE-2.0\n  ~\n  ~  Unless required by applicable law or agreed to in writing, software\n  ~  distributed under the License is distributed on an "AS IS" BASIS,\n  ~  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  ~  See the License for the specific language governing permissions and\n  ~  limitations under the License.\n  ~\n  --\x3e\n\n<warpview-modal [kbdLastKeyPressed]="kbdLastKeyPressed"\n                modalTitle="GTS Selector"\n                #modal\n                (warpViewModalClose)="onWarpViewModalClose()"\n                (warpViewModalOpen)="onWarpViewModalOpen()">\n  <div class="up-arrow" *ngIf="this.current > 0"></div>\n  <ul>\n    <li *ngFor="let g of _gts; index as index; trackBy:identify"\n        [ngClass]="{ selected: current == index, hidden: isHidden(g.id) }"\n    >\n      <warpview-chip [node]="{gts: g}" [hiddenData]="hiddenData" [options]="_options"></warpview-chip>\n    </li>\n  </ul>\n  <div class="down-arrow" *ngIf="current < _gts.length - 1"></div>\n</warpview-modal>\n',encapsulation:t.ViewEncapsulation.ShadowDom,styles:['/*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */\n/*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */:root{--gts-attrname-font-color:#ed4a7b;--gts-attrvalue-font-color:#000;--gts-classname-font-color:#004eff;--gts-labelname-font-color:#19a979;--gts-labelvalue-font-color:#000;--gts-separator-font-color:#a0a0a0;--gts-stack-font-color:#000;--gts-tree-collapsed-icon:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA0UlEQVQ4T6WTUW7CQAxEPQdozxYb9Qb94Aj9gQSoVCp6lMr21doDZFCQiFCU3YDY//d2PeOFPHnwJC+zAlVdA/jp+/6YmZ+1S0qCPxF5HUAAO3fvSpKS4ENEvm6gfUS0c5JiBma2Ibm/QiQPmbmdSqohquoA7GqSxRaapmkBjBkAeHP336t0UWBmHcnb+VcR4XcJpjDJLjPHkS4tleqZubmNiDHU6gumDQDYuvvh7hpV9V9EXgaA5Ka2jbMjmNk7yZOIfEfE8eFVfuSDLda4JDsD3FNdEckTC0YAAAAASUVORK5CYII=);--gts-tree-expanded-icon:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA7klEQVQ4T82TMW7CQBBF/0g+QOpINEkVCmpaLoBm5COk5QYoaeAY3MDSei2LGu4QKakiBA1tCpTK8kS2sLVe2xSh8XSrnf9m/s4s4c6gO/UYGEBEXlT1bK396bFGIjIJguA7iqJLkVNbYOZXItoQ0QHAzBhz9CCFeAVgCeAjy7Jpmqa/NUBEEgDzktqGuOKKO47j+KsGhGH4lOf5HsDIg5ycyqVYVd+steuGheLAzM9EtPMgW1VdVGWJ6N0YU1gpozVGH+K+gy/uBHR1crXUqNzbQXXhduJ69sd7cxOZ+UFVH5Mk+exb+YGt8n9+5h8up1sReYC0WAAAAABJRU5ErkJggg==);--warp-slider-connect-color:#f90;--warp-slider-handle-bg-color:#fff;--warp-slider-handle-color:#004eff;--warp-slider-handle-shadow:inset 0 0 1px #fff,inset 0 1px 7px silver,0 3px 6px -3px #a0a0a0;--warp-view-annotationtooltip-font-color:#404040;--warp-view-annotationtooltip-value-font-color:#004eff;--warp-view-bar-color:#dc3545;--warp-view-chart-height:100%;--warp-view-chart-legend-bg:#fff;--warp-view-chart-legend-color:#404040;--warp-view-chart-width:100%;--warp-view-datagrid-cell-padding:5px;--warp-view-datagrid-even-bg-color:silver;--warp-view-datagrid-even-color:#000;--warp-view-datagrid-odd-bg-color:#fff;--warp-view-datagrid-odd-color:#404040;--warp-view-font-color:#000;--warp-view-map-margin:0;--warp-view-pagination-active-bg-color:#4caf50;--warp-view-pagination-active-border-color:#4caf50;--warp-view-pagination-active-color:#fff;--warp-view-pagination-bg-color:#fff;--warp-view-pagination-border-color:silver;--warp-view-pagination-disabled-color:silver;--warp-view-pagination-hover-bg-color:silver;--warp-view-pagination-hover-border-color:silver;--warp-view-pagination-hover-color:#000;--warp-view-plot-chart-height:100%;--warp-view-popup-bg-color:#fff;--warp-view-popup-body-bg-color:#fff;--warp-view-popup-body-color:#000;--warp-view-popup-border-color:rgba(0,0,0,0.2);--warp-view-popup-close-color:#404040;--warp-view-popup-header-bg-color:silver;--warp-view-popup-title-color:#404040;--warp-view-resize-handle-color:silver;--warp-view-resize-handle-height:10px;--warp-view-slider-pointer-size:65px;--warp-view-spinner-color:#f90;--warp-view-switch-handle-checked-color:radial-gradient(#fff 15%,#00cd00 100%);--warp-view-switch-handle-color:radial-gradient(#fff 15%,silver 100%);--warp-view-switch-height:30px;--warp-view-switch-inset-checked-color:#00cd00;--warp-view-switch-inset-color:silver;--warp-view-switch-radius:18px;--warp-view-switch-width:100px;--warp-view-tile-height:100%;--warp-view-tile-width:100%}.noData{color:var(--warp-view-chart-legend-color);position:relative;text-align:center;width:100%}']}]}],le.ctorParameters=function(){return[]},le.propDecorators={modal:[{type:t.ViewChild,args:["modal",{static:!0}]}],options:[{type:t.Input,args:["options"]}],gtsList:[{type:t.Input,args:["gtsList"]}],debug:[{type:t.Input,args:["debug"]}],data:[{type:t.Input,args:["data"]}],hiddenData:[{type:t.Input,args:["hiddenData"]}],maxToShow:[{type:t.Input,args:["maxToShow"]}],kbdLastKeyPressed:[{type:t.Input,args:["kbdLastKeyPressed"]}],warpViewSelectedGTS:[{type:t.Output,args:["warpViewSelectedGTS"]}],warpViewModalOpen:[{type:t.Output,args:["warpViewModalOpen"]}],warpViewModalClose:[{type:t.Output,args:["warpViewModalClose"]}]};var he=function(){function e(e){this.el=e,this.modalTitle="",this.kbdLastKeyPressed=[],this.warpViewModalOpen=new t.EventEmitter,this.warpViewModalClose=new t.EventEmitter,this.opened=!1}return e.prototype.open=function(){this.el.nativeElement.style.display="block",this.el.nativeElement.style.zIndex="999999",this.opened=!0,this.warpViewModalOpen.emit({})},e.prototype.close=function(){this.el.nativeElement.style.display="none",this.el.nativeElement.style.zIndex="-1",this.opened=!1,this.warpViewModalClose.emit({})},e.prototype.isOpened=function(){var e=this;return new Promise((function(t){t(e.opened)}))},e.prototype.handleKeyDown=function(e){"Escape"===e[0]&&this.close()},e.prototype.ngAfterViewInit=function(){var e=this;this.el.nativeElement.addEventListener("click",(function(t){"WARP-VIEW-MODAL"===t.path[0].nodeName&&e.close()}))},e}();he.decorators=[{type:t.Component,args:[{selector:"warpview-modal",template:'\x3c!--\n  ~  Copyright 2020  SenX S.A.S.\n  ~\n  ~  Licensed under the Apache License, Version 2.0 (the "License");\n  ~  you may not use this file except in compliance with the License.\n  ~  You may obtain a copy of the License at\n  ~\n  ~    http://www.apache.org/licenses/LICENSE-2.0\n  ~\n  ~  Unless required by applicable law or agreed to in writing, software\n  ~  distributed under the License is distributed on an "AS IS" BASIS,\n  ~  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  ~  See the License for the specific language governing permissions and\n  ~  limitations under the License.\n  ~\n  --\x3e\n\n<div class="popup">\n  <div class="header">\n    <div class="title" [innerHTML]="modalTitle"></div>\n    <div class="close" (click)="close()">&times;</div>\n  </div>\n  <div class="body">\n    <ng-content></ng-content>\n  </div>\n</div>\n',encapsulation:t.ViewEncapsulation.ShadowDom,styles:['/*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */\n/*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */:root{--gts-attrname-font-color:#ed4a7b;--gts-attrvalue-font-color:#000;--gts-classname-font-color:#004eff;--gts-labelname-font-color:#19a979;--gts-labelvalue-font-color:#000;--gts-separator-font-color:#a0a0a0;--gts-stack-font-color:#000;--gts-tree-collapsed-icon:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA0UlEQVQ4T6WTUW7CQAxEPQdozxYb9Qb94Aj9gQSoVCp6lMr21doDZFCQiFCU3YDY//d2PeOFPHnwJC+zAlVdA/jp+/6YmZ+1S0qCPxF5HUAAO3fvSpKS4ENEvm6gfUS0c5JiBma2Ibm/QiQPmbmdSqohquoA7GqSxRaapmkBjBkAeHP336t0UWBmHcnb+VcR4XcJpjDJLjPHkS4tleqZubmNiDHU6gumDQDYuvvh7hpV9V9EXgaA5Ka2jbMjmNk7yZOIfEfE8eFVfuSDLda4JDsD3FNdEckTC0YAAAAASUVORK5CYII=);--gts-tree-expanded-icon:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA7klEQVQ4T82TMW7CQBBF/0g+QOpINEkVCmpaLoBm5COk5QYoaeAY3MDSei2LGu4QKakiBA1tCpTK8kS2sLVe2xSh8XSrnf9m/s4s4c6gO/UYGEBEXlT1bK396bFGIjIJguA7iqJLkVNbYOZXItoQ0QHAzBhz9CCFeAVgCeAjy7Jpmqa/NUBEEgDzktqGuOKKO47j+KsGhGH4lOf5HsDIg5ycyqVYVd+steuGheLAzM9EtPMgW1VdVGWJ6N0YU1gpozVGH+K+gy/uBHR1crXUqNzbQXXhduJ69sd7cxOZ+UFVH5Mk+exb+YGt8n9+5h8up1sReYC0WAAAAABJRU5ErkJggg==);--warp-slider-connect-color:#f90;--warp-slider-handle-bg-color:#fff;--warp-slider-handle-color:#004eff;--warp-slider-handle-shadow:inset 0 0 1px #fff,inset 0 1px 7px silver,0 3px 6px -3px #a0a0a0;--warp-view-annotationtooltip-font-color:#404040;--warp-view-annotationtooltip-value-font-color:#004eff;--warp-view-bar-color:#dc3545;--warp-view-chart-height:100%;--warp-view-chart-legend-bg:#fff;--warp-view-chart-legend-color:#404040;--warp-view-chart-width:100%;--warp-view-datagrid-cell-padding:5px;--warp-view-datagrid-even-bg-color:silver;--warp-view-datagrid-even-color:#000;--warp-view-datagrid-odd-bg-color:#fff;--warp-view-datagrid-odd-color:#404040;--warp-view-font-color:#000;--warp-view-map-margin:0;--warp-view-pagination-active-bg-color:#4caf50;--warp-view-pagination-active-border-color:#4caf50;--warp-view-pagination-active-color:#fff;--warp-view-pagination-bg-color:#fff;--warp-view-pagination-border-color:silver;--warp-view-pagination-disabled-color:silver;--warp-view-pagination-hover-bg-color:silver;--warp-view-pagination-hover-border-color:silver;--warp-view-pagination-hover-color:#000;--warp-view-plot-chart-height:100%;--warp-view-popup-bg-color:#fff;--warp-view-popup-body-bg-color:#fff;--warp-view-popup-body-color:#000;--warp-view-popup-border-color:rgba(0,0,0,0.2);--warp-view-popup-close-color:#404040;--warp-view-popup-header-bg-color:silver;--warp-view-popup-title-color:#404040;--warp-view-resize-handle-color:silver;--warp-view-resize-handle-height:10px;--warp-view-slider-pointer-size:65px;--warp-view-spinner-color:#f90;--warp-view-switch-handle-checked-color:radial-gradient(#fff 15%,#00cd00 100%);--warp-view-switch-handle-color:radial-gradient(#fff 15%,silver 100%);--warp-view-switch-height:30px;--warp-view-switch-inset-checked-color:#00cd00;--warp-view-switch-inset-color:silver;--warp-view-switch-radius:18px;--warp-view-switch-width:100px;--warp-view-tile-height:100%;--warp-view-tile-width:100%}.noData{color:var(--warp-view-chart-legend-color);position:relative;text-align:center;width:100%}:host{background-color:rgba(0,0,0,.3);display:none;height:100%;left:0;overflow:hidden;position:fixed;top:0;z-index:0}:host,:host .popup{outline:0;width:100%}:host .popup{background-clip:padding-box;background-color:var(--warp-view-popup-bg-color);border:1px solid var(--warp-view-popup-border-color);border-radius:.3rem;display:flex;flex-direction:column;height:auto;margin:1.75rem auto;pointer-events:auto;position:relative;top:10%;z-index:999999}@media (min-width:576px){:host .popup{max-width:800px}}:host .popup .header{align-items:flex-start;background-color:var(--warp-view-popup-header-bg-color);border-bottom:1px solid #e9ecef;border-top-left-radius:.3rem;border-top-right-radius:.3rem;display:flex;justify-content:space-between;padding:1rem}:host .popup .header .title{color:var(--warp-view-popup-title-color);line-height:1.5;margin-bottom:0}:host .popup .header .close{color:var(--warp-view-popup-close-color);cursor:pointer;margin:-1rem -1rem -1rem auto;padding:1rem}:host .popup .body{background-color:var(--warp-view-popup-body-bg-color);color:var(--warp-view-popup-body-color);height:auto;padding:10px;position:relative}']}]}],he.ctorParameters=function(){return[{type:t.ElementRef}]},he.propDecorators={modalTitle:[{type:t.Input,args:["modalTitle"]}],kbdLastKeyPressed:[{type:t.Input,args:["kbdLastKeyPressed"]}],warpViewModalOpen:[{type:t.Output,args:["warpViewModalOpen"]}],warpViewModalClose:[{type:t.Output,args:["warpViewModalClose"]}],handleKeyDown:[{type:t.HostListener,args:["kbdLastKeyPressed",["$event"]]}]};var de=function(e){function i(a,n,r,s){var p=e.call(this,a,n,r,s)||this;return p.el=a,p.renderer=n,p.sizeService=r,p.ngZone=s,p.kbdLastKeyPressed=[],p.warpViewSelectedGTS=new t.EventEmitter,p._gtsFilter="x",p.gtsList=[],p.params=[],p.expand=!1,p.initOpen=new o.Subject,p.LOG=new Y(i,p._debug),p}return T(i,e),Object.defineProperty(i.prototype,"gtsFilter",{get:function(){return this._gtsFilter},set:function(e){this._gtsFilter=e},enumerable:!1,configurable:!0}),i.prototype.ngAfterViewInit=function(){this.LOG.debug(["componentDidLoad","data"],this._data),this._options.foldGTSTree&&!this.expand&&this.foldAll(),this._options.foldGTSTree||this.initOpen.next(),this._data&&this.doRender()},i.prototype.update=function(e,t){this._options.foldGTSTree&&!this.expand&&this.foldAll(),this.doRender()},i.prototype.doRender=function(){if(this.LOG.debug(["doRender","gtsList"],this._data),this._data){this._options=Q.mergeDeep(this.defOptions,this._options);var e=z.getData(this._data).data;this.params=this._data.params||[],this.LOG.debug(["doRender","gtsList","dataList"],e),e&&(this.expand=!this._options.foldGTSTree,this.gtsList=z.flattenGtsIdArray(e,0).res,this.LOG.debug(["doRender","gtsList"],this.gtsList,this._options.foldGTSTree,this.expand),this.loading=!1,this.chartDraw.emit())}},i.prototype.foldAll=function(){var e=this;this.root?this.expand=!1:setTimeout((function(){return e.foldAll()}))},i.prototype.toggleVisibility=function(){var e=this;requestAnimationFrame((function(){return e.expand=!e.expand}))},i.prototype.convert=function(e){return[]},i.prototype.warpViewSelectedGTSHandler=function(e){this.LOG.debug(["warpViewSelectedGTS"],e),this.warpViewSelectedGTS.emit(e)},i}(K);de.decorators=[{type:t.Component,args:[{selector:"warpview-gts-tree",template:'\x3c!--\n  ~  Copyright 2020  SenX S.A.S.\n  ~\n  ~  Licensed under the Apache License, Version 2.0 (the "License");\n  ~  you may not use this file except in compliance with the License.\n  ~  You may obtain a copy of the License at\n  ~\n  ~    http://www.apache.org/licenses/LICENSE-2.0\n  ~\n  ~  Unless required by applicable law or agreed to in writing, software\n  ~  distributed under the License is distributed on an "AS IS" BASIS,\n  ~  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  ~  See the License for the specific language governing permissions and\n  ~  limitations under the License.\n  ~\n  --\x3e\n\n<div class="wrapper">\n  <div class="stack-level" (click)="toggleVisibility()">\n    <span [ngClass]="{expanded: this.expand, collapsed: !this.expand}" #root></span> Results\n    <small id="inner-a">List of {{gtsList.length}} item{{gtsList.length > 1 ? \'s\' : \'\'}}</small>\n  </div>\n  <warpview-tree-view [events]="initOpen.asObservable()"\n                      [gtsList]="gtsList" [branch]="false" *ngIf="expand" [params]="params"\n                      [options]="_options" (warpViewSelectedGTS)="warpViewSelectedGTSHandler($event)"\n                      [debug]="debug" [hiddenData]="hiddenData" [gtsFilter]="gtsFilter"\n                      [kbdLastKeyPressed]="kbdLastKeyPressed"></warpview-tree-view>\n</div>\n',encapsulation:t.ViewEncapsulation.ShadowDom,styles:['/*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */\n/*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */:root{--gts-attrname-font-color:#ed4a7b;--gts-attrvalue-font-color:#000;--gts-classname-font-color:#004eff;--gts-labelname-font-color:#19a979;--gts-labelvalue-font-color:#000;--gts-separator-font-color:#a0a0a0;--gts-stack-font-color:#000;--gts-tree-collapsed-icon:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA0UlEQVQ4T6WTUW7CQAxEPQdozxYb9Qb94Aj9gQSoVCp6lMr21doDZFCQiFCU3YDY//d2PeOFPHnwJC+zAlVdA/jp+/6YmZ+1S0qCPxF5HUAAO3fvSpKS4ENEvm6gfUS0c5JiBma2Ibm/QiQPmbmdSqohquoA7GqSxRaapmkBjBkAeHP336t0UWBmHcnb+VcR4XcJpjDJLjPHkS4tleqZubmNiDHU6gumDQDYuvvh7hpV9V9EXgaA5Ka2jbMjmNk7yZOIfEfE8eFVfuSDLda4JDsD3FNdEckTC0YAAAAASUVORK5CYII=);--gts-tree-expanded-icon:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA7klEQVQ4T82TMW7CQBBF/0g+QOpINEkVCmpaLoBm5COk5QYoaeAY3MDSei2LGu4QKakiBA1tCpTK8kS2sLVe2xSh8XSrnf9m/s4s4c6gO/UYGEBEXlT1bK396bFGIjIJguA7iqJLkVNbYOZXItoQ0QHAzBhz9CCFeAVgCeAjy7Jpmqa/NUBEEgDzktqGuOKKO47j+KsGhGH4lOf5HsDIg5ycyqVYVd+steuGheLAzM9EtPMgW1VdVGWJ6N0YU1gpozVGH+K+gy/uBHR1crXUqNzbQXXhduJ69sd7cxOZ+UFVH5Mk+exb+YGt8n9+5h8up1sReYC0WAAAAABJRU5ErkJggg==);--warp-slider-connect-color:#f90;--warp-slider-handle-bg-color:#fff;--warp-slider-handle-color:#004eff;--warp-slider-handle-shadow:inset 0 0 1px #fff,inset 0 1px 7px silver,0 3px 6px -3px #a0a0a0;--warp-view-annotationtooltip-font-color:#404040;--warp-view-annotationtooltip-value-font-color:#004eff;--warp-view-bar-color:#dc3545;--warp-view-chart-height:100%;--warp-view-chart-legend-bg:#fff;--warp-view-chart-legend-color:#404040;--warp-view-chart-width:100%;--warp-view-datagrid-cell-padding:5px;--warp-view-datagrid-even-bg-color:silver;--warp-view-datagrid-even-color:#000;--warp-view-datagrid-odd-bg-color:#fff;--warp-view-datagrid-odd-color:#404040;--warp-view-font-color:#000;--warp-view-map-margin:0;--warp-view-pagination-active-bg-color:#4caf50;--warp-view-pagination-active-border-color:#4caf50;--warp-view-pagination-active-color:#fff;--warp-view-pagination-bg-color:#fff;--warp-view-pagination-border-color:silver;--warp-view-pagination-disabled-color:silver;--warp-view-pagination-hover-bg-color:silver;--warp-view-pagination-hover-border-color:silver;--warp-view-pagination-hover-color:#000;--warp-view-plot-chart-height:100%;--warp-view-popup-bg-color:#fff;--warp-view-popup-body-bg-color:#fff;--warp-view-popup-body-color:#000;--warp-view-popup-border-color:rgba(0,0,0,0.2);--warp-view-popup-close-color:#404040;--warp-view-popup-header-bg-color:silver;--warp-view-popup-title-color:#404040;--warp-view-resize-handle-color:silver;--warp-view-resize-handle-height:10px;--warp-view-slider-pointer-size:65px;--warp-view-spinner-color:#f90;--warp-view-switch-handle-checked-color:radial-gradient(#fff 15%,#00cd00 100%);--warp-view-switch-handle-color:radial-gradient(#fff 15%,silver 100%);--warp-view-switch-height:30px;--warp-view-switch-inset-checked-color:#00cd00;--warp-view-switch-inset-color:silver;--warp-view-switch-radius:18px;--warp-view-switch-width:100px;--warp-view-tile-height:100%;--warp-view-tile-width:100%}.noData{color:var(--warp-view-chart-legend-color);position:relative;text-align:center;width:100%}:host .wrapper{min-height:0!important;text-align:left}:host .stack-level{color:var(--gts-stack-font-color);cursor:pointer;font-size:1em;padding-top:5px}:host .stack-level+div{padding-left:25px}:host .expanded{background-image:var(--gts-tree-expanded-icon)}:host .collapsed,:host .expanded{background-position:0;background-repeat:no-repeat;margin-right:5px;padding:1px 10px}:host .collapsed{background-image:var(--gts-tree-collapsed-icon)}']}]}],de.ctorParameters=function(){return[{type:t.ElementRef},{type:t.Renderer2},{type:W},{type:t.NgZone}]},de.propDecorators={root:[{type:t.ViewChild,args:["root",{static:!0}]}],kbdLastKeyPressed:[{type:t.Input,args:["kbdLastKeyPressed"]}],gtsFilter:[{type:t.Input,args:["gtsFilter"]}],warpViewSelectedGTS:[{type:t.Output,args:["warpViewSelectedGTS"]}]};var ce=function(){function e(){this.gtsFilter="x",this.branch=!1,this.hidden=!1,this.warpViewSelectedGTS=new t.EventEmitter,this.hide={},this.initOpen=new o.Subject,this.stateChange=new o.Subject,this._debug=!1,this._hiddenData=[],this._kbdLastKeyPressed=[],this.LOG=new Y(e,this.debug)}return Object.defineProperty(e.prototype,"debug",{get:function(){return this._debug},set:function(e){this._debug=e,this.LOG.setDebug(e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hiddenData",{get:function(){return this._hiddenData},set:function(e){this._hiddenData=U(e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"kbdLastKeyPressed",{get:function(){return this._kbdLastKeyPressed},set:function(e){this.LOG.debug(["kbdLastKeyPressed"],e),this._kbdLastKeyPressed=e,"a"===e[0]&&this.stateChange.next(!0),"n"===e[0]&&this.stateChange.next(!1)},enumerable:!1,configurable:!0}),e.prototype.ngOnInit=function(){var e=this;this.eventsSubscription=this.events.subscribe((function(){return e.open()})),this.LOG.debug(["ngOnInit"],this.gtsList);for(var t=this.gtsList.length,i=0;i<t;i++)this.hide[i+""]=!1},e.prototype.ngOnDestroy=function(){this.eventsSubscription.unsubscribe()},e.prototype.toggleVisibility=function(e){this.LOG.debug(["toggleVisibility"],e,this.hide),this.hide[e+""]=!this.hide[e+""]},e.prototype.isHidden=function(e){return!!this.hide[e+""]&&!!this.hide[e+""]},e.prototype.isGts=function(e){return z.isGts(e)},e.prototype.identify=function(e,t){return e},e.prototype.warpViewSelectedGTSHandler=function(e){this.warpViewSelectedGTS.emit(e)},e.prototype.open=function(){var e=this;this.gtsList.forEach((function(t,i){return e.hide[i+""]=!0})),setTimeout((function(){return e.initOpen.next()}))},e}();ce.decorators=[{type:t.Component,args:[{selector:"warpview-tree-view",template:'\x3c!--\n  ~  Copyright 2020  SenX S.A.S.\n  ~\n  ~  Licensed under the Apache License, Version 2.0 (the "License");\n  ~  you may not use this file except in compliance with the License.\n  ~  You may obtain a copy of the License at\n  ~\n  ~    http://www.apache.org/licenses/LICENSE-2.0\n  ~\n  ~  Unless required by applicable law or agreed to in writing, software\n  ~  distributed under the License is distributed on an "AS IS" BASIS,\n  ~  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  ~  See the License for the specific language governing permissions and\n  ~  limitations under the License.\n  ~\n  --\x3e\n\n<div class="list">\n  <ul *ngIf="gtsList">\n    <li *ngFor="let gts of gtsList; trackBy:identify; index as index; first as first">\n      <warpview-chip\n        *ngIf="isGts(gts)"\n        [options]="options" (warpViewSelectedGTS)="warpViewSelectedGTSHandler($event)" [param]="params[gts.id]"\n        [node]="{gts: gts}" [gtsFilter]="gtsFilter" [debug]="debug" [hiddenData]="hiddenData"\n        [events]="stateChange.asObservable()"></warpview-chip>\n      <span *ngIf="!isGts(gts)">\n        <span *ngIf="gts">\n          <span *ngIf="branch">\n            <span>\n            <span [ngClass]="{expanded:  hide[index + \'\'], collapsed: !hide[index + \'\']}"\n                  (click)="toggleVisibility(index)" [id]="\'span-\' + index"> </span>\n                    <small (click)="toggleVisibility(index)"> List of {{gts.length}}\n                      item{{gts.length > 1 ? \'s\' : \'\'}}</small>\n           </span>\n          </span>\n          <span *ngIf="!branch">\n            <span class="stack-level">\n              <span [ngClass]="{expanded: hide[index + \'\'], collapsed: !hide[index + \'\']}"\n                    (click)="toggleVisibility(index)" [id]="\'span-\' + index"></span>\n              <span (click)="toggleVisibility(index)">{{first ? \'[TOP]\' : \'[\' + (index + 1) + \']\'}}&nbsp;\n                <small [id]="\'inner-\' + index">List of {{gts.length}} item{{gts.length > 1 ? \'s\' : \'\'}}</small>\n              </span>\n                  </span>\n          </span>\n    <warpview-tree-view [gtsList]="gts" [branch]="true" *ngIf="hide[index + \'\']"\n                        [debug]="debug" [gtsFilter]="gtsFilter" [params]="params"\n                        [events]="initOpen.asObservable()"\n                        [options]="options" (warpViewSelectedGTS)="warpViewSelectedGTSHandler($event)"\n                        [kbdLastKeyPressed]="kbdLastKeyPressed" [hiddenData]="hiddenData"></warpview-tree-view>\n        </span>\n      </span>\n    </li>\n  </ul>\n</div>\n',encapsulation:t.ViewEncapsulation.ShadowDom,styles:['/*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */\n/*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */:root{--gts-attrname-font-color:#ed4a7b;--gts-attrvalue-font-color:#000;--gts-classname-font-color:#004eff;--gts-labelname-font-color:#19a979;--gts-labelvalue-font-color:#000;--gts-separator-font-color:#a0a0a0;--gts-stack-font-color:#000;--gts-tree-collapsed-icon:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA0UlEQVQ4T6WTUW7CQAxEPQdozxYb9Qb94Aj9gQSoVCp6lMr21doDZFCQiFCU3YDY//d2PeOFPHnwJC+zAlVdA/jp+/6YmZ+1S0qCPxF5HUAAO3fvSpKS4ENEvm6gfUS0c5JiBma2Ibm/QiQPmbmdSqohquoA7GqSxRaapmkBjBkAeHP336t0UWBmHcnb+VcR4XcJpjDJLjPHkS4tleqZubmNiDHU6gumDQDYuvvh7hpV9V9EXgaA5Ka2jbMjmNk7yZOIfEfE8eFVfuSDLda4JDsD3FNdEckTC0YAAAAASUVORK5CYII=);--gts-tree-expanded-icon:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA7klEQVQ4T82TMW7CQBBF/0g+QOpINEkVCmpaLoBm5COk5QYoaeAY3MDSei2LGu4QKakiBA1tCpTK8kS2sLVe2xSh8XSrnf9m/s4s4c6gO/UYGEBEXlT1bK396bFGIjIJguA7iqJLkVNbYOZXItoQ0QHAzBhz9CCFeAVgCeAjy7Jpmqa/NUBEEgDzktqGuOKKO47j+KsGhGH4lOf5HsDIg5ycyqVYVd+steuGheLAzM9EtPMgW1VdVGWJ6N0YU1gpozVGH+K+gy/uBHR1crXUqNzbQXXhduJ69sd7cxOZ+UFVH5Mk+exb+YGt8n9+5h8up1sReYC0WAAAAABJRU5ErkJggg==);--warp-slider-connect-color:#f90;--warp-slider-handle-bg-color:#fff;--warp-slider-handle-color:#004eff;--warp-slider-handle-shadow:inset 0 0 1px #fff,inset 0 1px 7px silver,0 3px 6px -3px #a0a0a0;--warp-view-annotationtooltip-font-color:#404040;--warp-view-annotationtooltip-value-font-color:#004eff;--warp-view-bar-color:#dc3545;--warp-view-chart-height:100%;--warp-view-chart-legend-bg:#fff;--warp-view-chart-legend-color:#404040;--warp-view-chart-width:100%;--warp-view-datagrid-cell-padding:5px;--warp-view-datagrid-even-bg-color:silver;--warp-view-datagrid-even-color:#000;--warp-view-datagrid-odd-bg-color:#fff;--warp-view-datagrid-odd-color:#404040;--warp-view-font-color:#000;--warp-view-map-margin:0;--warp-view-pagination-active-bg-color:#4caf50;--warp-view-pagination-active-border-color:#4caf50;--warp-view-pagination-active-color:#fff;--warp-view-pagination-bg-color:#fff;--warp-view-pagination-border-color:silver;--warp-view-pagination-disabled-color:silver;--warp-view-pagination-hover-bg-color:silver;--warp-view-pagination-hover-border-color:silver;--warp-view-pagination-hover-color:#000;--warp-view-plot-chart-height:100%;--warp-view-popup-bg-color:#fff;--warp-view-popup-body-bg-color:#fff;--warp-view-popup-body-color:#000;--warp-view-popup-border-color:rgba(0,0,0,0.2);--warp-view-popup-close-color:#404040;--warp-view-popup-header-bg-color:silver;--warp-view-popup-title-color:#404040;--warp-view-resize-handle-color:silver;--warp-view-resize-handle-height:10px;--warp-view-slider-pointer-size:65px;--warp-view-spinner-color:#f90;--warp-view-switch-handle-checked-color:radial-gradient(#fff 15%,#00cd00 100%);--warp-view-switch-handle-color:radial-gradient(#fff 15%,silver 100%);--warp-view-switch-height:30px;--warp-view-switch-inset-checked-color:#00cd00;--warp-view-switch-inset-color:silver;--warp-view-switch-radius:18px;--warp-view-switch-width:100px;--warp-view-tile-height:100%;--warp-view-tile-width:100%}.noData{color:var(--warp-view-chart-legend-color);position:relative;text-align:center;width:100%}:host ul{border:none;list-style:none;margin:0;overflow:hidden;padding:0}:host li{color:var(--gts-stack-font-color,#000);line-height:20px;padding:0 0 0 20px;position:relative}:host .list,:host li .stack-level{font-size:1em;padding-top:5px}:host .list+div,:host li .stack-level+div{padding-left:25px}:host li .expanded{background-image:var(--gts-tree-expanded-icon,url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA7klEQVQ4T82TMW7CQBBF/0g+QOpINEkVCmpaLoBm5COk5QYoaeAY3MDSei2LGu4QKakiBA1tCpTK8kS2sLVe2xSh8XSrnf9m/s4s4c6gO/UYGEBEXlT1bK396bFGIjIJguA7iqJLkVNbYOZXItoQ0QHAzBhz9CCFeAVgCeAjy7Jpmqa/NUBEEgDzktqGuOKKO47j+KsGhGH4lOf5HsDIg5ycyqVYVd+steuGheLAzM9EtPMgW1VdVGWJ6N0YU1gpozVGH+K+gy/uBHR1crXUqNzbQXXhduJ69sd7cxOZ+UFVH5Mk+exb+YGt8n9+5h8up1sReYC0WAAAAABJRU5ErkJggg==))}:host li .collapsed,:host li .expanded{background-position:0;background-repeat:no-repeat;margin-right:5px;padding:1px 10px}:host li .collapsed{background-image:var(--gts-tree-collapsed-icon,url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA0UlEQVQ4T6WTUW7CQAxEPQdozxYb9Qb94Aj9gQSoVCp6lMr21doDZFCQiFCU3YDY//d2PeOFPHnwJC+zAlVdA/jp+/6YmZ+1S0qCPxF5HUAAO3fvSpKS4ENEvm6gfUS0c5JiBma2Ibm/QiQPmbmdSqohquoA7GqSxRaapmkBjBkAeHP336t0UWBmHcnb+VcR4XcJpjDJLjPHkS4tleqZubmNiDHU6gumDQDYuvvh7hpV9V9EXgaA5Ka2jbMjmNk7yZOIfEfE8eFVfuSDLda4JDsD3FNdEckTC0YAAAAASUVORK5CYII=))}:host li .gtsInfo{white-space:normal;word-wrap:break-word}:host li .gtsInfo[disabled]{color:#aaa;cursor:not-allowed}:host li .normal{background-color:#bbb;border-radius:50%;display:inline-block}:host li i,:host li span{cursor:pointer}:host li .selected{background-color:#adf;font-weight:700;padding:1px 5px}']}]}],ce.ctorParameters=function(){return[]},ce.propDecorators={debug:[{type:t.Input,args:["debug"]}],hiddenData:[{type:t.Input,args:["hiddenData"]}],options:[{type:t.Input,args:["options"]}],gtsFilter:[{type:t.Input,args:["gtsFilter"]}],gtsList:[{type:t.Input,args:["gtsList"]}],params:[{type:t.Input,args:["params"]}],branch:[{type:t.Input,args:["branch"]}],hidden:[{type:t.Input,args:["hidden"]}],events:[{type:t.Input}],warpViewSelectedGTS:[{type:t.Output,args:["warpViewSelectedGTS"]}],kbdLastKeyPressed:[{type:t.Input,args:["kbdLastKeyPressed"]}]};var ge=function(){},ue=function(){function e(i){this.renderer=i,this.param=new P,this.options=new P,this.warpViewSelectedGTS=new t.EventEmitter,this._gtsFilter="x",this._debug=!1,this._hiddenData=[],this._node={selected:!0,gts:ge},this.LOG=new Y(e,this.debug)}return Object.defineProperty(e.prototype,"debug",{get:function(){return this._debug},set:function(e){this._debug=e,this.LOG.setDebug(e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hiddenData",{get:function(){return this._hiddenData},set:function(e){JSON.stringify(e)!==JSON.stringify(this._hiddenData)&&(this._hiddenData=e,this.LOG.debug(["hiddenData"],e,this._node,this._node.gts,this._node.gts.c),this._node&&this._node.gts&&this._node.gts.c&&this.setState(-1===this._hiddenData.indexOf(this._node.gts.id)))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"gtsFilter",{get:function(){return this._gtsFilter},set:function(e){this._gtsFilter=e,""!==this._gtsFilter.slice(1)?this.setState(new RegExp(this._gtsFilter.slice(1),"gi").test(z.serializeGtsMetadata(this._node.gts))):this.setState(!0)},enumerable:!1,configurable:!0}),e.prototype.ngOnInit=function(){var e=this;this._node=Object.assign(Object.assign({},this.node),{selected:-1===this._hiddenData.indexOf(this.node.gts.id)}),this.events&&(this.eventsSubscription=this.events.subscribe((function(t){return e.setState(t)})))},e.prototype.ngOnDestroy=function(){this.eventsSubscription&&this.eventsSubscription.unsubscribe()},e.prototype.ngAfterViewInit=function(){""!==this.gtsFilter.slice(1)&&new RegExp(this.gtsFilter.slice(1),"gi").test(z.serializeGtsMetadata(this._node.gts))||this.hiddenData.indexOf(this._node.gts.id)>-1?this.setState(!1):this.colorizeChip()},e.prototype.colorizeChip=function(){if(this.chip)if(this._node.selected){var e=M.getColor(this._node.gts.id,this.options.scheme),t=(this.param||{datasetColor:e}).datasetColor||e;this.renderer.setStyle(this.chip.nativeElement,"background-color",t),this.renderer.setStyle(this.chip.nativeElement,"border-color",t)}else this.renderer.setStyle(this.chip.nativeElement,"background-color","transparent")},e.prototype.toArray=function(e){return void 0===e?[]:Object.keys(e).map((function(t){return{name:t,value:e[t]}}))},e.prototype.switchPlotState=function(e){return e.preventDefault(),this.setState(!this._node.selected),!1},e.prototype.setState=function(e){this._node&&this._node.gts&&(this.LOG.debug(["switchPlotState"],e,this._node.selected),this._node.selected!==e&&(this._node.selected=!!e,this.LOG.debug(["switchPlotState"],"emit"),this.warpViewSelectedGTS.emit(this._node)),this.colorizeChip())},e.prototype.identify=function(e,t){return e},e}();ue.decorators=[{type:t.Component,args:[{selector:"warpview-chip",template:'\x3c!--\n  ~  Copyright 2020  SenX S.A.S.\n  ~\n  ~  Licensed under the Apache License, Version 2.0 (the "License");\n  ~  you may not use this file except in compliance with the License.\n  ~  You may obtain a copy of the License at\n  ~\n  ~    http://www.apache.org/licenses/LICENSE-2.0\n  ~\n  ~  Unless required by applicable law or agreed to in writing, software\n  ~  distributed under the License is distributed on an "AS IS" BASIS,\n  ~  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  ~  See the License for the specific language governing permissions and\n  ~  limitations under the License.\n  ~\n  --\x3e\n\n<div>\n   <span (click)="switchPlotState($event)" *ngIf="_node && _node.gts && _node.gts.l">\n     <i class="normal" #chip></i>\n     <span class="gtsInfo">\n       <span class=\'gts-classname\'>&nbsp;{{_node.gts.c}}</span>\n       <span class=\'gts-separator\'>&#x007B; </span>\n       <span *ngFor="let label of toArray(_node.gts.l); index as index; last as last; trackBy:identify">\n         <span class=\'gts-labelname\'>{{label.name}}</span>\n         <span class=\'gts-separator\'>=</span>\n         <span class=\'gts-labelvalue\'>{{label.value}}</span>\n         <span [hidden]="last">, </span>\n       </span>\n       <span class="gts-separator"> &#x007D; </span>\n         <span class=\'gts-separator\'>&#x007B; </span>\n         <span *ngFor="let label of toArray(_node.gts.a); index as index; last as last; trackBy:identify">\n           <span class=\'gts-attrname\'>{{label.name}}</span>\n           <span class=\'gts-separator\'>=</span>\n           <span class=\'gts-attrvalue\'>{{label.value}}</span>\n           <span [hidden]="last">, </span>\n         </span>\n       <span class="gts-separator"> &#x007D;</span>\n       </span>\n   </span>\n</div>\n',encapsulation:t.ViewEncapsulation.ShadowDom,styles:['/*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */\n/*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */:root{--gts-attrname-font-color:#ed4a7b;--gts-attrvalue-font-color:#000;--gts-classname-font-color:#004eff;--gts-labelname-font-color:#19a979;--gts-labelvalue-font-color:#000;--gts-separator-font-color:#a0a0a0;--gts-stack-font-color:#000;--gts-tree-collapsed-icon:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA0UlEQVQ4T6WTUW7CQAxEPQdozxYb9Qb94Aj9gQSoVCp6lMr21doDZFCQiFCU3YDY//d2PeOFPHnwJC+zAlVdA/jp+/6YmZ+1S0qCPxF5HUAAO3fvSpKS4ENEvm6gfUS0c5JiBma2Ibm/QiQPmbmdSqohquoA7GqSxRaapmkBjBkAeHP336t0UWBmHcnb+VcR4XcJpjDJLjPHkS4tleqZubmNiDHU6gumDQDYuvvh7hpV9V9EXgaA5Ka2jbMjmNk7yZOIfEfE8eFVfuSDLda4JDsD3FNdEckTC0YAAAAASUVORK5CYII=);--gts-tree-expanded-icon:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA7klEQVQ4T82TMW7CQBBF/0g+QOpINEkVCmpaLoBm5COk5QYoaeAY3MDSei2LGu4QKakiBA1tCpTK8kS2sLVe2xSh8XSrnf9m/s4s4c6gO/UYGEBEXlT1bK396bFGIjIJguA7iqJLkVNbYOZXItoQ0QHAzBhz9CCFeAVgCeAjy7Jpmqa/NUBEEgDzktqGuOKKO47j+KsGhGH4lOf5HsDIg5ycyqVYVd+steuGheLAzM9EtPMgW1VdVGWJ6N0YU1gpozVGH+K+gy/uBHR1crXUqNzbQXXhduJ69sd7cxOZ+UFVH5Mk+exb+YGt8n9+5h8up1sReYC0WAAAAABJRU5ErkJggg==);--warp-slider-connect-color:#f90;--warp-slider-handle-bg-color:#fff;--warp-slider-handle-color:#004eff;--warp-slider-handle-shadow:inset 0 0 1px #fff,inset 0 1px 7px silver,0 3px 6px -3px #a0a0a0;--warp-view-annotationtooltip-font-color:#404040;--warp-view-annotationtooltip-value-font-color:#004eff;--warp-view-bar-color:#dc3545;--warp-view-chart-height:100%;--warp-view-chart-legend-bg:#fff;--warp-view-chart-legend-color:#404040;--warp-view-chart-width:100%;--warp-view-datagrid-cell-padding:5px;--warp-view-datagrid-even-bg-color:silver;--warp-view-datagrid-even-color:#000;--warp-view-datagrid-odd-bg-color:#fff;--warp-view-datagrid-odd-color:#404040;--warp-view-font-color:#000;--warp-view-map-margin:0;--warp-view-pagination-active-bg-color:#4caf50;--warp-view-pagination-active-border-color:#4caf50;--warp-view-pagination-active-color:#fff;--warp-view-pagination-bg-color:#fff;--warp-view-pagination-border-color:silver;--warp-view-pagination-disabled-color:silver;--warp-view-pagination-hover-bg-color:silver;--warp-view-pagination-hover-border-color:silver;--warp-view-pagination-hover-color:#000;--warp-view-plot-chart-height:100%;--warp-view-popup-bg-color:#fff;--warp-view-popup-body-bg-color:#fff;--warp-view-popup-body-color:#000;--warp-view-popup-border-color:rgba(0,0,0,0.2);--warp-view-popup-close-color:#404040;--warp-view-popup-header-bg-color:silver;--warp-view-popup-title-color:#404040;--warp-view-resize-handle-color:silver;--warp-view-resize-handle-height:10px;--warp-view-slider-pointer-size:65px;--warp-view-spinner-color:#f90;--warp-view-switch-handle-checked-color:radial-gradient(#fff 15%,#00cd00 100%);--warp-view-switch-handle-color:radial-gradient(#fff 15%,silver 100%);--warp-view-switch-height:30px;--warp-view-switch-inset-checked-color:#00cd00;--warp-view-switch-inset-color:silver;--warp-view-switch-radius:18px;--warp-view-switch-width:100px;--warp-view-tile-height:100%;--warp-view-tile-width:100%}.noData{color:var(--warp-view-chart-legend-color);position:relative;text-align:center;width:100%}\n\n/*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */.gts-classname{color:var(--gts-classname-font-color)}.gts-labelname{color:var(--gts-labelname-font-color)}.gts-attrname{color:var(--gts-attrname-font-color)}.gts-separator{color:var(--gts-separator-font-color)}.gts-labelvalue{color:var(--gts-labelvalue-font-color);font-style:italic}.gts-attrvalue{color:var(--gts-attrvalue-font-color);font-style:italic}:host .normal,:host div span{cursor:pointer}:host .normal{background-color:#bbb;border:2px solid #454545;border-radius:50%;display:inline-block;height:5px;margin-bottom:auto;margin-top:auto;vertical-align:middle;width:5px}']}]}],ue.ctorParameters=function(){return[{type:t.Renderer2}]},ue.propDecorators={chip:[{type:t.ViewChild,args:["chip"]}],node:[{type:t.Input,args:["node"]}],param:[{type:t.Input,args:["param"]}],options:[{type:t.Input,args:["options"]}],events:[{type:t.Input}],debug:[{type:t.Input,args:["debug"]}],hiddenData:[{type:t.Input,args:["hiddenData"]}],gtsFilter:[{type:t.Input,args:["gtsFilter"]}],warpViewSelectedGTS:[{type:t.Output,args:["warpViewSelectedGTS"]}]};var we=function(e){function t(i,a,n,o){var r=e.call(this,i,a,n,o)||this;return r.el=i,r.renderer=a,r.sizeService=n,r.ngZone=o,r.imageTitle="",r.parentWidth=-1,r.LOG=new Y(t,r._debug),r}return T(t,e),t.prototype.ngAfterViewInit=function(){this.LOG.debug(["ngAfterViewInit"],this._options),this.drawChart()},t.prototype.update=function(e,t){this.drawChart()},t.prototype.onResize=function(){var e=this;(this.el.nativeElement.parentElement.clientWidth!==this.parentWidth||this.parentWidth<=0)&&(this.parentWidth=this.el.nativeElement.parentElement.clientWidth,clearTimeout(this.resizeTimer),this.resizeTimer=setTimeout((function(){e.el.nativeElement.parentElement.clientWidth>0?(e.LOG.debug(["onResize"],e.el.nativeElement.parentElement.clientWidth),e.drawChart()):e.onResize()}),150))},t.prototype.drawChart=function(){if(this._data&&this._data.data&&0!==this._data.data.length){this.initChart(this.el),this.toDisplay=[];var e=this._data;if(this.LOG.debug(["drawChart","gts"],e),"string"==typeof e)try{e=JSON.parse(e)}catch(e){}e.data&&e.data.length>0&&z.isEmbeddedImage(e.data[0])?(this._options=Q.mergeDeep(this._options,e.globalParams||{}),this.toDisplay.push(e.data[0])):e.data&&z.isEmbeddedImage(e.data)&&this.toDisplay.push(e.data),this.LOG.debug(["drawChart","this.data","this.toDisplay"],this.data,this.toDisplay),this.loading=!1,this.chartDraw.emit()}},t.prototype.getStyle=function(){if(this.LOG.debug(["getStyle"],this._options),this._options){var e={"background-color":this._options.bgColor||"transparent",width:this.width,height:"auto"};return this._options.fontColor&&(e.color=this._options.fontColor),this.LOG.debug(["getStyle","style"],e),e}return{}},t.prototype.convert=function(e){return[]},t}(K);we.decorators=[{type:t.Component,args:[{selector:"warpview-image",template:'\x3c!--\n  ~  Copyright 2020  SenX S.A.S.\n  ~\n  ~  Licensed under the Apache License, Version 2.0 (the "License");\n  ~  you may not use this file except in compliance with the License.\n  ~  You may obtain a copy of the License at\n  ~\n  ~    http://www.apache.org/licenses/LICENSE-2.0\n  ~\n  ~  Unless required by applicable law or agreed to in writing, software\n  ~  distributed under the License is distributed on an "AS IS" BASIS,\n  ~  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  ~  See the License for the specific language governing permissions and\n  ~  limitations under the License.\n  ~\n  --\x3e\n\n<div>\n  <p class="noData" *ngIf="noData">No data to display</p>\n  <div class="chart-container" id="wrapper" *ngIf="toDisplay">\n    <div *ngFor="let img of toDisplay" [ngStyle]="getStyle()">\n      <img [src]="img" class="responsive" alt="Result"/>\n    </div>\n  </div>\n  <warpview-spinner *ngIf="!toDisplay" message="Parsing data"></warpview-spinner>\n</div>\n',encapsulation:t.ViewEncapsulation.ShadowDom,styles:['/*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */\n/*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */:root{--gts-attrname-font-color:#ed4a7b;--gts-attrvalue-font-color:#000;--gts-classname-font-color:#004eff;--gts-labelname-font-color:#19a979;--gts-labelvalue-font-color:#000;--gts-separator-font-color:#a0a0a0;--gts-stack-font-color:#000;--gts-tree-collapsed-icon:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA0UlEQVQ4T6WTUW7CQAxEPQdozxYb9Qb94Aj9gQSoVCp6lMr21doDZFCQiFCU3YDY//d2PeOFPHnwJC+zAlVdA/jp+/6YmZ+1S0qCPxF5HUAAO3fvSpKS4ENEvm6gfUS0c5JiBma2Ibm/QiQPmbmdSqohquoA7GqSxRaapmkBjBkAeHP336t0UWBmHcnb+VcR4XcJpjDJLjPHkS4tleqZubmNiDHU6gumDQDYuvvh7hpV9V9EXgaA5Ka2jbMjmNk7yZOIfEfE8eFVfuSDLda4JDsD3FNdEckTC0YAAAAASUVORK5CYII=);--gts-tree-expanded-icon:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA7klEQVQ4T82TMW7CQBBF/0g+QOpINEkVCmpaLoBm5COk5QYoaeAY3MDSei2LGu4QKakiBA1tCpTK8kS2sLVe2xSh8XSrnf9m/s4s4c6gO/UYGEBEXlT1bK396bFGIjIJguA7iqJLkVNbYOZXItoQ0QHAzBhz9CCFeAVgCeAjy7Jpmqa/NUBEEgDzktqGuOKKO47j+KsGhGH4lOf5HsDIg5ycyqVYVd+steuGheLAzM9EtPMgW1VdVGWJ6N0YU1gpozVGH+K+gy/uBHR1crXUqNzbQXXhduJ69sd7cxOZ+UFVH5Mk+exb+YGt8n9+5h8up1sReYC0WAAAAABJRU5ErkJggg==);--warp-slider-connect-color:#f90;--warp-slider-handle-bg-color:#fff;--warp-slider-handle-color:#004eff;--warp-slider-handle-shadow:inset 0 0 1px #fff,inset 0 1px 7px silver,0 3px 6px -3px #a0a0a0;--warp-view-annotationtooltip-font-color:#404040;--warp-view-annotationtooltip-value-font-color:#004eff;--warp-view-bar-color:#dc3545;--warp-view-chart-height:100%;--warp-view-chart-legend-bg:#fff;--warp-view-chart-legend-color:#404040;--warp-view-chart-width:100%;--warp-view-datagrid-cell-padding:5px;--warp-view-datagrid-even-bg-color:silver;--warp-view-datagrid-even-color:#000;--warp-view-datagrid-odd-bg-color:#fff;--warp-view-datagrid-odd-color:#404040;--warp-view-font-color:#000;--warp-view-map-margin:0;--warp-view-pagination-active-bg-color:#4caf50;--warp-view-pagination-active-border-color:#4caf50;--warp-view-pagination-active-color:#fff;--warp-view-pagination-bg-color:#fff;--warp-view-pagination-border-color:silver;--warp-view-pagination-disabled-color:silver;--warp-view-pagination-hover-bg-color:silver;--warp-view-pagination-hover-border-color:silver;--warp-view-pagination-hover-color:#000;--warp-view-plot-chart-height:100%;--warp-view-popup-bg-color:#fff;--warp-view-popup-body-bg-color:#fff;--warp-view-popup-body-color:#000;--warp-view-popup-border-color:rgba(0,0,0,0.2);--warp-view-popup-close-color:#404040;--warp-view-popup-header-bg-color:silver;--warp-view-popup-title-color:#404040;--warp-view-resize-handle-color:silver;--warp-view-resize-handle-height:10px;--warp-view-slider-pointer-size:65px;--warp-view-spinner-color:#f90;--warp-view-switch-handle-checked-color:radial-gradient(#fff 15%,#00cd00 100%);--warp-view-switch-handle-color:radial-gradient(#fff 15%,silver 100%);--warp-view-switch-height:30px;--warp-view-switch-inset-checked-color:#00cd00;--warp-view-switch-inset-color:silver;--warp-view-switch-radius:18px;--warp-view-switch-width:100px;--warp-view-tile-height:100%;--warp-view-tile-width:100%}.noData{color:var(--warp-view-chart-legend-color);position:relative;text-align:center;width:100%}:host div{height:var(--warp-view-chart-height);width:var(--warp-view-chart-width)}:host .chart-container{height:var(--warp-view-chart-height,100%);overflow:hidden;position:relative;width:var(--warp-view-chart-width,100%)}:host .chart-container div{display:block;height:99%!important;width:99%}:host .chart-container div .responsive{-o-object-fit:scale-down;height:99%;object-fit:scale-down;width:99%}']}]}],we.ctorParameters=function(){return[{type:t.ElementRef},{type:t.Renderer2},{type:W},{type:t.NgZone}]},we.propDecorators={imageTitle:[{type:t.Input,args:["imageTitle"]}],onResize:[{type:t.HostListener,args:["window:resize"]}]};var fe=function(){function e(){}return e.toLeafletMapPaths=function(t,i,a){for(var n=[],o=(t.gts||[]).length,r=function(o){var r=t.gts[o],s=(t.params||[])[o];if(s||(s={}),z.isGtsToPlotOnMap(r)&&0===(i||[]).filter((function(e){return e===r.id})).length){var p={};e.extractCommonParameters(p,s,o,a),p.path=e.gtsToPath(r),s.render&&(p.render=s.render),s.marker&&(p.marker=s.marker),p.line=!s.hasOwnProperty("line")||s.line,p.render=p.render||"dots","weightedDots"===p.render&&e.validateWeightedDotsPositionArray(p,s),"coloredWeightedDots"===p.render&&e.validateWeightedColoredDotsPositionArray(p,s),t.params&&t.params[o]&&t.params[o].key?p.key=t.params[o].key:p.key=z.serializeGtsMetadata(r),t.params&&t.params[o]&&t.params[o].color?p.color=t.params[o].color:p.color=M.getColor(o,a),n.push(p)}},s=0;s<o;s++)r(s);return n},e.gtsToPath=function(e){for(var t=[],i=(e.v||[]).length,a=0;a<i;a++){var n=e.v[a],o=n.length;o>=4&&t.push({ts:Math.floor(n[0]),lat:n[1],lon:n[2],val:n[o-1]})}return t},e.extractCommonParameters=function(t,i,a,n){i=i||{},t.key=i.key||"",t.color=i.color||M.getColor(a,n),t.borderColor=i.borderColor,t.properties=i.properties||{},void 0===i.baseRadius||isNaN(parseInt(i.baseRadius,10))||parseInt(i.baseRadius,10)<0?t.baseRadius=e.BASE_RADIUS:t.baseRadius=i.baseRadius},e.validateWeightedDotsPositionArray=function(t,i){if(void 0===i.minValue||void 0===i.maxValue)return e.LOG.error(["validateWeightedDotsPositionArray"],"When using 'weightedDots' or 'weightedColoredDots' rendering, 'maxValue' and 'minValue' parameters are compulsory"),void(t.render=void 0);if(t.maxValue=i.maxValue,t.minValue=i.minValue,"number"!=typeof t.minValue||"number"!=typeof t.maxValue||t.minValue>=t.maxValue)return e.LOG.error(["validateWeightedDotsPositionArray"],"When using 'weightedDots' or 'weightedColoredDots' rendering, 'maxValue' and 'minValue' must be numbers and 'maxValue' must be greater than 'minValue'"),void(t.render=void 0);if(!z.isPositionsArrayWithValues(t)&&!z.isPositionsArrayWithTwoValues(t))return e.LOG.error(["validateWeightedDotsPositionArray"],"When using 'weightedDots' or 'weightedColoredDots' rendering, positions must have an associated value"),void(t.render=void 0);void 0===i.numSteps||isNaN(parseInt(i.numSteps,10))||parseInt(i.numSteps,10)<0?t.numSteps=5:t.numSteps=i.numSteps;for(var a=(t.maxValue-t.minValue)/t.numSteps,n=[],o=0;o<t.numSteps-1;o++)n[o]=t.minValue+(o+1)*a;n[t.numSteps-1]=t.maxValue;var r=(t||[]).length;for(o=0;o<r;o++){var s=t[o],p=s[2];for(var l in s[4]=t.numSteps-1,n)if(p<=n[l]){s[4]=l;break}}return!0},e.toLeafletMapPositionArray=function(t,i,a){for(var n=[],o=(t.gts||[]).length,r=function(o){var r=t.gts[o];if(z.isPositionArray(r)&&0===(i||[]).filter((function(e){return e===r.id})).length){s.LOG.debug(["toLeafletMapPositionArray"],r,t.params?t.params[o]:"");var p=r,l=t.params&&t.params[o]||{};e.extractCommonParameters(p,l,o,a),p.render=l.render||"dots",p.maxValue=l.maxValue||0,p.minValue=l.minValue||0,p.line=!!l.hasOwnProperty("line")&&l.line,"weightedDots"===p.render&&e.validateWeightedDotsPositionArray(p,l),"coloredWeightedDots"===p.render&&e.validateWeightedColoredDotsPositionArray(p,l),"marker"===p.render&&(p.marker=l.marker),t.params&&t.params[o]&&t.params[o].color?p.color=t.params[o].color:p.color=M.getColor(o,a),s.LOG.debug(["toLeafletMapPositionArray","posArray"],p),n.push(p)}},s=this,p=0;p<o;p++)r(p);return n},e.validateWeightedColoredDotsPositionArray=function(t,i){if(e.validateWeightedDotsPositionArray(t,i)){if(!(i.minColor&&i.maxColor&&i.startColor&&i.endColor))return e.LOG.error(["validateWeightedColoredDotsPositionArray"],"When using 'weightedColoredDots' rendering, 'maxColorValue', 'minColorValue', 'startColor' and 'endColor' parameters are compulsory"),void(t.render=void 0);if(t.maxColorValue=i.maxColor,t.minColorValue=i.minColor,"number"!=typeof t.minColorValue||"number"!=typeof t.maxColorValue||t.minColorValue>=t.maxColorValue)return e.LOG.error(["validateWeightedColoredDotsPositionArray"],["When using weightedColoredDots' rendering, 'maxColorValue' and 'minColorValue' must be numbers and 'maxColorValue' must be greater than 'minColorValue'",{maxColorValue:t.maxColorValue,minColorValue:t.minColorValue}]),void(t.render=void 0);var a=/^#(?:[0-9a-f]{3}){1,2}$/i;if("string"!=typeof i.startColor||"string"!=typeof i.endColor||!a.test(i.startColor)||!a.test(i.endColor))return e.LOG.error(["validateWeightedColoredDotsPositionArray"],["When using weightedColoredDots' rendering, 'startColor' and 'endColor' parameters must be RGB colors in #rrggbb format",{startColor:i.startColor,endColor:i.endColor,tests:[typeof i.startColor,typeof i.endColor,a.test(i.startColor),a.test(i.endColor),a.test(i.startColor)]}]),void(t.render=void 0);t.startColor={r:parseInt(i.startColor.substring(1,3),16),g:parseInt(i.startColor.substring(3,5),16),b:parseInt(i.startColor.substring(5,7),16)},t.endColor={r:parseInt(i.endColor.substring(1,3),16),g:parseInt(i.endColor.substring(3,5),16),b:parseInt(i.endColor.substring(5,7),16)},i.numColorSteps?t.numColorSteps=i.numColorSteps:t.numColorSteps=5,t.colorGradient=M.hsvGradientFromRgbColors(t.startColor,t.endColor,t.numColorSteps);for(var n=(t.maxColorValue-t.minColorValue)/t.numColorSteps,o=[],r=0;r<t.numColorSteps;r++)o[r]=t.minColorValue+(r+1)*n;t.steps=o,t.positions.forEach((function(e){var i=e[3];e[5]=t.numColorSteps-1;for(var a=0;a<o.length-1;a++)if(i<o[a]){e[5]=a;break}}))}},e.getBoundsArray=function(e,t,i,a){var n,o=[];this.LOG.debug(["getBoundsArray","paths"],e),n=(e||[]).length;for(var r=0;r<n;r++)for(var s=e[r],p=(s.path||[]).length,l=0;l<p;l++){var h=s.path[l];o.push([h.lat,h.lon])}this.LOG.debug(["getBoundsArray","positionsData"],t),n=(t||[]).length;for(r=0;r<n;r++){var d=t[r];for(p=(d.positions||[]).length,l=0;l<p;l++){h=d.positions[l];o.push([h[0],h[1]])}}this.LOG.debug(["getBoundsArray","annotationsData"],i),n=(i||[]).length;for(r=0;r<n;r++){var c=i[r];for(p=(c.path||[]).length,l=0;l<p;l++){h=c.path[l];o.push([h.lat,h.lon])}}n=(a||[]).length;for(r=0;r<n;r++){var g=a[r];switch(g.geometry.type){case"MultiPolygon":g.geometry.coordinates.forEach((function(e){return e.forEach((function(e){return e.forEach((function(e){return o.push([e[1],e[0]])}))}))}));break;case"Polygon":g.geometry.coordinates.forEach((function(e){return e.forEach((function(e){return o.push([e[1],e[0]])}))}));break;case"LineString":g.geometry.coordinates.forEach((function(e){return o.push([e[1],e[0]])}));break;case"Point":o.push([g.geometry.coordinates[1],g.geometry.coordinates[0]])}}if(1===o.length)return o;var u=90,w=-180,f=-90,v=180;this.LOG.debug(["getBoundsArray"],o),n=(o||[]).length;for(r=0;r<n;r++){var m=o[r];m[0]>f&&(f=m[0]),m[0]<u&&(u=m[0]),m[1]>w&&(w=m[1]),m[1]<v&&(v=m[1])}return[[u,w],[f,v]]},e.pathDataToLeaflet=function(e){for(var t=[],i=e.length,a=0;a<i;a++)t.push([e[a].lat,e[a].lon]);return t},e.toGeoJSON=function(e){var t=["Point","LineString","Polygon","MultiPolygon"],i=[];return e.gts.forEach((function(e){e&&e.type&&"Feature"===e.type&&e.geometry&&e.geometry.type&&t.indexOf(e.geometry.type)>-1?i.push(e):e&&e.type&&t.indexOf(e.type)>-1&&i.push({type:"Feature",geometry:e})})),i},e.updatePositionArrayToLeaflet=function(e){for(var t=[],i=(e||[]).length,a=0;a<i;a++){var n=e[a];t.push([n[0],n[1]])}return t},e}();fe.BASE_RADIUS=2,fe.LOG=new Y(fe,!0),fe.mapTypes={NONE:void 0,DEFAULT:{link:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'},HOT:{link:"https://{s}.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png",attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, Tiles\n style by <a href="https://www.hotosm.org/" target="_blank">Humanitarian OpenStreetMap Team</a> hosted by\n <a href="https://openstreetmap.fr/" target="_blank">OpenStreetMap France</a>'},TOPO:{link:"https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png",attribution:'Map data: &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors,\n <a href="http://viewfinderpanoramas.org">SRTM</a> | Map style: &copy; <a href="https://opentopomap.org">OpenTopoMap</a>\n  (<a href="https://creativecommons.org/licenses/by-sa/3.0/">CC-BY-SA</a>)'},TOPO2:{link:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer/tile/{z}/{y}/{x}",attribution:"Tiles &copy; Esri &mdash; Esri, DeLorme, NAVTEQ, TomTom, Intermap, iPC, USGS, FAO, NPS, NRCAN,\n       GeoBase, Kadaster NL, Ordnance Survey, Esri Japan, METI, Esri China (Hong Kong), and the GIS User Community"},SURFER:{link:"https://maps.heigit.org/openmapsurfer/tiles/roads/webmercator/{z}/{x}/{y}.png",attribution:'Imagery from <a href="http://giscience.uni-hd.de/">GIScience Research Group @ University of\n Heidelberg</a> | Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'},HYDRA:{link:"https://{s}.tile.openstreetmap.se/hydda/full/{z}/{x}/{y}.png",attribution:'Tiles courtesy of <a href="http://openstreetmap.se/" target="_blank">OpenStreetMap Sweden</a>\n &mdash; Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'},HYDRA2:{link:"https://{s}.tile.openstreetmap.se/hydda/base/{z}/{x}/{y}.png",attribution:'Tiles courtesy of <a href="http://openstreetmap.se/" target="_blank">OpenStreetMap Sweden</a>\n &mdash; Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'},TONER:{link:"https://stamen-tiles-{s}.a.ssl.fastly.net/toner/{z}/{x}/{y}{r}.png",attribution:'Map tiles by <a href="http://stamen.com">Stamen Design</a>,\n <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> &mdash; Map data &copy;\n  <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',subdomains:"abcd"},TONER_LITE:{link:"https://stamen-tiles-{s}.a.ssl.fastly.net/toner-lite/{z}/{x}/{y}{r}.png",attribution:'Map tiles by <a href="http://stamen.com">Stamen Design</a>,\n <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> &mdash; Map data &copy;\n  <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',subdomains:"abcd"},TERRAIN:{link:"https://stamen-tiles-{s}.a.ssl.fastly.net/terrain/{z}/{x}/{y}{r}.png",attribution:'Map tiles by <a href="http://stamen.com">Stamen Design</a>,\n <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> &mdash; Map data &copy;\n <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',subdomains:"abcd"},ESRI:{link:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer/tile/{z}/{y}/{x}",attribution:"Tiles &copy; Esri &mdash; Source: Esri, DeLorme, NAVTEQ, USGS, Intermap, iPC, NRCAN, Esri Japan,\n METI, Esri China (Hong Kong), Esri (Thailand), TomTom, 2012"},SATELLITE:{link:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",attribution:"Tiles &copy; Esri &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN,\n IGP, UPR-EGP, and the GIS User Community"},OCEANS:{link:"https://server.arcgisonline.com/ArcGIS/rest/services/Ocean_Basemap/MapServer/tile/{z}/{y}/{x}",attribution:"Tiles &copy; Esri &mdash; Sources: GEBCO, NOAA, CHS, OSU, UNH, CSUMB, National Geographic, DeLorme, NAVTEQ, and Esri"},GRAY:{link:"https://server.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer/tile/{z}/{y}/{x}",attibs:""},GRAYSCALE:{link:"https://server.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer/tile/{z}/{y}/{x}",attribution:"Tiles &copy; Esri &mdash; Esri, DeLorme, NAVTEQ"},WATERCOLOR:{link:"https://stamen-tiles-{s}.a.ssl.fastly.net/watercolor/{z}/{x}/{y}.jpg",attribution:'Map tiles by <a href="http://stamen.com">Stamen Design</a>,\n <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> &mdash; Map data &copy;\n  <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',subdomains:"abcd"},CARTODB:{link:"https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png",attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy;\n <a href="https://carto.com/attributions">CartoDB</a>',subdomains:"abcd"},CARTODB_DARK:{link:"https://cartodb-basemaps-{s}.global.ssl.fastly.net/dark_all/{z}/{x}/{y}.png",attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy;\n <a href="https://carto.com/attributions">CartoDB</a>',subdomains:"abcd"}};var ve=function(){function e(i,a,n){var o=this;this.el=i,this.sizeService=a,this.renderer=n,this.heatData=[],this.responsive=!1,this.showLegend=!0,this.width=Q.DEFAULT_WIDTH,this.height=Q.DEFAULT_HEIGHT,this.change=new t.EventEmitter,this.chartDraw=new t.EventEmitter,this.divider=1,this._options=new P,this._firstDraw=!0,this._debug=!1,this.defOptions=Q.mergeDeep(new P,{map:{heatControls:!1,tiles:[],dotsLimit:1e3,animate:!1},timeMode:"date",showRangeSelector:!0,gridLineColor:"#8e8e8e",showDots:!1,timeZone:"UTC",timeUnit:"us",bounds:{}}),this.pointslayer=[],this.annotationsMarkers=[],this.positionArraysMarkers=[],this._iconAnchor=[20,38],this._popupAnchor=[0,-50],this.pathData=[],this.positionData=[],this.geoJson=[],this.firstDraw=!0,this.finalHeight=0,this.pathDataLayer=D.default.featureGroup(),this.positionDataLayer=D.default.featureGroup(),this.tileLayerGroup=D.default.featureGroup(),this.geoJsonLayer=D.default.featureGroup(),this.LOG=new Y(e,this.debug),this.LOG.debug(["constructor"],this.debug),this.sizeService.sizeChanged$.subscribe((function(){o._map&&o.resizeMe()}))}return Object.defineProperty(e.prototype,"debug",{get:function(){return this._debug},set:function(e){this._debug=e,this.LOG.setDebug(e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"options",{set:function(e){if(this.LOG.debug(["onOptions"],e),!O.default(this._options,e)){var t=e.map.startZoom!==this._options.map.startZoom||e.map.startLat!==this._options.map.startLat||e.map.startLong!==this._options.map.startLong;this._options=e,this.divider=z.getDivider(this._options.timeUnit),this.drawMap(t)}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"data",{get:function(){return this._data},set:function(e){this.LOG.debug(["onData"],e),this.pointslayer=[],this.annotationsMarkers=[],this.positionArraysMarkers=[],e&&(this._data=e,this.drawMap(!0))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hiddenData",{get:function(){return this._hiddenData},set:function(e){this._hiddenData=e,this.drawMap(!1)},enumerable:!1,configurable:!0}),e.prototype.ngOnInit=function(){this._options=Q.mergeDeep(this.defOptions,this._options)},e.prototype.resizeMe=function(){var e=this;this.LOG.debug(["resizeMe"],this.wrapper.nativeElement.parentElement.getBoundingClientRect());var t=this.wrapper.nativeElement.parentElement.getBoundingClientRect().height,i=this.wrapper.nativeElement.parentElement.getBoundingClientRect().width;this._options.map.showTimeSlider&&this.timeSlider&&this.timeSlider.nativeElement&&(t-=this.timeSlider.nativeElement.getBoundingClientRect().height),this._options.map.showTimeRange&&this.timeRangeSlider&&this.timeRangeSlider.nativeElement&&(t-=this.timeRangeSlider.nativeElement.getBoundingClientRect().height),this.finalHeight=t,this.renderer.setStyle(this.mapDiv.nativeElement,"width","calc("+i+"px - "+getComputedStyle(this.wrapper.nativeElement).getPropertyValue("--warp-view-map-margin").trim()+" - "+getComputedStyle(this.wrapper.nativeElement).getPropertyValue("--warp-view-map-margin").trim()+")"),this.renderer.setStyle(this.mapDiv.nativeElement,"height","calc("+t+"px - "+getComputedStyle(this.wrapper.nativeElement).getPropertyValue("--warp-view-map-margin").trim()+" - "+getComputedStyle(this.wrapper.nativeElement).getPropertyValue("--warp-view-map-margin").trim()+")"),this.width=i,this.height=t,this._map&&setTimeout((function(){return e._map.invalidateSize()}))},e.prototype.heatRadiusDidChange=function(e){this._heatLayer.setOptions({radius:e.detail.valueAsNumber}),this.LOG.debug(["heatRadiusDidChange"],e.detail.valueAsNumber)},e.prototype.heatBlurDidChange=function(e){this._heatLayer.setOptions({blur:e.detail.valueAsNumber}),this.LOG.debug(["heatBlurDidChange"],e.detail.valueAsNumber)},e.prototype.heatOpacityDidChange=function(e){var t=e.detail.valueAsNumber/100;this._heatLayer.setOptions({minOpacity:t}),this.LOG.debug(["heatOpacityDidChange"],e.detail.valueAsNumber)},e.prototype.drawMap=function(e){this.LOG.debug(["drawMap"],this._data),this._options=Q.mergeDeep(this.defOptions,this._options),this.timeStart=this._options.map.timeStart,L.default.tz.setDefault(this._options.timeZone);var t=this._data;if(t){if("string"==typeof t)try{t=JSON.parse(t)}catch(e){return}var i,a;z.isArray(t)&&t[0]&&(t[0]instanceof R||t[0].hasOwnProperty("data"))&&(t=t[0]),this._map&&this._map.invalidateSize(!0),this.LOG.debug(["drawMap","this._options"],Object.assign({},this._options)),t.data?(i=t.data,this._options=Q.mergeDeep(t.globalParams||{},this._options),this.timeSpan=this.timeSpan||this._options.map.timeSpan,a=t.params):(i=t,a=[]),this.divider=z.getDivider(this._options.timeUnit),this.LOG.debug(["drawMap"],i,this._options,t.globalParams);for(var n=z.flatDeep(i),o=n.length,r=0;r<o;r++){var s=n[r];z.isGts(s)&&(j.sort(s.v,(function(e,t){return e[0]-t[0]})),s.i=r,r++)}this.LOG.debug(["GTSLib.flatDeep(dataList)"],n),this.displayMap({gts:n,params:a},e)}},e.prototype.icon=function(e,t){void 0===t&&(t="");var i=""+e.slice(1),a=""!==t?t:"circle";return D.default.icon({iconUrl:"https://cdn.mapmarker.io/api/v1/font-awesome/v4/pin?icon=fa-"+a+"&iconSize=17&size=40&hoffset="+("circle"===a?0:-1)+"&voffset=-4&color=fff&background="+i,iconAnchor:this._iconAnchor,popupAnchor:this._popupAnchor})},e.prototype.patchMapTileGapBug=function(){var e=D.default.GridLayer.prototype._initTile;e.isPatched||(D.default.GridLayer.include({_initTile:function(t){e.call(this,t);var i=this.getTileSize();t.style.width=i.x+1.5+"px",t.style.height=i.y+1+"px"}}),D.default.GridLayer.prototype._initTile.isPatched=!0)},e.prototype.displayMap=function(e,t){var i=this;void 0===t&&(t=!1),this.pointslayer=[],this.LOG.debug(["drawMap"],e,this._options,this._hiddenData||[]),this.lowerTimeBound||(this.lowerTimeBound=this._options.map.timeSliderMin/this.divider,this.upperTimeBound=this._options.map.timeSliderMax/this.divider);var a=this.height||Q.DEFAULT_HEIGHT,n=this.width||Q.DEFAULT_WIDTH;if(this.responsive&&0===this.finalHeight?this.resizeMe():(this._options.map.showTimeSlider&&this.timeSlider&&this.timeSlider.nativeElement&&(a-=this.timeSlider.nativeElement.getBoundingClientRect().height),this._options.map.showTimeRange&&this.timeRangeSlider&&this.timeRangeSlider.nativeElement&&(a-=this.timeRangeSlider.nativeElement.getBoundingClientRect().height)),this.width=n,this.height=a,0!==e.gts.length){if(this.pathData=fe.toLeafletMapPaths(e,this._hiddenData||[],this._options.scheme)||[],this.LOG.debug(["displayMap"],"this.pathData",this.pathData),this.positionData=fe.toLeafletMapPositionArray(e,this._hiddenData||[],this._options.scheme)||[],this.LOG.debug(["displayMap"],"this.positionData",this.positionData),this.geoJson=fe.toGeoJSON(e),this.LOG.debug(["displayMap"],"this.geoJson",this.geoJson),"NONE"!==this._options.map.mapType){var o=fe.mapTypes[this._options.map.mapType||"DEFAULT"];this.LOG.debug(["displayMap"],"map",o);var r={maxZoom:24,maxNativeZoom:19};o.attribution&&(r.attribution=o.attribution),o.subdomains&&(r.subdomains=o.subdomains),this.tilesLayer=D.default.tileLayer(o.link,r)}this._map?(this.LOG.debug(["displayMap"],"map exists"),this.pathDataLayer.clearLayers(),this.positionDataLayer.clearLayers(),this.geoJsonLayer.clearLayers(),this.tileLayerGroup.clearLayers()):(this.LOG.debug(["displayMap"],"build map"),this._map=D.default.map(this.mapDiv.nativeElement,{preferCanvas:!0,layers:[this.tileLayerGroup,this.geoJsonLayer,this.pathDataLayer,this.positionDataLayer],zoomAnimation:!0,maxZoom:24}),this.geoJsonLayer.bringToBack(),this.tilesLayer.bringToBack(),this._map.on("load",(function(){return i.LOG.debug(["displayMap","load"],i._map.getCenter().lng,i.currentLong,i._map.getZoom())})),this._map.on("zoomend",(function(){i.firstDraw||(i.currentZoom=i._map.getZoom())})),this._map.on("moveend",(function(){i.firstDraw||(i.currentLat=i._map.getCenter().lat,i.currentLong=i._map.getCenter().lng)}))),this.tilesLayer.addTo(this.tileLayerGroup),this.LOG.debug(["displayMap"],"build map",this.tilesLayer);for(var s=(this.pathData||[]).length,p=0;p<s;p++){var l=this.pathData[p];l&&this.updateGtsPath(l)}var h=(this.positionData||[]).length;for(p=0;p<h;p++)this.updatePositionArray(this.positionData[p]);(this._options.map.tiles||[]).forEach((function(e){i.LOG.debug(["displayMap"],e),i._options.map.showTimeRange?i.tileLayerGroup.addLayer(D.default.tileLayer(e.replace("{start}",L.default(i.timeStart).toISOString()).replace("{end}",L.default(i.timeEnd).toISOString()),{subdomains:"abcd",maxNativeZoom:19,maxZoom:40})):i.tileLayerGroup.addLayer(D.default.tileLayer(e,{subdomains:"abcd",maxNativeZoom:19,maxZoom:40}))})),this.LOG.debug(["displayMap","geoJson"],this.geoJson);var d=(this.geoJson||[]).length,c=function(t){var a=g.geoJson[t],n=M.getColor(t,g._options.scheme),o={style:function(){return{color:e.params&&e.params[t]&&e.params[t].color||n,fillColor:e.params&&e.params[t]?M.transparentize(e.params[t].fillColor||n):M.transparentize(n)}}};"Point"===a.geometry.type&&(o.pointToLayer=function(a,o){return D.default.marker(o,{icon:i.icon(n,e.params&&e.params[t]?e.params[t].marker:"circle"),opacity:1})});var r="",s=D.default.geoJSON(a,o);a.properties&&(Object.keys(a.properties).forEach((function(e){return r+="<b>"+e+"</b>: "+a.properties[e]+"<br />"})),s.bindPopup(r)),s.addTo(g.geoJsonLayer)},g=this;for(p=0;p<d;p++)c(p);if(this.pathData.length>0||this.positionData.length>0||this.geoJson.length>0){var u=D.default.featureGroup([this.geoJsonLayer,this.positionDataLayer,this.pathDataLayer]);this.LOG.debug(["displayMap","setView"],"fitBounds",u.getBounds()),this.LOG.debug(["displayMap","setView"],{lat:this.currentLat,lng:this.currentLong},{lat:this._options.map.startLat,lng:this._options.map.startLong}),this.bounds=u.getBounds(),setTimeout((function(){i.bounds&&i.bounds.isValid()?((i.currentLat||i._options.map.startLat)&&(i.currentLong||i._options.map.startLong)?(i.LOG.debug(["displayMap","setView"],"fitBounds","already have bounds"),i._map.setView({lat:i.currentLat||i._options.map.startLat||0,lng:i.currentLong||i._options.map.startLong||0},i.currentZoom||i._options.map.startZoom||10,{animate:!1,duration:500})):(i.LOG.debug(["displayMap","setView"],"fitBounds","this.bounds",i.bounds),i._map.fitBounds(i.bounds,{padding:[1,1],animate:!1,duration:0})),i.currentLat=i._map.getCenter().lat,i.currentLong=i._map.getCenter().lng):(i.LOG.debug(["displayMap","setView"],"invalid bounds",{lat:i.currentLat,lng:i.currentLong}),i._map.setView({lat:i.currentLat||i._options.map.startLat||0,lng:i.currentLong||i._options.map.startLong||0},i.currentZoom||i._options.map.startZoom||10,{animate:!1,duration:500}))}),10)}else this.LOG.debug(["displayMap","lost"],"lost",this.currentZoom,this._options.map.startZoom),this._map.setView([this.currentLat||this._options.map.startLat||0,this.currentLong||this._options.map.startLong||0],this.currentZoom||this._options.map.startZoom||2,{animate:!1,duration:0});this.heatData&&this.heatData.length>0&&(this._heatLayer=D.default.heatLayer(this.heatData,{radius:this._options.map.heatRadius,blur:this._options.map.heatBlur,minOpacity:this._options.map.heatOpacity}),this._heatLayer.addTo(this._map)),this.firstDraw=!1,this.resizeMe(),this.patchMapTileGapBug(),this.chartDraw.emit(!0)}},e.prototype.getGTSDots=function(e){var t,i,a=[];switch(e.render){case"marker":t=this.icon(e.color,e.marker),i=(e.path||[]).length;for(var n=0;n<i;n++){var o=e.path[n],r=D.default.marker(o,{icon:t,opacity:1});this.addPopup(e,o.val,o.ts,r),a.push(r)}break;case"weightedDots":i=(e.path||[]).length;for(n=0;n<i;n++){var s=e.path[n];if(0===(this._hiddenData||[]).filter((function(t){return t===e.key})).length){var p=parseInt(s.val,10);isNaN(p)&&(p=0);var l=50*p/((e.maxValue||1)-(e.minValue||0));r=D.default.circleMarker(s,{radius:0===l?1:l,color:e.borderColor||"transparent",fillColor:e.color,fillOpacity:.5,weight:1});this.addPopup(e,s.val,s.ts,r),a.push(r)}}break;case"dots":default:i=(e.path||[]).length;for(n=0;n<i;n++){o=e.path[n],r=D.default.circleMarker(o,{radius:e.baseRadius||fe.BASE_RADIUS,color:e.color,fillColor:e.color,fillOpacity:1});this.addPopup(e,o.val,o.ts,r),a.push(r)}}return a},e.prototype.updateGtsPath=function(e){var t=fe.pathDataToLeaflet(e.path),i=D.default.featureGroup();(t||[]).length>1&&e.line&&"dots"===e.render&&(this._options.map.animate?i.addLayer(f.antPath(t||[],{delay:800,dashArray:[10,100],weight:5,color:M.transparentize(e.color,.5),pulseColor:e.color,paused:!1,reverse:!1,hardwareAccelerated:!0,hardwareAcceleration:!0})):i.addLayer(D.default.polyline(t||[],{color:e.color,opacity:.5})));for(var a=this.getGTSDots(e),n=(a||[]).length,o=0;o<n;o++)i.addLayer(a[o]);this.pathDataLayer.addLayer(i)},e.prototype.addPopup=function(e,t,i,a){if(e){var n=void 0;(i&&!this._options.timeMode||"timestamp"!==this._options.timeMode)&&(n=(z.toISOString(i,this.divider,this._options.timeZone)||"").replace("Z","UTC"===this._options.timeZone?"Z":""));var o="";o="<p>"+n+"</p><p><b>"+e.key+"</b>: "+(t||"na")+"</p>",Object.keys(e.properties||[]).forEach((function(t){return o+="<b>"+t+"</b>: "+e.properties[t]+"<br />"})),a.bindPopup(o)}},e.prototype.updatePositionArray=function(e){var t=D.default.featureGroup();if(0===(this._hiddenData||[]).filter((function(t){return t===e.key})).length){var i=fe.updatePositionArrayToLeaflet(e.positions);(e.positions||[]).length>1&&e.line&&(this._options.map.animate?t.addLayer(f.antPath(i||[],{delay:800,dashArray:[10,100],weight:5,color:M.transparentize(e.color,.5),pulseColor:e.color,paused:!1,reverse:!1,hardwareAccelerated:!0,hardwareAcceleration:!0})):t.addLayer(D.default.polyline(i||[],{color:e.color,opacity:.5})));var a=void 0,n=void 0,o=void 0,r=void 0;switch(this.LOG.debug(["updatePositionArray"],e),e.render){case"marker":a=this.icon(e.color,e.marker),r=(e.positions||[]).length;for(var s=0;s<r;s++){var p=e.positions[s],l=D.default.marker({lat:p[0],lng:p[1]},{icon:a,opacity:1});this.addPopup(e,p[2],void 0,l),t.addLayer(l)}this.LOG.debug(["updatePositionArray","build marker"],a);break;case"coloredWeightedDots":this.LOG.debug(["updatePositionArray","coloredWeightedDots"],e),n=[],o=[];for(var h=0;h<e.numColorSteps;h++)n[h]=0,o[h]=0;r=(e.positions||[]).length;for(s=0;s<r;s++){p=e.positions[s];var d=50*(parseInt(p[2],10)-(e.minValue||0))/(e.maxValue||50);this.LOG.debug(["updatePositionArray","coloredWeightedDots","radius"],e.baseRadius*p[4]);l=D.default.circleMarker({lat:p[0],lng:p[1]},{radius:d,color:e.borderColor||e.color,fillColor:M.rgb2hex(e.colorGradient[p[5]].r,e.colorGradient[p[5]].g,e.colorGradient[p[5]].b),fillOpacity:.3});this.addPopup(e,p[2],void 0,l),t.addLayer(l)}break;case"weightedDots":r=(e.positions||[]).length;for(s=0;s<r;s++){p=e.positions[s],d=50*(parseInt(p[2],10)-(e.minValue||0))/(e.maxValue||50),l=D.default.circleMarker({lat:p[0],lng:p[1]},{radius:d,color:e.borderColor||e.color,fillColor:e.color,weight:2,fillOpacity:.3});this.addPopup(e,p[2],void 0,l),t.addLayer(l)}break;case"dots":default:r=(e.positions||[]).length;for(s=0;s<r;s++){p=e.positions[s],l=D.default.circleMarker({lat:p[0],lng:p[1]},{radius:e.baseRadius||fe.BASE_RADIUS,color:e.borderColor||e.color,fillColor:e.color,weight:2,fillOpacity:.7});this.addPopup(e,p[2]||"na",void 0,l),t.addLayer(l)}}}this.positionDataLayer.addLayer(t)},e.prototype.resize=function(){var e=this;return new Promise((function(t){e.resizeMe(),t(!0)}))},e.prototype.onRangeSliderChange=function(e){this.LOG.debug(["onRangeSliderChange"],e),this.timeStart=e.value||L.default().valueOf(),this.timeEnd=e.highValue||L.default().valueOf(),this.drawMap(!0)},e.prototype.onRangeSliderWindowChange=function(e){this.LOG.debug(["onRangeSliderWindowChange"],e),this.lowerTimeBound===e.min&&this.upperTimeBound===e.max||(this.lowerTimeBound=e.min,this.upperTimeBound=e.max)},e.prototype.onSliderChange=function(e){this.LOG.debug(["onSliderChange"],e,L.default(e.value).toISOString()),this._firstDraw=!1,this.timeEnd!==e.value&&(this.timeSpan=this.timeSpan||this._options.map.timeSpan,this.timeEnd=e.value||L.default().valueOf(),this.timeStart=(e.value||L.default().valueOf())-this.timeSpan/this.divider,this.LOG.debug(["onSliderChange"],L.default(this.timeStart).toISOString(),L.default(this.timeEnd).toISOString()),this.change.emit(this.timeStart),this.drawMap(!0))},e.prototype.updateTimeSpan=function(e){this.LOG.debug(["updateTimeSpan"],e.target.value),this.timeSpan!==e.target.value&&(this.timeSpan=e.target.value,this.timeStart=(this.timeEnd||L.default().valueOf())-this.timeSpan/this.divider,this.drawMap(!0))},e}();ve.decorators=[{type:t.Component,args:[{selector:"warpview-map",template:'\x3c!--\n  ~  Copyright 2020  SenX S.A.S.\n  ~\n  ~  Licensed under the Apache License, Version 2.0 (the "License");\n  ~  you may not use this file except in compliance with the License.\n  ~  You may obtain a copy of the License at\n  ~\n  ~    http://www.apache.org/licenses/LICENSE-2.0\n  ~\n  ~  Unless required by applicable law or agreed to in writing, software\n  ~  distributed under the License is distributed on an "AS IS" BASIS,\n  ~  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  ~  See the License for the specific language governing permissions and\n  ~  limitations under the License.\n  ~\n  --\x3e\n\n<div class="wrapper" #wrapper (resized)="resizeMe()">\n  <div class="map-container">\n    <div #mapDiv></div>\n    <div *ngIf="_options.map.showTimeSlider && !_options.map.showTimeRange" #timeSlider>\n      <warpview-slider\n        [min]="_options.map.timeSliderMin / divider" [max]="_options.map.timeSliderMax / divider"\n        [value]="minTimeValue / divider"\n        [step]="_options.map.timeSliderStep" [mode]="_options.map.timeSliderMode"\n        (change)="onSliderChange($event)"\n        [debug]="debug"\n      ></warpview-slider>\n    </div>\n    <div *ngIf="_options.map.showTimeSlider && _options.map.showTimeRange" #timeRangeSlider>\n      \x3c!--    <warpview-range-slider *ngIf="!_options.map.timeSpan && lowerTimeBound"\n                                  [min]="lowerTimeBound" [max]="upperTimeBound"\n                                  [minValue]="minTimeValue / divider"\n                                  [maxValue]="maxTimeValue / divider"\n                                  [step]="_options.map.timeSliderStep"\n                                  [mode]="_options.map.timeSliderMode"\n                                  [debug]="_debug"\n                                  (change)="onRangeSliderChange($event)"\n           ></warpview-range-slider>--\x3e\n\n      <warpview-range-slider\n        [min]="(_options.map.timeSliderMin / divider)" [max]="(_options.map.timeSliderMax / divider)"\n        [minValue]="minTimeValue / divider"\n        [maxValue]="maxTimeValue / divider"\n        [mode]="_options.map.timeSliderMode"\n        [debug]="debug"\n        (change)="onRangeSliderWindowChange($event)"\n      ></warpview-range-slider>\n      <warpview-slider *ngIf="_options.map.timeSpan && lowerTimeBound"\n                       [min]="lowerTimeBound" [max]="upperTimeBound"\n                       [step]="(this.timeSpan || this._options.map.timeSpan) / divider"\n                       [mode]="_options.map.timeSliderMode"\n                       [debug]="debug"\n                       (change)="onSliderChange($event)"\n      ></warpview-slider>\n      <div *ngIf="_options.map?.timeSpan">\n        <label for="timeSpan">Timespan: </label>\n        <select id="timeSpan" (change)="updateTimeSpan($event)">\n          <option *ngFor="let ts of _options.map.timeSpanList" [value]="ts.value">{{ts.label}}</option>\n        </select>\n      </div>\n    </div>\n    <warpview-heatmap-sliders\n      *ngIf="_options.map.heatControls"\n      (heatRadiusDidChange)="heatRadiusDidChange($event)"\n      (heatBlurDidChange)="heatBlurDidChange($event)"\n      (heatOpacityDidChange)="heatOpacityDidChange($event)"\n    ></warpview-heatmap-sliders>\n  </div>\n\n</div>\n',encapsulation:t.ViewEncapsulation.None,styles:['/*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */\n/*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */@import url(/home/xavier/workspace/warp-view/node_modules/leaflet/dist/leaflet.css);@import url(/home/xavier/workspace/warp-view/node_modules/leaflet.markercluster/dist/MarkerCluster.css);@import url(/home/xavier/workspace/warp-view/node_modules/leaflet.markercluster/dist/MarkerCluster.Default.css);:root{--gts-attrname-font-color:#ed4a7b;--gts-attrvalue-font-color:#000;--gts-classname-font-color:#004eff;--gts-labelname-font-color:#19a979;--gts-labelvalue-font-color:#000;--gts-separator-font-color:#a0a0a0;--gts-stack-font-color:#000;--gts-tree-collapsed-icon:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA0UlEQVQ4T6WTUW7CQAxEPQdozxYb9Qb94Aj9gQSoVCp6lMr21doDZFCQiFCU3YDY//d2PeOFPHnwJC+zAlVdA/jp+/6YmZ+1S0qCPxF5HUAAO3fvSpKS4ENEvm6gfUS0c5JiBma2Ibm/QiQPmbmdSqohquoA7GqSxRaapmkBjBkAeHP336t0UWBmHcnb+VcR4XcJpjDJLjPHkS4tleqZubmNiDHU6gumDQDYuvvh7hpV9V9EXgaA5Ka2jbMjmNk7yZOIfEfE8eFVfuSDLda4JDsD3FNdEckTC0YAAAAASUVORK5CYII=);--gts-tree-expanded-icon:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA7klEQVQ4T82TMW7CQBBF/0g+QOpINEkVCmpaLoBm5COk5QYoaeAY3MDSei2LGu4QKakiBA1tCpTK8kS2sLVe2xSh8XSrnf9m/s4s4c6gO/UYGEBEXlT1bK396bFGIjIJguA7iqJLkVNbYOZXItoQ0QHAzBhz9CCFeAVgCeAjy7Jpmqa/NUBEEgDzktqGuOKKO47j+KsGhGH4lOf5HsDIg5ycyqVYVd+steuGheLAzM9EtPMgW1VdVGWJ6N0YU1gpozVGH+K+gy/uBHR1crXUqNzbQXXhduJ69sd7cxOZ+UFVH5Mk+exb+YGt8n9+5h8up1sReYC0WAAAAABJRU5ErkJggg==);--warp-slider-connect-color:#f90;--warp-slider-handle-bg-color:#fff;--warp-slider-handle-color:#004eff;--warp-slider-handle-shadow:inset 0 0 1px #fff,inset 0 1px 7px silver,0 3px 6px -3px #a0a0a0;--warp-view-annotationtooltip-font-color:#404040;--warp-view-annotationtooltip-value-font-color:#004eff;--warp-view-bar-color:#dc3545;--warp-view-chart-height:100%;--warp-view-chart-legend-bg:#fff;--warp-view-chart-legend-color:#404040;--warp-view-chart-width:100%;--warp-view-datagrid-cell-padding:5px;--warp-view-datagrid-even-bg-color:silver;--warp-view-datagrid-even-color:#000;--warp-view-datagrid-odd-bg-color:#fff;--warp-view-datagrid-odd-color:#404040;--warp-view-font-color:#000;--warp-view-map-margin:0;--warp-view-pagination-active-bg-color:#4caf50;--warp-view-pagination-active-border-color:#4caf50;--warp-view-pagination-active-color:#fff;--warp-view-pagination-bg-color:#fff;--warp-view-pagination-border-color:silver;--warp-view-pagination-disabled-color:silver;--warp-view-pagination-hover-bg-color:silver;--warp-view-pagination-hover-border-color:silver;--warp-view-pagination-hover-color:#000;--warp-view-plot-chart-height:100%;--warp-view-popup-bg-color:#fff;--warp-view-popup-body-bg-color:#fff;--warp-view-popup-body-color:#000;--warp-view-popup-border-color:rgba(0,0,0,0.2);--warp-view-popup-close-color:#404040;--warp-view-popup-header-bg-color:silver;--warp-view-popup-title-color:#404040;--warp-view-resize-handle-color:silver;--warp-view-resize-handle-height:10px;--warp-view-slider-pointer-size:65px;--warp-view-spinner-color:#f90;--warp-view-switch-handle-checked-color:radial-gradient(#fff 15%,#00cd00 100%);--warp-view-switch-handle-color:radial-gradient(#fff 15%,silver 100%);--warp-view-switch-height:30px;--warp-view-switch-inset-checked-color:#00cd00;--warp-view-switch-inset-color:silver;--warp-view-switch-radius:18px;--warp-view-switch-width:100px;--warp-view-tile-height:100%;--warp-view-tile-width:100%}.noData{color:var(--warp-view-chart-legend-color);position:relative;text-align:center;width:100%}:host,warp-view-map,warpview-map{height:100%;min-height:100px;width:100%}:host .status,warp-view-map .status,warpview-map .status{bottom:0}:host div.wrapper,warp-view-map div.wrapper,warpview-map div.wrapper{height:100%;min-height:100px;overflow:hidden;padding:var(--warp-view-map-margin);width:100%}:host div.wrapper div.leaflet-container,:host div.wrapper div.map-container,warp-view-map div.wrapper div.leaflet-container,warp-view-map div.wrapper div.map-container,warpview-map div.wrapper div.leaflet-container,warpview-map div.wrapper div.map-container{height:100%;min-height:100px;min-width:100%;overflow:hidden;position:relative;width:100%}:host div.wrapper .leaflet-container,warp-view-map div.wrapper .leaflet-container,warpview-map div.wrapper .leaflet-container{height:100%;min-height:100%;min-width:100%;width:100%}']}]}],ve.ctorParameters=function(){return[{type:t.ElementRef},{type:W},{type:t.Renderer2}]},ve.propDecorators={mapDiv:[{type:t.ViewChild,args:["mapDiv",{static:!0}]}],wrapper:[{type:t.ViewChild,args:["wrapper",{static:!0}]}],timeSlider:[{type:t.ViewChild,args:["timeSlider"]}],timeRangeSlider:[{type:t.ViewChild,args:["timeRangeSlider"]}],heatData:[{type:t.Input,args:["heatData"]}],responsive:[{type:t.Input,args:["responsive"]}],showLegend:[{type:t.Input,args:["showLegend"]}],width:[{type:t.Input,args:["width"]}],height:[{type:t.Input,args:["height"]}],debug:[{type:t.Input,args:["debug"]}],options:[{type:t.Input,args:["options"]}],data:[{type:t.Input,args:["data"]}],hiddenData:[{type:t.Input,args:["hiddenData"]}],change:[{type:t.Output,args:["change"]}],chartDraw:[{type:t.Output,args:["chartDraw"]}]};var me=function(){function e(){this.heatRadiusDidChange=new t.EventEmitter,this.heatBlurDidChange=new t.EventEmitter,this.heatOpacityDidChange=new t.EventEmitter}return e.prototype.radiusChanged=function(e){this.heatRadiusDidChange.emit(e)},e.prototype.blurChanged=function(e){this.heatBlurDidChange.emit(e)},e.prototype.opacityChanged=function(e){this.heatOpacityDidChange.emit(e)},e}();me.decorators=[{type:t.Component,args:[{selector:"warpview-heatmap-sliders",template:'\x3c!--\n  ~  Copyright 2020  SenX S.A.S.\n  ~\n  ~  Licensed under the Apache License, Version 2.0 (the "License");\n  ~  you may not use this file except in compliance with the License.\n  ~  You may obtain a copy of the License at\n  ~\n  ~    http://www.apache.org/licenses/LICENSE-2.0\n  ~\n  ~  Unless required by applicable law or agreed to in writing, software\n  ~  distributed under the License is distributed on an "AS IS" BASIS,\n  ~  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  ~  See the License for the specific language governing permissions and\n  ~  limitations under the License.\n  ~\n  --\x3e\n\n<div>\n  <div class="container">\n    <div class="options">\n      <label for="radius">Radius </label>\n      <input type="number" id="radius" value="25" min="10" max="50" (click)="radiusChanged($event.target)"/>\n      <br/>\n      <label for="blur">Blur </label>\n      <input type="number" id="blur" value="15" min="10" max="50" (click)="blurChanged($event.target)"/>\n      <br/>\n      <label for="opacity">Opacity </label>\n      <input type="number" id="opacity" value="50" min="10" max="100" (click)="opacityChanged($event.target)"/>\n    </div>\n  </div>\n</div>\n',encapsulation:t.ViewEncapsulation.ShadowDom,styles:['/*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */\n/*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */:root{--gts-attrname-font-color:#ed4a7b;--gts-attrvalue-font-color:#000;--gts-classname-font-color:#004eff;--gts-labelname-font-color:#19a979;--gts-labelvalue-font-color:#000;--gts-separator-font-color:#a0a0a0;--gts-stack-font-color:#000;--gts-tree-collapsed-icon:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA0UlEQVQ4T6WTUW7CQAxEPQdozxYb9Qb94Aj9gQSoVCp6lMr21doDZFCQiFCU3YDY//d2PeOFPHnwJC+zAlVdA/jp+/6YmZ+1S0qCPxF5HUAAO3fvSpKS4ENEvm6gfUS0c5JiBma2Ibm/QiQPmbmdSqohquoA7GqSxRaapmkBjBkAeHP336t0UWBmHcnb+VcR4XcJpjDJLjPHkS4tleqZubmNiDHU6gumDQDYuvvh7hpV9V9EXgaA5Ka2jbMjmNk7yZOIfEfE8eFVfuSDLda4JDsD3FNdEckTC0YAAAAASUVORK5CYII=);--gts-tree-expanded-icon:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA7klEQVQ4T82TMW7CQBBF/0g+QOpINEkVCmpaLoBm5COk5QYoaeAY3MDSei2LGu4QKakiBA1tCpTK8kS2sLVe2xSh8XSrnf9m/s4s4c6gO/UYGEBEXlT1bK396bFGIjIJguA7iqJLkVNbYOZXItoQ0QHAzBhz9CCFeAVgCeAjy7Jpmqa/NUBEEgDzktqGuOKKO47j+KsGhGH4lOf5HsDIg5ycyqVYVd+steuGheLAzM9EtPMgW1VdVGWJ6N0YU1gpozVGH+K+gy/uBHR1crXUqNzbQXXhduJ69sd7cxOZ+UFVH5Mk+exb+YGt8n9+5h8up1sReYC0WAAAAABJRU5ErkJggg==);--warp-slider-connect-color:#f90;--warp-slider-handle-bg-color:#fff;--warp-slider-handle-color:#004eff;--warp-slider-handle-shadow:inset 0 0 1px #fff,inset 0 1px 7px silver,0 3px 6px -3px #a0a0a0;--warp-view-annotationtooltip-font-color:#404040;--warp-view-annotationtooltip-value-font-color:#004eff;--warp-view-bar-color:#dc3545;--warp-view-chart-height:100%;--warp-view-chart-legend-bg:#fff;--warp-view-chart-legend-color:#404040;--warp-view-chart-width:100%;--warp-view-datagrid-cell-padding:5px;--warp-view-datagrid-even-bg-color:silver;--warp-view-datagrid-even-color:#000;--warp-view-datagrid-odd-bg-color:#fff;--warp-view-datagrid-odd-color:#404040;--warp-view-font-color:#000;--warp-view-map-margin:0;--warp-view-pagination-active-bg-color:#4caf50;--warp-view-pagination-active-border-color:#4caf50;--warp-view-pagination-active-color:#fff;--warp-view-pagination-bg-color:#fff;--warp-view-pagination-border-color:silver;--warp-view-pagination-disabled-color:silver;--warp-view-pagination-hover-bg-color:silver;--warp-view-pagination-hover-border-color:silver;--warp-view-pagination-hover-color:#000;--warp-view-plot-chart-height:100%;--warp-view-popup-bg-color:#fff;--warp-view-popup-body-bg-color:#fff;--warp-view-popup-body-color:#000;--warp-view-popup-border-color:rgba(0,0,0,0.2);--warp-view-popup-close-color:#404040;--warp-view-popup-header-bg-color:silver;--warp-view-popup-title-color:#404040;--warp-view-resize-handle-color:silver;--warp-view-resize-handle-height:10px;--warp-view-slider-pointer-size:65px;--warp-view-spinner-color:#f90;--warp-view-switch-handle-checked-color:radial-gradient(#fff 15%,#00cd00 100%);--warp-view-switch-handle-color:radial-gradient(#fff 15%,silver 100%);--warp-view-switch-height:30px;--warp-view-switch-inset-checked-color:#00cd00;--warp-view-switch-inset-color:silver;--warp-view-switch-radius:18px;--warp-view-switch-width:100px;--warp-view-tile-height:100%;--warp-view-tile-width:100%}.noData{color:var(--warp-view-chart-legend-color);position:relative;text-align:center;width:100%}']}]}],me.propDecorators={radiusValue:[{type:t.Input,args:["radiusValue"]}],minRadiusValue:[{type:t.Input,args:["minRadiusValue"]}],maxRadiusValue:[{type:t.Input,args:["maxRadiusValue"]}],blurValue:[{type:t.Input,args:["blurValue"]}],minBlurValue:[{type:t.Input,args:["minBlurValue"]}],maxBlurValue:[{type:t.Input,args:["maxBlurValue"]}],heatRadiusDidChange:[{type:t.Output,args:["heatRadiusDidChange"]}],heatBlurDidChange:[{type:t.Output,args:["heatBlurDidChange"]}],heatOpacityDidChange:[{type:t.Output,args:["heatOpacityDidChange"]}]};var be=function(e){function i(a,n,o,r){var s=e.call(this,a,n,o,r)||this;return s.el=a,s.renderer=n,s.sizeService=o,s.ngZone=r,s.chartDraw=new t.EventEmitter,s._type="pie",s.layout={showlegend:!0,legend:{orientation:"h",bgcolor:"transparent"},orientation:270,margin:{t:10,b:25,r:10,l:10}},s.LOG=new Y(i,s._debug),s}return T(i,e),Object.defineProperty(i.prototype,"type",{set:function(e){this._type=e,this.drawChart()},enumerable:!1,configurable:!0}),i.prototype.update=function(e,t){this.LOG.debug(["onOptions","before"],this._options,e),O.default(e,this._options)||(this.LOG.debug(["options","changed"],e),this._options=Q.mergeDeep(this._options,e)),this.drawChart()},i.prototype.ngOnInit=function(){this._options=this._options||this.defOptions},i.prototype.drawChart=function(){this.initChart(this.el)&&(this.LOG.debug(["drawChart","this.layout"],this.layout),this.LOG.debug(["drawChart","this.plotlyConfig"],this.plotlyConfig),this.LOG.debug(["drawChart","this.plotlyData"],this.plotlyData),this.layout.legend.font={color:this.getCSSColor(this.el.nativeElement,"--warp-view-font-color","#000")},this.layout.textfont={color:this.getCSSColor(this.el.nativeElement,"--warp-view-font-color","#000")},this.loading=!1)},i.prototype.convert=function(e){var t=this,i=z.flatDeep(e.data),a=[];this.LOG.debug(["convert","gtsList"],i);var n={values:[],labels:[],marker:{colors:[],line:{width:3,color:[]}},textfont:{color:this.getLabelColor(this.el.nativeElement)},hoverlabel:{bgcolor:this.getCSSColor(this.el.nativeElement,"--warp-view-chart-legend-bg","#000000"),bordercolor:"grey",font:{color:this.getCSSColor(this.el.nativeElement,"--warp-view-chart-legend-color","#ffffff")}},type:"pie"};if(this.LOG.debug(["convert","gtsList"],i),i&&0!==i.length){var o=[];return z.isGts(i[0])?i.forEach((function(e,t){var i=e.v||[],a=i[i.length-1]||[],n=0;a.length>0&&(n=a[a.length-1]),o.push({key:z.serializeGtsMetadata(e),value:n})})):i.forEach((function(e,t){o.push({key:e.key||"",value:e.value||Number.MIN_VALUE})})),this.LOG.debug(["convert","dataStruct"],o),o.forEach((function(i,a){var o=M.getColor(a,t._options.scheme),r=((e.params||[])[a]||{datasetColor:o}).datasetColor||o;n.values.push(i.value),n.labels.push(i.key),n.marker.colors.push(M.transparentize(r)),n.marker.line.color.push(r),"donut"===t._type&&(n.hole=.5),t.unit&&(n.title={text:t.unit})})),n.values.length>0&&a.push(n),this.noData=0===a.length,a}},i}(K);be.decorators=[{type:t.Component,args:[{selector:"warpview-pie",template:'\x3c!--\n  ~  Copyright 2020  SenX S.A.S.\n  ~\n  ~  Licensed under the Apache License, Version 2.0 (the "License");\n  ~  you may not use this file except in compliance with the License.\n  ~  You may obtain a copy of the License at\n  ~\n  ~    http://www.apache.org/licenses/LICENSE-2.0\n  ~\n  ~  Unless required by applicable law or agreed to in writing, software\n  ~  distributed under the License is distributed on an "AS IS" BASIS,\n  ~  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  ~  See the License for the specific language governing permissions and\n  ~  limitations under the License.\n  ~\n  --\x3e\n\n<div id="chartContainer" #chartContainer>\n  <warpview-spinner *ngIf="loading" message="Parsing data"></warpview-spinner>\n  <p class="noData" *ngIf="noData">No data to display or wrong data format.</p>\n  <div *ngIf="!loading && !noData">\n    <warpview-plotly #graph *ngIf="plotlyData?.length > 0"\n                     [data]="plotlyData" [layout]="layout" [config]="plotlyConfig" (afterPlot)="afterPlot()"\n                     (relayout)="relayout($event)"\n                     [updateOnLayoutChange]="true" [updateOnDataChange]="true" [debug]="debug"\n                     [style]="{position: \'relative\', width: \'100%\', height: \'100%\'}"></warpview-plotly>\n  </div>\n</div>\n',encapsulation:t.ViewEncapsulation.ShadowDom,styles:['/*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */\n/*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */:root{--gts-attrname-font-color:#ed4a7b;--gts-attrvalue-font-color:#000;--gts-classname-font-color:#004eff;--gts-labelname-font-color:#19a979;--gts-labelvalue-font-color:#000;--gts-separator-font-color:#a0a0a0;--gts-stack-font-color:#000;--gts-tree-collapsed-icon:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA0UlEQVQ4T6WTUW7CQAxEPQdozxYb9Qb94Aj9gQSoVCp6lMr21doDZFCQiFCU3YDY//d2PeOFPHnwJC+zAlVdA/jp+/6YmZ+1S0qCPxF5HUAAO3fvSpKS4ENEvm6gfUS0c5JiBma2Ibm/QiQPmbmdSqohquoA7GqSxRaapmkBjBkAeHP336t0UWBmHcnb+VcR4XcJpjDJLjPHkS4tleqZubmNiDHU6gumDQDYuvvh7hpV9V9EXgaA5Ka2jbMjmNk7yZOIfEfE8eFVfuSDLda4JDsD3FNdEckTC0YAAAAASUVORK5CYII=);--gts-tree-expanded-icon:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA7klEQVQ4T82TMW7CQBBF/0g+QOpINEkVCmpaLoBm5COk5QYoaeAY3MDSei2LGu4QKakiBA1tCpTK8kS2sLVe2xSh8XSrnf9m/s4s4c6gO/UYGEBEXlT1bK396bFGIjIJguA7iqJLkVNbYOZXItoQ0QHAzBhz9CCFeAVgCeAjy7Jpmqa/NUBEEgDzktqGuOKKO47j+KsGhGH4lOf5HsDIg5ycyqVYVd+steuGheLAzM9EtPMgW1VdVGWJ6N0YU1gpozVGH+K+gy/uBHR1crXUqNzbQXXhduJ69sd7cxOZ+UFVH5Mk+exb+YGt8n9+5h8up1sReYC0WAAAAABJRU5ErkJggg==);--warp-slider-connect-color:#f90;--warp-slider-handle-bg-color:#fff;--warp-slider-handle-color:#004eff;--warp-slider-handle-shadow:inset 0 0 1px #fff,inset 0 1px 7px silver,0 3px 6px -3px #a0a0a0;--warp-view-annotationtooltip-font-color:#404040;--warp-view-annotationtooltip-value-font-color:#004eff;--warp-view-bar-color:#dc3545;--warp-view-chart-height:100%;--warp-view-chart-legend-bg:#fff;--warp-view-chart-legend-color:#404040;--warp-view-chart-width:100%;--warp-view-datagrid-cell-padding:5px;--warp-view-datagrid-even-bg-color:silver;--warp-view-datagrid-even-color:#000;--warp-view-datagrid-odd-bg-color:#fff;--warp-view-datagrid-odd-color:#404040;--warp-view-font-color:#000;--warp-view-map-margin:0;--warp-view-pagination-active-bg-color:#4caf50;--warp-view-pagination-active-border-color:#4caf50;--warp-view-pagination-active-color:#fff;--warp-view-pagination-bg-color:#fff;--warp-view-pagination-border-color:silver;--warp-view-pagination-disabled-color:silver;--warp-view-pagination-hover-bg-color:silver;--warp-view-pagination-hover-border-color:silver;--warp-view-pagination-hover-color:#000;--warp-view-plot-chart-height:100%;--warp-view-popup-bg-color:#fff;--warp-view-popup-body-bg-color:#fff;--warp-view-popup-body-color:#000;--warp-view-popup-border-color:rgba(0,0,0,0.2);--warp-view-popup-close-color:#404040;--warp-view-popup-header-bg-color:silver;--warp-view-popup-title-color:#404040;--warp-view-resize-handle-color:silver;--warp-view-resize-handle-height:10px;--warp-view-slider-pointer-size:65px;--warp-view-spinner-color:#f90;--warp-view-switch-handle-checked-color:radial-gradient(#fff 15%,#00cd00 100%);--warp-view-switch-handle-color:radial-gradient(#fff 15%,silver 100%);--warp-view-switch-height:30px;--warp-view-switch-inset-checked-color:#00cd00;--warp-view-switch-inset-color:silver;--warp-view-switch-radius:18px;--warp-view-switch-width:100px;--warp-view-tile-height:100%;--warp-view-tile-width:100%}.noData{color:var(--warp-view-chart-legend-color);position:relative;text-align:center;width:100%}:host{display:block}:host,:host #chartContainer,:host #chartContainer div{height:100%}:host div.chart{height:var(--warp-view-chart-height);width:var(--warp-view-chart-width)}']}]}],be.ctorParameters=function(){return[{type:t.ElementRef},{type:t.Renderer2},{type:W},{type:t.NgZone}]},be.propDecorators={type:[{type:t.Input,args:["type"]}],chartDraw:[{type:t.Output,args:["chartDraw"]}]};var ye=function(e){function t(i,a,n,o){var r=e.call(this,i,a,n,o)||this;return r.el=i,r.renderer=a,r.sizeService=n,r.ngZone=o,r.CHART_MARGIN=.05,r.lineHeight=50,r._type="gauge",r.layout={showlegend:!1,autosize:!1,autoexpand:!1,margin:{t:10,b:2,r:10,l:10}},r.LOG=new Y(t,r._debug),r}return T(t,e),Object.defineProperty(t.prototype,"type",{set:function(e){this._type=e,this.drawChart()},enumerable:!1,configurable:!0}),t.prototype.ngOnInit=function(){this._options=this._options||this.defOptions},t.prototype.update=function(e,t){this.LOG.debug(["onOptions","before"],this._options,e),O.default(e,this._options)||(this.LOG.debug(["options","changed"],e),this._options=Q.mergeDeep(this._options,e)),this.drawChart()},t.prototype.drawChart=function(){if(this.initChart(this.el)){if(this._autoResize="bullet"!==this._type,this.LOG.debug(["drawChart","plotlyData"],this.plotlyData,this._type),this.layout.grid={rows:Math.ceil(this.plotlyData.length/2),columns:2,pattern:"independent",xgap:.2,ygap:.2},this.layout.margin={t:25,r:25,l:25,b:25},"bullet"===this._type){this.layout.height=100,this.layout.yaxis={automargin:!0},this.layout.grid={rows:this.plotlyData.length,columns:1,pattern:"independent",ygap:.5};var e=this.plotlyData.length,t=this.lineHeight*e+this.layout.margin.t+this.layout.margin.b;t+=this.layout.grid.ygap*t,this.el.nativeElement.style.height=t+"px",this.el.nativeElement.style.height=t+"px",this.height=t,this.layout.height=this.height,this.layout.autosize=!1}this.loading=!1}},t.prototype.convert=function(e){var t=this;this.LOG.debug(["convert"],e);var i=e.data,a=[],n=this._options.maxValue||Number.MIN_VALUE;if(this.LOG.debug(["convert","gtsList"],i),i&&0!==i.length){i=z.flatDeep(i);var o=[];z.isGts(i[0])?i.forEach((function(t,i){var a=Number.MIN_VALUE,r=t.v||[],s=r[r.length-1]||[],p=0;s.length>0&&(p=s[s.length-1]),e.params&&e.params[i]&&e.params[i].maxValue?a=e.params[i].maxValue:n<p&&(n=p),o.push({key:z.serializeGtsMetadata(t),value:p,max:a})})):i.forEach((function(t,i){var a=Number.MIN_VALUE;e.params&&e.params[i]&&e.params[i].maxValue?a=e.params[i].maxValue:(n<t.value||Number.MIN_VALUE)&&(n=t.value||Number.MIN_VALUE),o.push({key:t.key||"",value:t.value||Number.MIN_VALUE,max:a})})),this.LOG.debug(["convert","dataStruct"],o),this.layout.annotations=[];var r=Math.ceil(o.length/2);"bullet"===this._type&&(r=o.length);var s=1/r,p=0,l=-1*s;return"bullet"===this._type&&(l=this.CHART_MARGIN),o.forEach((function(i,h){"bullet"===t._type?l+=s:h%2==0?(l+=s,p=0):p=.5;var d=M.getColor(h,t._options.scheme),c=((e.params||[])[h]||{datasetColor:d}).datasetColor||d,g=o.length>1?{x:[p+t.CHART_MARGIN,p+.5-t.CHART_MARGIN],y:[l-s+t.CHART_MARGIN,l-t.CHART_MARGIN]}:{x:[0,1],y:[0,1]};"bullet"===t._type&&(g.x=[0,1],g.y=[l-s+2*t.CHART_MARGIN,l-2*t.CHART_MARGIN],t.layout.annotations.push({xref:"x domain",yref:"y domain",x:0,xanchor:"left",y:(h+1)/r+t.CHART_MARGIN,yanchor:"top",text:i.key,showarrow:!1,align:"left",font:{size:14,color:t.getLabelColor(t.el.nativeElement)}})),a.push({domain:g,align:"left",value:i.value,delta:{reference:e.params&&e.params[h]&&e.params[h].delta?e.params[h].delta+i.value:0,font:{color:t.getLabelColor(t.el.nativeElement)}},title:{text:"bullet"===t._type||e.params&&e.params[h]&&e.params[h].type&&"bullet"===e.params[h].type?"":i.key,align:"center",font:{color:t.getLabelColor(t.el.nativeElement)}},number:{font:{color:t.getLabelColor(t.el.nativeElement)}},type:"indicator",mode:e.params&&e.params[h]&&e.params[h].delta?"number+delta+gauge":"gauge+number",gauge:{bgcolor:"transparent",shape:e.params&&e.params[h]&&e.params[h].type?e.params[h].type:t._type||"gauge",bordercolor:t.getGridColor(t.el.nativeElement),axis:{range:[null,n===Number.MIN_VALUE?i.max:n],tickcolor:t.getGridColor(t.el.nativeElement),tickfont:{color:t.getGridColor(t.el.nativeElement)}},bar:{color:M.transparentize(c),thickness:1,line:{width:1,color:c}}}}),t.LOG.debug(["convert","dataList"],h)})),this.LOG.debug(["convert","dataList"],a),a}},t}(K);ye.decorators=[{type:t.Component,args:[{selector:"warpview-gauge",template:'\x3c!--\n  ~  Copyright 2020  SenX S.A.S.\n  ~\n  ~  Licensed under the Apache License, Version 2.0 (the "License");\n  ~  you may not use this file except in compliance with the License.\n  ~  You may obtain a copy of the License at\n  ~\n  ~    http://www.apache.org/licenses/LICENSE-2.0\n  ~\n  ~  Unless required by applicable law or agreed to in writing, software\n  ~  distributed under the License is distributed on an "AS IS" BASIS,\n  ~  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  ~  See the License for the specific language governing permissions and\n  ~  limitations under the License.\n  ~\n  --\x3e\n\n<div id="chartContainer">\n  <warpview-spinner *ngIf="loading" message="Parsing data"></warpview-spinner>\n  <p class="noData" *ngIf="noData">No data to display</p>\n  <div *ngIf="!loading && !noData">\n    <warpview-plotly #graph *ngIf="plotlyData?.length > 0"\n                     [data]="plotlyData" [layout]="layout" [config]="plotlyConfig" (afterPlot)="afterPlot()"\n                     (relayout)="relayout($event)"\n                     [updateOnLayoutChange]="true" [updateOnDataChange]="true" [debug]="debug"\n                     [style]="{position: \'relative\', width: \'100%\', height: \'100%\'}"></warpview-plotly>\n  </div>\n</div>\n',encapsulation:t.ViewEncapsulation.ShadowDom,styles:['/*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */\n/*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */:root{--gts-attrname-font-color:#ed4a7b;--gts-attrvalue-font-color:#000;--gts-classname-font-color:#004eff;--gts-labelname-font-color:#19a979;--gts-labelvalue-font-color:#000;--gts-separator-font-color:#a0a0a0;--gts-stack-font-color:#000;--gts-tree-collapsed-icon:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA0UlEQVQ4T6WTUW7CQAxEPQdozxYb9Qb94Aj9gQSoVCp6lMr21doDZFCQiFCU3YDY//d2PeOFPHnwJC+zAlVdA/jp+/6YmZ+1S0qCPxF5HUAAO3fvSpKS4ENEvm6gfUS0c5JiBma2Ibm/QiQPmbmdSqohquoA7GqSxRaapmkBjBkAeHP336t0UWBmHcnb+VcR4XcJpjDJLjPHkS4tleqZubmNiDHU6gumDQDYuvvh7hpV9V9EXgaA5Ka2jbMjmNk7yZOIfEfE8eFVfuSDLda4JDsD3FNdEckTC0YAAAAASUVORK5CYII=);--gts-tree-expanded-icon:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA7klEQVQ4T82TMW7CQBBF/0g+QOpINEkVCmpaLoBm5COk5QYoaeAY3MDSei2LGu4QKakiBA1tCpTK8kS2sLVe2xSh8XSrnf9m/s4s4c6gO/UYGEBEXlT1bK396bFGIjIJguA7iqJLkVNbYOZXItoQ0QHAzBhz9CCFeAVgCeAjy7Jpmqa/NUBEEgDzktqGuOKKO47j+KsGhGH4lOf5HsDIg5ycyqVYVd+steuGheLAzM9EtPMgW1VdVGWJ6N0YU1gpozVGH+K+gy/uBHR1crXUqNzbQXXhduJ69sd7cxOZ+UFVH5Mk+exb+YGt8n9+5h8up1sReYC0WAAAAABJRU5ErkJggg==);--warp-slider-connect-color:#f90;--warp-slider-handle-bg-color:#fff;--warp-slider-handle-color:#004eff;--warp-slider-handle-shadow:inset 0 0 1px #fff,inset 0 1px 7px silver,0 3px 6px -3px #a0a0a0;--warp-view-annotationtooltip-font-color:#404040;--warp-view-annotationtooltip-value-font-color:#004eff;--warp-view-bar-color:#dc3545;--warp-view-chart-height:100%;--warp-view-chart-legend-bg:#fff;--warp-view-chart-legend-color:#404040;--warp-view-chart-width:100%;--warp-view-datagrid-cell-padding:5px;--warp-view-datagrid-even-bg-color:silver;--warp-view-datagrid-even-color:#000;--warp-view-datagrid-odd-bg-color:#fff;--warp-view-datagrid-odd-color:#404040;--warp-view-font-color:#000;--warp-view-map-margin:0;--warp-view-pagination-active-bg-color:#4caf50;--warp-view-pagination-active-border-color:#4caf50;--warp-view-pagination-active-color:#fff;--warp-view-pagination-bg-color:#fff;--warp-view-pagination-border-color:silver;--warp-view-pagination-disabled-color:silver;--warp-view-pagination-hover-bg-color:silver;--warp-view-pagination-hover-border-color:silver;--warp-view-pagination-hover-color:#000;--warp-view-plot-chart-height:100%;--warp-view-popup-bg-color:#fff;--warp-view-popup-body-bg-color:#fff;--warp-view-popup-body-color:#000;--warp-view-popup-border-color:rgba(0,0,0,0.2);--warp-view-popup-close-color:#404040;--warp-view-popup-header-bg-color:silver;--warp-view-popup-title-color:#404040;--warp-view-resize-handle-color:silver;--warp-view-resize-handle-height:10px;--warp-view-slider-pointer-size:65px;--warp-view-spinner-color:#f90;--warp-view-switch-handle-checked-color:radial-gradient(#fff 15%,#00cd00 100%);--warp-view-switch-handle-color:radial-gradient(#fff 15%,silver 100%);--warp-view-switch-height:30px;--warp-view-switch-inset-checked-color:#00cd00;--warp-view-switch-inset-color:silver;--warp-view-switch-radius:18px;--warp-view-switch-width:100px;--warp-view-tile-height:100%;--warp-view-tile-width:100%}.noData{color:var(--warp-view-chart-legend-color);position:relative;text-align:center;width:100%}:host{display:block}:host,:host #chartContainer,:host #chartContainer div{height:100%}:host div.chart{height:var(--warp-view-chart-height,100%);width:var(--warp-view-chart-width,100%)}']}]}],ye.ctorParameters=function(){return[{type:t.ElementRef},{type:t.Renderer2},{type:W},{type:t.NgZone}]},ye.propDecorators={type:[{type:t.Input,args:["type"]}]};var Ae=function(e){function i(a,n,o,r){var s=e.call(this,a,n,o,r)||this;return s.el=a,s.renderer=n,s.sizeService=o,s.ngZone=r,s.pointHover=new t.EventEmitter,s.chartDraw=new t.EventEmitter,s.boundsDidChange=new t.EventEmitter,s.displayExpander=!0,s.layout={showlegend:!1,hovermode:"closest",xaxis:{gridwidth:1,fixedrange:!1,autorange:!1,automargin:!1,showticklabels:!0,showgrid:!1},autosize:!1,autoexpand:!1,yaxis:{showticklabels:!1,fixedrange:!0,dtick:1,gridwidth:1,tick0:0,nticks:2,rangemode:"tozero",tickson:"boundaries",automargin:!0,showline:!1,zeroline:!0},margin:{t:30,b:2,r:10,l:10}},s.marginLeft=50,s.expanded=!1,s._type="line",s.visibility=[],s._standalone=!0,s.maxTick=Number.MIN_VALUE,s.minTick=Number.MAX_VALUE,s.visibleGtsId=[],s.gtsId=[],s.dataHashset={},s.lineHeight=30,s.chartBounds=new H,s._autoResize=!1,s.LOG=new Y(i,s._debug),s}return T(i,e),Object.defineProperty(i.prototype,"hiddenData",{set:function(e){var t=this,i=JSON.stringify(this.visibility);this.LOG.debug(["hiddenData","previousVisibility"],i),this._hiddenData=e,this.visibility=[],this.visibleGtsId.forEach((function(i){return t.visibility.push(e.indexOf(i)<0&&-1!==i)})),this.LOG.debug(["hiddenData","hiddendygraphfullv"],this.visibility);var a=JSON.stringify(this.visibility);if(this.LOG.debug(["hiddenData","json"],i,a),i!==a){var n=[],o=[];this.gtsId.forEach((function(e,i){t._hiddenData.indexOf(e)>-1?o.push(i):n.push(i)})),n.length>0&&this.graph.restyleChart({visible:!0},n),o.length>0&&this.graph.restyleChart({visible:!1},o),this.LOG.debug(["hiddendygraphtrig","destroy"],"redraw by visibility change")}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"type",{set:function(e){this._type=e,this.drawChart()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"standalone",{get:function(){return this._standalone},set:function(e){this._standalone!==e&&(this._standalone=e,this.drawChart())},enumerable:!1,configurable:!0}),i.prototype.handleKeyDown=function(e){var t=this;"Control"===e.key&&(this.trimmed=setInterval((function(){t.toolTip.nativeElement.querySelector("#tooltip-body")&&t.toolTip.nativeElement.querySelector("#tooltip-body").classList.add("full")}),100))},i.prototype.handleKeyup=function(e){this.LOG.debug(["document:keyup"],e),"Control"===e.key&&this.toolTip.nativeElement.querySelector("#tooltip-body")&&(this.trimmed&&clearInterval(this.trimmed),this.toolTip.nativeElement.querySelector("#tooltip-body").classList.remove("full"))},i.prototype.update=function(e,t){e&&(this._options=Q.mergeDeep(this._options,e)),this.drawChart(t)},i.prototype.updateBounds=function(e,t,i){this.LOG.debug(["updateBounds"],e,t,this._options),this._options.bounds.minDate=e,this._options.bounds.maxDate=t,this.layout.xaxis.autorange=!1,this.LOG.debug(["updateBounds"],z.toISOString(e,this.divider,this._options.timeZone),z.toISOString(t,this.divider,this._options.timeZone)),this.minTick=e,this.maxTick=t,this._options.timeMode&&"timestamp"===this._options.timeMode?(this.layout.xaxis.tick0=e/this.divider,this.layout.xaxis.range=[e/this.divider,t/this.divider]):(this.layout.xaxis.tick0=z.toISOString(e,this.divider,this._options.timeZone),this.layout.xaxis.range=[z.toISOString(e,this.divider,this._options.timeZone),z.toISOString(t,this.divider,this._options.timeZone)]),this.layout.margin.l=i,this.marginLeft=i,this.layout=Object.assign({},this.layout),this.LOG.debug(["updateBounds"],Object.assign({},this.layout.xaxis.range))},i.prototype.drawChart=function(e){var t=this;if(void 0===e&&(e=!1),this.layout.margin.l=this._standalone?10:50,this.layout.margin.b=this._standalone?50:1,this.height=this.lineHeight+this.layout.margin.t+this.layout.margin.b,this.initChart(this.el)){this.el.nativeElement.style.display="block",this.LOG.debug(["drawChart","this.plotlyData"],this.plotlyData),this.LOG.debug(["drawChart","hiddenData"],this._hiddenData),this.LOG.debug(["drawChart","this._options.bounds"],this._options.bounds),this.layout.yaxis.color=this.getGridColor(this.el.nativeElement),this.layout.yaxis.gridcolor=this.getGridColor(this.el.nativeElement),this.layout.yaxis.showline=!!this._standalone,this.layout.yaxis.zerolinecolor=this.getGridColor(this.el.nativeElement),this.layout.xaxis.color=this.getGridColor(this.el.nativeElement),this.layout.xaxis.gridcolor=this.getGridColor(this.el.nativeElement),this.layout.xaxis.autorange=!!this._standalone,this.layout.xaxis.showticklabels=!!this._standalone,this.displayExpander=this.plotlyData.length>1;var i=this.plotlyData.filter((function(e){return e.y.length>0})).length,a=(this.expanded?this.lineHeight*i:this.lineHeight)+this.layout.margin.t+this.layout.margin.b;this.el.nativeElement.style.height=a+"px",this.height=a,this.layout.height=this.height,this.LOG.debug(["drawChart","height"],this.height,i,a,this.expanded),this.layout.yaxis.range=[0,this.expanded?i:1],this.LOG.debug(["drawChart","this.layout"],this.layout),this._options.timeMode&&"timestamp"===this._options.timeMode?(this.layout.xaxis.tick0=this.minTick,this.layout.xaxis.range=[this.minTick,this.maxTick],this.layout.xaxis.type="linear"):(this.layout.xaxis.tick0=z.toISOString(this.minTick,this.divider,this._options.timeZone),this.layout.xaxis.range=[z.toISOString(this.minTick,this.divider,this._options.timeZone),z.toISOString(this.maxTick,this.divider,this._options.timeZone)],this.layout.xaxis.type="date"),this.plotlyConfig.scrollZoom=!0,this.layout.xaxis.showgrid=!1,setTimeout((function(){t.plotlyConfig=Object.assign({},t.plotlyConfig),t.layout=Object.assign({},t.layout),t.loading=!1})),this.LOG.debug(["drawChart","this.plotlyConfig"],this.plotlyConfig,this.plotlyData)}},i.prototype.relayout=function(e){e["xaxis.range"]&&2===e["xaxis.range"].length?(this.LOG.debug(["relayout","updateBounds","xaxis.range"],e["xaxis.range"]),this.chartBounds.msmin=e["xaxis.range"][0],this.chartBounds.msmax=e["xaxis.range"][1],this.chartBounds.tsmin=L.default.tz(L.default(this.chartBounds.msmin),this._options.timeZone).valueOf(),this.chartBounds.tsmax=L.default.tz(L.default(this.chartBounds.msmax),this._options.timeZone).valueOf()):e["xaxis.range[0]"]&&e["xaxis.range[1]"]?(this.LOG.debug(["relayout","updateBounds","xaxis.range[x]"],e["xaxis.range[0]"]),this.chartBounds.msmin=e["xaxis.range[0]"],this.chartBounds.msmax=e["xaxis.range[1]"],this.chartBounds.tsmin=L.default.tz(L.default(this.chartBounds.msmin),this._options.timeZone).valueOf(),this.chartBounds.tsmax=L.default.tz(L.default(this.chartBounds.msmax),this._options.timeZone).valueOf()):e["xaxis.autorange"]&&(this.LOG.debug(["relayout","updateBounds","autorange"],e),this.chartBounds.tsmin=this.minTick/this.divider,this.chartBounds.tsmax=this.maxTick/this.divider),this.emitNewBounds(L.default.utc(this.chartBounds.tsmin).valueOf(),L.default.utc(this.chartBounds.msmax).valueOf())},i.prototype.hover=function(e){this.LOG.debug(["hover"],e);var t=this.toolTip.nativeElement;this.pointHover.emit({x:e.event.offsetX,y:e.event.offsetY});var i=e.xvals[0];e.points[0]&&(i=e.points[0].x);var a=this.el.nativeElement.getBoundingClientRect(),n=this.plotlyData.filter((function(e){return e.y.length>0})).length;t.style.opacity="1",t.style.display="block",t.style.paddingLeft=(this._standalone?0:40)+"px",t.style.top=(this.expanded?n-1-(e.points[0].y+.5):-1)*this.lineHeight+this.layout.margin.t+6+"px",t.classList.remove("right","left"),t.innerHTML='<div class="tooltip-body trimmed" id="tooltip-body">\n<span class="tooltip-date">'+("timestamp"===this._options.timeMode?i:L.default.utc(i).toISOString().replace("Z","UTC"===this._options.timeZone?"Z":"")||"")+"</span>\n<ul>\n<li>"+z.formatLabel(e.points[0].data.name)+': <span class="value">'+e.points[0].text+"</span></li>\n</ul>\n      </div>",e.event.offsetX>a.width/2?t.classList.add("left"):t.classList.add("right"),t.style.pointerEvents="none"},i.prototype.unhover=function(){this.toolTip.nativeElement.style.display="none"},i.prototype.afterPlot=function(e){this.loading=!1,this.chartBounds.tsmin=this.minTick,this.chartBounds.tsmax=this.maxTick,this.chartDraw.emit(this.chartBounds),this.LOG.debug(["afterPlot"],this.chartBounds,e)},i.prototype.emitNewBounds=function(e,t){this._options.timeMode&&"timestamp"===this._options.timeMode?this.boundsDidChange.emit({bounds:{min:e,max:t},source:"annotation"}):this.boundsDidChange.emit({bounds:{min:L.default.tz(e,this._options.timeZone).valueOf(),max:L.default.tz(t,this._options.timeZone).valueOf()},source:"annotation"})},i.prototype.convert=function(e){var t=this,i=[],a=z.flatDeep(z.flattenGtsIdArray(e.data,0).res);this.maxTick=Number.NEGATIVE_INFINITY,this.minTick=Number.POSITIVE_INFINITY,this.visibleGtsId=[],this.gtsId=[];var n=a.filter((function(e){return e.v&&z.isGtsToPlot(e)}));a=a.filter((function(e){return e.v&&!z.isGtsToPlot(e)}));var o=!0,r=100*z.getDivider(this._options.timeUnit);a.forEach((function(e){var t=e.v.map((function(e){return e[0]})),i=e.v.length;o=(o=o&&t[0]>-r&&t[0]<r)&&t[i-1]>-r&&t[i-1]<r})),o||"timestamp"===this._options.timeMode?this.layout.xaxis.type="linear":this.layout.xaxis.type="date",a.forEach((function(a,n){if(a.v){var r=a.v.length,s=z.serializeGtsMetadata(a),p=M.getColor(a.id,t._options.scheme),l=((e.params||[])[n]||{datasetColor:p}).datasetColor||p,h={type:"scattergl",mode:"markers",name:s,x:[],y:[],text:[],hoverinfo:"none",connectgaps:!1,visible:!(t._hiddenData.filter((function(e){return e===a.id})).length>0),line:{color:l},marker:{symbol:"line-ns-open",color:l,size:20,width:5}};t.visibleGtsId.push(a.id),t.gtsId.push(a.id),o||t._options.timeMode&&"timestamp"===t._options.timeMode?t.layout.xaxis.type="linear":t.layout.xaxis.type="date";var d=[];if(h.text=[],h.y=[],r>0){t.minTick=a.v[0][0],t.maxTick=a.v[0][0];for(var c=0;c<r;c++){var g=a.v[c],u=g[0];d.push(u),h.text.push(g[g.length-1]),h.y.push((t.expanded?n:0)+.5),t.minTick=u<t.minTick?u:t.minTick,t.maxTick=u>t.maxTick?u:t.maxTick}}o||"timestamp"===t._options.timeMode?h.x=d:h.x=d.map((function(e){return z.toISOString(e,t.divider,t._options.timeZone)})),h.x.length>0&&i.push(h)}})),this.LOG.debug(["convert"],"forEach value end",this.minTick,this.maxTick),n.length>0&&(n.forEach((function(e){e.v.forEach((function(e){var i=e[0];i<t.minTick&&(t.minTick=i),i>t.maxTick&&(t.maxTick=i)}))})),0===a.length&&(this.dataHashset[this.minTick]||(this.dataHashset[this.minTick]=[0]),this.dataHashset[this.maxTick]||(this.dataHashset[this.maxTick]=[0]),this.visibility.push(!1),this.visibleGtsId.push(-1)));var s={tick0:void 0,range:[]};return o||this._options.timeMode&&"timestamp"===this._options.timeMode?(s.tick0=this.minTick,s.range=[this.minTick,this.maxTick]):(s.tick0=z.toISOString(this.minTick,this.divider,this._options.timeZone),s.range=[z.toISOString(this.minTick,this.divider,this._options.timeZone),z.toISOString(this.maxTick,this.divider,this._options.timeZone)]),this.layout.xaxis=s,this.noData=0===i.length,i},i.prototype.toggle=function(){this.expanded=!this.expanded,this.drawChart()},i.prototype.setRealBounds=function(e){this.minTick=e.tsmin,this.maxTick=e.tsmax,this._options.bounds=this._options.bounds||{},this._options.bounds.minDate=this.minTick,this._options.bounds.maxDate=this.maxTick;var t={tick0:void 0,range:[]};this._options.showRangeSelector&&(t.rangeslider={bgcolor:"transparent",thickness:40/this.height}),this._options.timeMode&&"timestamp"===this._options.timeMode?(t.tick0=this.minTick/this.divider,t.range=[this.minTick,this.maxTick]):(t.tick0=z.toISOString(this.minTick,this.divider,this._options.timeZone),t.range=[z.toISOString(this.minTick,this.divider,this._options.timeZone),z.toISOString(this.maxTick,this.divider,this._options.timeZone)]),this.layout.xaxis=t,this.layout=Object.assign({},this.layout)},i}(K);Ae.decorators=[{type:t.Component,args:[{selector:"warpview-annotation",template:'\x3c!--\n  ~  Copyright 2020  SenX S.A.S.\n  ~\n  ~  Licensed under the Apache License, Version 2.0 (the "License");\n  ~  you may not use this file except in compliance with the License.\n  ~  You may obtain a copy of the License at\n  ~\n  ~    http://www.apache.org/licenses/LICENSE-2.0\n  ~\n  ~  Unless required by applicable law or agreed to in writing, software\n  ~  distributed under the License is distributed on an "AS IS" BASIS,\n  ~  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  ~  See the License for the specific language governing permissions and\n  ~  limitations under the License.\n  ~\n  --\x3e\n<div id="chartContainer" #chartContainer (mouseleave)="hideTooltip()">\n  <button *ngIf="displayExpander && plotlyData && plotlyData.length > 1" class="expander" (click)="toggle()"\n          title="collapse/expand">+/-\n  </button>\n  <div #toolTip class="wv-tooltip"></div>\n  <warpview-spinner *ngIf="loading" message="Parsing data"></warpview-spinner>\n  <div *ngIf="!loading && !noData">\n    <div class="upperLine" [ngStyle]="{left: standalone? \'10px\': marginLeft + \'px\'}" *ngIf="standalone || !expanded"></div>\n    <warpview-plotly #graph\n                     [data]="plotlyData" [layout]="layout" [config]="plotlyConfig" (afterPlot)="afterPlot($event)"\n                     (relayout)="relayout($event)" className="chart" (hover)="hover($event)" (unhover)="unhover()"\n                     [updateOnLayoutChange]="true" [updateOnDataChange]="true" [debug]="debug"\n                     [style]="{position: \'relative\', width: \'100%\', height: \'100%\'}"></warpview-plotly>\n  </div>\n</div>\n',encapsulation:t.ViewEncapsulation.ShadowDom,styles:['/*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */\n/*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */:root{--gts-attrname-font-color:#ed4a7b;--gts-attrvalue-font-color:#000;--gts-classname-font-color:#004eff;--gts-labelname-font-color:#19a979;--gts-labelvalue-font-color:#000;--gts-separator-font-color:#a0a0a0;--gts-stack-font-color:#000;--gts-tree-collapsed-icon:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA0UlEQVQ4T6WTUW7CQAxEPQdozxYb9Qb94Aj9gQSoVCp6lMr21doDZFCQiFCU3YDY//d2PeOFPHnwJC+zAlVdA/jp+/6YmZ+1S0qCPxF5HUAAO3fvSpKS4ENEvm6gfUS0c5JiBma2Ibm/QiQPmbmdSqohquoA7GqSxRaapmkBjBkAeHP336t0UWBmHcnb+VcR4XcJpjDJLjPHkS4tleqZubmNiDHU6gumDQDYuvvh7hpV9V9EXgaA5Ka2jbMjmNk7yZOIfEfE8eFVfuSDLda4JDsD3FNdEckTC0YAAAAASUVORK5CYII=);--gts-tree-expanded-icon:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA7klEQVQ4T82TMW7CQBBF/0g+QOpINEkVCmpaLoBm5COk5QYoaeAY3MDSei2LGu4QKakiBA1tCpTK8kS2sLVe2xSh8XSrnf9m/s4s4c6gO/UYGEBEXlT1bK396bFGIjIJguA7iqJLkVNbYOZXItoQ0QHAzBhz9CCFeAVgCeAjy7Jpmqa/NUBEEgDzktqGuOKKO47j+KsGhGH4lOf5HsDIg5ycyqVYVd+steuGheLAzM9EtPMgW1VdVGWJ6N0YU1gpozVGH+K+gy/uBHR1crXUqNzbQXXhduJ69sd7cxOZ+UFVH5Mk+exb+YGt8n9+5h8up1sReYC0WAAAAABJRU5ErkJggg==);--warp-slider-connect-color:#f90;--warp-slider-handle-bg-color:#fff;--warp-slider-handle-color:#004eff;--warp-slider-handle-shadow:inset 0 0 1px #fff,inset 0 1px 7px silver,0 3px 6px -3px #a0a0a0;--warp-view-annotationtooltip-font-color:#404040;--warp-view-annotationtooltip-value-font-color:#004eff;--warp-view-bar-color:#dc3545;--warp-view-chart-height:100%;--warp-view-chart-legend-bg:#fff;--warp-view-chart-legend-color:#404040;--warp-view-chart-width:100%;--warp-view-datagrid-cell-padding:5px;--warp-view-datagrid-even-bg-color:silver;--warp-view-datagrid-even-color:#000;--warp-view-datagrid-odd-bg-color:#fff;--warp-view-datagrid-odd-color:#404040;--warp-view-font-color:#000;--warp-view-map-margin:0;--warp-view-pagination-active-bg-color:#4caf50;--warp-view-pagination-active-border-color:#4caf50;--warp-view-pagination-active-color:#fff;--warp-view-pagination-bg-color:#fff;--warp-view-pagination-border-color:silver;--warp-view-pagination-disabled-color:silver;--warp-view-pagination-hover-bg-color:silver;--warp-view-pagination-hover-border-color:silver;--warp-view-pagination-hover-color:#000;--warp-view-plot-chart-height:100%;--warp-view-popup-bg-color:#fff;--warp-view-popup-body-bg-color:#fff;--warp-view-popup-body-color:#000;--warp-view-popup-border-color:rgba(0,0,0,0.2);--warp-view-popup-close-color:#404040;--warp-view-popup-header-bg-color:silver;--warp-view-popup-title-color:#404040;--warp-view-resize-handle-color:silver;--warp-view-resize-handle-height:10px;--warp-view-slider-pointer-size:65px;--warp-view-spinner-color:#f90;--warp-view-switch-handle-checked-color:radial-gradient(#fff 15%,#00cd00 100%);--warp-view-switch-handle-color:radial-gradient(#fff 15%,silver 100%);--warp-view-switch-height:30px;--warp-view-switch-inset-checked-color:#00cd00;--warp-view-switch-inset-color:silver;--warp-view-switch-radius:18px;--warp-view-switch-width:100px;--warp-view-tile-height:100%;--warp-view-tile-width:100%}.noData{color:var(--warp-view-chart-legend-color);position:relative;text-align:center;width:100%}\n\n/*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */.gts-classname{color:var(--gts-classname-font-color)}.gts-labelname{color:var(--gts-labelname-font-color)}.gts-attrname{color:var(--gts-attrname-font-color)}.gts-separator{color:var(--gts-separator-font-color)}.gts-labelvalue{color:var(--gts-labelvalue-font-color);font-style:italic}.gts-attrvalue{color:var(--gts-attrvalue-font-color);font-style:italic}:host{display:block}:host .expander{left:0;position:absolute;top:0;width:35px;z-index:9}:host #chartContainer{height:auto;position:relative}:host #chartContainer div.upperLine{border-bottom:1px solid var(--warp-view-chart-grid-color,#8e8e8e);height:0;left:0;position:absolute;right:10px;top:30px}:host .date{display:block;height:20px;left:40px;line-height:20px;position:absolute;text-align:right;top:0;vertical-align:middle}:host .chart{height:var(--warp-view-chart-height);width:var(--warp-view-chart-width)}:host .wv-tooltip{margin-left:10px;position:absolute;top:-1000px;width:calc(100% - 50px);z-index:999}:host .wv-tooltip .tooltip-body{background-color:hsla(0,0%,100%,.8);color:var(--warp-view-annotationtooltip-font-color);height:50px;line-height:20px;margin:1px;max-width:100%;overflow:visible;padding-left:10px;padding-right:10px;vertical-align:middle;width:auto}:host .wv-tooltip .tooltip-body ul{list-style:none;margin-top:10px;padding-top:0}:host .wv-tooltip .tooltip-body.trimmed{max-width:49%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}:host .wv-tooltip .tooltip-body.full{max-width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}:host .wv-tooltip .tooltip-body .timestamp{font-size:1rem}:host .wv-tooltip .tooltip-body .value{color:var(--warp-view-annotationtooltip-value-font-color)}:host .wv-tooltip .tooltip-body .tooltip-date{display:block;font-size:.8rem;font-weight:700;height:.8rem;line-height:.8rem;padding-top:5px;text-align:left;vertical-align:middle;width:100%}:host .wv-tooltip .tooltip-body .round{background-color:#bbb;border:2px solid #454545;border-radius:50%;display:inline-block;height:5px;margin-bottom:auto;margin-right:5px;margin-top:auto;vertical-align:middle;width:5px}:host .wv-tooltip.left .tooltip-body{float:left;text-align:left}:host .wv-tooltip.left .tooltip-body .tooltip-date{text-align:left}:host .wv-tooltip.right .tooltip-body{float:right;text-align:right}:host .wv-tooltip.right .tooltip-body .tooltip-date{text-align:right}']}]}],Ae.ctorParameters=function(){return[{type:t.ElementRef},{type:t.Renderer2},{type:W},{type:t.NgZone}]},Ae.propDecorators={hiddenData:[{type:t.Input,args:["hiddenData"]}],type:[{type:t.Input,args:["type"]}],standalone:[{type:t.Input,args:["standalone"]}],pointHover:[{type:t.Output,args:["pointHover"]}],chartDraw:[{type:t.Output,args:["chartDraw"]}],boundsDidChange:[{type:t.Output,args:["boundsDidChange"]}],handleKeyDown:[{type:t.HostListener,args:["keydown",["$event"]]},{type:t.HostListener,args:["document:keydown",["$event"]]}],handleKeyup:[{type:t.HostListener,args:["keyup",["$event"]]},{type:t.HostListener,args:["document:keyup",["$event"]]}]};var Se=function(e){function t(i,a,n,o){var r=e.call(this,i,a,n,o)||this;return r.el=i,r.renderer=a,r.sizeService=n,r.ngZone=o,r.layout={paper_bgcolor:"rgba(0,0,0,0)",showlegend:!0,legend:{orientation:"h"},font:{size:12,familly:"'Quicksand', sans-serif"},polar:{bgcolor:"rgba(0,0,0,0)",angularaxis:{type:"category"},radialaxis:{visible:!0}},orientation:270,margin:{t:10,b:25,r:10,l:10}},r.LOG=new Y(t,r._debug),r}return T(t,e),t.prototype.update=function(e,t){this.LOG.debug(["onOptions","before"],this._options,e),O.default(e,this._options)||(this.LOG.debug(["options","changed"],e),this._options=Q.mergeDeep(this._options,e)),this.drawChart()},t.prototype.ngOnInit=function(){this._options=this._options||this.defOptions},t.prototype.drawChart=function(){this.initChart(this.el)&&(this.layout.polar.radialaxis.color=this.getGridColor(this.el.nativeElement),this.layout.polar.angularaxis.color=this.getGridColor(this.el.nativeElement),this.layout.showlegend=!!this.showLegend,this.LOG.debug(["drawChart","this.layout"],this.layout),this.LOG.debug(["drawChart","this.plotlyConfig"],this.plotlyConfig),this.LOG.debug(["drawChart","this.plotlyData"],this.plotlyData),this.loading=!1)},t.prototype.convert=function(e){var t=this,i=[],a=(z.getDivider(this._options.timeUnit),z.flatDeep(z.flattenGtsIdArray(e.data,0).res));this.LOG.debug(["convert","gtsList"],a);var n=Number.MAX_VALUE,o=Number.MIN_VALUE;return a.forEach((function(a,r){var s=M.getColor(r,t._options.scheme),p=((e.params||[])[a.id]||{datasetColor:s}).datasetColor||s,l={r:[],theta:[],marker:{line:{color:p,width:1},color:M.transparentize(p)},fillcolor:M.transparentize(p),hoverinfo:"none",name:z.serializeGtsMetadata(a),text:z.serializeGtsMetadata(a),fill:"toself",type:"barpolar"};a.v.forEach((function(e){var i=e[0];n=Math.min(n,e[e.length-1]),o=Math.max(o,e[e.length-1]),l.r.push(e[e.length-1]),t._options.timeMode&&"timestamp"===t._options.timeMode?l.theta.push(i.toString()):l.theta.push(z.toISOString(i,t.divider,t._options.timeZone))})),t.unit&&(l.title={text:t.unit}),i.push(l)})),this.layout.polar.radialaxis.range=[n,o],i},t}(K);Se.decorators=[{type:t.Component,args:[{selector:"warpview-polar",template:'\x3c!--\n  ~  Copyright 2020  SenX S.A.S.\n  ~\n  ~  Licensed under the Apache License, Version 2.0 (the "License");\n  ~  you may not use this file except in compliance with the License.\n  ~  You may obtain a copy of the License at\n  ~\n  ~    http://www.apache.org/licenses/LICENSE-2.0\n  ~\n  ~  Unless required by applicable law or agreed to in writing, software\n  ~  distributed under the License is distributed on an "AS IS" BASIS,\n  ~  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  ~  See the License for the specific language governing permissions and\n  ~  limitations under the License.\n  ~\n  --\x3e\n\n<div id="chartContainer" #chartContainer>\n  <warpview-spinner *ngIf="loading" message="Parsing data"></warpview-spinner>\n  <p class="noData" *ngIf="noData">No data to display</p>\n  <div *ngIf="!loading && !noData">\n    <warpview-plotly #graph *ngIf="plotlyData?.length > 0"\n                     [data]="plotlyData" [layout]="layout" [config]="plotlyConfig" (afterPlot)="afterPlot()"\n                     (relayout)="relayout($event)" (hover)="hover($event)" (unhover)="unhover($event)"\n                     [updateOnLayoutChange]="true" [updateOnDataChange]="true" [debug]="debug"\n                     [style]="{position: \'relative\', width: \'100%\', height: \'100%\'}"></warpview-plotly>\n  </div>\n  <div #toolTip class="wv-tooltip" [ngStyle]="getTooltipPosition()"></div>\n</div>\n',encapsulation:t.ViewEncapsulation.ShadowDom,styles:['/*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */\n/*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */:root{--gts-attrname-font-color:#ed4a7b;--gts-attrvalue-font-color:#000;--gts-classname-font-color:#004eff;--gts-labelname-font-color:#19a979;--gts-labelvalue-font-color:#000;--gts-separator-font-color:#a0a0a0;--gts-stack-font-color:#000;--gts-tree-collapsed-icon:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA0UlEQVQ4T6WTUW7CQAxEPQdozxYb9Qb94Aj9gQSoVCp6lMr21doDZFCQiFCU3YDY//d2PeOFPHnwJC+zAlVdA/jp+/6YmZ+1S0qCPxF5HUAAO3fvSpKS4ENEvm6gfUS0c5JiBma2Ibm/QiQPmbmdSqohquoA7GqSxRaapmkBjBkAeHP336t0UWBmHcnb+VcR4XcJpjDJLjPHkS4tleqZubmNiDHU6gumDQDYuvvh7hpV9V9EXgaA5Ka2jbMjmNk7yZOIfEfE8eFVfuSDLda4JDsD3FNdEckTC0YAAAAASUVORK5CYII=);--gts-tree-expanded-icon:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA7klEQVQ4T82TMW7CQBBF/0g+QOpINEkVCmpaLoBm5COk5QYoaeAY3MDSei2LGu4QKakiBA1tCpTK8kS2sLVe2xSh8XSrnf9m/s4s4c6gO/UYGEBEXlT1bK396bFGIjIJguA7iqJLkVNbYOZXItoQ0QHAzBhz9CCFeAVgCeAjy7Jpmqa/NUBEEgDzktqGuOKKO47j+KsGhGH4lOf5HsDIg5ycyqVYVd+steuGheLAzM9EtPMgW1VdVGWJ6N0YU1gpozVGH+K+gy/uBHR1crXUqNzbQXXhduJ69sd7cxOZ+UFVH5Mk+exb+YGt8n9+5h8up1sReYC0WAAAAABJRU5ErkJggg==);--warp-slider-connect-color:#f90;--warp-slider-handle-bg-color:#fff;--warp-slider-handle-color:#004eff;--warp-slider-handle-shadow:inset 0 0 1px #fff,inset 0 1px 7px silver,0 3px 6px -3px #a0a0a0;--warp-view-annotationtooltip-font-color:#404040;--warp-view-annotationtooltip-value-font-color:#004eff;--warp-view-bar-color:#dc3545;--warp-view-chart-height:100%;--warp-view-chart-legend-bg:#fff;--warp-view-chart-legend-color:#404040;--warp-view-chart-width:100%;--warp-view-datagrid-cell-padding:5px;--warp-view-datagrid-even-bg-color:silver;--warp-view-datagrid-even-color:#000;--warp-view-datagrid-odd-bg-color:#fff;--warp-view-datagrid-odd-color:#404040;--warp-view-font-color:#000;--warp-view-map-margin:0;--warp-view-pagination-active-bg-color:#4caf50;--warp-view-pagination-active-border-color:#4caf50;--warp-view-pagination-active-color:#fff;--warp-view-pagination-bg-color:#fff;--warp-view-pagination-border-color:silver;--warp-view-pagination-disabled-color:silver;--warp-view-pagination-hover-bg-color:silver;--warp-view-pagination-hover-border-color:silver;--warp-view-pagination-hover-color:#000;--warp-view-plot-chart-height:100%;--warp-view-popup-bg-color:#fff;--warp-view-popup-body-bg-color:#fff;--warp-view-popup-body-color:#000;--warp-view-popup-border-color:rgba(0,0,0,0.2);--warp-view-popup-close-color:#404040;--warp-view-popup-header-bg-color:silver;--warp-view-popup-title-color:#404040;--warp-view-resize-handle-color:silver;--warp-view-resize-handle-height:10px;--warp-view-slider-pointer-size:65px;--warp-view-spinner-color:#f90;--warp-view-switch-handle-checked-color:radial-gradient(#fff 15%,#00cd00 100%);--warp-view-switch-handle-color:radial-gradient(#fff 15%,silver 100%);--warp-view-switch-height:30px;--warp-view-switch-inset-checked-color:#00cd00;--warp-view-switch-inset-color:silver;--warp-view-switch-radius:18px;--warp-view-switch-width:100px;--warp-view-tile-height:100%;--warp-view-tile-width:100%}.noData{color:var(--warp-view-chart-legend-color);position:relative;text-align:center;width:100%}\n\n/*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */\n/*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */.gts-classname{color:var(--gts-classname-font-color)}.gts-labelname{color:var(--gts-labelname-font-color)}.gts-attrname{color:var(--gts-attrname-font-color)}.gts-separator{color:var(--gts-separator-font-color)}.gts-labelvalue{color:var(--gts-labelvalue-font-color);font-style:italic}.gts-attrvalue{color:var(--gts-attrvalue-font-color);font-style:italic}.wv-tooltip{background-color:var(--warp-view-chart-legend-bg)!important;border:1px solid grey;border-radius:5px;box-shadow:none;color:var(--warp-view-chart-legend-color)!important;display:none;font-size:10px;height:auto!important;left:-1000px;max-width:50%;min-width:100px;padding:10px;pointer-events:none;position:absolute;text-align:left;width:auto;z-index:999}.wv-tooltip .chip{background-color:#bbb;border:2px solid #454545;border-radius:50%;cursor:pointer;display:inline-block;height:5px;margin-bottom:auto;margin-top:auto;vertical-align:middle;width:5px}:host{display:block;height:100%}:host .bglayer{display:none}:host #chartContainer,:host #chartContainer div{height:100%}:host div.chart{height:var(--warp-view-chart-height);width:var(--warp-view-chart-width)}']}]}],Se.ctorParameters=function(){return[{type:t.ElementRef},{type:t.Renderer2},{type:W},{type:t.NgZone}]};var xe=function(e){function t(i,a,n,o){var r=e.call(this,i,a,n,o)||this;return r.el=i,r.renderer=a,r.sizeService=n,r.ngZone=o,r.layout={paper_bgcolor:"transparent",showlegend:!0,legend:{orientation:"h"},font:{size:12},polar:{bgcolor:"transparent",angularaxis:{type:"category"},radialaxis:{visible:!0}},margin:{t:0,b:25,r:10,l:10}},r.LOG=new Y(t,r._debug),r}return T(t,e),t.prototype.update=function(e,t){this.LOG.debug(["onOptions","before"],this._options,e),O.default(e,this._options)||(this.LOG.debug(["options","changed"],e),this._options=Q.mergeDeep(this._options,e)),this.drawChart()},t.prototype.ngOnInit=function(){this._options=this._options||this.defOptions},t.prototype.drawChart=function(){this.initChart(this.el)&&(this.layout.polar.radialaxis.color=this.getGridColor(this.el.nativeElement),this.layout.polar.angularaxis.color=this.getGridColor(this.el.nativeElement),this.layout.showlegend=this.showLegend,this.LOG.debug(["drawChart","this.layout"],this.layout),this.LOG.debug(["drawChart","this.plotlyConfig"],this.plotlyConfig),this.LOG.debug(["drawChart","this.plotlyData"],this.plotlyData),this.loading=!1)},t.prototype.convert=function(e){var t=this,i=[],a=(z.getDivider(this._options.timeUnit),z.flatDeep(z.flattenGtsIdArray(e.data,0).res));this.LOG.debug(["convert","gtsList"],a);var n=Number.MAX_VALUE,o=Number.MIN_VALUE;return a.forEach((function(a,r){var s=M.getColor(r,t._options.scheme),p=((e.params||[])[a.id]||{datasetColor:s}).datasetColor||s,l={r:[],theta:[],line:{color:p},marker:{line:{color:p,width:1},color:M.transparentize(p)},fillcolor:M.transparentize(p),hoverinfo:"none",name:z.serializeGtsMetadata(a),text:z.serializeGtsMetadata(a),type:"scatterpolar",fill:"toself"};a.v.forEach((function(e){var i=e[0];l.r.push(e[e.length-1]),n=Math.min(n,e[e.length-1]),o=Math.max(o,e[e.length-1]),t._options.timeMode&&"timestamp"===t._options.timeMode?l.theta.push(i.toString()):l.theta.push(z.toISOString(i,t.divider,t._options.timeZone))})),i.push(l)})),this.layout.polar.radialaxis.range=[n,o],i},t}(K);xe.decorators=[{type:t.Component,args:[{selector:"warpview-radar",template:'\x3c!--\n  ~  Copyright 2020  SenX S.A.S.\n  ~\n  ~  Licensed under the Apache License, Version 2.0 (the "License");\n  ~  you may not use this file except in compliance with the License.\n  ~  You may obtain a copy of the License at\n  ~\n  ~    http://www.apache.org/licenses/LICENSE-2.0\n  ~\n  ~  Unless required by applicable law or agreed to in writing, software\n  ~  distributed under the License is distributed on an "AS IS" BASIS,\n  ~  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  ~  See the License for the specific language governing permissions and\n  ~  limitations under the License.\n  ~\n  --\x3e\n\n<div id="chartContainer" #chartContainer>\n  <warpview-spinner *ngIf="loading" message="Parsing data"></warpview-spinner>\n  <p class="noData" *ngIf="noData">No data to display</p>\n  <div *ngIf="!loading && !noData">\n    <warpview-plotly #graph *ngIf="plotlyData?.length > 0"\n                     [data]="plotlyData" [layout]="layout" [config]="plotlyConfig" (afterPlot)="afterPlot()"\n                     (relayout)="relayout($event)" (hover)="hover($event)" (unhover)="unhover($event)"\n                     [updateOnLayoutChange]="true" [updateOnDataChange]="true" [debug]="debug"\n                     [style]="{position: \'relative\', width: \'100%\', height: \'100%\'}"></warpview-plotly>\n  </div>\n  <div #toolTip class="wv-tooltip" [ngStyle]="getTooltipPosition()"></div>\n</div>\n',encapsulation:t.ViewEncapsulation.ShadowDom,styles:['/*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */\n/*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */:root{--gts-attrname-font-color:#ed4a7b;--gts-attrvalue-font-color:#000;--gts-classname-font-color:#004eff;--gts-labelname-font-color:#19a979;--gts-labelvalue-font-color:#000;--gts-separator-font-color:#a0a0a0;--gts-stack-font-color:#000;--gts-tree-collapsed-icon:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA0UlEQVQ4T6WTUW7CQAxEPQdozxYb9Qb94Aj9gQSoVCp6lMr21doDZFCQiFCU3YDY//d2PeOFPHnwJC+zAlVdA/jp+/6YmZ+1S0qCPxF5HUAAO3fvSpKS4ENEvm6gfUS0c5JiBma2Ibm/QiQPmbmdSqohquoA7GqSxRaapmkBjBkAeHP336t0UWBmHcnb+VcR4XcJpjDJLjPHkS4tleqZubmNiDHU6gumDQDYuvvh7hpV9V9EXgaA5Ka2jbMjmNk7yZOIfEfE8eFVfuSDLda4JDsD3FNdEckTC0YAAAAASUVORK5CYII=);--gts-tree-expanded-icon:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA7klEQVQ4T82TMW7CQBBF/0g+QOpINEkVCmpaLoBm5COk5QYoaeAY3MDSei2LGu4QKakiBA1tCpTK8kS2sLVe2xSh8XSrnf9m/s4s4c6gO/UYGEBEXlT1bK396bFGIjIJguA7iqJLkVNbYOZXItoQ0QHAzBhz9CCFeAVgCeAjy7Jpmqa/NUBEEgDzktqGuOKKO47j+KsGhGH4lOf5HsDIg5ycyqVYVd+steuGheLAzM9EtPMgW1VdVGWJ6N0YU1gpozVGH+K+gy/uBHR1crXUqNzbQXXhduJ69sd7cxOZ+UFVH5Mk+exb+YGt8n9+5h8up1sReYC0WAAAAABJRU5ErkJggg==);--warp-slider-connect-color:#f90;--warp-slider-handle-bg-color:#fff;--warp-slider-handle-color:#004eff;--warp-slider-handle-shadow:inset 0 0 1px #fff,inset 0 1px 7px silver,0 3px 6px -3px #a0a0a0;--warp-view-annotationtooltip-font-color:#404040;--warp-view-annotationtooltip-value-font-color:#004eff;--warp-view-bar-color:#dc3545;--warp-view-chart-height:100%;--warp-view-chart-legend-bg:#fff;--warp-view-chart-legend-color:#404040;--warp-view-chart-width:100%;--warp-view-datagrid-cell-padding:5px;--warp-view-datagrid-even-bg-color:silver;--warp-view-datagrid-even-color:#000;--warp-view-datagrid-odd-bg-color:#fff;--warp-view-datagrid-odd-color:#404040;--warp-view-font-color:#000;--warp-view-map-margin:0;--warp-view-pagination-active-bg-color:#4caf50;--warp-view-pagination-active-border-color:#4caf50;--warp-view-pagination-active-color:#fff;--warp-view-pagination-bg-color:#fff;--warp-view-pagination-border-color:silver;--warp-view-pagination-disabled-color:silver;--warp-view-pagination-hover-bg-color:silver;--warp-view-pagination-hover-border-color:silver;--warp-view-pagination-hover-color:#000;--warp-view-plot-chart-height:100%;--warp-view-popup-bg-color:#fff;--warp-view-popup-body-bg-color:#fff;--warp-view-popup-body-color:#000;--warp-view-popup-border-color:rgba(0,0,0,0.2);--warp-view-popup-close-color:#404040;--warp-view-popup-header-bg-color:silver;--warp-view-popup-title-color:#404040;--warp-view-resize-handle-color:silver;--warp-view-resize-handle-height:10px;--warp-view-slider-pointer-size:65px;--warp-view-spinner-color:#f90;--warp-view-switch-handle-checked-color:radial-gradient(#fff 15%,#00cd00 100%);--warp-view-switch-handle-color:radial-gradient(#fff 15%,silver 100%);--warp-view-switch-height:30px;--warp-view-switch-inset-checked-color:#00cd00;--warp-view-switch-inset-color:silver;--warp-view-switch-radius:18px;--warp-view-switch-width:100px;--warp-view-tile-height:100%;--warp-view-tile-width:100%}.noData{color:var(--warp-view-chart-legend-color);position:relative;text-align:center;width:100%}\n\n/*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */\n/*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */.gts-classname{color:var(--gts-classname-font-color)}.gts-labelname{color:var(--gts-labelname-font-color)}.gts-attrname{color:var(--gts-attrname-font-color)}.gts-separator{color:var(--gts-separator-font-color)}.gts-labelvalue{color:var(--gts-labelvalue-font-color);font-style:italic}.gts-attrvalue{color:var(--gts-attrvalue-font-color);font-style:italic}.wv-tooltip{background-color:var(--warp-view-chart-legend-bg)!important;border:1px solid grey;border-radius:5px;box-shadow:none;color:var(--warp-view-chart-legend-color)!important;display:none;font-size:10px;height:auto!important;left:-1000px;max-width:50%;min-width:100px;padding:10px;pointer-events:none;position:absolute;text-align:left;width:auto;z-index:999}.wv-tooltip .chip{background-color:#bbb;border:2px solid #454545;border-radius:50%;cursor:pointer;display:inline-block;height:5px;margin-bottom:auto;margin-top:auto;vertical-align:middle;width:5px}:host{display:block;height:100%}:host .bglayer{display:none}:host #chartContainer,:host #chartContainer div{height:100%}:host div.chart{height:var(--warp-view-chart-height);width:var(--warp-view-chart-width)}']}]}],xe.ctorParameters=function(){return[{type:t.ElementRef},{type:t.Renderer2},{type:W},{type:t.NgZone}]};var Le=function(e){function i(a,n,o,r){var s=e.call(this,a,n,o,r)||this;return s.el=a,s.renderer=n,s.sizeService=o,s.ngZone=r,s.isAlone=!1,s.initialChartHeight=400,s.initialMapHeight=400,s.warpViewChartResize=new t.EventEmitter,s.warpViewNewOptions=new t.EventEmitter,s._options=Object.assign(Object.assign({},new P),{showControls:!0,showGTSTree:!0,showDots:!0,timeZone:"UTC",timeUnit:"us",timeMode:"date",bounds:{}}),s._toHide=[],s.showChart=!0,s.showMap=!1,s.timeClipValue="",s.kbdLastKeyPressed=[],s.warningMessage="",s.loading=!1,s.gtsIdList=[],s.kbdCounter=0,s.gtsFilterCount=0,s.gtsBrowserIndex=-1,s._gtsFilter="x",s._type="line",s.chartBounds={tsmin:Number.MAX_VALUE,tsmax:Number.MIN_VALUE,msmax:"",msmin:"",marginLeft:0},s.preventDefaultKeyList=["Escape","/"],s.preventDefaultKeyListInModals=["Escape","ArrowUp","ArrowDown"," ","/"],s.showLine=!1,s.LOG=new Y(i,s._debug),s}return T(i,e),Object.defineProperty(i.prototype,"type",{get:function(){return this._type},set:function(e){this._type=e,this.drawChart()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"gtsFilter",{get:function(){return this._gtsFilter},set:function(e){this._gtsFilter=e,this.drawChart()},enumerable:!1,configurable:!0}),i.prototype.ngOnInit=function(){this._options=this._options||this.defOptions},i.prototype.ngAfterViewInit=function(){this.drawChart(!0),this.resizeArea()},i.prototype.handleKeydown=function(e){this.LOG.debug(["handleKeydown"],e),this.isAlone||this.handleKeyPress(e).then((function(){}))},i.prototype.stateChange=function(e){var t=this;switch(this.LOG.debug(["stateChange"],e),e.id){case"timeSwitch":e.state?this._options.timeMode="timestamp":this._options.timeMode="date",this.drawChart(!0);break;case"typeSwitch":e.state?this._type="step":this._type="line",this.drawChart(!0);break;case"chartSwitch":this.showChart=e.state,this.drawChart(!1);break;case"mapSwitch":this.showMap=e.state,this.showMap&&requestAnimationFrame((function(){return t.map.resize()}))}this.warpViewNewOptions.emit(this._options)},i.prototype.boundsDidChange=function(e){this.LOG.debug(["updateBounds"],e),this._options.bounds=this._options.bounds||{},this._options.bounds.minDate!==e.bounds.min&&this._options.bounds.maxDate!==e.bounds.max&&(this._options.bounds=this._options.bounds||{},this._options.bounds.minDate=e.bounds.min,this._options.bounds.maxDate=e.bounds.max,this.warpViewNewOptions.emit(this._options),"chart"===e.source?this.annotation.updateBounds(e.bounds.min,e.bounds.max,e.bounds.marginLeft):"annotation"===e.source&&this.chart.updateBounds(e.bounds.min,e.bounds.max),this.LOG.debug(["updateBounds"],z.toISOString(e.bounds.min,1,this._options.timeZone),z.toISOString(e.bounds.max,1,this._options.timeZone)),this.line.nativeElement.style.left="-100px")},i.prototype.onWarpViewModalClose=function(){this.mainPlotDiv.nativeElement.focus()},i.prototype.warpViewSelectedGTS=function(e){var t=this;this.LOG.debug(["warpViewSelectedGTS"],e),this._toHide.find((function(t){return t===e.gts.id}))||e.selected?e.selected&&(this._toHide=this._toHide.filter((function(t){return t!==e.gts.id}))):this._toHide.push(e.gts.id),this.LOG.debug(["warpViewSelectedGTS","this._toHide"],this._toHide),this.ngZone.run((function(){t._toHide=U(t._toHide)}))},i.prototype.handleMouseMove=function(e){e.preventDefault(),this.showLine&&this.line&&(this.line.nativeElement.style.left=Math.max(e.pageX-this.left,50)+"px")},i.prototype.handleMouseEnter=function(e){e.preventDefault(),this.left=this.left||this.main.nativeElement.getBoundingClientRect().left,this.showLine=!0,this.line&&this.renderer.setStyle(this.line.nativeElement,"display","block")},i.prototype.handleMouseOut=function(e){this.line&&(this.showLine=!1,this.renderer.setStyle(this.line.nativeElement,"left","-100px"),this.renderer.setStyle(this.line.nativeElement,"display","none"))},i.prototype.update=function(e,t){this.drawChart(t)},i.prototype.inputTextKeyboardEvents=function(e){e.stopImmediatePropagation(),"Enter"===e.key?this.applyFilter():"Escape"===e.key&&(this.pushKbdEvent("Escape"),this.modal.close())},i.prototype.tzSelected=function(e){var t=this.tzSelector.nativeElement.value;this.LOG.debug(["timezone","tzselect"],t,e),delete this._options.bounds,this._options.timeZone=t,this.tzSelector.nativeElement.setAttribute("class","UTC"===t?"defaulttz":"customtz"),this.drawChart()},i.prototype.getTimeClip=function(){return this.LOG.debug(["getTimeClip"],this.chart.getTimeClip()),this.chart.getTimeClip()},i.prototype.resizeChart=function(e){this.initialChartHeight!==e&&(this.LOG.debug(["resizeChart"],e),this.initialChartHeight=e,this.sizeService.change(new F(this.width,e)))},i.prototype.drawChart=function(e){var t=this;if(void 0===e&&(e=!1),this.LOG.debug(["drawCharts"],this._data,this._options),this._data&&this._data.data&&0!==this._data.data.length){if(this.timeClip&&this.timeClip.close(),this.modal&&this.modal.close(),this.LOG.debug(["PPts"],"firstdraw ",e),e){var i=100*z.getDivider(this._options.timeUnit),a=this._data.data;if(a){var n=z.flattenGtsIdArray(a,0).res;n=z.flatDeep(n);var o=!0;n.forEach((function(e){t.gtsIdList.push(e.id),e.v.length>0&&(o=(o=o&&e.v[0][0]>-i&&e.v[0][0]<i)&&e.v[e.v.length-1][0]>-i&&e.v[e.v.length-1][0]<i,e.v.length)})),o&&(this._options.timeMode="timestamp"),this.LOG.debug(["drawCharts","parsed","timestampMode"],o)}}this.gtsList=this._data,this._options=Object.assign({},this._options),this.LOG.debug(["drawCharts","parsed"],this._data,this._options),this.resizeArea()}},i.prototype.focus=function(e){var t=e.path.map((function(e){return(e.id||"").slice(0,4)}));!this.isAlone&&t.indexOf("tzSe")<0&&t.indexOf("map-")<0&&this.mainPlotDiv.nativeElement.focus()},i.prototype.handleKeyPress=function(e){return V(this,void 0,void 0,(function(){var t,i,a=this;return G(this,(function(n){switch(n.label){case 0:return this.LOG.debug(["handleKeyPress"],e),this.preventDefaultKeyList.indexOf(e.key)>=0&&e.preventDefault(),[4,this.timeClip.isOpened()];case 1:return(i=n.sent())?[3,3]:[4,this.modal.isOpened()];case 2:i=n.sent(),n.label=3;case 3:return(t=i)?[3,5]:[4,this.gtsPopupModal.isOpened()];case 4:t=n.sent(),n.label=5;case 5:if(t&&this.preventDefaultKeyListInModals.indexOf(e.key)>=0&&e.preventDefault(),"/"===e.key)this.modal.open(),this.filterInput.nativeElement.focus(),this.filterInput.nativeElement.select();else if("t"===e.key)this.chart.getTimeClip().then((function(e){a.timeClipValue="<p>keep data between\n          "+("timestamp"===a._options.timeMode?e.tsmin:L.default.tz(e.tsmin,a._options.timeZone).toLocaleString())+" and\n          "+("timestamp"===a._options.timeMode?e.tsmax:L.default.tz(e.tsmax,a._options.timeZone).toLocaleString())+"\n          "+("us"!==a._options.timeUnit?" (for a "+a._options.timeUnit+" platform)":"")+"</p>\n          <pre><code>"+Math.round(e.tsmax)+" "+Math.round(e.tsmax-e.tsmin)+" TIMECLIP</code></pre>",a.timeClip.open()}));else if("b"===e.key||"B"===e.key)this.gtsBrowserIndex<0&&(this.gtsBrowserIndex=0),"b"===e.key?(this.gtsBrowserIndex++,this.gtsBrowserIndex===this.gtsIdList.length&&(this.gtsBrowserIndex=0)):(this.gtsBrowserIndex--,this.gtsBrowserIndex<0&&(this.gtsBrowserIndex=this.gtsIdList.length-1)),this._toHide=this.gtsIdList.filter((function(e){return e!==a.gtsIdList[a.gtsBrowserIndex]}));else{if("n"===e.key)return this._toHide=U(this.gtsIdList),[2,!1];"a"===e.key?this._toHide=[]:"Escape"===e.key?(this.timeClip.isOpened().then((function(e){e&&a.timeClip.close()})),this.modal.isOpened().then((function(e){e&&a.modal.close()})),this.gtsPopupModal.isOpened().then((function(e){e&&a.gtsPopupModal.close()}))):this.pushKbdEvent(e.key)}return this.LOG.debug(["handleKeyPress","this.gtsIdList"],this._toHide,this.gtsBrowserIndex),[2]}}))}))},i.prototype.applyFilter=function(){this.gtsFilterCount++,this._gtsFilter=this.gtsFilterCount.toString().slice(0,1)+this.filterInput.nativeElement.value,this.modal.close()},i.prototype.pushKbdEvent=function(e){this.kbdCounter++,this.kbdLastKeyPressed=[e,this.kbdCounter.toString()]},i.prototype.getTZ=function(){return L.default.tz.names()},i.prototype.convert=function(e){return[]},i.prototype.onChartDraw=function(e,t){this.chartBounds&&e&&this.chartBounds.tsmin!==Math.min(this.chartBounds.tsmin,e.tsmin)&&this.chartBounds.tsmax!==Math.max(this.chartBounds.tsmax,e.tsmax)?(this.chartBounds.tsmin=Math.min(this.chartBounds.tsmin,e.tsmin),this.chartBounds.tsmax=Math.max(this.chartBounds.tsmax,e.tsmax),this.annotation.setRealBounds(this.chartBounds),this.chart.setRealBounds(this.chartBounds),this.chartDraw.emit(),this.LOG.debug(["onChartDraw","this.chartBounds"],t,this.chartBounds,e)):this.chartDraw.emit(e),this.resizeArea()},i.prototype.resizeArea=function(){var e=this;if(this.showChart&&this.chart){var t=this.chart.el.nativeElement.getBoundingClientRect().height;t>0?(this.GTSTree&&(t-=this.GTSTree.nativeElement.getBoundingClientRect().height),this.controls&&(t-=this.controls.nativeElement.getBoundingClientRect().height),this.initialChartHeight=t):setTimeout((function(){return e.resizeArea()}),100)}},i}(K);Le.decorators=[{type:t.Component,args:[{selector:"warpview-plot",template:'\x3c!--\n  ~  Copyright 2020  SenX S.A.S.\n  ~\n  ~  Licensed under the Apache License, Version 2.0 (the "License");\n  ~  you may not use this file except in compliance with the License.\n  ~  You may obtain a copy of the License at\n  ~\n  ~    http://www.apache.org/licenses/LICENSE-2.0\n  ~\n  ~  Unless required by applicable law or agreed to in writing, software\n  ~  distributed under the License is distributed on an "AS IS" BASIS,\n  ~  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  ~  See the License for the specific language governing permissions and\n  ~  limitations under the License.\n  ~\n  --\x3e\n\n<div #mainPlotDiv tabindex="0" (click)="focus($event)" id="focusablePlotDiv">\n  <warpview-modal [kbdLastKeyPressed]="kbdLastKeyPressed" modalTitle="TimeClip" #timeClip\n                  (warpViewModalClose)="onWarpViewModalClose()"\n  >\n    <div #timeClipElement [innerHTML]="timeClipValue"></div>\n  </warpview-modal>\n  <warpview-modal [kbdLastKeyPressed]="kbdLastKeyPressed" modalTitle="GTS Filter" #modal\n                  (warpViewModalClose)="onWarpViewModalClose()"\n  >\n    <label for="filterInput">Enter a regular expression to filter GTS.</label>\n    <br />\n    <input tabindex="1" type="text" (keypress)="inputTextKeyboardEvents($event)" #filterInput id="filterInput"\n           (keydown)="inputTextKeyboardEvents($event)" (keyup)="inputTextKeyboardEvents($event)"\n           [value]="gtsFilter.slice(1)"/>\n    <button (click)="applyFilter()" [innerHTML]="_options.popupButtonValidateLabel || \'Apply\'"\n            class="{{_options.popupButtonValidateClass}}" tabindex="2"\n            type="button">\n    </button>\n  </warpview-modal>\n  <warpview-gts-popup [maxToShow]="5" [hiddenData]="_toHide" [gtsList]="gtsList"\n                      [kbdLastKeyPressed]="kbdLastKeyPressed"\n                      [options]="_options" [debug]="debug"\n                      (warpViewModalClose)="onWarpViewModalClose()"\n                      (warpViewSelectedGTS)="warpViewSelectedGTS($event)"\n                      #gtsPopupModal></warpview-gts-popup>\n  <div class="inline" *ngIf="_options.showControls" #controls>\n    <warpview-toggle id="timeSwitch" text1="Date" text2="Timestamp"\n                     (stateChange)="stateChange($event)"\n                     [checked]="_options.timeMode === \'timestamp\'"></warpview-toggle>\n    <warpview-toggle id="typeSwitch" text1="Line" text2="Step"\n                     (stateChange)="stateChange($event)"></warpview-toggle>\n    <warpview-toggle id="chartSwitch" text1="Hide chart" text2="Display chart"\n                     (stateChange)="stateChange($event)"\n                     [checked]="showChart"></warpview-toggle>\n    <warpview-toggle id="mapSwitch" text1="Hide map" text2="Display map"\n                     (stateChange)="stateChange($event)" [checked]="showMap"></warpview-toggle>\n    <div class="tzcontainer">\n      <label for="tzSelector"></label>\n      <select id="tzSelector" class="defaulttz" #tzSelector (change)="tzSelected($event)">\n        <option *ngFor="let z of getTZ()" [value]="z" [selected]="z === \'UTC\'"\n                [ngClass]="{\'defaulttz\' :z === \'UTC\',\'customtz\': z !== \'UTC\'}">{{z}}</option>\n      </select>\n    </div>\n  </div>\n  <div *ngIf="warningMessage" class="warningMessage">{{warningMessage}}</div>\n  <warpview-gts-tree\n    *ngIf="_options.showGTSTree"\n    [data]="gtsList" id="tree" [gtsFilter]="gtsFilter" [debug]="debug" #GTSTree\n    (warpViewSelectedGTS)="warpViewSelectedGTS($event)"\n    [hiddenData]="_toHide" [options]="_options"\n    [kbdLastKeyPressed]="kbdLastKeyPressed"\n  ></warpview-gts-tree>\n  <div [hidden]="!showChart" #main class="main-container"\n       (mouseleave)="handleMouseOut($event)"\n       (mousemove)="handleMouseMove($event)"\n       (mouseenter)="handleMouseEnter($event)">\n    <div class="bar" #line></div>\n    <div class="annotation">\n      <warpview-annotation #annotation\n                           [data]="gtsList" [responsive]="true"\n                           (boundsDidChange)="boundsDidChange($event)"\n                           (chartDraw)="onChartDraw($event, \'annotation\')"\n                           [showLegend]=\'showLegend\' [debug]="debug" [standalone]="false"\n                           [hiddenData]="_toHide" [options]="_options"\n      ></warpview-annotation>\n    </div>\n    <warpview-resize minHeight="100" [initialHeight]="initialChartHeight" [debug]="debug"\n                     (resize)="resizeChart($event)"\n    >\n      <warpview-chart [responsive]="true" [standalone]="false" [data]="gtsList"\n                      [showLegend]="showLegend"\n                      (boundsDidChange)="boundsDidChange($event)"\n                      (chartDraw)="onChartDraw($event, \'chart\')"\n                      #chart [debug]="debug" [hiddenData]="_toHide" [type]="type" [options]="_options"\n      ></warpview-chart>\n    </warpview-resize>\n  </div>\n  <warpview-resize *ngIf="showMap" minHeight="100" [initialHeight]="initialMapHeight" [debug]="debug">\n    <div class="map-container">\n      <warpview-map [options]="_options" #map [data]="gtsList" [debug]="debug" [responsive]="true"\n                    [hiddenData]="_toHide"\n      ></warpview-map>\n    </div>\n  </warpview-resize>\n</div>\n',encapsulation:t.ViewEncapsulation.None,styles:['/*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */\n/*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */:root{--gts-attrname-font-color:#ed4a7b;--gts-attrvalue-font-color:#000;--gts-classname-font-color:#004eff;--gts-labelname-font-color:#19a979;--gts-labelvalue-font-color:#000;--gts-separator-font-color:#a0a0a0;--gts-stack-font-color:#000;--gts-tree-collapsed-icon:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA0UlEQVQ4T6WTUW7CQAxEPQdozxYb9Qb94Aj9gQSoVCp6lMr21doDZFCQiFCU3YDY//d2PeOFPHnwJC+zAlVdA/jp+/6YmZ+1S0qCPxF5HUAAO3fvSpKS4ENEvm6gfUS0c5JiBma2Ibm/QiQPmbmdSqohquoA7GqSxRaapmkBjBkAeHP336t0UWBmHcnb+VcR4XcJpjDJLjPHkS4tleqZubmNiDHU6gumDQDYuvvh7hpV9V9EXgaA5Ka2jbMjmNk7yZOIfEfE8eFVfuSDLda4JDsD3FNdEckTC0YAAAAASUVORK5CYII=);--gts-tree-expanded-icon:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA7klEQVQ4T82TMW7CQBBF/0g+QOpINEkVCmpaLoBm5COk5QYoaeAY3MDSei2LGu4QKakiBA1tCpTK8kS2sLVe2xSh8XSrnf9m/s4s4c6gO/UYGEBEXlT1bK396bFGIjIJguA7iqJLkVNbYOZXItoQ0QHAzBhz9CCFeAVgCeAjy7Jpmqa/NUBEEgDzktqGuOKKO47j+KsGhGH4lOf5HsDIg5ycyqVYVd+steuGheLAzM9EtPMgW1VdVGWJ6N0YU1gpozVGH+K+gy/uBHR1crXUqNzbQXXhduJ69sd7cxOZ+UFVH5Mk+exb+YGt8n9+5h8up1sReYC0WAAAAABJRU5ErkJggg==);--warp-slider-connect-color:#f90;--warp-slider-handle-bg-color:#fff;--warp-slider-handle-color:#004eff;--warp-slider-handle-shadow:inset 0 0 1px #fff,inset 0 1px 7px silver,0 3px 6px -3px #a0a0a0;--warp-view-annotationtooltip-font-color:#404040;--warp-view-annotationtooltip-value-font-color:#004eff;--warp-view-bar-color:#dc3545;--warp-view-chart-height:100%;--warp-view-chart-legend-bg:#fff;--warp-view-chart-legend-color:#404040;--warp-view-chart-width:100%;--warp-view-datagrid-cell-padding:5px;--warp-view-datagrid-even-bg-color:silver;--warp-view-datagrid-even-color:#000;--warp-view-datagrid-odd-bg-color:#fff;--warp-view-datagrid-odd-color:#404040;--warp-view-font-color:#000;--warp-view-map-margin:0;--warp-view-pagination-active-bg-color:#4caf50;--warp-view-pagination-active-border-color:#4caf50;--warp-view-pagination-active-color:#fff;--warp-view-pagination-bg-color:#fff;--warp-view-pagination-border-color:silver;--warp-view-pagination-disabled-color:silver;--warp-view-pagination-hover-bg-color:silver;--warp-view-pagination-hover-border-color:silver;--warp-view-pagination-hover-color:#000;--warp-view-plot-chart-height:100%;--warp-view-popup-bg-color:#fff;--warp-view-popup-body-bg-color:#fff;--warp-view-popup-body-color:#000;--warp-view-popup-border-color:rgba(0,0,0,0.2);--warp-view-popup-close-color:#404040;--warp-view-popup-header-bg-color:silver;--warp-view-popup-title-color:#404040;--warp-view-resize-handle-color:silver;--warp-view-resize-handle-height:10px;--warp-view-slider-pointer-size:65px;--warp-view-spinner-color:#f90;--warp-view-switch-handle-checked-color:radial-gradient(#fff 15%,#00cd00 100%);--warp-view-switch-handle-color:radial-gradient(#fff 15%,silver 100%);--warp-view-switch-height:30px;--warp-view-switch-inset-checked-color:#00cd00;--warp-view-switch-inset-color:silver;--warp-view-switch-radius:18px;--warp-view-switch-width:100px;--warp-view-tile-height:100%;--warp-view-tile-width:100%}.noData{color:var(--warp-view-chart-legend-color);position:relative;text-align:center;width:100%}:host,warp-view-plot,warpview-plot{height:100%;position:relative}:host .main-container,warp-view-plot .main-container,warpview-plot .main-container{position:relative}:host .map-container,warp-view-plot .map-container,warpview-plot .map-container{height:100%;margin-right:20px;position:relative;width:100%}:host .bar,warp-view-plot .bar,warpview-plot .bar{-webkit-backface-visibility:hidden;backface-visibility:hidden;background-color:transparent;border-left:2px dashed var(--warp-view-bar-color);bottom:55px;display:none;height:calc(100% - 75px);left:-100px;overflow:hidden;pointer-events:none;position:absolute;top:0;width:1px;z-index:0}:host .inline,warp-view-plot .inline,warpview-plot .inline{align-items:stretch;display:inline-flex;flex-direction:row;flex-wrap:wrap;justify-content:space-evenly;width:100%}:host label,warp-view-plot label,warpview-plot label{display:inline-block}:host input,warp-view-plot input,warpview-plot input{display:block;font-size:1rem;font-weight:400;line-height:1.5;padding:5px;width:calc(100% - 20px)}:host .annotation,warp-view-plot .annotation,warpview-plot .annotation{height:auto;margin-bottom:0;max-width:100%;padding-top:20px}:host #focusablePlotDiv:focus,warp-view-plot #focusablePlotDiv:focus,warpview-plot #focusablePlotDiv:focus{outline:none}:host #tzSelector,warp-view-plot #tzSelector,warpview-plot #tzSelector{border:none;border-radius:var(--warp-view-switch-radius);box-shadow:inset 0 1px 2px rgba(0,0,0,.12),inset 0 0 2px rgba(0,0,0,.15);color:var(--warp-view-font-color);height:var(--warp-view-switch-height);margin:auto;padding-left:calc(var(--warp-view-switch-radius)/2);padding-right:5px}:host .defaulttz,warp-view-plot .defaulttz,warpview-plot .defaulttz{background:var(--warp-view-switch-inset-color)}:host .customtz,warp-view-plot .customtz,warpview-plot .customtz{background:var(--warp-view-switch-inset-checked-color)}:host .tzcontainer,warp-view-plot .tzcontainer,warpview-plot .tzcontainer{display:flex}:host .chart-container,warp-view-plot .chart-container,warpview-plot .chart-container{height:var(--warp-view-plot-chart-height);width:100%}:host #bottomPlaceHolder,warp-view-plot #bottomPlaceHolder,warpview-plot #bottomPlaceHolder{height:200px;width:100%}:host .warningMessage,warp-view-plot .warningMessage,warpview-plot .warningMessage{background:#faebd7;border:2px solid orange;border-radius:3px;color:orange;display:block;margin:1em;padding:10px}']}]}],Le.ctorParameters=function(){return[{type:t.ElementRef},{type:t.Renderer2},{type:W},{type:t.NgZone}]},Le.propDecorators={mainPlotDiv:[{type:t.ViewChild,args:["mainPlotDiv",{static:!0}]}],timeClip:[{type:t.ViewChild,args:["timeClip",{static:!0}]}],modal:[{type:t.ViewChild,args:["modal",{static:!0}]}],chart:[{type:t.ViewChild,args:["chart"]}],gtsPopupModal:[{type:t.ViewChild,args:["gtsPopupModal"]}],annotation:[{type:t.ViewChild,args:["annotation"]}],map:[{type:t.ViewChild,args:["map"]}],timeClipElement:[{type:t.ViewChild,args:["timeClipElement",{static:!0}]}],GTSTree:[{type:t.ViewChild,args:["GTSTree",{static:!0}]}],controls:[{type:t.ViewChild,args:["controls",{static:!0}]}],filterInput:[{type:t.ViewChild,args:["filterInput",{static:!0}]}],tzSelector:[{type:t.ViewChild,args:["tzSelector"]}],line:[{type:t.ViewChild,args:["line"]}],main:[{type:t.ViewChild,args:["main"]}],type:[{type:t.Input,args:["type"]}],gtsFilter:[{type:t.Input,args:["gtsFilter"]}],isAlone:[{type:t.Input,args:["isAlone"]}],initialChartHeight:[{type:t.Input,args:["initialChartHeight"]}],initialMapHeight:[{type:t.Input,args:["initialMapHeight"]}],warpViewChartResize:[{type:t.Output,args:["warpViewChartResize"]}],warpViewNewOptions:[{type:t.Output,args:["warpViewNewOptions"]}],handleKeydown:[{type:t.HostListener,args:["keydown",["$event"]]}]};var Oe=function(){function e(i,a){this.el=i,this.renderer=a,this.minHeight="10",this.initialHeight=100,this.resize=new t.EventEmitter,this.dragging=!1,this._debug=!1,this.LOG=new Y(e,this._debug)}return Object.defineProperty(e.prototype,"debug",{get:function(){return this._debug},set:function(e){this._debug=e,this.LOG.setDebug(e)},enumerable:!1,configurable:!0}),e.prototype.ngAfterViewInit=function(){var e=this;this.LOG.debug(["ngAfterViewInit"],this.initialHeight),this.renderer.setStyle(this.wrapper.nativeElement,"height",this.initialHeight+"px"),this.handleDiv.nativeElement.addEventListener("mousedown",(function(t){0===t.button&&(e.moveListener=e.handleDraggingMove.bind(e),e.clickUpListener=e.handleDraggingEnd.bind(e),document.addEventListener("mousemove",e.moveListener,!1),document.addEventListener("mouseup",e.clickUpListener,!1))}))},e.prototype.handleDraggingEnd=function(){this.dragging=!1,this.moveListener&&(document.removeEventListener("mousemove",this.moveListener,!1),this.moveListener=null),this.clickUpListener&&(document.removeEventListener("mouseup",this.clickUpListener,!1),this.clickUpListener=null)},e.prototype.handleDraggingMove=function(e){e.preventDefault(),this.LOG.debug(["handleDraggingMove"],e);var t=this.handleDiv.nativeElement.parentElement.getBoundingClientRect().top-document.body.getBoundingClientRect().top,i=e.pageY-t+this.handleDiv.nativeElement.getBoundingClientRect().height/2;i<parseInt(this.minHeight,10)&&(i=parseInt(this.minHeight,10)),this.renderer.setStyle(this.handleDiv.nativeElement.parentElement,"height",i+"px"),this.LOG.debug(["handleDraggingMove"],i),this.resize.emit(i)},e}();Oe.decorators=[{type:t.Component,args:[{selector:"warpview-resize",template:'\x3c!--\n  ~  Copyright 2020  SenX S.A.S.\n  ~\n  ~  Licensed under the Apache License, Version 2.0 (the "License");\n  ~  you may not use this file except in compliance with the License.\n  ~  You may obtain a copy of the License at\n  ~\n  ~    http://www.apache.org/licenses/LICENSE-2.0\n  ~\n  ~  Unless required by applicable law or agreed to in writing, software\n  ~  distributed under the License is distributed on an "AS IS" BASIS,\n  ~  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  ~  See the License for the specific language governing permissions and\n  ~  limitations under the License.\n  ~\n  --\x3e\n\n<div class="wrapper" #wrapper>\n  <ng-content></ng-content>\n  <div class="handle" #handleDiv></div>\n</div>\n',encapsulation:t.ViewEncapsulation.None,styles:['/*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */\n/*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */:root{--gts-attrname-font-color:#ed4a7b;--gts-attrvalue-font-color:#000;--gts-classname-font-color:#004eff;--gts-labelname-font-color:#19a979;--gts-labelvalue-font-color:#000;--gts-separator-font-color:#a0a0a0;--gts-stack-font-color:#000;--gts-tree-collapsed-icon:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA0UlEQVQ4T6WTUW7CQAxEPQdozxYb9Qb94Aj9gQSoVCp6lMr21doDZFCQiFCU3YDY//d2PeOFPHnwJC+zAlVdA/jp+/6YmZ+1S0qCPxF5HUAAO3fvSpKS4ENEvm6gfUS0c5JiBma2Ibm/QiQPmbmdSqohquoA7GqSxRaapmkBjBkAeHP336t0UWBmHcnb+VcR4XcJpjDJLjPHkS4tleqZubmNiDHU6gumDQDYuvvh7hpV9V9EXgaA5Ka2jbMjmNk7yZOIfEfE8eFVfuSDLda4JDsD3FNdEckTC0YAAAAASUVORK5CYII=);--gts-tree-expanded-icon:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA7klEQVQ4T82TMW7CQBBF/0g+QOpINEkVCmpaLoBm5COk5QYoaeAY3MDSei2LGu4QKakiBA1tCpTK8kS2sLVe2xSh8XSrnf9m/s4s4c6gO/UYGEBEXlT1bK396bFGIjIJguA7iqJLkVNbYOZXItoQ0QHAzBhz9CCFeAVgCeAjy7Jpmqa/NUBEEgDzktqGuOKKO47j+KsGhGH4lOf5HsDIg5ycyqVYVd+steuGheLAzM9EtPMgW1VdVGWJ6N0YU1gpozVGH+K+gy/uBHR1crXUqNzbQXXhduJ69sd7cxOZ+UFVH5Mk+exb+YGt8n9+5h8up1sReYC0WAAAAABJRU5ErkJggg==);--warp-slider-connect-color:#f90;--warp-slider-handle-bg-color:#fff;--warp-slider-handle-color:#004eff;--warp-slider-handle-shadow:inset 0 0 1px #fff,inset 0 1px 7px silver,0 3px 6px -3px #a0a0a0;--warp-view-annotationtooltip-font-color:#404040;--warp-view-annotationtooltip-value-font-color:#004eff;--warp-view-bar-color:#dc3545;--warp-view-chart-height:100%;--warp-view-chart-legend-bg:#fff;--warp-view-chart-legend-color:#404040;--warp-view-chart-width:100%;--warp-view-datagrid-cell-padding:5px;--warp-view-datagrid-even-bg-color:silver;--warp-view-datagrid-even-color:#000;--warp-view-datagrid-odd-bg-color:#fff;--warp-view-datagrid-odd-color:#404040;--warp-view-font-color:#000;--warp-view-map-margin:0;--warp-view-pagination-active-bg-color:#4caf50;--warp-view-pagination-active-border-color:#4caf50;--warp-view-pagination-active-color:#fff;--warp-view-pagination-bg-color:#fff;--warp-view-pagination-border-color:silver;--warp-view-pagination-disabled-color:silver;--warp-view-pagination-hover-bg-color:silver;--warp-view-pagination-hover-border-color:silver;--warp-view-pagination-hover-color:#000;--warp-view-plot-chart-height:100%;--warp-view-popup-bg-color:#fff;--warp-view-popup-body-bg-color:#fff;--warp-view-popup-body-color:#000;--warp-view-popup-border-color:rgba(0,0,0,0.2);--warp-view-popup-close-color:#404040;--warp-view-popup-header-bg-color:silver;--warp-view-popup-title-color:#404040;--warp-view-resize-handle-color:silver;--warp-view-resize-handle-height:10px;--warp-view-slider-pointer-size:65px;--warp-view-spinner-color:#f90;--warp-view-switch-handle-checked-color:radial-gradient(#fff 15%,#00cd00 100%);--warp-view-switch-handle-color:radial-gradient(#fff 15%,silver 100%);--warp-view-switch-height:30px;--warp-view-switch-inset-checked-color:#00cd00;--warp-view-switch-inset-color:silver;--warp-view-switch-radius:18px;--warp-view-switch-width:100px;--warp-view-tile-height:100%;--warp-view-tile-width:100%}.noData{color:var(--warp-view-chart-legend-color);position:relative;text-align:center;width:100%}:host .handle,warp-view-resize .handle,warpview-resize .handle{background-color:var(--warp-view-resize-handle-color);background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAFAQMAAABo7865AAAABlBMVEVHcEzMzMzyAv2sAAAAAXRSTlMAQObYZgAAABBJREFUeF5jOAMEEAIEEFwAn3kMwcB6I2AAAAAASUVORK5CYII=");background-position:50%;background-repeat:no-repeat;bottom:0;height:var(--warp-view-resize-handle-height);position:absolute;width:100%}:host .handle:hover,warp-view-resize .handle:hover,warpview-resize .handle:hover{cursor:row-resize}:host .wrapper,warp-view-resize .wrapper,warpview-resize .wrapper{height:100%;padding-bottom:var(--warp-view-resize-handle-height);position:relative;width:100%}']}]}],Oe.ctorParameters=function(){return[{type:t.ElementRef},{type:t.Renderer2}]},Oe.propDecorators={handleDiv:[{type:t.ViewChild,args:["handleDiv",{static:!0}]}],wrapper:[{type:t.ViewChild,args:["wrapper",{static:!0}]}],minHeight:[{type:t.Input,args:["minHeight"]}],initialHeight:[{type:t.Input,args:["initialHeight"]}],debug:[{type:t.Input,args:["debug"]}],resize:[{type:t.Output,args:["resize"]}]};var Ce=function(){function e(){this.mode="timestamp",this.change=new t.EventEmitter,this.show=!1,this._step=0,this.loaded=!1,this.manualRefresh=new t.EventEmitter,this._debug=!1,this.LOG=new Y(e,this.debug),this.LOG.debug(["constructor"],this.debug)}return Object.defineProperty(e.prototype,"min",{get:function(){return this._min},set:function(e){this.LOG.debug(["min"],e),this._min=e,this.setOptions()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"max",{get:function(){return this._max},set:function(e){this.LOG.debug(["max"],e),this._max=e,this.setOptions()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"step",{get:function(){return this._step},set:function(e){this.LOG.debug(["step"],e),this._step!==e&&(this._step=e,this.setOptions())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"debug",{get:function(){return this._debug},set:function(e){this._debug=e,this.LOG.setDebug(e)},enumerable:!1,configurable:!0}),e.prototype.ngAfterViewInit=function(){this.loaded=!1,this.setOptions()},e.prototype.setOptions=function(){var e=this;if(this._min||this._max){this.LOG.debug(["_step"],this._step);var t=Math.min(Math.max(this.value||Number.MIN_VALUE,this._min),this._max);if(t!==this.value&&this.loaded&&this.change.emit(t),this.value=t,this.loaded=!0,this.LOG.debug(["noUiSlider"],this.slider),this.slider)if(this._uiSlider)this.updateSliderOptions();else{var i={start:[this.value+1],tooltips:[this.getFormat()],range:{min:[this._min],max:[this._max]}};this._step&&this._step>0&&(i.step=Math.floor((this._max-this._min)/this._step)),this._uiSlider=v.create(this.slider.nativeElement,i),this._uiSlider.on("end",(function(t){e.LOG.debug(["onChange"],t),e.value=parseInt(t[0],10),e.change.emit({value:parseInt(t[0],10)})}))}}},e.prototype.updateSliderOptions=function(){this.slider.nativeElement.noUiSlider.set([this.value]);var e={range:{min:[this._min],max:[this._max]}};this._step&&this._step>0&&(e.step=Math.floor((this._max-this._min)/this._step)),this.slider.nativeElement.noUiSlider.updateOptions(e)},e.prototype.format=function(e){return"timestamp"!==this.mode?I.default(e).utc(!0).format("YYYY/MM/DD hh:mm:ss"):e.toString()},e.prototype.getFormat=function(){var e=this;return{to:function(t){return e.format(t)},from:function(e){return e.replace(",-","")}}},e}();Ce.decorators=[{type:t.Component,args:[{selector:"warpview-slider",template:'\x3c!--\n  ~  Copyright 2020  SenX S.A.S.\n  ~\n  ~  Licensed under the Apache License, Version 2.0 (the "License");\n  ~  you may not use this file except in compliance with the License.\n  ~  You may obtain a copy of the License at\n  ~\n  ~    http://www.apache.org/licenses/LICENSE-2.0\n  ~\n  ~  Unless required by applicable law or agreed to in writing, software\n  ~  distributed under the License is distributed on an "AS IS" BASIS,\n  ~  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  ~  See the License for the specific language governing permissions and\n  ~  limitations under the License.\n  ~\n  --\x3e\n\n<div class="custom-slider" *ngIf="loaded">\n  <div style="display: flex; width: 100%;justify-content: flex-start;">\n    <div>{{format(_min)}}</div>\n    <div #slider style="flex-grow: 4"></div>\n    <div>{{format(_max)}}</div>\n  </div>\n</div>\n',encapsulation:t.ViewEncapsulation.ShadowDom,styles:['/*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */@import url(/home/xavier/workspace/warp-view/node_modules/nouislider/distribute/nouislider.min.css);\n/*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */:root{--gts-attrname-font-color:#ed4a7b;--gts-attrvalue-font-color:#000;--gts-classname-font-color:#004eff;--gts-labelname-font-color:#19a979;--gts-labelvalue-font-color:#000;--gts-separator-font-color:#a0a0a0;--gts-stack-font-color:#000;--gts-tree-collapsed-icon:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA0UlEQVQ4T6WTUW7CQAxEPQdozxYb9Qb94Aj9gQSoVCp6lMr21doDZFCQiFCU3YDY//d2PeOFPHnwJC+zAlVdA/jp+/6YmZ+1S0qCPxF5HUAAO3fvSpKS4ENEvm6gfUS0c5JiBma2Ibm/QiQPmbmdSqohquoA7GqSxRaapmkBjBkAeHP336t0UWBmHcnb+VcR4XcJpjDJLjPHkS4tleqZubmNiDHU6gumDQDYuvvh7hpV9V9EXgaA5Ka2jbMjmNk7yZOIfEfE8eFVfuSDLda4JDsD3FNdEckTC0YAAAAASUVORK5CYII=);--gts-tree-expanded-icon:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA7klEQVQ4T82TMW7CQBBF/0g+QOpINEkVCmpaLoBm5COk5QYoaeAY3MDSei2LGu4QKakiBA1tCpTK8kS2sLVe2xSh8XSrnf9m/s4s4c6gO/UYGEBEXlT1bK396bFGIjIJguA7iqJLkVNbYOZXItoQ0QHAzBhz9CCFeAVgCeAjy7Jpmqa/NUBEEgDzktqGuOKKO47j+KsGhGH4lOf5HsDIg5ycyqVYVd+steuGheLAzM9EtPMgW1VdVGWJ6N0YU1gpozVGH+K+gy/uBHR1crXUqNzbQXXhduJ69sd7cxOZ+UFVH5Mk+exb+YGt8n9+5h8up1sReYC0WAAAAABJRU5ErkJggg==);--warp-slider-connect-color:#f90;--warp-slider-handle-bg-color:#fff;--warp-slider-handle-color:#004eff;--warp-slider-handle-shadow:inset 0 0 1px #fff,inset 0 1px 7px silver,0 3px 6px -3px #a0a0a0;--warp-view-annotationtooltip-font-color:#404040;--warp-view-annotationtooltip-value-font-color:#004eff;--warp-view-bar-color:#dc3545;--warp-view-chart-height:100%;--warp-view-chart-legend-bg:#fff;--warp-view-chart-legend-color:#404040;--warp-view-chart-width:100%;--warp-view-datagrid-cell-padding:5px;--warp-view-datagrid-even-bg-color:silver;--warp-view-datagrid-even-color:#000;--warp-view-datagrid-odd-bg-color:#fff;--warp-view-datagrid-odd-color:#404040;--warp-view-font-color:#000;--warp-view-map-margin:0;--warp-view-pagination-active-bg-color:#4caf50;--warp-view-pagination-active-border-color:#4caf50;--warp-view-pagination-active-color:#fff;--warp-view-pagination-bg-color:#fff;--warp-view-pagination-border-color:silver;--warp-view-pagination-disabled-color:silver;--warp-view-pagination-hover-bg-color:silver;--warp-view-pagination-hover-border-color:silver;--warp-view-pagination-hover-color:#000;--warp-view-plot-chart-height:100%;--warp-view-popup-bg-color:#fff;--warp-view-popup-body-bg-color:#fff;--warp-view-popup-body-color:#000;--warp-view-popup-border-color:rgba(0,0,0,0.2);--warp-view-popup-close-color:#404040;--warp-view-popup-header-bg-color:silver;--warp-view-popup-title-color:#404040;--warp-view-resize-handle-color:silver;--warp-view-resize-handle-height:10px;--warp-view-slider-pointer-size:65px;--warp-view-spinner-color:#f90;--warp-view-switch-handle-checked-color:radial-gradient(#fff 15%,#00cd00 100%);--warp-view-switch-handle-color:radial-gradient(#fff 15%,silver 100%);--warp-view-switch-height:30px;--warp-view-switch-inset-checked-color:#00cd00;--warp-view-switch-inset-color:silver;--warp-view-switch-radius:18px;--warp-view-switch-width:100px;--warp-view-tile-height:100%;--warp-view-tile-width:100%}.noData{color:var(--warp-view-chart-legend-color);position:relative;text-align:center;width:100%}\n\n/*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */.noUi-origin{left:100%}.noUi-target{margin:0 20px 40px;max-width:100%}.noUi-connect{background:var(--warp-slider-connect-color);left:0}.noUi-handle{background:var(--warp-slider-handle-bg-color);border:1px solid var(--warp-slider-handle-color);border-radius:3px;box-shadow:var(--warp-slider-handle-shadow);cursor:pointer}.noUi-handle:after,.noUi-handle:before{background:var(--warp-slider-handle-color)}.noUi-tooltip{display:none}.noUi-active .noUi-tooltip{display:block}:host .custom-slider{margin-top:50px}']}]}],Ce.ctorParameters=function(){return[]},Ce.propDecorators={slider:[{type:t.ViewChild,args:["slider"]}],min:[{type:t.Input,args:["min"]}],max:[{type:t.Input,args:["max"]}],value:[{type:t.Input,args:["value"]}],step:[{type:t.Input,args:["step"]}],mode:[{type:t.Input,args:["mode"]}],debug:[{type:t.Input,args:["debug"]}],change:[{type:t.Output,args:["change"]}]};var Ie=function(e){function t(){var i=e.call(this)||this;return i.LOG=new Y(t,i.debug),i.LOG.debug(["constructor"],i.debug),i}return T(t,e),t.prototype.ngOnInit=function(){this.setOptions(),this.minValue=this.minValue||this._min,this.maxValue=this.maxValue||this._max},t.prototype.ngAfterViewInit=function(){this.loaded=!1,this.setOptions()},t.prototype.onChange=function(e){this.change.emit({value:this.minValue,highValue:this.maxValue}),this.LOG.debug(["onChange"],e,{value:this.minValue,highValue:this.maxValue})},t.prototype.setOptions=function(){var e=this;if(this.LOG.debug(["setOptions"],this._min,this._max),(this._min||this._max)&&(this.loaded=!0,this.value=Math.max(this.value||Number.MIN_VALUE,this._min),this.LOG.debug(["noUiSlider"],this.slider),this.slider))if(this._uiSlider)this.updateSliderOptions();else{var t={start:[this.minValue,this.maxValue],connect:!0,tooltips:[this.getFormat(),this.getFormat()],range:{min:[this._min],max:[this._max]}};this._step&&this._step>0&&(t.step=Math.floor((this._max-this._min)/this._step)),v.create(this.slider.nativeElement,t).on("end",(function(t){e.LOG.debug(["onChange"],t),e.change.emit({min:parseInt(t[0],10),max:parseInt(t[1],10)})}))}},t}(Ce);Ie.decorators=[{type:t.Component,args:[{selector:"warpview-range-slider",template:'\x3c!--\n  ~  Copyright 2020  SenX S.A.S.\n  ~\n  ~  Licensed under the Apache License, Version 2.0 (the "License");\n  ~  you may not use this file except in compliance with the License.\n  ~  You may obtain a copy of the License at\n  ~\n  ~    http://www.apache.org/licenses/LICENSE-2.0\n  ~\n  ~  Unless required by applicable law or agreed to in writing, software\n  ~  distributed under the License is distributed on an "AS IS" BASIS,\n  ~  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  ~  See the License for the specific language governing permissions and\n  ~  limitations under the License.\n  ~\n  --\x3e\n\n<div class="custom-slider" *ngIf="loaded">\n  <div style="display: flex; width: 100%;justify-content: flex-start;">\n    <div>{{format(_min)}}</div>\n    <div #slider style="flex-grow: 4"></div>\n    <div>{{format(_max)}}</div>\n  </div>\n</div>\n',encapsulation:t.ViewEncapsulation.ShadowDom,styles:['/*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */\n/*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */:root{--gts-attrname-font-color:#ed4a7b;--gts-attrvalue-font-color:#000;--gts-classname-font-color:#004eff;--gts-labelname-font-color:#19a979;--gts-labelvalue-font-color:#000;--gts-separator-font-color:#a0a0a0;--gts-stack-font-color:#000;--gts-tree-collapsed-icon:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA0UlEQVQ4T6WTUW7CQAxEPQdozxYb9Qb94Aj9gQSoVCp6lMr21doDZFCQiFCU3YDY//d2PeOFPHnwJC+zAlVdA/jp+/6YmZ+1S0qCPxF5HUAAO3fvSpKS4ENEvm6gfUS0c5JiBma2Ibm/QiQPmbmdSqohquoA7GqSxRaapmkBjBkAeHP336t0UWBmHcnb+VcR4XcJpjDJLjPHkS4tleqZubmNiDHU6gumDQDYuvvh7hpV9V9EXgaA5Ka2jbMjmNk7yZOIfEfE8eFVfuSDLda4JDsD3FNdEckTC0YAAAAASUVORK5CYII=);--gts-tree-expanded-icon:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA7klEQVQ4T82TMW7CQBBF/0g+QOpINEkVCmpaLoBm5COk5QYoaeAY3MDSei2LGu4QKakiBA1tCpTK8kS2sLVe2xSh8XSrnf9m/s4s4c6gO/UYGEBEXlT1bK396bFGIjIJguA7iqJLkVNbYOZXItoQ0QHAzBhz9CCFeAVgCeAjy7Jpmqa/NUBEEgDzktqGuOKKO47j+KsGhGH4lOf5HsDIg5ycyqVYVd+steuGheLAzM9EtPMgW1VdVGWJ6N0YU1gpozVGH+K+gy/uBHR1crXUqNzbQXXhduJ69sd7cxOZ+UFVH5Mk+exb+YGt8n9+5h8up1sReYC0WAAAAABJRU5ErkJggg==);--warp-slider-connect-color:#f90;--warp-slider-handle-bg-color:#fff;--warp-slider-handle-color:#004eff;--warp-slider-handle-shadow:inset 0 0 1px #fff,inset 0 1px 7px silver,0 3px 6px -3px #a0a0a0;--warp-view-annotationtooltip-font-color:#404040;--warp-view-annotationtooltip-value-font-color:#004eff;--warp-view-bar-color:#dc3545;--warp-view-chart-height:100%;--warp-view-chart-legend-bg:#fff;--warp-view-chart-legend-color:#404040;--warp-view-chart-width:100%;--warp-view-datagrid-cell-padding:5px;--warp-view-datagrid-even-bg-color:silver;--warp-view-datagrid-even-color:#000;--warp-view-datagrid-odd-bg-color:#fff;--warp-view-datagrid-odd-color:#404040;--warp-view-font-color:#000;--warp-view-map-margin:0;--warp-view-pagination-active-bg-color:#4caf50;--warp-view-pagination-active-border-color:#4caf50;--warp-view-pagination-active-color:#fff;--warp-view-pagination-bg-color:#fff;--warp-view-pagination-border-color:silver;--warp-view-pagination-disabled-color:silver;--warp-view-pagination-hover-bg-color:silver;--warp-view-pagination-hover-border-color:silver;--warp-view-pagination-hover-color:#000;--warp-view-plot-chart-height:100%;--warp-view-popup-bg-color:#fff;--warp-view-popup-body-bg-color:#fff;--warp-view-popup-body-color:#000;--warp-view-popup-border-color:rgba(0,0,0,0.2);--warp-view-popup-close-color:#404040;--warp-view-popup-header-bg-color:silver;--warp-view-popup-title-color:#404040;--warp-view-resize-handle-color:silver;--warp-view-resize-handle-height:10px;--warp-view-slider-pointer-size:65px;--warp-view-spinner-color:#f90;--warp-view-switch-handle-checked-color:radial-gradient(#fff 15%,#00cd00 100%);--warp-view-switch-handle-color:radial-gradient(#fff 15%,silver 100%);--warp-view-switch-height:30px;--warp-view-switch-inset-checked-color:#00cd00;--warp-view-switch-inset-color:silver;--warp-view-switch-radius:18px;--warp-view-switch-width:100px;--warp-view-tile-height:100%;--warp-view-tile-width:100%}.noData{color:var(--warp-view-chart-legend-color);position:relative;text-align:center;width:100%}\n\n/*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */.noUi-origin{left:100%}.noUi-target{margin:0 20px 40px;max-width:100%}.noUi-connect{background:var(--warp-slider-connect-color);left:0}.noUi-handle{background:var(--warp-slider-handle-bg-color);border:1px solid var(--warp-slider-handle-color);border-radius:3px;box-shadow:var(--warp-slider-handle-shadow);cursor:pointer}.noUi-handle:after,.noUi-handle:before{background:var(--warp-slider-handle-color)}.noUi-tooltip{display:none}.noUi-active .noUi-tooltip{display:block}:host .custom-slider{margin-top:50px}']}]}],Ie.ctorParameters=function(){return[]},Ie.propDecorators={slider:[{type:t.ViewChild,args:["slider"]}],minValue:[{type:t.Input,args:["minValue"]}],maxValue:[{type:t.Input,args:["maxValue"]}]};var Ee=function(e){function t(i,a,n,o){var r=e.call(this,i,a,n,o)||this;return r.el=i,r.renderer=a,r.sizeService=n,r.ngZone=o,r.layout={showlegend:!1,xaxis:{},yaxis:{},margin:{t:10,b:25,r:10,l:50}},r._type="histogram2d",r.visibility=[],r.visibilityStatus="unknown",r.maxTick=0,r.minTick=0,r.visibleGtsId=[],r.LOG=new Y(t,r._debug),r}return T(t,e),Object.defineProperty(t.prototype,"type",{set:function(e){this._type=e,this.drawChart()},enumerable:!1,configurable:!0}),t.prototype.update=function(e){this.drawChart()},t.prototype.drawChart=function(){this.initChart(this.el)&&(this.plotlyConfig.scrollZoom=!0,this.buildGraph())},t.prototype.convert=function(e){var t=this,i=this._options.histo||{histnorm:"density",histfunc:"count"},a=[];this.LOG.debug(["convert"],this._options),this.visibility=[];var n=z.flatDeep(z.flattenGtsIdArray([e.data],0).res)||[];this.maxTick=Number.NEGATIVE_INFINITY,this.minTick=Number.POSITIVE_INFINITY,this.visibleGtsId=[];n.filter((function(e){return t.LOG.debug(["convert"],z.isGtsToPlot(e)),e.v&&!z.isGtsToPlot(e)}));return n=n.filter((function(e){return e.v&&z.isGtsToPlot(e)})),"unknown"===this.visibilityStatus&&(this.visibilityStatus=n.length>0?"plottableShown":"nothingPlottable"),this._options.timeMode&&"timestamp"===this._options.timeMode?this.layout.xaxis.type="linear":this.layout.xaxis.type="date",n.forEach((function(n,o){if(n.v&&z.isGtsToPlot(n)){var r=z.serializeGtsMetadata(n),s=M.getColor(o,t._options.scheme),p=((e.params||[])[n.id]||{datasetColor:s}).datasetColor||s,l={type:t._type,histnorm:i.histnorm||"density",histfunc:i.histfunc||"count",contours:{showlabels:!0,labelfont:{color:"white"}},colorbar:{tickcolor:t.getGridColor(t.el.nativeElement),thickness:0,tickfont:{color:t.getLabelColor(t.el.nativeElement)},x:1+n.id/20,xpad:0},showscale:t.showLegend,colorscale:M.getColorGradient(n.id,t._options.scheme),autocolorscale:!1,name:r,text:r,x:[],y:[],line:{color:p},hoverinfo:"none",connectgaps:!1,visible:t._hiddenData.filter((function(e){return e===n.id})).length>=0};n.v.forEach((function(e){var i=e[0];l.y.push(e[e.length-1]),t._options.timeMode&&"timestamp"===t._options.timeMode?l.x.push(i):l.x.push(z.toISOString(i,t.divider,t._options.timeZone))})),a.push(l)}})),this.LOG.debug(["convert","dataset"],a),a},t.prototype.buildGraph=function(){this.LOG.debug(["drawChart","this.layout"],this.responsive),this.LOG.debug(["drawChart","this.layout"],this.layout),this.LOG.debug(["drawChart","this.plotlyConfig"],this.plotlyConfig),this.layout.showlegend=this.showLegend,this.layout.yaxis.color=this.getGridColor(this.el.nativeElement),this.layout.xaxis.color=this.getGridColor(this.el.nativeElement),this.loading=!1},t}(K);Ee.decorators=[{type:t.Component,args:[{selector:"warpview-spectrum",template:'\x3c!--\n  ~  Copyright 2020  SenX S.A.S.\n  ~\n  ~  Licensed under the Apache License, Version 2.0 (the "License");\n  ~  you may not use this file except in compliance with the License.\n  ~  You may obtain a copy of the License at\n  ~\n  ~    http://www.apache.org/licenses/LICENSE-2.0\n  ~\n  ~  Unless required by applicable law or agreed to in writing, software\n  ~  distributed under the License is distributed on an "AS IS" BASIS,\n  ~  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  ~  See the License for the specific language governing permissions and\n  ~  limitations under the License.\n  ~\n  --\x3e\n\n<div id="chartContainer" #chartContainer>\n  <warpview-spinner *ngIf="loading" message="Parsing data"></warpview-spinner>\n  <p class="noData" *ngIf="noData">No data to display</p>\n  <div *ngIf="!loading && !noData">\n    <warpview-plotly #graph\n                     [data]="plotlyData" [layout]="layout" [config]="plotlyConfig" (afterPlot)="afterPlot()"\n                     (relayout)="relayout($event)" (hover)="hover($event)" (unhover)="unhover($event)"\n                     [updateOnLayoutChange]="true" [updateOnDataChange]="true" [debug]="debug"\n                     [style]="{position: \'relative\', width: \'100%\', height: \'100%\'}"></warpview-plotly>\n  </div>\n  <div #toolTip class="wv-tooltip" [ngStyle]="getTooltipPosition()"></div>\n</div>\n',encapsulation:t.ViewEncapsulation.ShadowDom,styles:['/*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */\n/*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */:root{--gts-attrname-font-color:#ed4a7b;--gts-attrvalue-font-color:#000;--gts-classname-font-color:#004eff;--gts-labelname-font-color:#19a979;--gts-labelvalue-font-color:#000;--gts-separator-font-color:#a0a0a0;--gts-stack-font-color:#000;--gts-tree-collapsed-icon:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA0UlEQVQ4T6WTUW7CQAxEPQdozxYb9Qb94Aj9gQSoVCp6lMr21doDZFCQiFCU3YDY//d2PeOFPHnwJC+zAlVdA/jp+/6YmZ+1S0qCPxF5HUAAO3fvSpKS4ENEvm6gfUS0c5JiBma2Ibm/QiQPmbmdSqohquoA7GqSxRaapmkBjBkAeHP336t0UWBmHcnb+VcR4XcJpjDJLjPHkS4tleqZubmNiDHU6gumDQDYuvvh7hpV9V9EXgaA5Ka2jbMjmNk7yZOIfEfE8eFVfuSDLda4JDsD3FNdEckTC0YAAAAASUVORK5CYII=);--gts-tree-expanded-icon:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA7klEQVQ4T82TMW7CQBBF/0g+QOpINEkVCmpaLoBm5COk5QYoaeAY3MDSei2LGu4QKakiBA1tCpTK8kS2sLVe2xSh8XSrnf9m/s4s4c6gO/UYGEBEXlT1bK396bFGIjIJguA7iqJLkVNbYOZXItoQ0QHAzBhz9CCFeAVgCeAjy7Jpmqa/NUBEEgDzktqGuOKKO47j+KsGhGH4lOf5HsDIg5ycyqVYVd+steuGheLAzM9EtPMgW1VdVGWJ6N0YU1gpozVGH+K+gy/uBHR1crXUqNzbQXXhduJ69sd7cxOZ+UFVH5Mk+exb+YGt8n9+5h8up1sReYC0WAAAAABJRU5ErkJggg==);--warp-slider-connect-color:#f90;--warp-slider-handle-bg-color:#fff;--warp-slider-handle-color:#004eff;--warp-slider-handle-shadow:inset 0 0 1px #fff,inset 0 1px 7px silver,0 3px 6px -3px #a0a0a0;--warp-view-annotationtooltip-font-color:#404040;--warp-view-annotationtooltip-value-font-color:#004eff;--warp-view-bar-color:#dc3545;--warp-view-chart-height:100%;--warp-view-chart-legend-bg:#fff;--warp-view-chart-legend-color:#404040;--warp-view-chart-width:100%;--warp-view-datagrid-cell-padding:5px;--warp-view-datagrid-even-bg-color:silver;--warp-view-datagrid-even-color:#000;--warp-view-datagrid-odd-bg-color:#fff;--warp-view-datagrid-odd-color:#404040;--warp-view-font-color:#000;--warp-view-map-margin:0;--warp-view-pagination-active-bg-color:#4caf50;--warp-view-pagination-active-border-color:#4caf50;--warp-view-pagination-active-color:#fff;--warp-view-pagination-bg-color:#fff;--warp-view-pagination-border-color:silver;--warp-view-pagination-disabled-color:silver;--warp-view-pagination-hover-bg-color:silver;--warp-view-pagination-hover-border-color:silver;--warp-view-pagination-hover-color:#000;--warp-view-plot-chart-height:100%;--warp-view-popup-bg-color:#fff;--warp-view-popup-body-bg-color:#fff;--warp-view-popup-body-color:#000;--warp-view-popup-border-color:rgba(0,0,0,0.2);--warp-view-popup-close-color:#404040;--warp-view-popup-header-bg-color:silver;--warp-view-popup-title-color:#404040;--warp-view-resize-handle-color:silver;--warp-view-resize-handle-height:10px;--warp-view-slider-pointer-size:65px;--warp-view-spinner-color:#f90;--warp-view-switch-handle-checked-color:radial-gradient(#fff 15%,#00cd00 100%);--warp-view-switch-handle-color:radial-gradient(#fff 15%,silver 100%);--warp-view-switch-height:30px;--warp-view-switch-inset-checked-color:#00cd00;--warp-view-switch-inset-color:silver;--warp-view-switch-radius:18px;--warp-view-switch-width:100px;--warp-view-tile-height:100%;--warp-view-tile-width:100%}.noData{color:var(--warp-view-chart-legend-color);position:relative;text-align:center;width:100%}\n\n/*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */\n/*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */.gts-classname{color:var(--gts-classname-font-color)}.gts-labelname{color:var(--gts-labelname-font-color)}.gts-attrname{color:var(--gts-attrname-font-color)}.gts-separator{color:var(--gts-separator-font-color)}.gts-labelvalue{color:var(--gts-labelvalue-font-color);font-style:italic}.gts-attrvalue{color:var(--gts-attrvalue-font-color);font-style:italic}.wv-tooltip{background-color:var(--warp-view-chart-legend-bg)!important;border:1px solid grey;border-radius:5px;box-shadow:none;color:var(--warp-view-chart-legend-color)!important;display:none;font-size:10px;height:auto!important;left:-1000px;max-width:50%;min-width:100px;padding:10px;pointer-events:none;position:absolute;text-align:left;width:auto;z-index:999}.wv-tooltip .chip{background-color:#bbb;border:2px solid #454545;border-radius:50%;cursor:pointer;display:inline-block;height:5px;margin-bottom:auto;margin-top:auto;vertical-align:middle;width:5px}:host{display:block}:host,:host #chartContainer,:host #chartContainer div{height:100%}:host div.chart{height:var(--warp-view-chart-height);width:var(--warp-view-chart-width)}:host .executionErrorText{background:#faebd7;border:2px solid red;border-radius:3px;color:red;padding:10px;position:absolute;top:-30px}']}]}],Ee.ctorParameters=function(){return[{type:t.ElementRef},{type:t.Renderer2},{type:W},{type:t.NgZone}]},Ee.propDecorators={type:[{type:t.Input,args:["type"]}]};var De=function(){function e(i,a,n){this.iterableDiffers=i,this.el=a,this.keyValueDiffers=n,this.defaultClassName="js-plotly-plot",this._debug=!1,this.revision=0,this.useResizeHandler=!1,this.updateOnLayoutChange=!0,this.updateOnDataChange=!0,this.updateOnlyWithRevision=!0,this.initialized=new t.EventEmitter,this.update=new t.EventEmitter,this.purge=new t.EventEmitter,this.error=new t.EventEmitter,this.afterExport=new t.EventEmitter,this.afterPlot=new t.EventEmitter,this.animated=new t.EventEmitter,this.animatingFrame=new t.EventEmitter,this.animationInterrupted=new t.EventEmitter,this.autoSize=new t.EventEmitter,this.beforeExport=new t.EventEmitter,this.buttonClicked=new t.EventEmitter,this.click=new t.EventEmitter,this.plotly_click=new t.EventEmitter,this.clickAnnotation=new t.EventEmitter,this.deselect=new t.EventEmitter,this.doubleClick=new t.EventEmitter,this.framework=new t.EventEmitter,this.hover=new t.EventEmitter,this.legendClick=new t.EventEmitter,this.legendDoubleClick=new t.EventEmitter,this.relayout=new t.EventEmitter,this.restyle=new t.EventEmitter,this.redraw=new t.EventEmitter,this.selected=new t.EventEmitter,this.selecting=new t.EventEmitter,this.sliderChange=new t.EventEmitter,this.sliderEnd=new t.EventEmitter,this.sliderStart=new t.EventEmitter,this.transitioning=new t.EventEmitter,this.transitionInterrupted=new t.EventEmitter,this.unhover=new t.EventEmitter,this.relayouting=new t.EventEmitter,this.eventNames=["hover","unhover","relayout"],this.LOG=new Y(e,this.debug)}return Object.defineProperty(e.prototype,"data",{get:function(){return this._data},set:function(e){this._data=e,this.updatePlot(),this.updateWindowResizeHandler()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"layout",{get:function(){return this._layout},set:function(e){if(this._layout=e,this._data&&this.plotEl.nativeElement)try{y.relayout(this.plotEl.nativeElement,e),this.updateWindowResizeHandler()}catch(e){}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"config",{get:function(){return this._config},set:function(e){this._config=e,this.updatePlot(),this.updateWindowResizeHandler()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"debug",{get:function(){return this._debug},set:function(e){this._debug=e},enumerable:!1,configurable:!0}),e.prototype.ngOnInit=function(){var e=this;this.createPlot().then((function(){var t=e.createFigure();e.LOG.debug(["figure"],t),e.initialized.emit(e.plotlyInstance)}))},e.prototype.ngOnDestroy=function(){"function"==typeof this.resizeHandler&&(this.getWindow().removeEventListener("resize",this.resizeHandler),this.resizeHandler=void 0);var e=this.createFigure();this.purge.emit(e),this.remove(this.plotlyInstance)},e.prototype.ngDoCheck=function(){if(this.updateOnlyWithRevision)return!1;var e=!1;this.updateOnLayoutChange&&(this.layoutDiffer?this.layoutDiffer.diff(this.layout)&&(e=!0):this.layout?this.layoutDiffer=this.keyValueDiffers.find(this.layout).create():this.layoutDiffer=void 0);this.updateOnDataChange&&(this.dataDiffer?this.dataDiffer.diff(this.data)&&(e=!0):Array.isArray(this.data)?this.dataDiffer=this.iterableDiffers.find(this.data).create(this.dataDifferTrackBy):this.dataDiffer=void 0);e&&this.plotlyInstance&&this.updatePlot()},e.prototype.getWindow=function(){return window},e.prototype.getBoundingClientRect=function(){return this.rect},e.prototype.getClassName=function(){var e=[this.defaultClassName];return Array.isArray(this.className)?e=e.concat(this.className):this.className&&e.push(this.className),e.join(" ")},e.prototype.restyleChart=function(e,t){y.restyle(this.plotlyInstance,e,t)},e.prototype.createPlot=function(){var e=this;return this.LOG.debug(["createPlot"],this.data,this.layout,this.config,this.plotlyInstance),y.react(this.plotEl.nativeElement,this.data,this.layout,this.config).then((function(t){e.rect=e.el.nativeElement.getBoundingClientRect(),e.plotlyInstance=t,e.LOG.debug(["plotlyInstance"],t),e.getWindow().gd=e.debug?t:void 0,e.eventNames.forEach((function(i){var a="plotly_"+i.toLowerCase();t.on(a,(function(t){e.LOG.debug(["plotlyEvent",a],t),e[i].emit(t)}))})),t.on("plotly_click",(function(t){e.click.emit(t),e.plotly_click.emit(t)})),e.updateWindowResizeHandler(),e.afterPlot.emit(t)}),(function(t){console.error("Error while plotting:",t),e.error.emit(t)}))},e.prototype.createFigure=function(){var e=this.plotlyInstance;return{data:e.data,layout:e.layout,frames:e._transitionData?e._transitionData._frames:null}},e.prototype.updatePlot=function(){var e=this;if(this.LOG.debug(["updatePlot"],this.data,this.layout,Object.assign({},this.config)),this.plotlyInstance)y.purge(this.plotlyInstance),this.createPlot().then((function(){var t=e.createFigure();e.update.emit(t)}),(function(t){console.error("Error while updating plot:",t),e.error.emit(t)}));else{var t=new Error("Plotly component wasn't initialized");this.error.emit(t)}},e.prototype.updateWindowResizeHandler=function(){var e=this;this.useResizeHandler?void 0===this.resizeHandler&&(this.resizeHandler=function(){return setTimeout((function(){return y.Plots.resize(e.plotlyInstance)}))},this.getWindow().addEventListener("resize",this.resizeHandler)):"function"==typeof this.resizeHandler&&(this.getWindow().removeEventListener("resize",this.resizeHandler),this.resizeHandler=void 0)},e.prototype.dataDifferTrackBy=function(e,t){var i=Object.assign({},t,{uid:""});return JSON.stringify(i)},e.prototype.remove=function(e){y.purge(e),delete this.plotlyInstance},e.prototype.resize=function(e){y.relayout(this.plotEl.nativeElement,e)},e}();De.decorators=[{type:t.Component,args:[{selector:"warpview-plotly",template:'<div #plot [attr.id]="divId" [className]="getClassName()" [ngStyle]="style"></div>\n',encapsulation:t.ViewEncapsulation.ShadowDom,styles:['/*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */:root{--gts-attrname-font-color:#ed4a7b;--gts-attrvalue-font-color:#000;--gts-classname-font-color:#004eff;--gts-labelname-font-color:#19a979;--gts-labelvalue-font-color:#000;--gts-separator-font-color:#a0a0a0;--gts-stack-font-color:#000;--gts-tree-collapsed-icon:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA0UlEQVQ4T6WTUW7CQAxEPQdozxYb9Qb94Aj9gQSoVCp6lMr21doDZFCQiFCU3YDY//d2PeOFPHnwJC+zAlVdA/jp+/6YmZ+1S0qCPxF5HUAAO3fvSpKS4ENEvm6gfUS0c5JiBma2Ibm/QiQPmbmdSqohquoA7GqSxRaapmkBjBkAeHP336t0UWBmHcnb+VcR4XcJpjDJLjPHkS4tleqZubmNiDHU6gumDQDYuvvh7hpV9V9EXgaA5Ka2jbMjmNk7yZOIfEfE8eFVfuSDLda4JDsD3FNdEckTC0YAAAAASUVORK5CYII=);--gts-tree-expanded-icon:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA7klEQVQ4T82TMW7CQBBF/0g+QOpINEkVCmpaLoBm5COk5QYoaeAY3MDSei2LGu4QKakiBA1tCpTK8kS2sLVe2xSh8XSrnf9m/s4s4c6gO/UYGEBEXlT1bK396bFGIjIJguA7iqJLkVNbYOZXItoQ0QHAzBhz9CCFeAVgCeAjy7Jpmqa/NUBEEgDzktqGuOKKO47j+KsGhGH4lOf5HsDIg5ycyqVYVd+steuGheLAzM9EtPMgW1VdVGWJ6N0YU1gpozVGH+K+gy/uBHR1crXUqNzbQXXhduJ69sd7cxOZ+UFVH5Mk+exb+YGt8n9+5h8up1sReYC0WAAAAABJRU5ErkJggg==);--warp-slider-connect-color:#f90;--warp-slider-handle-bg-color:#fff;--warp-slider-handle-color:#004eff;--warp-slider-handle-shadow:inset 0 0 1px #fff,inset 0 1px 7px silver,0 3px 6px -3px #a0a0a0;--warp-view-annotationtooltip-font-color:#404040;--warp-view-annotationtooltip-value-font-color:#004eff;--warp-view-bar-color:#dc3545;--warp-view-chart-height:100%;--warp-view-chart-legend-bg:#fff;--warp-view-chart-legend-color:#404040;--warp-view-chart-width:100%;--warp-view-datagrid-cell-padding:5px;--warp-view-datagrid-even-bg-color:silver;--warp-view-datagrid-even-color:#000;--warp-view-datagrid-odd-bg-color:#fff;--warp-view-datagrid-odd-color:#404040;--warp-view-font-color:#000;--warp-view-map-margin:0;--warp-view-pagination-active-bg-color:#4caf50;--warp-view-pagination-active-border-color:#4caf50;--warp-view-pagination-active-color:#fff;--warp-view-pagination-bg-color:#fff;--warp-view-pagination-border-color:silver;--warp-view-pagination-disabled-color:silver;--warp-view-pagination-hover-bg-color:silver;--warp-view-pagination-hover-border-color:silver;--warp-view-pagination-hover-color:#000;--warp-view-plot-chart-height:100%;--warp-view-popup-bg-color:#fff;--warp-view-popup-body-bg-color:#fff;--warp-view-popup-body-color:#000;--warp-view-popup-border-color:rgba(0,0,0,0.2);--warp-view-popup-close-color:#404040;--warp-view-popup-header-bg-color:silver;--warp-view-popup-title-color:#404040;--warp-view-resize-handle-color:silver;--warp-view-resize-handle-height:10px;--warp-view-slider-pointer-size:65px;--warp-view-spinner-color:#f90;--warp-view-switch-handle-checked-color:radial-gradient(#fff 15%,#00cd00 100%);--warp-view-switch-handle-color:radial-gradient(#fff 15%,silver 100%);--warp-view-switch-height:30px;--warp-view-switch-inset-checked-color:#00cd00;--warp-view-switch-inset-color:silver;--warp-view-switch-radius:18px;--warp-view-switch-width:100px;--warp-view-tile-height:100%;--warp-view-tile-width:100%}.noData{color:var(--warp-view-chart-legend-color);position:relative;text-align:center;width:100%}.js-plotly-plot .plotly,.js-plotly-plot .plotly div{direction:ltr;font-family:Open Sans,verdana,arial,sans-serif;margin:0;padding:0}.js-plotly-plot .plotly button,.js-plotly-plot .plotly input{font-family:Open Sans,verdana,arial,sans-serif}.js-plotly-plot .plotly button:focus,.js-plotly-plot .plotly input:focus{outline:none}.js-plotly-plot .plotly a,.js-plotly-plot .plotly a:hover{text-decoration:none}.js-plotly-plot .plotly .crisp{shape-rendering:crispEdges}.js-plotly-plot .plotly .user-select-none{-moz-user-select:none;-ms-user-select:none;-o-user-select:none;-webkit-user-select:none;user-select:none}.js-plotly-plot .plotly svg{overflow:hidden}.js-plotly-plot .plotly svg a{fill:#447adb}.js-plotly-plot .plotly svg a:hover{fill:#3c6dc5}.js-plotly-plot .plotly .main-svg{left:0;pointer-events:none;position:absolute;top:0}.js-plotly-plot .plotly .main-svg .draglayer{pointer-events:all}.js-plotly-plot .plotly .cursor-default{cursor:default}.js-plotly-plot .plotly .cursor-pointer{cursor:pointer}.js-plotly-plot .plotly .cursor-crosshair{cursor:crosshair}.js-plotly-plot .plotly .cursor-move{cursor:move}.js-plotly-plot .plotly .cursor-col-resize{cursor:col-resize}.js-plotly-plot .plotly .cursor-row-resize{cursor:row-resize}.js-plotly-plot .plotly .cursor-ns-resize{cursor:ns-resize}.js-plotly-plot .plotly .cursor-ew-resize{cursor:ew-resize}.js-plotly-plot .plotly .cursor-sw-resize{cursor:sw-resize}.js-plotly-plot .plotly .cursor-s-resize{cursor:s-resize}.js-plotly-plot .plotly .cursor-se-resize{cursor:se-resize}.js-plotly-plot .plotly .cursor-w-resize{cursor:w-resize}.js-plotly-plot .plotly .cursor-e-resize{cursor:e-resize}.js-plotly-plot .plotly .cursor-nw-resize{cursor:nw-resize}.js-plotly-plot .plotly .cursor-n-resize{cursor:n-resize}.js-plotly-plot .plotly .cursor-ne-resize{cursor:ne-resize}.js-plotly-plot .plotly .cursor-grab{cursor:-webkit-grab;cursor:grab}.js-plotly-plot .plotly .modebar{position:absolute;right:2px;top:2px}.js-plotly-plot .plotly .ease-bg{transition:background-color .3s ease 0s}.js-plotly-plot .plotly .modebar--hover>:not(.watermark){opacity:0;transition:opacity .3s ease 0s}.js-plotly-plot .plotly:hover .modebar--hover .modebar-group{opacity:1}.js-plotly-plot .plotly .modebar-group{box-sizing:border-box;display:inline-block;float:left;padding-left:8px;position:relative;vertical-align:middle;white-space:nowrap}.js-plotly-plot .plotly .modebar-btn{box-sizing:border-box;cursor:pointer;font-size:16px;height:22px;line-height:normal;padding:3px 4px;position:relative}.js-plotly-plot .plotly .modebar-btn svg{position:relative;top:2px}.js-plotly-plot .plotly .modebar.vertical{align-content:flex-end;display:flex;flex-direction:column;flex-wrap:wrap;max-height:100%}.js-plotly-plot .plotly .modebar.vertical svg{top:-1px}.js-plotly-plot .plotly .modebar.vertical .modebar-group{display:block;float:none;padding-bottom:8px;padding-left:0}.js-plotly-plot .plotly .modebar.vertical .modebar-group .modebar-btn{display:block;text-align:center}.js-plotly-plot .plotly [data-title]:after,.js-plotly-plot .plotly [data-title]:before{display:none;opacity:0;pointer-events:none;position:absolute;right:50%;top:110%;transform:translateZ(0);z-index:1001}.js-plotly-plot .plotly [data-title]:hover:after,.js-plotly-plot .plotly [data-title]:hover:before{display:block;opacity:1}.js-plotly-plot .plotly [data-title]:before{background:transparent;border:6px solid transparent;border-bottom-color:#69738a;content:"";margin-right:-6px;margin-top:-12px;position:absolute;z-index:1002}.js-plotly-plot .plotly [data-title]:after{background:#69738a;border-radius:2px;color:#fff;content:attr(data-title);font-size:12px;line-height:12px;margin-right:-18px;padding:8px 10px;white-space:nowrap}.js-plotly-plot .plotly .vertical [data-title]:after,.js-plotly-plot .plotly .vertical [data-title]:before{right:200%;top:0}.js-plotly-plot .plotly .vertical [data-title]:before{border:6px solid transparent;border-left-color:#69738a;margin-right:-30px;margin-top:8px}.js-plotly-plot .plotly .select-outline{fill:none;shape-rendering:crispEdges;stroke-width:1}.js-plotly-plot .plotly .select-outline-1{stroke:#fff}.js-plotly-plot .plotly .select-outline-2{stroke:#000;stroke-dasharray:2px 2px}.plotly-notifier{font-family:Open Sans,verdana,arial,sans-serif;font-size:10pt;max-width:180px;position:fixed;right:20px;top:50px;z-index:10000}.plotly-notifier p{margin:0}.plotly-notifier .notifier-note{-ms-hyphens:auto;-webkit-hyphens:auto;background-color:#8c97af;background-color:rgba(140,151,175,.9);border:1px solid #fff;color:#fff;hyphens:auto;margin:0;max-width:250px;min-width:180px;overflow-wrap:break-word;padding:10px;word-wrap:break-word;z-index:3000}.plotly-notifier .notifier-close{background:none;border:none;color:#fff;float:right;font-size:20px;font-weight:700;line-height:20px;opacity:.8;padding:0 5px}.plotly-notifier .notifier-close:hover{color:#444;cursor:pointer;text-decoration:none}:host{height:100%;width:100%}:host .ylines-above{stroke:var(--warp-view-chart-grid-color)!important}:host .modebar-btn path,:host .xtick>text,:host .ytick>text{fill:var(--warp-view-font-color)!important}']}]}],De.ctorParameters=function(){return[{type:t.IterableDiffers},{type:t.ElementRef},{type:t.KeyValueDiffers}]},De.propDecorators={plotEl:[{type:t.ViewChild,args:["plot",{static:!0}]}],data:[{type:t.Input}],layout:[{type:t.Input}],config:[{type:t.Input}],debug:[{type:t.Input}],frames:[{type:t.Input}],style:[{type:t.Input}],divId:[{type:t.Input}],revision:[{type:t.Input}],className:[{type:t.Input}],useResizeHandler:[{type:t.Input}],updateOnLayoutChange:[{type:t.Input}],updateOnDataChange:[{type:t.Input}],updateOnlyWithRevision:[{type:t.Input}],initialized:[{type:t.Output}],update:[{type:t.Output}],purge:[{type:t.Output}],error:[{type:t.Output}],afterExport:[{type:t.Output}],afterPlot:[{type:t.Output}],animated:[{type:t.Output}],animatingFrame:[{type:t.Output}],animationInterrupted:[{type:t.Output}],autoSize:[{type:t.Output}],beforeExport:[{type:t.Output}],buttonClicked:[{type:t.Output}],click:[{type:t.Output}],plotly_click:[{type:t.Output}],clickAnnotation:[{type:t.Output}],deselect:[{type:t.Output}],doubleClick:[{type:t.Output}],framework:[{type:t.Output}],hover:[{type:t.Output}],legendClick:[{type:t.Output}],legendDoubleClick:[{type:t.Output}],relayout:[{type:t.Output}],restyle:[{type:t.Output}],redraw:[{type:t.Output}],selected:[{type:t.Output}],selecting:[{type:t.Output}],sliderChange:[{type:t.Output}],sliderEnd:[{type:t.Output}],sliderStart:[{type:t.Output}],transitioning:[{type:t.Output}],transitionInterrupted:[{type:t.Output}],unhover:[{type:t.Output}],relayouting:[{type:t.Output}]};var Ne=function(e){function t(i,a,n,o){var r=e.call(this,i,a,n,o)||this;return r.el=i,r.renderer=a,r.sizeService=n,r.ngZone=o,r.layout={showlegend:!1,xaxis:{type:"-"},yaxis:{zeroline:!1},boxmode:"group",margin:{t:10,b:25,r:10,l:10}},r._type="box",r.LOG=new Y(t,r._debug),r}return T(t,e),Object.defineProperty(t.prototype,"type",{set:function(e){this._type=e,this.drawChart()},enumerable:!1,configurable:!0}),t.prototype.ngOnInit=function(){this.drawChart()},t.prototype.update=function(e){this.drawChart()},t.prototype.drawChart=function(){this.initChart(this.el)&&(this.plotlyConfig.scrollZoom=!0,this.buildGraph())},t.prototype.convert=function(e){var t=this,i=[];this.LOG.debug(["convert"],this._options,this._type);var a=z.flatDeep(z.flattenGtsIdArray(e.data,0).res);a=a.filter((function(e){return e.v&&z.isGtsToPlot(e)}));var n="YYYY/MM/DD hh:mm:ss",o=n.slice(0,n.lastIndexOf(this._options.split||"D")+1);return a.forEach((function(a,n){if(a.v){var o=z.serializeGtsMetadata(a),r=M.getColor(a.id,t._options.scheme),s={type:"box",boxmean:"sd",marker:{color:((e.params||[])[n]||{datasetColor:r}).datasetColor||r},name:o,x:"box"===t._type?void 0:[],y:[],boxpoints:!1};t._options.showDots&&(s.boxpoints="all"),a.v.forEach((function(e){s.y.push(e[e.length-1]),"box-date"===t._type&&s.x.push(z.toISOString(e[0],t.divider,t._options.timeZone))})),i.push(s)}})),this.LOG.debug(["convert","dataset"],i,o),i},t.prototype.buildGraph=function(){this.LOG.debug(["drawChart","this.layout"],this.responsive),this.LOG.debug(["drawChart","this.layout"],this.layout),this.LOG.debug(["drawChart","this.plotlyConfig"],this.plotlyConfig),this.layout.showlegend=this.showLegend,this.layout.xaxis.showticklabels="box-date"===this._type,this.layout.yaxis.color=this.getGridColor(this.el.nativeElement),this.layout.xaxis.color=this.getGridColor(this.el.nativeElement),this.loading=!1},t.prototype.hover=function(e){},t}(K);Ne.decorators=[{type:t.Component,args:[{selector:"warpview-box",template:'\x3c!--\n  ~  Copyright 2020  SenX S.A.S.\n  ~\n  ~  Licensed under the Apache License, Version 2.0 (the "License");\n  ~  you may not use this file except in compliance with the License.\n  ~  You may obtain a copy of the License at\n  ~\n  ~    http://www.apache.org/licenses/LICENSE-2.0\n  ~\n  ~  Unless required by applicable law or agreed to in writing, software\n  ~  distributed under the License is distributed on an "AS IS" BASIS,\n  ~  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  ~  See the License for the specific language governing permissions and\n  ~  limitations under the License.\n  ~\n  --\x3e\n\n<div id="chartContainer" #chartContainer>\n  <warpview-spinner *ngIf="loading" message="Parsing data"></warpview-spinner>\n  <p class="noData" *ngIf="noData">No data to display</p>\n  <div *ngIf="!loading && !noData">\n    <warpview-plotly #graph *ngIf="plotlyData?.length > 0"\n                     [data]="plotlyData" [layout]="layout" [config]="plotlyConfig" (afterPlot)="afterPlot()"\n                     className="chart" (hover)="hover($event)" (unhover)="unhover($event)"\n                     [updateOnLayoutChange]="true" [updateOnDataChange]="true" [debug]="debug"\n                     [style]="{position: \'relative\', width: \'100%\', height: \'100%\'}"></warpview-plotly>\n  </div>\n  <div #toolTip class="wv-tooltip" [ngStyle]="getTooltipPosition()"></div>\n</div>\n',encapsulation:t.ViewEncapsulation.ShadowDom,styles:['/*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */\n/*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */:root{--gts-attrname-font-color:#ed4a7b;--gts-attrvalue-font-color:#000;--gts-classname-font-color:#004eff;--gts-labelname-font-color:#19a979;--gts-labelvalue-font-color:#000;--gts-separator-font-color:#a0a0a0;--gts-stack-font-color:#000;--gts-tree-collapsed-icon:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA0UlEQVQ4T6WTUW7CQAxEPQdozxYb9Qb94Aj9gQSoVCp6lMr21doDZFCQiFCU3YDY//d2PeOFPHnwJC+zAlVdA/jp+/6YmZ+1S0qCPxF5HUAAO3fvSpKS4ENEvm6gfUS0c5JiBma2Ibm/QiQPmbmdSqohquoA7GqSxRaapmkBjBkAeHP336t0UWBmHcnb+VcR4XcJpjDJLjPHkS4tleqZubmNiDHU6gumDQDYuvvh7hpV9V9EXgaA5Ka2jbMjmNk7yZOIfEfE8eFVfuSDLda4JDsD3FNdEckTC0YAAAAASUVORK5CYII=);--gts-tree-expanded-icon:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA7klEQVQ4T82TMW7CQBBF/0g+QOpINEkVCmpaLoBm5COk5QYoaeAY3MDSei2LGu4QKakiBA1tCpTK8kS2sLVe2xSh8XSrnf9m/s4s4c6gO/UYGEBEXlT1bK396bFGIjIJguA7iqJLkVNbYOZXItoQ0QHAzBhz9CCFeAVgCeAjy7Jpmqa/NUBEEgDzktqGuOKKO47j+KsGhGH4lOf5HsDIg5ycyqVYVd+steuGheLAzM9EtPMgW1VdVGWJ6N0YU1gpozVGH+K+gy/uBHR1crXUqNzbQXXhduJ69sd7cxOZ+UFVH5Mk+exb+YGt8n9+5h8up1sReYC0WAAAAABJRU5ErkJggg==);--warp-slider-connect-color:#f90;--warp-slider-handle-bg-color:#fff;--warp-slider-handle-color:#004eff;--warp-slider-handle-shadow:inset 0 0 1px #fff,inset 0 1px 7px silver,0 3px 6px -3px #a0a0a0;--warp-view-annotationtooltip-font-color:#404040;--warp-view-annotationtooltip-value-font-color:#004eff;--warp-view-bar-color:#dc3545;--warp-view-chart-height:100%;--warp-view-chart-legend-bg:#fff;--warp-view-chart-legend-color:#404040;--warp-view-chart-width:100%;--warp-view-datagrid-cell-padding:5px;--warp-view-datagrid-even-bg-color:silver;--warp-view-datagrid-even-color:#000;--warp-view-datagrid-odd-bg-color:#fff;--warp-view-datagrid-odd-color:#404040;--warp-view-font-color:#000;--warp-view-map-margin:0;--warp-view-pagination-active-bg-color:#4caf50;--warp-view-pagination-active-border-color:#4caf50;--warp-view-pagination-active-color:#fff;--warp-view-pagination-bg-color:#fff;--warp-view-pagination-border-color:silver;--warp-view-pagination-disabled-color:silver;--warp-view-pagination-hover-bg-color:silver;--warp-view-pagination-hover-border-color:silver;--warp-view-pagination-hover-color:#000;--warp-view-plot-chart-height:100%;--warp-view-popup-bg-color:#fff;--warp-view-popup-body-bg-color:#fff;--warp-view-popup-body-color:#000;--warp-view-popup-border-color:rgba(0,0,0,0.2);--warp-view-popup-close-color:#404040;--warp-view-popup-header-bg-color:silver;--warp-view-popup-title-color:#404040;--warp-view-resize-handle-color:silver;--warp-view-resize-handle-height:10px;--warp-view-slider-pointer-size:65px;--warp-view-spinner-color:#f90;--warp-view-switch-handle-checked-color:radial-gradient(#fff 15%,#00cd00 100%);--warp-view-switch-handle-color:radial-gradient(#fff 15%,silver 100%);--warp-view-switch-height:30px;--warp-view-switch-inset-checked-color:#00cd00;--warp-view-switch-inset-color:silver;--warp-view-switch-radius:18px;--warp-view-switch-width:100px;--warp-view-tile-height:100%;--warp-view-tile-width:100%}.noData{color:var(--warp-view-chart-legend-color);position:relative;text-align:center;width:100%}\n\n/*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */\n/*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */.gts-classname{color:var(--gts-classname-font-color)}.gts-labelname{color:var(--gts-labelname-font-color)}.gts-attrname{color:var(--gts-attrname-font-color)}.gts-separator{color:var(--gts-separator-font-color)}.gts-labelvalue{color:var(--gts-labelvalue-font-color);font-style:italic}.gts-attrvalue{color:var(--gts-attrvalue-font-color);font-style:italic}.wv-tooltip{background-color:var(--warp-view-chart-legend-bg)!important;border:1px solid grey;border-radius:5px;box-shadow:none;color:var(--warp-view-chart-legend-color)!important;display:none;font-size:10px;height:auto!important;left:-1000px;max-width:50%;min-width:100px;padding:10px;pointer-events:none;position:absolute;text-align:left;width:auto;z-index:999}.wv-tooltip .chip{background-color:#bbb;border:2px solid #454545;border-radius:50%;cursor:pointer;display:inline-block;height:5px;margin-bottom:auto;margin-top:auto;vertical-align:middle;width:5px}:host{display:block}:host,:host #chartContainer,:host #chartContainer div{height:100%}:host div.chart{height:var(--warp-view-chart-height);width:var(--warp-view-chart-width)}']}]}],Ne.ctorParameters=function(){return[{type:t.ElementRef},{type:t.Renderer2},{type:W},{type:t.NgZone}]},Ne.propDecorators={type:[{type:t.Input,args:["type"]}]};var ke=function(e){function t(i,a,n,o){var r=e.call(this,i,a,n,o)||this;return r.el=i,r.renderer=a,r.sizeService=n,r.ngZone=o,r.layout={showlegend:!1,xaxis:{},yaxis:{},zaxis:{},margin:{t:10,b:25,r:10,l:10}},r._type="line3d",r.LOG=new Y(t,r._debug),r}return T(t,e),Object.defineProperty(t.prototype,"type",{set:function(e){this._type=e,this.drawChart()},enumerable:!1,configurable:!0}),t.prototype.ngOnInit=function(){this.drawChart()},t.prototype.update=function(e){this.drawChart()},t.prototype.drawChart=function(){this.initChart(this.el)&&(this.plotlyConfig.scrollZoom=!0,this.buildGraph())},t.prototype.convert=function(e){var t=this,i=[];return this.LOG.debug(["convert"],e,this._options,this._type),z.flatDeep(z.flattenGtsIdArray(e.data,0).res).filter((function(e){return e.v&&z.isGts(e)})).forEach((function(a,n){if(a.v){var o=z.serializeGtsMetadata(a),r=M.getColor(a.id,t._options.scheme),s=((e.params||[])[n]||{datasetColor:r}).datasetColor||r,p={mode:"line",type:"scatter3d",marker:{color:M.transparentize(s),size:3,symbol:"circle",line:{color:s,width:0}},line:{color:s,width:1},name:o,x:[],y:[],z:[]};a.v.forEach((function(e){e.length>2?(p.x.push(e[1]),p.y.push(e[2]),p.z.push(e[3])):(p.x.push(e[0]),p.y.push(e[1]),p.z.push(1))})),i.push(p)}})),i},t.prototype.buildGraph=function(){this.LOG.debug(["drawChart","this.layout"],this.responsive),this.LOG.debug(["drawChart","this.layout"],this.layout),this.LOG.debug(["drawChart","this.plotlyConfig"],this.plotlyConfig),this.layout.showlegend=this.showLegend,this.layout.yaxis.color=this.getGridColor(this.el.nativeElement),this.layout.xaxis.color=this.getGridColor(this.el.nativeElement),this.layout.zaxis.color=this.getGridColor(this.el.nativeElement),this.loading=!1},t}(K);ke.decorators=[{type:t.Component,args:[{selector:"warpview-3d-line",template:'\x3c!--\n  ~  Copyright 2020  SenX S.A.S.\n  ~\n  ~  Licensed under the Apache License, Version 2.0 (the "License");\n  ~  you may not use this file except in compliance with the License.\n  ~  You may obtain a copy of the License at\n  ~\n  ~    http://www.apache.org/licenses/LICENSE-2.0\n  ~\n  ~  Unless required by applicable law or agreed to in writing, software\n  ~  distributed under the License is distributed on an "AS IS" BASIS,\n  ~  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  ~  See the License for the specific language governing permissions and\n  ~  limitations under the License.\n  ~\n  --\x3e\n\n<div id="chartContainer" #chartContainer>\n  <warpview-spinner *ngIf="loading" message="Parsing data"></warpview-spinner>\n  <p class="noData" *ngIf="noData">No data to display</p>\n  <div *ngIf="!loading && !noData">\n    <warpview-plotly #graph *ngIf="plotlyData?.length > 0"\n                     [data]="plotlyData" [layout]="layout" [config]="plotlyConfig" (afterPlot)="afterPlot()"\n                     className="chart" (hover)="hover($event)" (unhover)="unhover($event)"\n                     [updateOnLayoutChange]="true" [updateOnDataChange]="true" [debug]="debug"\n                     [style]="{position: \'relative\', width: \'100%\', height: \'100%\'}"></warpview-plotly>\n  </div>\n  <div #toolTip class="wv-tooltip" [ngStyle]="getTooltipPosition()"></div>\n</div>\n',encapsulation:t.ViewEncapsulation.ShadowDom,styles:['/*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */\n/*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */:root{--gts-attrname-font-color:#ed4a7b;--gts-attrvalue-font-color:#000;--gts-classname-font-color:#004eff;--gts-labelname-font-color:#19a979;--gts-labelvalue-font-color:#000;--gts-separator-font-color:#a0a0a0;--gts-stack-font-color:#000;--gts-tree-collapsed-icon:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA0UlEQVQ4T6WTUW7CQAxEPQdozxYb9Qb94Aj9gQSoVCp6lMr21doDZFCQiFCU3YDY//d2PeOFPHnwJC+zAlVdA/jp+/6YmZ+1S0qCPxF5HUAAO3fvSpKS4ENEvm6gfUS0c5JiBma2Ibm/QiQPmbmdSqohquoA7GqSxRaapmkBjBkAeHP336t0UWBmHcnb+VcR4XcJpjDJLjPHkS4tleqZubmNiDHU6gumDQDYuvvh7hpV9V9EXgaA5Ka2jbMjmNk7yZOIfEfE8eFVfuSDLda4JDsD3FNdEckTC0YAAAAASUVORK5CYII=);--gts-tree-expanded-icon:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA7klEQVQ4T82TMW7CQBBF/0g+QOpINEkVCmpaLoBm5COk5QYoaeAY3MDSei2LGu4QKakiBA1tCpTK8kS2sLVe2xSh8XSrnf9m/s4s4c6gO/UYGEBEXlT1bK396bFGIjIJguA7iqJLkVNbYOZXItoQ0QHAzBhz9CCFeAVgCeAjy7Jpmqa/NUBEEgDzktqGuOKKO47j+KsGhGH4lOf5HsDIg5ycyqVYVd+steuGheLAzM9EtPMgW1VdVGWJ6N0YU1gpozVGH+K+gy/uBHR1crXUqNzbQXXhduJ69sd7cxOZ+UFVH5Mk+exb+YGt8n9+5h8up1sReYC0WAAAAABJRU5ErkJggg==);--warp-slider-connect-color:#f90;--warp-slider-handle-bg-color:#fff;--warp-slider-handle-color:#004eff;--warp-slider-handle-shadow:inset 0 0 1px #fff,inset 0 1px 7px silver,0 3px 6px -3px #a0a0a0;--warp-view-annotationtooltip-font-color:#404040;--warp-view-annotationtooltip-value-font-color:#004eff;--warp-view-bar-color:#dc3545;--warp-view-chart-height:100%;--warp-view-chart-legend-bg:#fff;--warp-view-chart-legend-color:#404040;--warp-view-chart-width:100%;--warp-view-datagrid-cell-padding:5px;--warp-view-datagrid-even-bg-color:silver;--warp-view-datagrid-even-color:#000;--warp-view-datagrid-odd-bg-color:#fff;--warp-view-datagrid-odd-color:#404040;--warp-view-font-color:#000;--warp-view-map-margin:0;--warp-view-pagination-active-bg-color:#4caf50;--warp-view-pagination-active-border-color:#4caf50;--warp-view-pagination-active-color:#fff;--warp-view-pagination-bg-color:#fff;--warp-view-pagination-border-color:silver;--warp-view-pagination-disabled-color:silver;--warp-view-pagination-hover-bg-color:silver;--warp-view-pagination-hover-border-color:silver;--warp-view-pagination-hover-color:#000;--warp-view-plot-chart-height:100%;--warp-view-popup-bg-color:#fff;--warp-view-popup-body-bg-color:#fff;--warp-view-popup-body-color:#000;--warp-view-popup-border-color:rgba(0,0,0,0.2);--warp-view-popup-close-color:#404040;--warp-view-popup-header-bg-color:silver;--warp-view-popup-title-color:#404040;--warp-view-resize-handle-color:silver;--warp-view-resize-handle-height:10px;--warp-view-slider-pointer-size:65px;--warp-view-spinner-color:#f90;--warp-view-switch-handle-checked-color:radial-gradient(#fff 15%,#00cd00 100%);--warp-view-switch-handle-color:radial-gradient(#fff 15%,silver 100%);--warp-view-switch-height:30px;--warp-view-switch-inset-checked-color:#00cd00;--warp-view-switch-inset-color:silver;--warp-view-switch-radius:18px;--warp-view-switch-width:100px;--warp-view-tile-height:100%;--warp-view-tile-width:100%}.noData{color:var(--warp-view-chart-legend-color);position:relative;text-align:center;width:100%}\n\n/*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */\n/*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */.gts-classname{color:var(--gts-classname-font-color)}.gts-labelname{color:var(--gts-labelname-font-color)}.gts-attrname{color:var(--gts-attrname-font-color)}.gts-separator{color:var(--gts-separator-font-color)}.gts-labelvalue{color:var(--gts-labelvalue-font-color);font-style:italic}.gts-attrvalue{color:var(--gts-attrvalue-font-color);font-style:italic}.wv-tooltip{background-color:var(--warp-view-chart-legend-bg)!important;border:1px solid grey;border-radius:5px;box-shadow:none;color:var(--warp-view-chart-legend-color)!important;display:none;font-size:10px;height:auto!important;left:-1000px;max-width:50%;min-width:100px;padding:10px;pointer-events:none;position:absolute;text-align:left;width:auto;z-index:999}.wv-tooltip .chip{background-color:#bbb;border:2px solid #454545;border-radius:50%;cursor:pointer;display:inline-block;height:5px;margin-bottom:auto;margin-top:auto;vertical-align:middle;width:5px}:host{display:block}:host,:host #chartContainer,:host #chartContainer div{height:100%}:host div.chart{height:var(--warp-view-chart-height);width:var(--warp-view-chart-width)}']}]}],ke.ctorParameters=function(){return[{type:t.ElementRef},{type:t.Renderer2},{type:W},{type:t.NgZone}]},ke.propDecorators={type:[{type:t.Input,args:["type"]}]};var Te=function(e){function t(i,a,n,o){var r=e.call(this,i,a,n,o)||this;return r.el=i,r.renderer=a,r.sizeService=n,r.ngZone=o,r.layout={showlegend:!1,margin:{t:10,b:25,r:10,l:10},geo:{projection:{type:"orthographic"},showframe:!0,fitbounds:"locations",showocean:!0,oceancolor:M.transparentize("#004eff",.2),showland:!0,landcolor:M.transparentize("#6F694E",.2),showlakes:!0,lakecolor:M.transparentize("#004eff",.2),showcountries:!0,lonaxis:{showgrid:!0,gridcolor:"rgb(102, 102, 102)"},lataxis:{showgrid:!0,gridcolor:"rgb(102, 102, 102)"}}},r._type="scattergeo",r.geoData=[],r.LOG=new Y(t,r._debug),r}return T(t,e),Object.defineProperty(t.prototype,"type",{set:function(e){this._type=e,this.drawChart()},enumerable:!1,configurable:!0}),t.prototype.ngOnInit=function(){this.drawChart()},t.prototype.update=function(e){this.drawChart()},t.prototype.drawChart=function(){this.initChart(this.el)&&(this.plotlyConfig.scrollZoom=!0,this.buildGraph())},t.prototype.convert=function(e){var t=this,i=[];return this.geoData=[],this.LOG.debug(["convert"],e,this._options,this._type),z.flatDeep(z.flattenGtsIdArray(e.data,0).res).filter((function(e){return e.v&&z.isGts(e)})).forEach((function(a,n){if(a.v){var o={path:[]},r=z.serializeGtsMetadata(a),s=M.getColor(a.id,t._options.scheme),p=((e.params||[])[n]||{datasetColor:s}).datasetColor||s,l={mode:"lines",type:"scattergeo",marker:{color:M.transparentize(p),size:3,symbol:"circle",line:{color:p,width:0}},line:{color:p,width:1},name:r,lon:[],lat:[],hoverinfo:"none"};a.v.forEach((function(e){e.length>2&&(l.lat.push(e[1]),l.lon.push(e[2]),o.path.push({lat:e[1],lon:e[2]}))})),t.geoData.push(o),i.push(l)}})),i},t.prototype.buildGraph=function(){this.LOG.debug(["drawChart","this.layout"],this._responsive),this.LOG.debug(["drawChart","this.layout"],this.layout),this.LOG.debug(["drawChart","this.plotlyConfig"],this.plotlyConfig),this.layout.showlegend=this._showLegend;var e=fe.getBoundsArray(this.geoData,[],[],[]);this.LOG.debug(["drawChart","bounds"],e),this.layout.geo.lonaxis.color=this.getGridColor(this.el.nativeElement),this.layout.geo.lataxis.range=[e[0][0],e[1][0]],this.layout.geo.lonaxis.range=[e[0][1],e[1][1]],this.layout.geo.lataxis.color=this.getGridColor(this.el.nativeElement),this.layout=Object.assign({},this.layout),this.loading=!1},t}(K);Te.decorators=[{type:t.Component,args:[{selector:"warpview-globe",template:'\x3c!--\n  ~  Copyright 2020  SenX S.A.S.\n  ~\n  ~  Licensed under the Apache License, Version 2.0 (the "License");\n  ~  you may not use this file except in compliance with the License.\n  ~  You may obtain a copy of the License at\n  ~\n  ~    http://www.apache.org/licenses/LICENSE-2.0\n  ~\n  ~  Unless required by applicable law or agreed to in writing, software\n  ~  distributed under the License is distributed on an "AS IS" BASIS,\n  ~  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  ~  See the License for the specific language governing permissions and\n  ~  limitations under the License.\n  ~\n  --\x3e\n\n<div id="chartContainer" #chartContainer>\n  <warpview-spinner *ngIf="loading" message="Parsing data"></warpview-spinner>\n  <p class="noData" *ngIf="noData">No data to display</p>\n  <div *ngIf="!loading && !noData">\n    <warpview-plotly #graph *ngIf="plotlyData?.length > 0"\n                     [data]="plotlyData" [layout]="layout" [config]="plotlyConfig" (afterPlot)="afterPlot()"\n                     className="chart" (hover)="hover($event)" (unhover)="unhover($event)"\n                     [updateOnLayoutChange]="true" [updateOnDataChange]="true" [debug]="debug"\n                     [style]="{position: \'relative\', width: \'100%\', height: \'100%\'}"></warpview-plotly>\n  </div>\n  <div #toolTip class="wv-tooltip" [ngStyle]="getTooltipPosition()"></div>\n</div>\n',encapsulation:t.ViewEncapsulation.ShadowDom,styles:['/*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */\n/*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */:root{--gts-attrname-font-color:#ed4a7b;--gts-attrvalue-font-color:#000;--gts-classname-font-color:#004eff;--gts-labelname-font-color:#19a979;--gts-labelvalue-font-color:#000;--gts-separator-font-color:#a0a0a0;--gts-stack-font-color:#000;--gts-tree-collapsed-icon:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA0UlEQVQ4T6WTUW7CQAxEPQdozxYb9Qb94Aj9gQSoVCp6lMr21doDZFCQiFCU3YDY//d2PeOFPHnwJC+zAlVdA/jp+/6YmZ+1S0qCPxF5HUAAO3fvSpKS4ENEvm6gfUS0c5JiBma2Ibm/QiQPmbmdSqohquoA7GqSxRaapmkBjBkAeHP336t0UWBmHcnb+VcR4XcJpjDJLjPHkS4tleqZubmNiDHU6gumDQDYuvvh7hpV9V9EXgaA5Ka2jbMjmNk7yZOIfEfE8eFVfuSDLda4JDsD3FNdEckTC0YAAAAASUVORK5CYII=);--gts-tree-expanded-icon:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA7klEQVQ4T82TMW7CQBBF/0g+QOpINEkVCmpaLoBm5COk5QYoaeAY3MDSei2LGu4QKakiBA1tCpTK8kS2sLVe2xSh8XSrnf9m/s4s4c6gO/UYGEBEXlT1bK396bFGIjIJguA7iqJLkVNbYOZXItoQ0QHAzBhz9CCFeAVgCeAjy7Jpmqa/NUBEEgDzktqGuOKKO47j+KsGhGH4lOf5HsDIg5ycyqVYVd+steuGheLAzM9EtPMgW1VdVGWJ6N0YU1gpozVGH+K+gy/uBHR1crXUqNzbQXXhduJ69sd7cxOZ+UFVH5Mk+exb+YGt8n9+5h8up1sReYC0WAAAAABJRU5ErkJggg==);--warp-slider-connect-color:#f90;--warp-slider-handle-bg-color:#fff;--warp-slider-handle-color:#004eff;--warp-slider-handle-shadow:inset 0 0 1px #fff,inset 0 1px 7px silver,0 3px 6px -3px #a0a0a0;--warp-view-annotationtooltip-font-color:#404040;--warp-view-annotationtooltip-value-font-color:#004eff;--warp-view-bar-color:#dc3545;--warp-view-chart-height:100%;--warp-view-chart-legend-bg:#fff;--warp-view-chart-legend-color:#404040;--warp-view-chart-width:100%;--warp-view-datagrid-cell-padding:5px;--warp-view-datagrid-even-bg-color:silver;--warp-view-datagrid-even-color:#000;--warp-view-datagrid-odd-bg-color:#fff;--warp-view-datagrid-odd-color:#404040;--warp-view-font-color:#000;--warp-view-map-margin:0;--warp-view-pagination-active-bg-color:#4caf50;--warp-view-pagination-active-border-color:#4caf50;--warp-view-pagination-active-color:#fff;--warp-view-pagination-bg-color:#fff;--warp-view-pagination-border-color:silver;--warp-view-pagination-disabled-color:silver;--warp-view-pagination-hover-bg-color:silver;--warp-view-pagination-hover-border-color:silver;--warp-view-pagination-hover-color:#000;--warp-view-plot-chart-height:100%;--warp-view-popup-bg-color:#fff;--warp-view-popup-body-bg-color:#fff;--warp-view-popup-body-color:#000;--warp-view-popup-border-color:rgba(0,0,0,0.2);--warp-view-popup-close-color:#404040;--warp-view-popup-header-bg-color:silver;--warp-view-popup-title-color:#404040;--warp-view-resize-handle-color:silver;--warp-view-resize-handle-height:10px;--warp-view-slider-pointer-size:65px;--warp-view-spinner-color:#f90;--warp-view-switch-handle-checked-color:radial-gradient(#fff 15%,#00cd00 100%);--warp-view-switch-handle-color:radial-gradient(#fff 15%,silver 100%);--warp-view-switch-height:30px;--warp-view-switch-inset-checked-color:#00cd00;--warp-view-switch-inset-color:silver;--warp-view-switch-radius:18px;--warp-view-switch-width:100px;--warp-view-tile-height:100%;--warp-view-tile-width:100%}.noData{color:var(--warp-view-chart-legend-color);position:relative;text-align:center;width:100%}\n\n/*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */\n/*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */.gts-classname{color:var(--gts-classname-font-color)}.gts-labelname{color:var(--gts-labelname-font-color)}.gts-attrname{color:var(--gts-attrname-font-color)}.gts-separator{color:var(--gts-separator-font-color)}.gts-labelvalue{color:var(--gts-labelvalue-font-color);font-style:italic}.gts-attrvalue{color:var(--gts-attrvalue-font-color);font-style:italic}.wv-tooltip{background-color:var(--warp-view-chart-legend-bg)!important;border:1px solid grey;border-radius:5px;box-shadow:none;color:var(--warp-view-chart-legend-color)!important;display:none;font-size:10px;height:auto!important;left:-1000px;max-width:50%;min-width:100px;padding:10px;pointer-events:none;position:absolute;text-align:left;width:auto;z-index:999}.wv-tooltip .chip{background-color:#bbb;border:2px solid #454545;border-radius:50%;cursor:pointer;display:inline-block;height:5px;margin-bottom:auto;margin-top:auto;vertical-align:middle;width:5px}:host{display:block}:host,:host #chartContainer,:host #chartContainer div{height:100%}:host div.chart{height:var(--warp-view-chart-height);width:var(--warp-view-chart-width)}']}]}],Te.ctorParameters=function(){return[{type:t.ElementRef},{type:t.Renderer2},{type:W},{type:t.NgZone}]},Te.propDecorators={type:[{type:t.Input,args:["type"]}]};var Ve=function(e){function i(a,n,o,r){var s=e.call(this,a,n,o,r)||this;return s.el=a,s.renderer=n,s.sizeService=o,s.ngZone=r,s.pointHover=new t.EventEmitter,s.warpViewChartResize=new t.EventEmitter,s.chartDraw=new t.EventEmitter,s.boundsDidChange=new t.EventEmitter,s.visibility=[],s.maxTick=Number.MIN_VALUE,s.minTick=Number.MAX_VALUE,s.visibleGtsId=[],s._type="drops",s.eventConf={d3:E,axis:{verticalGrid:!0,tickPadding:6},indicator:!1,label:{text:function(e){return e.name}},drop:{date:function(e){return new Date(e.date)},color:function(e){return e.color},onMouseOver:function(e){s.LOG.debug(["onMouseOver"],e),s.pointHover.emit({x:d.event.offsetX,y:d.event.offsetY});var t=d.select(s.toolTip.nativeElement);t.transition().duration(200).style("opacity",1).style("pointer-events","auto"),t.html('<div class="tooltip-body">\n<b class="tooltip-date">'+("timestamp"===s._options.timeMode?e.date:L.default(e.date.valueOf()).utc().toISOString()||"")+'</b>\n<div><i class="chip"  style="background-color: '+M.transparentize(e.color,.7)+";border: 2px solid "+e.color+';"></i>\n'+z.formatLabel(e.name)+': <span class="value">'+e.value+"</span>\n</div></div>").style("left",d.event.offsetX-30+"px").style("top",d.event.offsetY+20+"px")},onMouseOut:function(){c.select(s.toolTip.nativeElement).transition().duration(500).style("opacity",0).style("pointer-events","none")}}},s.LOG=new Y(i,s._debug),s}return T(i,e),Object.defineProperty(i.prototype,"type",{set:function(e){this._type=e,this.drawChart()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"hiddenData",{set:function(e){var t=this,i=JSON.stringify(this.visibility);this.LOG.debug(["hiddenData","previousVisibility"],i),this._hiddenData=e,this.visibility=[],this.visibleGtsId.forEach((function(i){return t.visibility.push(e.indexOf(i)<0&&-1!==i)})),this.LOG.debug(["hiddenData","hiddendygraphfullv"],this.visibility);var a=JSON.stringify(this.visibility);this.LOG.debug(["hiddenData","json"],i,a),i!==a&&(this.drawChart(),this.LOG.debug(["hiddendygraphtrig","destroy"],"redraw by visibility change"))},enumerable:!1,configurable:!0}),i.prototype.ngOnInit=function(){this._options=this._options||this.defOptions},i.prototype.ngOnDestroy=function(){this.elemChart&&c.select(this.elemChart.nativeElement).remove()},i.prototype.update=function(e,t){this.LOG.debug(["onOptions","before"],this._options,e),O.default(e,this._options)||(this.LOG.debug(["options","changed"],e),this._options=Q.mergeDeep(this._options,e)),this.drawChart()},i.prototype.updateBounds=function(e,t){this.LOG.debug(["updateBounds"],e,t,this._options),this._options.bounds.minDate=e,this._options.bounds.maxDate=t,this._options.timeMode&&"timestamp"===this._options.timeMode?this.eventConf.range={start:e,end:t}:this.eventConf.range={start:L.default.tz(L.default.utc(this.minTick/this.divider),this._options.timeZone).toDate(),end:L.default.tz(L.default.utc(this.maxTick/this.divider),this._options.timeZone).toDate()},this.eventConf=Object.assign({},this.eventConf),this.LOG.debug(["updateBounds"],this.eventConf)},i.prototype.drawChart=function(){var e=this;this.initChart(this.el)&&(this.loading=!1,this.LOG.debug(["drawChart","plotlyData"],this.plotlyData,this._type),this.elemChart.nativeElement&&(setTimeout((function(){return c.select(e.elemChart.nativeElement).data([e.plotlyData]).call(N.default(e.eventConf))})),this.loading=!1,this.chartDraw.emit()))},i.prototype.convert=function(e){var t=this;this.LOG.debug(["convert"],e);var i=0,a=z.flatDeep(e.data),n=[];if(this.LOG.debug(["convert","gtsList"],a),a&&0!==a.length&&!(a[0].length<2))return a.forEach((function(a,o){var r=M.getColor(a.id||o,t._options.scheme),s=((e.params||[])[o]||{datasetColor:r}).datasetColor||r,p=z.serializeGtsMetadata(a);i=Math.max(8*p.length);for(var l={name:p,color:s,data:[]},h=(a.v||[]).length,d=0;d<h;d++){var c=(a.v||[])[d],g=c[0];t.minTick=Math.min(t.minTick,g),t.maxTick=Math.max(t.maxTick,g);var u=c[c.length-1];isNaN(u)&&(u=1),l.data.push({date:L.default.tz(L.default.utc(g/t.divider),t._options.timeZone).toDate(),color:s,value:u,name:l.name})}n.push(l)})),this.LOG.debug(["convert","dataList"],n),this.eventConf.label.width=i,this.eventConf.range={start:L.default.tz(L.default.utc(this.minTick/this.divider),this._options.timeZone).toDate(),end:L.default.tz(L.default.utc(this.maxTick/this.divider),this._options.timeZone).toDate()},n},i}(K);Ve.decorators=[{type:t.Component,args:[{selector:"warpview-event-drop",template:'\x3c!--\n  ~  Copyright 2020  SenX S.A.S.\n  ~\n  ~  Licensed under the Apache License, Version 2.0 (the "License");\n  ~  you may not use this file except in compliance with the License.\n  ~  You may obtain a copy of the License at\n  ~\n  ~    http://www.apache.org/licenses/LICENSE-2.0\n  ~\n  ~  Unless required by applicable law or agreed to in writing, software\n  ~  distributed under the License is distributed on an "AS IS" BASIS,\n  ~  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  ~  See the License for the specific language governing permissions and\n  ~  limitations under the License.\n  ~\n  --\x3e\n\n<div id="chartContainer">\n  <warpview-spinner *ngIf="loading" message="Parsing data"></warpview-spinner>\n  <div #toolTip class="wv-tooltip trimmed"></div>\n  <p class="noData" *ngIf="noData">No data to display</p>\n  <div #elemChart style="width: 100%;height: 100%"></div>\n  <div *ngIf="!loading && !noData">\n  </div>\n</div>\n',encapsulation:t.ViewEncapsulation.None,styles:['/*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */\n/*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */@import url(/home/xavier/workspace/warp-view/node_modules/event-drops/dist/style.css);:root{--gts-attrname-font-color:#ed4a7b;--gts-attrvalue-font-color:#000;--gts-classname-font-color:#004eff;--gts-labelname-font-color:#19a979;--gts-labelvalue-font-color:#000;--gts-separator-font-color:#a0a0a0;--gts-stack-font-color:#000;--gts-tree-collapsed-icon:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA0UlEQVQ4T6WTUW7CQAxEPQdozxYb9Qb94Aj9gQSoVCp6lMr21doDZFCQiFCU3YDY//d2PeOFPHnwJC+zAlVdA/jp+/6YmZ+1S0qCPxF5HUAAO3fvSpKS4ENEvm6gfUS0c5JiBma2Ibm/QiQPmbmdSqohquoA7GqSxRaapmkBjBkAeHP336t0UWBmHcnb+VcR4XcJpjDJLjPHkS4tleqZubmNiDHU6gumDQDYuvvh7hpV9V9EXgaA5Ka2jbMjmNk7yZOIfEfE8eFVfuSDLda4JDsD3FNdEckTC0YAAAAASUVORK5CYII=);--gts-tree-expanded-icon:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA7klEQVQ4T82TMW7CQBBF/0g+QOpINEkVCmpaLoBm5COk5QYoaeAY3MDSei2LGu4QKakiBA1tCpTK8kS2sLVe2xSh8XSrnf9m/s4s4c6gO/UYGEBEXlT1bK396bFGIjIJguA7iqJLkVNbYOZXItoQ0QHAzBhz9CCFeAVgCeAjy7Jpmqa/NUBEEgDzktqGuOKKO47j+KsGhGH4lOf5HsDIg5ycyqVYVd+steuGheLAzM9EtPMgW1VdVGWJ6N0YU1gpozVGH+K+gy/uBHR1crXUqNzbQXXhduJ69sd7cxOZ+UFVH5Mk+exb+YGt8n9+5h8up1sReYC0WAAAAABJRU5ErkJggg==);--warp-slider-connect-color:#f90;--warp-slider-handle-bg-color:#fff;--warp-slider-handle-color:#004eff;--warp-slider-handle-shadow:inset 0 0 1px #fff,inset 0 1px 7px silver,0 3px 6px -3px #a0a0a0;--warp-view-annotationtooltip-font-color:#404040;--warp-view-annotationtooltip-value-font-color:#004eff;--warp-view-bar-color:#dc3545;--warp-view-chart-height:100%;--warp-view-chart-legend-bg:#fff;--warp-view-chart-legend-color:#404040;--warp-view-chart-width:100%;--warp-view-datagrid-cell-padding:5px;--warp-view-datagrid-even-bg-color:silver;--warp-view-datagrid-even-color:#000;--warp-view-datagrid-odd-bg-color:#fff;--warp-view-datagrid-odd-color:#404040;--warp-view-font-color:#000;--warp-view-map-margin:0;--warp-view-pagination-active-bg-color:#4caf50;--warp-view-pagination-active-border-color:#4caf50;--warp-view-pagination-active-color:#fff;--warp-view-pagination-bg-color:#fff;--warp-view-pagination-border-color:silver;--warp-view-pagination-disabled-color:silver;--warp-view-pagination-hover-bg-color:silver;--warp-view-pagination-hover-border-color:silver;--warp-view-pagination-hover-color:#000;--warp-view-plot-chart-height:100%;--warp-view-popup-bg-color:#fff;--warp-view-popup-body-bg-color:#fff;--warp-view-popup-body-color:#000;--warp-view-popup-border-color:rgba(0,0,0,0.2);--warp-view-popup-close-color:#404040;--warp-view-popup-header-bg-color:silver;--warp-view-popup-title-color:#404040;--warp-view-resize-handle-color:silver;--warp-view-resize-handle-height:10px;--warp-view-slider-pointer-size:65px;--warp-view-spinner-color:#f90;--warp-view-switch-handle-checked-color:radial-gradient(#fff 15%,#00cd00 100%);--warp-view-switch-handle-color:radial-gradient(#fff 15%,silver 100%);--warp-view-switch-height:30px;--warp-view-switch-inset-checked-color:#00cd00;--warp-view-switch-inset-color:silver;--warp-view-switch-radius:18px;--warp-view-switch-width:100px;--warp-view-tile-height:100%;--warp-view-tile-width:100%}.noData{color:var(--warp-view-chart-legend-color);position:relative;text-align:center;width:100%}\n\n/*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */.gts-classname{color:var(--gts-classname-font-color)}.gts-labelname{color:var(--gts-labelname-font-color)}.gts-attrname{color:var(--gts-attrname-font-color)}.gts-separator{color:var(--gts-separator-font-color)}.gts-labelvalue{color:var(--gts-labelvalue-font-color);font-style:italic}.gts-attrvalue{color:var(--gts-attrvalue-font-color);font-style:italic}:host,warp-view-event-drop,warpview-event-drop{display:block;height:100%;width:100%}:host g.bound text,:host text.line-label,warp-view-event-drop g.bound text,warp-view-event-drop text.line-label,warpview-event-drop g.bound text,warpview-event-drop text.line-label{fill:var(--warp-view-font-color)!important}:host #chartContainer,warp-view-event-drop #chartContainer,warpview-event-drop #chartContainer{height:100%;position:relative;width:100%}:host div.chart,warp-view-event-drop div.chart,warpview-event-drop div.chart{height:var(--warp-view-chart-height);width:var(--warp-view-chart-width)}:host .wv-tooltip,warp-view-event-drop .wv-tooltip,warpview-event-drop .wv-tooltip{background-color:var(--warp-view-chart-legend-bg)!important;border:1px solid grey;border-radius:5px;box-shadow:none;color:var(--warp-view-chart-legend-color)!important;font-size:10px;height:auto!important;line-height:1.4rem;min-width:100px;opacity:0;padding:10px;pointer-events:none;position:absolute;width:auto;z-index:999}:host .wv-tooltip .chip,warp-view-event-drop .wv-tooltip .chip,warpview-event-drop .wv-tooltip .chip{background-color:#bbb;border:2px solid #454545;border-radius:50%;cursor:pointer;display:inline-block;height:5px;margin-bottom:auto;margin-top:auto;vertical-align:middle;width:5px}']}]}],Ve.ctorParameters=function(){return[{type:t.ElementRef},{type:t.Renderer2},{type:W},{type:t.NgZone}]},Ve.propDecorators={elemChart:[{type:t.ViewChild,args:["elemChart",{static:!0}]}],type:[{type:t.Input,args:["type"]}],hiddenData:[{type:t.Input,args:["hiddenData"]}],pointHover:[{type:t.Output,args:["pointHover"]}],warpViewChartResize:[{type:t.Output,args:["warpViewChartResize"]}],chartDraw:[{type:t.Output,args:["chartDraw"]}],boundsDidChange:[{type:t.Output,args:["boundsDidChange"]}]};var Ge=function(e){function i(a,n,o,r){var s=e.call(this,a,n,o,r)||this;return s.el=a,s.renderer=n,s.sizeService=o,s.ngZone=r,s.standalone=!0,s.pointHover=new t.EventEmitter,s.warpViewChartResize=new t.EventEmitter,s.chartDraw=new t.EventEmitter,s.boundsDidChange=new t.EventEmitter,s.warpViewNewOptions=new t.EventEmitter,s.loading=!0,s.graphs={spectrum:["histogram2dcontour","histogram2d"],chart:["line","spline","step","step-after","step-before","area","scatter"],pie:["pie","donut"],polar:["polar"],radar:["radar"],bar:["bar"],bubble:["bubble"],annotation:["annotation"],"gts-tree":["gts-tree"],datagrid:["datagrid"],display:["display"],drilldown:["drilldown"],image:["image"],map:["map"],gauge:["gauge","bullet"],plot:["plot"],box:["box","box-date"],line3d:["line3d"],globe:["globe"],drops:["drops"]},s.isRefresh=!1,s.LOG=new Y(i,s._debug),s}return T(i,e),Object.defineProperty(i.prototype,"type",{get:function(){return this.dataModel&&this.dataModel.globalParams?this.dataModel.globalParams.type||this._options.type||this._type||"plot":this._type||"plot"},set:function(e){this._type=e},enumerable:!1,configurable:!0}),i.prototype.update=function(e,t){var i=this;setTimeout((function(){return i.loading=!t})),this.LOG.debug(["parseGTS","data"],this._data),this.dataModel=this._data,this.dataModel&&(this._options=Q.mergeDeep(this._options,e),this._options=Q.mergeDeep(Q.mergeDeep(this.defOptions,e),this._data&&this._data.globalParams||{}),this.LOG.debug(["parseGTS","data"],this._data),this.dataModel=this._data,this._options&&(this._unit=this._options.unit||this._unit,this._type=this._options.type||this._type||"plot"),this.LOG.debug(["parseGTS","_type"],this._type),setTimeout((function(){return i.loading=!1})))},i.prototype.convert=function(e){var t=this;return setTimeout((function(){return t.loading=!t.isRefresh})),this.LOG.debug(["convert","data"],this._data,e),this.dataModel=e,this.dataModel.globalParams&&(this._unit=this.dataModel.globalParams.unit||this._unit,this._type=this.dataModel.globalParams.type||this._type||"plot"),this.LOG.debug(["convert","_type"],this._type),[]},i.prototype.onResized=function(e){this.width=e.newWidth,this.height=e.newHeight,this.LOG.debug(["onResized"],e.newWidth,e.newHeight),this.sizeService.change(new F(this.width,this.height))},i.prototype.chartDrawn=function(){var e=this;this.LOG.debug(["chartDrawn"]),setTimeout((function(){return e.loading=!1})),this.chartDraw.emit()},i.prototype.setResult=function(e,t){this.isRefresh=t,e&&(this._data=z.getData(e),this._options.isRefresh=t,this.update(this._options,t),this.LOG.debug(["onData"],this._data))},i.prototype.onWarpViewNewOptions=function(e){this.warpViewNewOptions.emit(e)},i}(K);Ge.decorators=[{type:t.Component,args:[{selector:"warpview-result-tile",template:'<div class="wrapper" [ngClass]="{\'full\':  responsive}" (resized)="onResized($event)">\n    <warpview-spinner *ngIf="loading" message="Parsing data"></warpview-spinner>\n    <div style="height: 100%; width: 100%" [hidden]="loading">\n      <warpview-spectrum [debug]="debug" [type]="type" [unit]="unit" [options]="_options"\n                         [showLegend]="showLegend" [data]="dataModel" (chartDraw)="chartDrawn()"\n                         *ngIf="graphs[\'spectrum\'].indexOf(type) > -1 && !!dataModel"\n                         [responsive]="true"></warpview-spectrum>\n\n      <warpview-chart [debug]="debug" [type]="type" [unit]="unit" [options]="_options"\n                      (chartDraw)="chartDrawn()"\n                      [showLegend]="showLegend" [data]="dataModel"\n                      *ngIf="graphs[\'chart\'].indexOf(type) > -1 && !!dataModel"\n                      [responsive]="true"></warpview-chart>\n\n      <warpview-plot [debug]="debug" [type]="type" [unit]="unit" [options]="_options"\n                     (chartDraw)="chartDrawn()"\n                     [showLegend]="showLegend" [data]="dataModel"\n                     (warpViewNewOptions)="onWarpViewNewOptions($event)"\n                     *ngIf="graphs[\'plot\'].indexOf(type) > -1 && !!dataModel"\n                     [responsive]="true"></warpview-plot>\n\n      <warpview-bar [debug]="debug" [unit]="unit" [options]="_options"\n                    (chartDraw)="chartDrawn()"\n                    [showLegend]="showLegend" [data]="dataModel"\n                    *ngIf="graphs[\'bar\'].indexOf(type) > -1 && !!dataModel"\n                    [responsive]="true"></warpview-bar>\n\n      <warpview-bubble [debug]="debug" [unit]="unit" [options]="_options"\n                       (chartDraw)="chartDrawn()"\n                       [showLegend]="showLegend" [data]="dataModel"\n                       *ngIf="graphs[\'bubble\'].indexOf(type) > -1 && !!dataModel"\n                       [responsive]="true"></warpview-bubble>\n\n      <warpview-datagrid [debug]="debug" [options]="_options"\n                         (chartDraw)="chartDrawn()"\n                         [showLegend]="showLegend" [data]="dataModel"\n                         *ngIf="graphs[\'datagrid\'].indexOf(type) > -1 && !!dataModel"\n                         [responsive]="true"></warpview-datagrid>\n\n      <warpview-display [debug]="debug" [options]="_options"\n                        (chartDraw)="chartDrawn()"\n                        [showLegend]="showLegend" [data]="dataModel" [unit]="unit"\n                        *ngIf="graphs[\'display\'].indexOf(type) > -1 && !!dataModel"\n                        [responsive]="true"></warpview-display>\n\n      <warpview-drill-down [debug]="debug" [options]="_options"\n                           (chartDraw)="chartDrawn()"\n                           [showLegend]="showLegend" [data]="dataModel" [unit]="unit"\n                           *ngIf="graphs[\'drilldown\'].indexOf(type) > -1 && !!dataModel"\n                           [responsive]="true"></warpview-drill-down>\n\n      <warpview-gts-tree *ngIf="graphs[\'gts-tree\'].indexOf(type) > -1 && !!dataModel"\n                         (chartDraw)="chartDrawn()"\n                         [responsive]="true" [debug]="debug" [data]="dataModel"\n                         [options]="_options"></warpview-gts-tree>\n\n      <warpview-image *ngIf="graphs[\'image\'].indexOf(type) > -1 && !!dataModel"\n                      (chartDraw)="chartDrawn()"\n                      [responsive]="true" [debug]="debug" [data]="dataModel" [options]="_options"></warpview-image>\n\n      <warpview-map *ngIf="graphs[\'map\'].indexOf(type) > -1 && !!dataModel" [responsive]="true" [debug]="debug"\n                    (chartDraw)="chartDrawn()"\n                    [data]="dataModel" [options]="_options"></warpview-map>\n\n      <warpview-pie [debug]="debug" [type]="type" [unit]="unit" [options]="_options"\n                    (chartDraw)="chartDrawn()"\n                    [showLegend]="showLegend" [data]="dataModel"\n                    *ngIf="graphs[\'pie\'].indexOf(type) > -1 && !!dataModel"\n                    [responsive]="true"></warpview-pie>\n\n      <warpview-gauge [debug]="debug" [type]="type" [unit]="unit" [options]="_options"\n                      (chartDraw)="chartDrawn()"\n                      [showLegend]="showLegend" [data]="dataModel"\n                      *ngIf="graphs[\'gauge\'].indexOf(type) > -1 && !!dataModel"\n                      [responsive]="true"></warpview-gauge>\n\n      <warpview-annotation [debug]="debug" [unit]="unit" [options]="_options"\n                           (chartDraw)="chartDrawn()"\n                           [showLegend]="showLegend" [data]="dataModel"\n                           [standalone]="true" [type]="type"\n                           *ngIf="graphs[\'annotation\'].indexOf(type) > -1 && !!dataModel"\n                           [responsive]="true"></warpview-annotation>\n\n      <warpview-event-drop [debug]="debug" [unit]="unit" [options]="_options"\n                           (chartDraw)="chartDrawn()"\n                           [showLegend]="showLegend" [data]="dataModel" [type]="type"\n                           *ngIf="graphs[\'drops\'].indexOf(type) > -1 && !!dataModel"\n                           [responsive]="true"></warpview-event-drop>\n\n      <warpview-polar [debug]="debug" [unit]="unit" [options]="_options"\n                      (chartDraw)="chartDrawn()"\n                      [showLegend]="showLegend" [data]="dataModel"\n                      *ngIf="graphs[\'polar\'].indexOf(type) > -1 && !!dataModel"\n                      [responsive]="true"></warpview-polar>\n\n      <warpview-radar [debug]="debug" [unit]="unit" [options]="_options"\n                      (chartDraw)="chartDrawn()"\n                      [showLegend]="showLegend" [data]="dataModel"\n                      *ngIf="graphs[\'radar\'].indexOf(type) > -1 && !!dataModel"\n                      [responsive]="true"></warpview-radar>\n\n      <warpview-box [debug]="debug" [unit]="unit" [options]="_options"\n                    (chartDraw)="chartDrawn()"\n                    [showLegend]="showLegend" [data]="dataModel" [type]="type"\n                    *ngIf="graphs[\'box\'].indexOf(type) > -1 && !!dataModel"\n                    [responsive]="true"></warpview-box>\n\n      <warpview-3d-line [debug]="debug" [unit]="unit" [options]="_options"\n                        (chartDraw)="chartDrawn()"\n                        [showLegend]="showLegend" [data]="dataModel" [type]="type"\n                        *ngIf="graphs[\'line3d\'].indexOf(type) > -1 && !!dataModel"\n                        [responsive]="true"></warpview-3d-line>\n      <warpview-globe [debug]="debug" [unit]="unit" [options]="_options"\n                      (chartDraw)="chartDrawn()"\n                      [showLegend]="showLegend" [data]="dataModel" [type]="type"\n                      *ngIf="graphs[\'globe\'].indexOf(type) > -1 && !!dataModel"\n                      [responsive]="true"></warpview-globe>\n    </div>\n</div>\n',styles:['/*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */:root{--gts-attrname-font-color:#ed4a7b;--gts-attrvalue-font-color:#000;--gts-classname-font-color:#004eff;--gts-labelname-font-color:#19a979;--gts-labelvalue-font-color:#000;--gts-separator-font-color:#a0a0a0;--gts-stack-font-color:#000;--gts-tree-collapsed-icon:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA0UlEQVQ4T6WTUW7CQAxEPQdozxYb9Qb94Aj9gQSoVCp6lMr21doDZFCQiFCU3YDY//d2PeOFPHnwJC+zAlVdA/jp+/6YmZ+1S0qCPxF5HUAAO3fvSpKS4ENEvm6gfUS0c5JiBma2Ibm/QiQPmbmdSqohquoA7GqSxRaapmkBjBkAeHP336t0UWBmHcnb+VcR4XcJpjDJLjPHkS4tleqZubmNiDHU6gumDQDYuvvh7hpV9V9EXgaA5Ka2jbMjmNk7yZOIfEfE8eFVfuSDLda4JDsD3FNdEckTC0YAAAAASUVORK5CYII=);--gts-tree-expanded-icon:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA7klEQVQ4T82TMW7CQBBF/0g+QOpINEkVCmpaLoBm5COk5QYoaeAY3MDSei2LGu4QKakiBA1tCpTK8kS2sLVe2xSh8XSrnf9m/s4s4c6gO/UYGEBEXlT1bK396bFGIjIJguA7iqJLkVNbYOZXItoQ0QHAzBhz9CCFeAVgCeAjy7Jpmqa/NUBEEgDzktqGuOKKO47j+KsGhGH4lOf5HsDIg5ycyqVYVd+steuGheLAzM9EtPMgW1VdVGWJ6N0YU1gpozVGH+K+gy/uBHR1crXUqNzbQXXhduJ69sd7cxOZ+UFVH5Mk+exb+YGt8n9+5h8up1sReYC0WAAAAABJRU5ErkJggg==);--warp-slider-connect-color:#f90;--warp-slider-handle-bg-color:#fff;--warp-slider-handle-color:#004eff;--warp-slider-handle-shadow:inset 0 0 1px #fff,inset 0 1px 7px silver,0 3px 6px -3px #a0a0a0;--warp-view-annotationtooltip-font-color:#404040;--warp-view-annotationtooltip-value-font-color:#004eff;--warp-view-bar-color:#dc3545;--warp-view-chart-height:100%;--warp-view-chart-legend-bg:#fff;--warp-view-chart-legend-color:#404040;--warp-view-chart-width:100%;--warp-view-datagrid-cell-padding:5px;--warp-view-datagrid-even-bg-color:silver;--warp-view-datagrid-even-color:#000;--warp-view-datagrid-odd-bg-color:#fff;--warp-view-datagrid-odd-color:#404040;--warp-view-font-color:#000;--warp-view-map-margin:0;--warp-view-pagination-active-bg-color:#4caf50;--warp-view-pagination-active-border-color:#4caf50;--warp-view-pagination-active-color:#fff;--warp-view-pagination-bg-color:#fff;--warp-view-pagination-border-color:silver;--warp-view-pagination-disabled-color:silver;--warp-view-pagination-hover-bg-color:silver;--warp-view-pagination-hover-border-color:silver;--warp-view-pagination-hover-color:#000;--warp-view-plot-chart-height:100%;--warp-view-popup-bg-color:#fff;--warp-view-popup-body-bg-color:#fff;--warp-view-popup-body-color:#000;--warp-view-popup-border-color:rgba(0,0,0,0.2);--warp-view-popup-close-color:#404040;--warp-view-popup-header-bg-color:silver;--warp-view-popup-title-color:#404040;--warp-view-resize-handle-color:silver;--warp-view-resize-handle-height:10px;--warp-view-slider-pointer-size:65px;--warp-view-spinner-color:#f90;--warp-view-switch-handle-checked-color:radial-gradient(#fff 15%,#00cd00 100%);--warp-view-switch-handle-color:radial-gradient(#fff 15%,silver 100%);--warp-view-switch-height:30px;--warp-view-switch-inset-checked-color:#00cd00;--warp-view-switch-inset-color:silver;--warp-view-switch-radius:18px;--warp-view-switch-width:100px;--warp-view-tile-height:100%;--warp-view-tile-width:100%}.noData{color:var(--warp-view-chart-legend-color);position:relative;text-align:center;width:100%}:host,warp-view-result-tile,warpview-result-tile{max-height:var(--warp-view-tile-height,100%);min-height:var(--warp-view-tile-height,100%);min-width:var(--warp-view-tile-width,100%);overflow:auto;width:var(--warp-view-tile-width,100%)}:host .error,warp-view-result-tile .error,warpview-result-tile .error{color:#dc3545;font-weight:700;text-align:center;width:100%}:host .wrapper,warp-view-result-tile .wrapper,warpview-result-tile .wrapper{height:var(--warp-view-tile-height,100%);min-height:50px;opacity:1;width:var(--warp-view-tile-width,100%)}:host .wrapper.full,:host .wrapper .tilewrapper,warp-view-result-tile .wrapper.full,warp-view-result-tile .wrapper .tilewrapper,warpview-result-tile .wrapper.full,warpview-result-tile .wrapper .tilewrapper{height:100%;width:100%}:host .wrapper .tilewrapper .tile,warp-view-result-tile .wrapper .tilewrapper .tile,warpview-result-tile .wrapper .tilewrapper .tile{height:calc(var(--warp-view-tile-height, 100%) - 40px);overflow-x:hidden;overflow-y:auto;width:100%}:host .wrapper .tilewrapper .notitle,warp-view-result-tile .wrapper .tilewrapper .notitle,warpview-result-tile .wrapper .tilewrapper .notitle{height:100%;overflow:hidden}:host .wrapper .tilewrapper h1,warp-view-result-tile .wrapper .tilewrapper h1,warpview-result-tile .wrapper .tilewrapper h1{color:var(--warp-view-font-color);font-size:20px;margin:0;padding:5px}:host .wrapper .tilewrapper h1 small,warp-view-result-tile .wrapper .tilewrapper h1 small,warpview-result-tile .wrapper .tilewrapper h1 small{font-size:10px;margin-left:10px}']}]}],Ge.ctorParameters=function(){return[{type:t.ElementRef},{type:t.Renderer2},{type:W},{type:t.NgZone}]},Ge.propDecorators={type:[{type:t.Input,args:["type"]}],standalone:[{type:t.Input,args:["standalone"]}],pointHover:[{type:t.Output,args:["pointHover"]}],warpViewChartResize:[{type:t.Output,args:["warpViewChartResize"]}],chartDraw:[{type:t.Output,args:["chartDraw"]}],boundsDidChange:[{type:t.Output,args:["boundsDidChange"]}],warpViewNewOptions:[{type:t.Output,args:["warpViewNewOptions"]}]};var _e=function(){};_e.decorators=[{type:t.NgModule,args:[{declarations:[Z,q,$,ee,te,ie,ae,ne,oe,re,pe,le,he,de,ce,ue,we,ve,me,be,ye,Ae,Se,xe,Le,Oe,Ce,Ie,Ee,De,Ne,ke,Te,Ve,Ge],imports:[i.CommonModule,p.HttpClientModule,b.AngularResizedEventModule,m.FormsModule],exports:[Z,q,$,ee,te,ie,ae,ne,oe,re,pe,le,he,de,ce,ue,we,ve,me,be,ye,Ae,Se,xe,Le,Oe,Ce,Ie,Ee,Ne,ke,Te,Ve,Ge],providers:[J,W],entryComponents:[Z,q,$,ee,te,ie,ae,ne,oe,re,pe,le,he,de,ce,ue,we,ve,me,be,ye,Ae,Se,xe,Le,Oe,Ce,Ie,Ee,De,Ne,ke,Te,Ve,Ge]}]}],e.CalendarHeatmapComponent=pe,e.Param=P,e.PlotlyComponent=De,e.WarpView3dLineComponent=ke,e.WarpViewAngularModule=_e,e.WarpViewAnnotationComponent=Ae,e.WarpViewBarComponent=te,e.WarpViewBoxComponent=Ne,e.WarpViewBubbleComponent=ie,e.WarpViewChartComponent=q,e.WarpViewChipComponent=ue,e.WarpViewDatagridComponent=ae,e.WarpViewDisplayComponent=oe,e.WarpViewDrillDownComponent=re,e.WarpViewEventDropComponent=Ve,e.WarpViewGaugeComponent=ye,e.WarpViewGlobeComponent=Te,e.WarpViewGtsPopupComponent=le,e.WarpViewGtsTreeComponent=de,e.WarpViewHeatmapSlidersComponent=me,e.WarpViewImageComponent=we,e.WarpViewMapComponent=ve,e.WarpViewModalComponent=he,e.WarpViewPaginableComponent=ne,e.WarpViewPieComponent=be,e.WarpViewPlotComponent=Le,e.WarpViewPolarComponent=Se,e.WarpViewRadarComponent=xe,e.WarpViewRangeSliderComponent=Ie,e.WarpViewResizeComponent=Oe,e.WarpViewResultTileComponent=Ge,e.WarpViewSliderComponent=Ce,e.WarpViewSpectrumComponent=Ee,e.WarpViewSpinnerComponent=$,e.WarpViewTileComponent=Z,e.WarpViewToggleComponent=ee,e.WarpViewTreeViewComponent=ce,e.Éµa=K,e.Éµb=W,e.Éµc=J,e.Éµd=X,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=warpview.umd.min.js.map