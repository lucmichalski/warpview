/*! Built with http://stenciljs.com */
const{h:t}=window.quantumviz;import{a as e}from"./chunk-cadd3091.js";class i{constructor(){this.unit="",this.type="line",this.chartTitle="",this.responsive=!1,this.showLegend=!1,this.data="[]",this.hiddenData="[]",this.options="{}",this.width="",this.height="",this._chart={xMin:0,xMax:0,yMin:0,yMax:0,xMinView:0,xMaxView:0,yMinView:0,yMaxView:0},this._xView="{}",this._yView="{}",this._slider={x:{element:null,width:0,max:0,cursorSize:"{}"},y:{element:null,height:0,max:0,cursorSize:"{}"}}}chartInfosWatcher(t){this._chart.xMin=t.detail.xMin,this._chart.xMinView=t.detail.xMin,this._chart.xMax=t.detail.xMax,this._slider.x.max=t.detail.xMax,this._chart.xMaxView=t.detail.xMax,this._chart.yMin=t.detail.yMin,this._chart.yMinView=t.detail.yMin,this._chart.yMax=t.detail.yMax,this._slider.y.max=t.detail.yMax,this._chart.yMaxView=t.detail.yMax}xSliderInit(){this._slider.x.width=this.el.shadowRoot.querySelector("#myChart").getBoundingClientRect().width}ySliderInit(){this._slider.y.height=this.el.shadowRoot.querySelector("#myChart").getBoundingClientRect().height}componentDidLoad(){this.xSliderInit(),this.ySliderInit(),this.wc.forceUpdate()}xZoomListener(t){let e=this._chart.xMinView,i=this._chart.xMaxView,s=i-e;t.detail.zoomValue.zoomType>0?(e+=.1*s*t.detail.zoomValue.coef,i-=.1*s*(1-t.detail.zoomValue.coef)):(e-=.15*s*t.detail.zoomValue.coef,i+=.15*s*(1-t.detail.zoomValue.coef)),e=e<this._chart.xMin?this._chart.xMin:e,i=i>this._chart.xMax?this._chart.xMax:i,this._chart.xMinView=e,this._chart.xMaxView=i,this._xView=JSON.stringify({min:this._chart.xMinView,max:this._chart.xMaxView}),s=this._chart.xMaxView-this._chart.xMinView,this._slider.x.max=this._chart.xMax-s;let r=s/(this._chart.xMax-this._chart.xMin),a=(this._chart.xMinView-this._chart.xMin)/(this._chart.xMax-this._chart.xMin);this._slider.x.cursorSize=JSON.stringify({cursorSize:r,cursorOffset:a}),this.boundsDidChange.emit({bounds:{min:this._chart.xMinView,max:this._chart.xMaxView}}),this.wc.forceUpdate()}yZoomListener(t){let e=this._chart.yMinView,i=this._chart.yMaxView,s=i-e;t.detail.zoomValue.zoomType>0?(e+=.1*s*(1-t.detail.zoomValue.coef),i-=.1*s*t.detail.zoomValue.coef):(e-=.15*s*(1-t.detail.zoomValue.coef),i+=.15*s*t.detail.zoomValue.coef),e=e<this._chart.yMin?this._chart.yMin:e,i=i>this._chart.yMax?this._chart.yMax:i,this._chart.yMinView=e,this._chart.yMaxView=i,this._yView=JSON.stringify({min:this._chart.yMinView,max:this._chart.yMaxView}),s=this._chart.yMaxView-this._chart.yMinView,this._slider.y.max=this._chart.yMax-s;let r=s/(this._chart.yMax-this._chart.yMin),a=(this._chart.yMax-this._chart.yMaxView)/(this._chart.yMax-this._chart.yMin);this._slider.y.cursorSize=JSON.stringify({cursorSize:r,cursorOffset:a}),this.wc.forceUpdate()}xSliderListener(t){let e=t.detail.sliderValue-this._chart.xMinView;this._chart.xMinView+=e,this._chart.xMaxView+=e,this._xView=JSON.stringify({min:this._chart.xMinView,max:this._chart.xMaxView}),this.wc.forceUpdate()}ySliderListener(t){let e=t.detail.sliderValue-this._chart.yMinView;this._chart.yMinView+=e,this._chart.yMaxView+=e,this._yView=JSON.stringify({min:this._chart.yMinView,max:this._chart.yMaxView}),this.wc.forceUpdate()}render(){return t("div",{class:"wrapper"},t("quantum-vertical-zoom-slider",{height:this._slider.y.height,id:"ySlider","min-value":this._chart.yMin,"max-value":this._slider.y.max,cursorSize:this._slider.y.cursorSize}),t("quantum-chart",{id:"myChart",alone:!1,unit:this.unit,type:this.type,"chart-title":this.chartTitle,responsive:this.responsive,"show-legend":this.showLegend,data:this.data,"hidden-data":this.hiddenData,options:this.options,width:this.width,height:this.height,"time-min":this.timeMin,"time-max":this.timeMax,xView:this._xView,yView:this._yView}),t("quantum-toggle",{id:"timeSwitch"}),t("button",{type:"button"},"ZooM reset"),t("quantum-horizontal-zoom-slider",{id:"xSlider",width:this._slider.x.width,"min-value":this._chart.xMin,"max-value":this._slider.x.max,cursorSize:this._slider.x.cursorSize}))}static get is(){return"quantum-chart-zoom"}static get encapsulation(){return"shadow"}static get properties(){return{chartTitle:{type:String,attr:"chart-title"},data:{type:String,attr:"data"},el:{elementRef:!0},height:{type:String,attr:"height"},hiddenData:{type:String,attr:"hidden-data"},options:{type:String,attr:"options"},responsive:{type:Boolean,attr:"responsive"},showLegend:{type:Boolean,attr:"show-legend"},timeMax:{type:Number,attr:"time-max"},timeMin:{type:Number,attr:"time-min"},type:{type:String,attr:"type"},unit:{type:String,attr:"unit"},wc:{elementRef:!0},width:{type:String,attr:"width"}}}static get events(){return[{name:"boundsDidChange",method:"boundsDidChange",bubbles:!0,cancelable:!0,composed:!0}]}static get listeners(){return[{name:"chartInfos",method:"chartInfosWatcher"},{name:"xZoom",method:"xZoomListener"},{name:"yZoom",method:"yZoomListener"},{name:"xSliderValueChanged",method:"xSliderListener"},{name:"ySliderValueChanged",method:"ySliderListener"}]}static get style(){return":host .chart-container{width:var(--quantum-chart-width,100%);height:var(--quantum-chart-height,100%);position:relative}:host .wrapper{display:grid;grid-template-columns:30px auto;grid-template-rows:auto 30px;margin:10px}:host #ySlider{grid-row:1;grid-column:1}:host #xSlider{grid-row:2;grid-column:2}:host #myChart{grid-row:1;grid-column:2}"}}class s{constructor(){this.cursorSize="{}",this.config="{}",this._config={rail:{class:""},cursor:{class:""}},this._cursorMinWidth=30}changeCursorSize(t,e){if(e!==t){let e=JSON.parse(t);e.cursorOffset+e.cursorSize<=100&&(this._cursor.style.left=(100*e.cursorOffset).toString()+"%",e.cursorSize*this._rail.getBoundingClientRect().width<this._cursorMinWidth?this._cursor.style.width=this._cursorMinWidth.toString()+"px":this._cursor.style.width=(100*e.cursorSize).toString()+"%")}}initSize(t,e){e!==t&&(this._rail.style.width=(.94*t).toString()+"px",console.log("width",this._rail.style.width))}componentWillLoad(){this._config=e.mergeDeep(this._config,JSON.parse(this.config))}componentDidLoad(){this._rail=this.el.shadowRoot.querySelector("#rail"),this._cursor=this.el.shadowRoot.querySelector("#cursor")}mouseDown(t){t.preventDefault();let e=this;this.dimsX(t),this._rail.onmousemove=(t=>{e.dragX(t,e)}),this._cursor.onmouseup=(t=>{e.stopDrag(e)}),this._rail.onmouseup=(t=>{e.stopDrag(e)}),this._rail.onmouseout=(t=>{e.stopDrag(e)})}dimsX(t){let e=this._rail.getBoundingClientRect(),i=this._cursor.getBoundingClientRect();this._railMin=e.x,this._railMax=e.width+this._railMin,this._cursorWidth=i.width,this._mouseCursorLeftOffset=t.x-i.x,this._mouseCursorRightOffset=i.width-this._mouseCursorLeftOffset}dragX(t,e){if(t.preventDefault(),t.clientX-e._mouseCursorLeftOffset>=e._railMin+1&&t.clientX+e._mouseCursorRightOffset<=e._railMax-1){let i=t.clientX-e._rail.offsetLeft-e._mouseCursorLeftOffset;i=i<0?0:i,e._cursor.style.left=i+"px";let s=i/(this._railMax-this._railMin-this._cursorWidth)*(this.maxValue-this.minValue)+this.minValue;this.xSliderValueChanged.emit({sliderValue:s})}}stopDrag(t){t._rail.onmouseup=null,t._rail.onmousemove=null,t._cursor.onmouseup=null,t._rail.onmouseout=null}xWheel(t){t.preventDefault();let e=this._rail.getBoundingClientRect(),i=(t.pageX-this._rail.offsetLeft)/e.width;this.xZoom.emit({zoomValue:{coef:i,zoomType:-1*t.deltaY}})}yWheel(t){t.preventDefault()}render(){return t("div",{id:"rail",onWheel:t=>this.xWheel(t)},t("div",{id:"cursor",onMouseDown:t=>this.mouseDown(t)}))}static get is(){return"quantum-horizontal-zoom-slider"}static get encapsulation(){return"shadow"}static get properties(){return{config:{type:String,attr:"config"},cursorSize:{type:String,attr:"cursor-size",watchCallbacks:["changeCursorSize"]},el:{elementRef:!0},maxValue:{type:Number,attr:"max-value"},minValue:{type:Number,attr:"min-value"},width:{type:Number,attr:"width",watchCallbacks:["initSize"]}}}static get events(){return[{name:"xSliderValueChanged",method:"xSliderValueChanged",bubbles:!0,cancelable:!0,composed:!0},{name:"xZoom",method:"xZoom",bubbles:!0,cancelable:!0,composed:!0}]}static get style(){return":host #rail{position:relative;background-color:var(--quantum-bg-rail-color,grey);opacity:.7;height:20px;border:1px solid var(--quantum-border-rail-color,#000);border-radius:var(--quantum-border-radius,6px);padding:0;float:right;margin:0 15px 0 0}:host #rail:hover{opacity:1}:host #cursor{background-color:var(--quantum-bg-cursor-color,red);position:relative;cursor:move;width:100%;height:20px;border:1px solid var(--quantum-border-cursor-color,#000);border-radius:var(--quantum-border-radius,6px);-webkit-transition:left .01s;transition:left .01s}"}}class r{constructor(){this.option="{}",this.checked=!1,this.state=!1,this._option={switchClass:"",switchLabelClass:"",switchHandleClass:""}}componentWillLoad(){this._option=e.mergeDeep(this._option,JSON.parse(this.option))}componentDidLoad(){}componentWillUpdate(){}componentDidUpdate(){}render(){return t("label",{class:"switch "+this._option.switchClass},this.checked?t("input",{type:"checkbox",class:"switch-input",checked:!0,onClick:()=>this.switched()}):t("input",{type:"checkbox",class:"switch-input",onClick:()=>this.switched()}),t("span",{class:"switch-label "+this._option.switchLabelClass}),t("span",{class:"switch-handle "+this._option.switchHandleClass}))}switched(){this.state=!this.state,this.timeSwitched.emit({state:this.state})}switchedListener(t){}static get is(){return"quantum-toggle"}static get encapsulation(){return"shadow"}static get properties(){return{checked:{type:Boolean,attr:"checked"},option:{type:String,attr:"option"},state:{state:!0}}}static get events(){return[{name:"timeSwitched",method:"timeSwitched",bubbles:!0,cancelable:!0,composed:!0}]}static get listeners(){return[{name:"timeSwitched",method:"switchedListener"}]}static get style(){return".switch{position:relative;display:block;width:100px;height:30px;padding:3px;margin:0 10px 10px 0;border-radius:18px;cursor:pointer}.switch-input{display:none}.switch-label{position:relative;display:block;height:inherit;font-size:10px;text-transform:uppercase;background:#eceeef;border-radius:inherit;-webkit-box-shadow:inset 0 1px 2px rgba(0,0,0,.12),inset 0 0 2px rgba(0,0,0,.15);box-shadow:inset 0 1px 2px rgba(0,0,0,.12),inset 0 0 2px rgba(0,0,0,.15)}.switch-input:checked~.switch-label{background:#00cd00;-webkit-box-shadow:inset 0 1px 2px rgba(0,0,0,.15),inset 0 0 3px rgba(0,0,0,.2);box-shadow:inset 0 1px 2px rgba(0,0,0,.15),inset 0 0 3px rgba(0,0,0,.2)}.switch-handle{position:absolute;top:4px;left:4px;width:28px;height:28px;background:radial-gradient(#fff 15%,#f0f0f0 100%);border-radius:100%;-webkit-box-shadow:1px 1px 5px rgba(0,0,0,.2);box-shadow:1px 1px 5px rgba(0,0,0,.2)}.switch-input:checked~.switch-handle{left:74px;background:radial-gradient(#fff 15%,#00cd00 100%);-webkit-box-shadow:-1px 1px 5px rgba(0,0,0,.2);box-shadow:-1px 1px 5px rgba(0,0,0,.2)}.switch-handle,.switch-label{-webkit-transition:All .3s ease;transition:All .3s ease;-webkit-transition:All .3s ease;-moz-transition:All .3s ease;-o-transition:All .3s ease}"}}class a{constructor(){this.cursorSize="{}",this.config="{}",this._config={rail:{class:""},cursor:{class:""}},this._cursorMinHeight=30}changeCursorSize(t,e){if(e!==t){let e=JSON.parse(t);e.cursorOffset+e.cursorSize<=100&&(this._cursor.style.top=(100*e.cursorOffset).toString()+"%",e.cursorSize*this._rail.getBoundingClientRect().height<this._cursorMinHeight?this._cursor.style.height=this._cursorMinHeight.toString()+"px":this._cursor.style.height=(100*e.cursorSize).toString()+"%")}}initSize(t,e){e!==t&&(this._rail.style.height=(.97*t).toString()+"px",console.log("height",this._rail.style.height))}componentWillLoad(){this._config=e.mergeDeep(this._config,JSON.parse(this.config))}componentDidLoad(){this._rail=this.el.shadowRoot.querySelector("#rail"),this._cursor=this.el.shadowRoot.querySelector("#cursor")}mouseDown(t){t.preventDefault();let e=this;this.dimsY(t),this._rail.onmousemove=(t=>{e.dragY(t,e)}),this._cursor.onmouseup=(t=>{e.stopDrag(e)}),this._rail.onmouseup=(t=>{e.stopDrag(e)}),this._rail.onmouseout=(t=>{e.stopDrag(e)})}dimsY(t){let e=this._rail.getBoundingClientRect(),i=this._cursor.getBoundingClientRect();this._railMin=this._rail.offsetTop,this._railMax=e.height+this._rail.offsetTop,this._cursorHeight=i.height,this._mouseCursorTopOffset=t.pageY-this._rail.offsetTop-this._cursor.offsetTop,this._mouseCursorBottomOffset=i.height-this._mouseCursorTopOffset}dragY(t,e){if(t.preventDefault(),t.pageY-e._mouseCursorTopOffset>=e._railMin+1&&t.pageY+e._mouseCursorBottomOffset<=e._railMax-1){let i=t.pageY-e._rail.offsetTop-e._mouseCursorTopOffset;i=i<0?0:i,e._cursor.style.top=i+"px";let s=i/(this._railMax-this._railMin-this._cursorHeight)*(this.maxValue-this.minValue)+this.minValue;s=this.maxValue-this.minValue-s,this.ySliderValueChanged.emit({sliderValue:s})}}stopDrag(t){t._rail.onmouseup=null,t._rail.onmousemove=null,t._cursor.onmouseup=null,t._rail.onmouseout=null}yWheel(t){t.preventDefault();let e=this._rail.getBoundingClientRect(),i=(t.pageY-this._rail.offsetTop)/e.height;this.yZoom.emit({zoomValue:{coef:i,zoomType:-1*t.deltaY}})}render(){return t("div",{id:"rail",onWheel:t=>this.yWheel(t)},t("div",{id:"cursor",onMouseDown:t=>this.mouseDown(t)}))}static get is(){return"quantum-vertical-zoom-slider"}static get encapsulation(){return"shadow"}static get properties(){return{config:{type:String,attr:"config"},cursorSize:{type:String,attr:"cursor-size",watchCallbacks:["changeCursorSize"]},el:{elementRef:!0},height:{type:Number,attr:"height",watchCallbacks:["initSize"]},maxValue:{type:Number,attr:"max-value"},minValue:{type:Number,attr:"min-value"}}}static get events(){return[{name:"ySliderValueChanged",method:"ySliderValueChanged",bubbles:!0,cancelable:!0,composed:!0},{name:"yZoom",method:"yZoom",bubbles:!0,cancelable:!0,composed:!0}]}static get style(){return":host #rail{position:relative;background-color:var(--quantum-bg-rail-color,grey);opacity:.7;width:20px;margin:0 0 20px 0;border:1px solid var(--quantum-border-rail-color,#000);border-radius:var(--quantum-border-radius,6px);padding:0}:host #rail:hover{opacity:1}:host #cursor{background-color:var(--quantum-bg-cursor-color,red);position:relative;cursor:move;width:20px;height:100%;border:1px solid var(--quantum-border-cursor-color,#000);border-radius:var(--quantum-border-radius,6px);-webkit-transition:top .01s;transition:top .01s}"}}export{i as QuantumChartZoom,s as QuantumHorizontalZoomSlider,r as QuantumToggle,a as QuantumVerticalZoomSlider};