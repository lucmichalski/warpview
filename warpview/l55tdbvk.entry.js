const t=window.warpview.h;import{b as e,c as s,d as i,e as a,a as n}from"./chunk-19843615.js";import{a as d}from"./chunk-bf214dd1.js";class h{}class r{constructor(){this.gtsFilter="",this.hiddenData=[],this.debug=!1,this.ref=!1,this._node={selected:!0,gts:h}}onGtsFilter(t,s){s!==t&&""!==this.gtsFilter&&this.setState(new RegExp(this.gtsFilter,"gi").test(e.serializeGtsMetadata(this._node.gts)))}onHideData(t,i){s(t,i)||(this.LOG.debug(["hiddenData"],t),this._node=Object.assign({},this._node,{selected:-1===this.hiddenData.indexOf(this._node.gts.id),label:e.serializeGtsMetadata(this._node.gts)}),this.LOG.debug(["hiddenData"],this._node),this.colorizeChip())}handleKeyDown(t){"a"===t.key&&this.setState(!0),"n"===t.key&&this.setState(!1)}colorizeChip(){this._node.selected?(this.chip.style.setProperty("background-color",d.transparentize(d.getColor(this._node.gts.id))),this.chip.style.setProperty("border-color",d.getColor(this._node.gts.id))):this.chip.style.setProperty("background-color","#eeeeee"),this.ref=!this.ref}componentWillLoad(){this.LOG=new i(r,this.debug),this._node=Object.assign({},this.node,{selected:-1===this.hiddenData.indexOf(this.node.gts.id)})}componentDidLoad(){(""!==this.gtsFilter&&new RegExp(this.gtsFilter,"gi").test(e.serializeGtsMetadata(this._node.gts))||this.hiddenData.indexOf(this._node.gts.id)>-1)&&this.setState(!1),this.colorizeChip()}lastIndex(t,e){return t===this.toArray(e).length-1}toArray(t){return void 0===t?[]:Object.keys(t).map(function(e){return{name:e,value:t[e]}})}switchPlotState(t){return t.preventDefault(),this.setState(!this._node.selected),!1}setState(t){this._node=Object.assign({},this._node,{selected:t,label:e.serializeGtsMetadata(this._node.gts)}),this.LOG.debug(["switchPlotState"],this._node),this.colorizeChip(),this.warpViewSelectedGTS.emit(this._node)}render(){return t("div",null,this._node&&this._node.gts&&this._node.gts.l?t("span",{onClick:t=>this.switchPlotState(t)},t("i",{class:"normal",ref:t=>this.chip=t}),t("span",{class:"gtsInfo"},t("span",{class:"gts-classname"},"  ",this._node.gts.c),t("span",{class:"gts-separator",innerHTML:"&lcub; "}),this.toArray(this._node.gts.l).map((e,s)=>t("span",null,t("span",{class:"gts-labelname"},e.name),t("span",{class:"gts-separator"},"="),t("span",{class:"gts-labelvalue"},e.value),t("span",{hidden:this.lastIndex(s,this._node.gts.l)},", "))),t("span",{class:"gts-separator",innerHTML:" &rcub;"}),this.toArray(this._node.gts.a).length>0?t("span",null,t("span",{class:"gts-separator",innerHTML:"&lcub; "}),this.toArray(this._node.gts.a).map((e,s)=>t("span",null,t("span",{class:"gts-attrname"},e.name),t("span",{class:"gts-separator"},"="),t("span",{class:"gts-attrvalue"},e.value),t("span",{hidden:this.lastIndex(s,this._node.gts.a)},", "))),t("span",{class:"gts-separator",innerHTML:" &rcub;"})):"")):"")}static get is(){return"warp-view-chip"}static get encapsulation(){return"shadow"}static get properties(){return{debug:{type:Boolean,attr:"debug"},gtsFilter:{type:String,attr:"gts-filter",watchCallbacks:["onGtsFilter"]},hiddenData:{type:"Any",attr:"hidden-data",watchCallbacks:["onHideData"]},name:{type:String,attr:"name"},node:{type:"Any",attr:"node"},ref:{state:!0}}}static get events(){return[{name:"warpViewSelectedGTS",method:"warpViewSelectedGTS",bubbles:!0,cancelable:!0,composed:!0}]}static get listeners(){return[{name:"document:keyup",method:"handleKeyDown"}]}static get style(){return"/*!\n *  Copyright 2018  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */:host .normal,:host div span{cursor:pointer}:host .normal{border-radius:50%;background-color:#bbb;display:inline-block;width:5px;height:5px;border:2px solid #454545;margin-top:auto;margin-bottom:auto;vertical-align:middle}:host .gts-classname{color:var(--gts-classname-font-color,#0074d9)}:host .gts-labelname{color:var(--gts-labelname-font-color,#19a979)}:host .gts-attrname{color:var(--gts-labelname-font-color,#ed4a7b)}:host .gts-separator{color:var(--gts-separator-font-color,#bbb)}:host .gts-attrvalue,:host .gts-labelvalue{color:var(--gts-labelvalue-font-color,#aaa);font-style:italic}"}}class l{constructor(){this.gtsFilter="",this.options=new a,this.hiddenData=[],this.debug=!1,this.hide=!1,this.gtsList=[],this._options=new a}onData(t,e){s(t,e)||(this.LOG.debug(["options"],t,e),this.doRender())}onOptions(t,e){s(t,e)||(this.LOG.debug(["options"],t,e),this.doRender(),this._options.foldGTSTree&&!this.hide&&this.foldAll())}onGtsFilter(t,e){e!==t&&(this.LOG.debug(["gtsFilter"],t),this.doRender())}onHideData(t,e){s(t,e)||(this.LOG.debug(["hiddenData"],t),this.doRender())}componentWillLoad(){this.LOG=new i(l,this.debug)}componentDidLoad(){this.LOG.debug(["componentDidLoad","data"],this.data),this.data&&this.doRender(),void 0!==this._options.foldGTSTree&&this._options.foldGTSTree&&!this.hide&&this.foldAll()}doRender(){if(this.LOG.debug(["doRender","gtsList"],this.data),this._options=n.mergeDeep(this._options,this.options),!this.data)return;let t=e.getData(this.data).data;this.LOG.debug(["doRender","gtsList","dataList"],t),t&&(this.gtsList=e.flattenGtsIdArray(t,0).res,this.LOG.debug(["doRender","gtsList"],this.gtsList,this._options.foldGTSTree,this.hide))}foldAll(){this.root?this.hide=!0:window.setTimeout(()=>{this.foldAll()},100)}toggleVisibility(){this.hide=!this.hide}render(){return this.gtsList?t("div",null,t("div",{class:"stack-level",onClick:()=>this.toggleVisibility()},t("span",{class:{expanded:!this.hide,collapsed:this.hide},ref:t=>this.root=t})," Stack"),t("warp-view-tree-view",{gtsList:this.gtsList,branch:!1,hidden:this.hide,debug:this.debug,hiddenData:this.hiddenData,gtsFilter:this.gtsFilter})):""}static get is(){return"warp-view-gts-tree"}static get properties(){return{data:{type:String,attr:"data",watchCallbacks:["onData"]},debug:{type:Boolean,attr:"debug"},gtsFilter:{type:String,attr:"gts-filter",watchCallbacks:["onGtsFilter"]},hiddenData:{type:"Any",attr:"hidden-data",watchCallbacks:["onHideData"]},hide:{state:!0},options:{type:"Any",attr:"options",watchCallbacks:["onOptions"]}}}static get style(){return"/*!\n *  Copyright 2018  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */:host .stack-level{font-size:1em;padding-top:5px;cursor:pointer;color:var(--gts-stack-font-color,#000)}:host .stack-level+div{padding-left:25px}:host .expanded{background-image:var(--gts-tree-expanded-icon,url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA7klEQVQ4T82TMW7CQBBF/0g+QOpINEkVCmpaLoBm5COk5QYoaeAY3MDSei2LGu4QKakiBA1tCpTK8kS2sLVe2xSh8XSrnf9m/s4s4c6gO/UYGEBEXlT1bK396bFGIjIJguA7iqJLkVNbYOZXItoQ0QHAzBhz9CCFeAVgCeAjy7Jpmqa/NUBEEgDzktqGuOKKO47j+KsGhGH4lOf5HsDIg5ycyqVYVd+steuGheLAzM9EtPMgW1VdVGWJ6N0YU1gpozVGH+K+gy/uBHR1crXUqNzbQXXhduJ69sd7cxOZ+UFVH5Mk+exb+YGt8n9+5h8up1sReYC0WAAAAABJRU5ErkJggg==))}:host .collapsed,:host .expanded{padding:1px 10px;margin-right:5px;background-position:0;background-repeat:no-repeat}:host .collapsed{background-image:var(--gts-tree-collapsed-icon,url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA0UlEQVQ4T6WTUW7CQAxEPQdozxYb9Qb94Aj9gQSoVCp6lMr21doDZFCQiFCU3YDY//d2PeOFPHnwJC+zAlVdA/jp+/6YmZ+1S0qCPxF5HUAAO3fvSpKS4ENEvm6gfUS0c5JiBma2Ibm/QiQPmbmdSqohquoA7GqSxRaapmkBjBkAeHP336t0UWBmHcnb+VcR4XcJpjDJLjPHkS4tleqZubmNiDHU6gumDQDYuvvh7hpV9V9EXgaA5Ka2jbMjmNk7yZOIfEfE8eFVfuSDLda4JDsD3FNdEckTC0YAAAAASUVORK5CYII=))}"}}class o{constructor(){this.branch=!1,this.hidden=!1,this.gtsFilter="",this.hiddenData=[],this.debug=!1,this.ref=!1,this.hide={}}toggleVisibility(t,e){let s;"expanded"===(s=t.currentTarget.id?t.currentTarget:t.currentTarget.previousElementSibling).className?(s.className="collapsed",this.hide[e+""]=!0):(s.className="expanded",this.hide[e+""]=!1),this.ref=!this.ref}onGtsFilter(t,e){e!==t&&(this.ref=!this.ref)}onHideData(t,e){s(t,e)||(this.LOG.debug(["hiddenData"],t),this.ref=!this.ref)}isHidden(t){return!!this.hide.hasOwnProperty(t+"")&&this.hide[t+""]}componentWillLoad(){this.LOG=new i(o,this.debug)}render(){return t("div",{class:"list"},this.gtsList?t("ul",null,this.gtsList.map((s,i)=>t("li",{hidden:this.hidden},e.isGts(s)?t("warp-view-chip",{node:{gts:s},name:s.c,gtsFilter:this.gtsFilter,debug:this.debug,hiddenData:this.hiddenData}):t("span",null,s?t("div",null,this.branch?t("div",null,t("span",{class:"expanded",onClick:t=>this.toggleVisibility(t,i),id:n.guid()}),t("span",{onClick:t=>this.toggleVisibility(t,i)},t("small",null,"List of ",s.length," item",s.length>1?"s":""))):t("div",{class:"stack-level"},t("span",{class:"expanded",onClick:t=>this.toggleVisibility(t,i),id:n.guid()}),t("span",{onClick:t=>this.toggleVisibility(t,i)},0===i?"[TOP]":"["+(i+1)+"]"," ",t("small",null,"List of ",s.length," item",s.length>1?"s":""))),t("warp-view-tree-view",{gtsList:s,branch:!0,hidden:this.isHidden(i),debug:this.debug,gtsFilter:this.gtsFilter})):"")))):"")}static get is(){return"warp-view-tree-view"}static get properties(){return{branch:{type:Boolean,attr:"branch"},debug:{type:Boolean,attr:"debug"},gtsFilter:{type:String,attr:"gts-filter",watchCallbacks:["onGtsFilter"]},gtsList:{type:"Any",attr:"gts-list"},hidden:{type:Boolean,attr:"hidden"},hiddenData:{type:"Any",attr:"hidden-data",watchCallbacks:["onHideData"]},ref:{state:!0}}}static get style(){return"/*!\n *  Copyright 2018  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */warp-view-tree-view ul{margin:0;padding:0;list-style:none;border:none;overflow:hidden}warp-view-tree-view li{color:var(--gts-stack-font-color,#000);position:relative;padding:0 0 0 20px;line-height:20px}warp-view-tree-view li .stack-level{font-size:1em;padding-top:5px}warp-view-tree-view li .stack-level+div{padding-left:25px}warp-view-tree-view li .expanded{background-image:var(--gts-tree-expanded-icon,url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA7klEQVQ4T82TMW7CQBBF/0g+QOpINEkVCmpaLoBm5COk5QYoaeAY3MDSei2LGu4QKakiBA1tCpTK8kS2sLVe2xSh8XSrnf9m/s4s4c6gO/UYGEBEXlT1bK396bFGIjIJguA7iqJLkVNbYOZXItoQ0QHAzBhz9CCFeAVgCeAjy7Jpmqa/NUBEEgDzktqGuOKKO47j+KsGhGH4lOf5HsDIg5ycyqVYVd+steuGheLAzM9EtPMgW1VdVGWJ6N0YU1gpozVGH+K+gy/uBHR1crXUqNzbQXXhduJ69sd7cxOZ+UFVH5Mk+exb+YGt8n9+5h8up1sReYC0WAAAAABJRU5ErkJggg==))}warp-view-tree-view li .collapsed,warp-view-tree-view li .expanded{padding:1px 10px;margin-right:5px;background-position:0;background-repeat:no-repeat}warp-view-tree-view li .collapsed{background-image:var(--gts-tree-collapsed-icon,url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA0UlEQVQ4T6WTUW7CQAxEPQdozxYb9Qb94Aj9gQSoVCp6lMr21doDZFCQiFCU3YDY//d2PeOFPHnwJC+zAlVdA/jp+/6YmZ+1S0qCPxF5HUAAO3fvSpKS4ENEvm6gfUS0c5JiBma2Ibm/QiQPmbmdSqohquoA7GqSxRaapmkBjBkAeHP336t0UWBmHcnb+VcR4XcJpjDJLjPHkS4tleqZubmNiDHU6gumDQDYuvvh7hpV9V9EXgaA5Ka2jbMjmNk7yZOIfEfE8eFVfuSDLda4JDsD3FNdEckTC0YAAAAASUVORK5CYII=))}warp-view-tree-view li .gtsInfo{white-space:normal;word-wrap:break-word}warp-view-tree-view li .gtsInfo[disabled]{color:#aaa;cursor:not-allowed}warp-view-tree-view li .normal{border-radius:50%;background-color:#bbb;display:inline-block}warp-view-tree-view li i,warp-view-tree-view li span{cursor:pointer}warp-view-tree-view li .selected{background-color:#adf;font-weight:700;padding:1px 5px}"}}export{r as WarpViewChip,l as WarpViewGtsTree,o as WarpViewTreeView};