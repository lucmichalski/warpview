<!--
  ~  Copyright 2020  SenX S.A.S.
  ~
  ~  Licensed under the Apache License, Version 2.0 (the "License");
  ~  you may not use this file except in compliance with the License.
  ~  You may obtain a copy of the License at
  ~
  ~    http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~  Unless required by applicable law or agreed to in writing, software
  ~  distributed under the License is distributed on an "AS IS" BASIS,
  ~  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~  See the License for the specific language governing permissions and
  ~  limitations under the License.
  ~
  -->

<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="">
  <meta name="author" content="Mark Otto, Jacob Thornton, and Bootstrap contributors">
  <meta name="generator" content="Jekyll v3.8.5">
  <title>Starter Template Â· Bootstrap</title>

  <link rel="canonical" href="https://getbootstrap.com/docs/4.3/examples/starter-template/">

  <!-- Bootstrap core CSS -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">


  <style>
    .bd-placeholder-img {
      font-size: 1.125rem;
      text-anchor: middle;
      -webkit-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
      user-select: none;
    }

    @media (min-width: 768px) {
      .bd-placeholder-img-lg {
        font-size: 3.5rem;
      }
    }

    body {
      padding-top: 5rem;
    }

    .starter-template {
      padding: 3rem 1.5rem;
      text-align: center;
    }
  </style>
</head>
<body>
<nav class="navbar navbar-expand-md navbar-dark bg-dark fixed-top">
  <a class="navbar-brand" href="#">Test</a>
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarsExampleDefault"
          aria-controls="navbarsExampleDefault" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  <div class="collapse navbar-collapse" id="navbarsExampleDefault">
  </div>
</nav>

<main role="main" class="container">

  <div class="starter-template">
    <div style="height: 600px; width: 100%;">
      <warp-view-tile
        url="https://warp.senx.io/api/v0/exec"
        responsive="true"
        type="plot">
        @training/dataset0
        // warp.store.hbase.puts.committed is the number of datapoints committed to
        // HBase since the restart of the Store daemon
        [ $TOKEN '~warp.*committed' { 'cell' 'prod' } $NOW 10 d ] FETCH
        [ SWAP mapper.rate 1 0 0 ] MAP
        // Keep only 1000 datapoints per GTS
        1000 LTTB DUP
        // Detect 5 anomalies per GTS using an ESD (Extreme Studentized Deviate) Test
        5 false ESDTEST
        // Convert the ticks identified by ESDTEST into an annotation GTS
        <%
        DROP // excude element index
        NEWGTS // create a new GTS
        SWAP // get timestamp list
        <% NaN NaN NaN 'anomaly' ADDVALUE %> FOREACH // for each timestamp
        %> LMAP 2 ->LIST // Put our GTS in a list
        ZIP // merge into a list of GTS
        // Now rename and relabel the anomaly GTS
        <%
        DROP // exclude element index
        LIST-> // flatten list
        DROP // exclude number of elements of our list
        SWAP // put our fetched GTS on the top
        DUP // duplicate the GTS
        NAME // get the className of the GTS
        ':anomaly' + 'name' STORE // suffix the name
        DUP LABELS 'labels' STORE // duplicate the GTS and get labels
        SWAP // put the anomaly GTS on the top of the stack
        $name RENAME // rename the GTS
        $labels RELABEL // put labels
        2 ->LIST // put both GTS in a list
        %> LMAP
      </warp-view-tile>
    </div>
  </div>

</main><!-- /.container --><!--
<script src="https://unpkg.com/@giwisoft/warpview@2.0.0-rc1/elements/warpview-elements.js"></script>-->
<script src="./elements/warpview-elements.js"></script>
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
        integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
        crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
        integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
        crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
        integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
        crossorigin="anonymous"></script>
</body>
</html>
