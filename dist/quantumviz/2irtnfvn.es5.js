/*! Built with http://stenciljs.com */
quantumviz.loadBundle("2irtnfvn",["exports","./chunk-d9eae628.js","./chunk-aca7b1ce.js","./chunk-12ee72ee.js"],function(t,e,i,a){var n=window.quantumviz.h,s=function(){function t(){this.chartTitle="",this.responsive=!1,this.showLegend=!0,this.data="[]",this.hiddenData="[]",this.options="",this.width="",this.height="",this.legendOffset=70,this._mapIndex={}}return t.prototype.redraw=function(t,e){e!==t&&this.drawChart()},t.prototype.changeScale=function(t,e){if(e!==t){var i=JSON.parse(t);"timestamp"===i.time.timeMode?(this._chart.options.scales.xAxes[0].time.stepSize=i.time.stepSize,this._chart.options.scales.xAxes[0].time.unit=i.time.unit,this._chart.options.scales.xAxes[0].time.displayFormats.millisecond=i.time.displayFormats,this._chart.update()):(this._chart.options.scales.xAxes[0].time.stepSize=i.time.stepSize,this._chart.options.scales.xAxes[0].time.unit=i.time.unit,this._chart.update())}},t.prototype.hideData=function(t,e){var a=this;if(e!==t){var n=i.GTSLib.cleanArray(JSON.parse(t));Object.keys(this._mapIndex).forEach(function(t){a._chart.getDatasetMeta(a._mapIndex[t]).hidden=!!n.find(function(e){return e===t})}),this._chart.update()}},t.prototype.minBoundChange=function(t,e){this._chart.options.animation.duration=0,e!==t&&(this._chart.options.scales.xAxes[0].time.min=t,this._chart.update())},t.prototype.maxBoundChange=function(t,e){this._chart.options.animation.duration=0,e!==t&&(this._chart.options.scales.xAxes[0].time.max=t,this._chart.update())},t.prototype.drawChart=function(){var t=this.el.shadowRoot.querySelector("#myChart"),i=this.gtsToScatter(JSON.parse(this.data)),a=30*i.length+this.legendOffset,n=this.height||""!==this.height?Math.max(a,parseInt(this.height)):a;this.height=n+"",t.parentElement.style.height=n+"px",t.parentElement.style.width="100%";var s=this;this._chart=new e.Chart.Scatter(t,{data:{datasets:i},options:{layout:{padding:{bottom:30*i.length}},legend:{display:this.showLegend},responsive:this.responsive,tooltips:{mode:"x",position:"nearest",custom:function(t){t.opacity>0?s.pointHover.emit({x:t.dataPoints[0].x+15,y:this._eventPosition.y}):s.pointHover.emit({x:-100,y:this._eventPosition.y})},callbacks:{title:function(t,e){return t[0].xLabel||""},label:function(t,e){return e.datasets[t.datasetIndex].label+": "+e.datasets[t.datasetIndex].data[t.index].val}}},scales:{xAxes:[{drawTicks:!1,type:"time",time:{min:this.timeMin,max:this.timeMax,unit:"day"},gridLines:{display:!1}}],yAxes:[{display:!1,drawTicks:!1,scaleLabel:{display:!1},afterFit:function(t){t.width=100},ticks:{min:0,max:1,beginAtZero:!0,stepSize:1}}]}}})},t.prototype.buildImage=function(t,e,i){var a=new Image(t,e),n='<svg width="'+t+'px" height="'+e+'px" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 '+t+" "+e+'" preserveAspectRatio="xMidYMid">\n<rect width="'+t+'" height="'+e+'" style="fill:'+i+';" />\n</svg>';return a.src="data:image/svg+xml;base64,"+btoa(n),a},t.prototype.gtsToScatter=function(t){var e=this,a=[],n=0;if(t)return t.forEach(function(t){t.gts=i.GTSLib.flatDeep(t.gts),t.gts.forEach(function(s,o){if(i.GTSLib.isGtsToAnnotate(s)){var r=[],h=i.GTSLib.getColor(o),c=e.buildImage(1,30,h);s.v.forEach(function(t){r.push({x:t[0]/1e3,y:.5,val:t[t.length-1]})}),t.params&&t.params[o]&&t.params[o].color&&(h=t.params[o].color);var p=i.GTSLib.serializeGtsMetadata(s);e._mapIndex[p]=n,t.params&&t.params[o]&&t.params[o].key&&(p=t.params[o].key),a.push({label:p,data:r,pointRadius:5,pointHoverRadius:5,pointHitRadius:5,pointStyle:c,borderColor:h,backgroundColor:i.GTSLib.transparentize(h,.5)}),n++}})}),a},t.prototype.componentDidLoad=function(){this.drawChart()},t.prototype.render=function(){return n("div",null,n("h1",null,this.chartTitle),n("div",{class:"chart-container",style:{position:"relative",width:this.width,height:this.height}},n("canvas",{id:"myChart",width:this.width,height:this.height})))},Object.defineProperty(t,"is",{get:function(){return"quantum-annotation"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"encapsulation",{get:function(){return"shadow"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"properties",{get:function(){return{chartTitle:{type:String,attr:"chart-title"},data:{type:String,attr:"data",watchCallbacks:["redraw"]},el:{elementRef:!0},height:{type:String,attr:"height",mutable:!0},hiddenData:{type:String,attr:"hidden-data",watchCallbacks:["hideData"]},options:{type:String,attr:"options",watchCallbacks:["changeScale"]},responsive:{type:Boolean,attr:"responsive"},showLegend:{type:Boolean,attr:"show-legend"},timeMax:{type:Number,attr:"time-max",watchCallbacks:["maxBoundChange"]},timeMin:{type:Number,attr:"time-min",watchCallbacks:["minBoundChange"]},width:{type:String,attr:"width"}}},enumerable:!0,configurable:!0}),Object.defineProperty(t,"events",{get:function(){return[{name:"pointHover",method:"pointHover",bubbles:!0,cancelable:!0,composed:!0}]},enumerable:!0,configurable:!0}),Object.defineProperty(t,"style",{get:function(){return"quantum-annotation .chart-container{width:var(--quantum-chart-width,100%);height:var(--quantum-chart-height,100%);position:relative}"},enumerable:!0,configurable:!0}),t}();t.QuantumAnnotation=s,Object.defineProperty(t,"__esModule",{value:!0})});